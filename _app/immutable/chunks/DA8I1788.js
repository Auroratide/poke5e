var Re=Object.defineProperty;var $e=(t,e,n)=>e in t?Re(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var k=(t,e,n)=>$e(t,typeof e!="symbol"?e+"":e,n);import{r as he}from"./Dio1iyuQ.js";import"./BJ65ZwrB.js";import"./C59XZI--.js";import{d as N}from"./Ca9NkszC.js";/* empty css        *//* empty css        *//* empty css        *//* empty css        *//* empty css        */const Te=[{name:"Alert"},{name:"Athlete"},{name:"Charger",qualifier:"when using melee attacks"},{name:"Durable"},{name:"Elemental Adept",qualifier:"choose a Pokémon type"},{name:"Mobile",qualifier:"from '14 PHB rules"},{name:"Observant"},{name:"Resilient"},{name:"Savage Attacker"},{name:"Sentinel"},{name:"Skilled",qualifier:"only 1 skill, not Animal Handling"},{name:"Skulker"},{name:"Tough"}],Pe=[{name:"Able-Bodied",category:"General",description:`Your Pokémon's body is trained to learn from and fight off ailments for long periods of time. The status "grace period" for this Pokémon is extended by two rounds.`},{name:"AC Up",category:"General",description:"Your Pokémon’s AC increases by 1. This bonus is included through a Pokémon’s evolutions."},{name:"Combo Master",category:"General",description:"Your Pokémon is an expert in combining strikes against a foe. When this feat is selected, moves that have the ability to hit more than once, after the same attack roll, are guaranteed to hit at least twice. (Fury Swipes, Double Slap, Water Shuriken, etc.)"},{name:"Extra Move",category:"General",description:"Your Pokémon can know five total moves instead of four."},{name:"Hidden Ability",category:"General",description:"Your Pokémon reaches inside itself to discover a new ability. It gains access to the Hidden Ability in its stat block."},{name:"Melee Master",category:"General",description:`Your Pokémon is a master of close combat.

- Gain advantage on all attacks of opportunity.
- Before you make a melee attack, you can choose to take a -5 penalty to the attack roll. If the attack hits, you add +10 to the attack’s damage (Once per move).`},{name:"Power Sculpter",category:"General",description:"Your Pokémon is able to sculpt the power of their moves around their allies. For area of effect moves your Pokémon activates, choose 1 + MOVE allies in range to automatically succeed on their saving throw against taking damage or an effect. If the damage is halved for a successful save, they take no damage instead."},{name:"Ranged Master",category:"General",description:`Your Pokémon is a sharpshooter.

- Your ranged attacks ignore half and three-fourths cover.
- Before you make a ranged attack, you can choose to take a -5 penalty to the attack roll. If the attack hits, you add +10 to the attack’s damage (Once per move).`},{name:"Terrain Adept",category:"General",description:"Your Pokémon is especially skilled when fighting on a specific terrain. Choose one of the following terrains when selecting this feat. Your Pokémon gains +2 to attack rolls when in this terrain. Terrains: Coastal, Swamp, Forest, Arctic, Desert, Grassland, Hill, Mountain, Underwater."},{name:"Tireless",category:"General",description:"Your Pokémon endures hours of rigorous training which keep it in battle longer than the average Pokémon. Gain +1 PP for every move."},{name:"Wrangler",category:"General",description:`You have developed a unique set of skills that give you the ability to grapple and hold an opponent down with steady and strong hands. You gain the following benefits:

- You have advantage on attack rolls against a creature you are Grappling.
- You can use your action to try to pin a creature already Grappled by you. To do so, make another grapple check. If you succeed, you and the creature are both Restrained until the grapple ends.
- When a creature attempts to use their movement to leave your reach without disengaging, you may use your reaction to attempt to Grapple the target.`}],Ae=[{name:"Alert"},{name:"Charger",qualifier:"when using melee attacks"},{name:"Durable"},{name:"Elemental Adept",qualifier:"choose a Pokémon type"},{name:"Observant"},{name:"Resilient"},{name:"Savage Attacker"},{name:"Sentinel"},{name:"Skill Expert",qualifier:"not Animal Handling"},{name:"Skilled",qualifier:"only 1 skill, not Animal Handling"},{name:"Skulker"},{name:"Speedy"},{name:"Tough"}],qe=[{name:"Able-Bodied",category:"General",description:`Your Pokémon's body is trained to learn from and fight off ailments for long periods of time. The status "grace period" for this Pokémon is extended by two rounds.`},{name:"AC Up",category:"General",description:"Your Pokémon’s AC increases by 1. This bonus is included through a Pokémon’s evolutions."},{name:"Ambidextrous",category:"General",description:"Your Pokémon can hold an addtional held item. This feat can only be taken once."},{name:"Combo Master",category:"General",description:"Your Pokémon is an expert in combining strikes against a foe. When this feature is selected, moves that have the ability to hit more than once are guaranteed to hit at least twice. (Fury Swipes, Double Slap, etc.)"},{name:"Extra Move",category:"General",description:"Your Pokémon can know one more move (five total moves instead of four). You may later take this feat again to gain the ablity to know one more move (to a maximum of six moves total)."},{name:"Gifted",category:"General",description:"Increase one ability score of your choice by 1, to a maximum of 22. This ability score's maximum is now 22. As a prerequisite, the Pokémon taking this feat must be at least level 10."},{name:"Melee Master",category:"General",description:`Your Pokémon is a master of close combat.

- Gain advantage on all attacks of opportunity.
- When you hit a creature with a melee move that uses STR as its move power as part of the Attack action on your turn, you can cause the attack to deal extra damage to the target. The extra damage equals your Proficiency Bonus.`},{name:"Natural Mount",category:"General",description:"While this Pokémon is mounted, if the creature mounting it is attacked, it can force the attack to target itself instead. Addtionally, if this Pokémon or its mounter are forced to make a Dexterity saving throw that would result in half damage on success, it can deploy additional defenses. This Pokémon can choose either itself or its mounter to take no damage if they succeed on the saving throw, and only half damage if they fail."},{name:"Power Sculpter",category:"General",description:"Your Pokémon is able to sculpt the power of their moves around their allies. For area of effect moves your Pokémon activates, choose 1 + MOVE allies in range to automatically succeed on their saving throw against taking damage or an effect. If the damage is halved for a successful save, they take no damage instead."},{name:"Ranged Master",category:"General",description:`Your Pokémon is a sharpshooter.

- Your ranged attacks ignore half and three-fourths cover.
- Being within 5 feet of an enemy doesn't impose Disadvantage on your ranged move attack rolls.`},{name:"Terrain Adept",category:"General",description:"Your Pokémon is especially skilled when fighting on a specific terrain. Choose one of the following terrains when selecting this feature. Your Pokémon gains +3 to attack rolls when in this terrain. Terrains: Coastal, Swamp, Forest, Arctic, Desert, Grassland, Hill, Mountain, Underwater."},{name:"Tireless",category:"General",description:"Your Pokémon endures hours of rigorous training which keep it in battle longer than the average Pokémon. Gain +1 PP for every move."},{name:"Wrangler",category:"General",description:`You have developed a unique set of skills that give you the ability to grapple and hold an opponent down with steady and strong hands. You gain the following benefits:

- You have Advantage on attack rolls against a creature Grappled by you.
- You don't have to spend extra movement to move a creature Grappled by you if the creature is your size or smaller.
- When you hit a creature with a melee move that uses the DEX move power as part of the Attack action on your turn, you can use both the Damage and the Grapple option. You can use this benefit only once per turn.`}],g=t=>e=>e.level>=t,x=(t,e)=>n=>t.some(r=>n.attributes[r].score>=e),h=t=>`See Dungeons & Dragons Player Handbook, p${t}`,Ge=[{name:"Actor",category:"General",prerequisites:[g(4),x(["cha"],13)],description:h(202)},{name:"Alert",category:"Origin",description:h(200)},{name:"Archery",category:"Fighting Style",description:h(209)},{name:"Athlete",category:"General",prerequisites:[g(4),x(["str","dex"],13)],description:h(202)},{name:"Blind Fighting",category:"Fighting Style",description:h(209)},{name:"Boon of Combat Prowess",category:"Epic Boon",prerequisites:[g(19)],description:h(210)},{name:"Boon of Dimensional Travel",category:"Epic Boon",prerequisites:[g(19)],description:h(210)},{name:"Boon of Energy Resistance",category:"Epic Boon",prerequisites:[g(19)],description:h(210)},{name:"Boon of Fate",category:"Epic Boon",prerequisites:[g(19)],description:h(210)},{name:"Boon of Fortitude",category:"Epic Boon",prerequisites:[g(19)],description:h(210)},{name:"Boon of Irresistible Offense",category:"Epic Boon",prerequisites:[g(19)],description:h(211)},{name:"Boon of Recovery",category:"Epic Boon",prerequisites:[g(19)],description:h(211)},{name:"Boon of Skill",category:"Epic Boon",prerequisites:[g(19)],description:h(211)},{name:"Boon of Speed",category:"Epic Boon",prerequisites:[g(19)],description:h(211)},{name:"Boon of Spell Recall",category:"Epic Boon",prerequisites:[g(19)],description:h(211)},{name:"Boon of the Night Spirit",category:"Epic Boon",prerequisites:[g(19)],description:h(211)},{name:"Boon of Truesight",category:"Epic Boon",prerequisites:[g(19)],description:h(211)},{name:"Charger",category:"General",prerequisites:[g(4),x(["str","dex"],13)],description:h(202)},{name:"Chef",category:"General",prerequisites:[g(4)],description:h(202)},{name:"Crafter",category:"Origin",description:h(200)},{name:"Crossbow Expert",category:"General",prerequisites:[g(4),x(["dex"],13)],description:h(203)},{name:"Crusher",category:"General",prerequisites:[g(4)],description:h(203)},{name:"Defense",category:"Fighting Style",description:h(209)},{name:"Defensive Duelist",category:"General",prerequisites:[g(4),x(["dex"],13)],description:h(203)},{name:"Dual Wielder",category:"General",prerequisites:[g(4),x(["str","dex"],13)],description:h(203)},{name:"Dueling",category:"Fighting Style",description:h(209)},{name:"Durable",category:"General",prerequisites:[g(4)],description:h(203)},{name:"Elemental Adept",category:"General",prerequisites:[g(4)],description:h(203)},{name:"Fey-Touched",category:"General",prerequisites:[g(4)],description:h(204)},{name:"Grappler",category:"General",prerequisites:[g(4),x(["str","dex"],13)],description:h(204)},{name:"Great Weapon Fighting",category:"Fighting Style",description:h(209)},{name:"Great Weapon Master",category:"General",prerequisites:[g(4),x(["str"],13)],description:h(204)},{name:"Healer",category:"Origin",description:h(201)},{name:"Heavily Armored",category:"General",prerequisites:[g(4)],description:h(204)},{name:"Heavy Armor Master",category:"General",prerequisites:[g(4)],description:h(204)},{name:"Inspiring Leader",category:"General",prerequisites:[g(4),x(["wis","cha"],13)],description:h(204)},{name:"Interception",category:"Fighting Style",description:h(209)},{name:"Keen Mind",category:"General",prerequisites:[g(4),x(["int"],13)],description:h(205)},{name:"Lightly Armored",category:"General",prerequisites:[g(4)],description:h(205)},{name:"Lucky",category:"Origin",description:h(201)},{name:"Mage Slayer",category:"General",prerequisites:[g(4)],description:h(205)},{name:"Magic Initiate",category:"Origin",description:h(201)},{name:"Martial Weapon Training",category:"General",prerequisites:[g(4)],description:h(205)},{name:"Medium Armor Master",category:"General",prerequisites:[g(4)],description:h(205)},{name:"Moderately Armored",category:"General",prerequisites:[g(4)],description:h(205)},{name:"Mounted Combatant",category:"General",prerequisites:[g(4)],description:h(205)},{name:"Musician",category:"Origin",description:h(201)},{name:"Observant",category:"General",prerequisites:[g(4),x(["int","wis"],13)],description:h(205)},{name:"Piercer",category:"General",prerequisites:[g(4)],description:h(206)},{name:"Poisoner",category:"General",prerequisites:[g(4)],description:h(206)},{name:"Polearm Master",category:"General",prerequisites:[g(4),x(["str","dex"],13)],description:h(206)},{name:"Protection",category:"Fighting Style",description:h(209)},{name:"Resilient",category:"General",prerequisites:[g(4)],description:h(206)},{name:"Ritual Caster",category:"General",prerequisites:[g(4),x(["int","wis","cha"],13)],description:h(206)},{name:"Savage Attacker",category:"Origin",description:h(201)},{name:"Sentinel",category:"General",prerequisites:[g(4),x(["str","dex"],13)],description:h(207)},{name:"Shadow-Touched",category:"General",prerequisites:[g(4)],description:h(207)},{name:"Sharpshooter",category:"General",prerequisites:[g(4),x(["dex"],13)],description:h(207)},{name:"Shield Master",category:"General",prerequisites:[g(4)],description:h(207)},{name:"Skill Master",category:"General",prerequisites:[g(4)],description:h(207)},{name:"Skilled",category:"Origin",description:h(201)},{name:"Skulker",category:"General",prerequisites:[g(4),x(["dex"],13)],description:h(208)},{name:"Slasher",category:"General",prerequisites:[g(4)],description:h(208)},{name:"Speedy",category:"General",prerequisites:[g(4),x(["dex","con"],13)],description:h(208)},{name:"Spell Sniper",category:"General",prerequisites:[g(4)],description:h(208)},{name:"Tavern Brawler",category:"Origin",description:h(202)},{name:"Telekinetic",category:"General",prerequisites:[g(4)],description:h(208)},{name:"Telepathic",category:"General",prerequisites:[g(4)],description:h(208)},{name:"Thrown Weapon Fighting",category:"Fighting Style",description:h(210)},{name:"Tough",category:"Origin",description:h(202)},{name:"Two-Weapon Fighting",category:"Fighting Style",description:h(210)},{name:"Unarmed Fighting",category:"Fighting Style",description:h(210)},{name:"War Caster",category:"General",prerequisites:[g(4)],description:h(209)},{name:"Weapon Master",category:"General",prerequisites:[g(4)],description:h(209)}],ze=N(he,t=>t==="2018"?Pe:qe),Be=N(he,t=>t==="2018"?Te:Ae),$t=N([ze,Be],([t,e])=>Ge.filter(n=>e.some(r=>r.name===n.name)).concat(t).toSorted((n,r)=>n.name.localeCompare(r.name)));function j(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var P=j();function ue(t){P=t}var z={exec:()=>null};function d(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(i,s)=>{let c=typeof s=="string"?s:s.source;return c=c.replace(w.caret,"$1"),n=n.replace(i,c),r},getRegex:()=>new RegExp(n,e)};return r}var w={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},Ce=/^(?:[ \t]*(?:\n|$))+/,_e=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Ie=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,B=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ee=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Q=/(?:[*+-]|\d{1,9}[.)])/,ge=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,de=d(ge).replace(/bull/g,Q).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Le=d(ge).replace(/bull/g,Q).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),U=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Me=/^[^\n]+/,X=/(?!\s*\])(?:\\.|[^\[\]\\])+/,De=d(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",X).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Fe=d(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Q).getRegex(),M="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",V=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Oe=d("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",V).replace("tag",M).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),fe=d(U).replace("hr",B).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M).getRegex(),Ye=d(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",fe).getRegex(),K={blockquote:Ye,code:_e,def:De,fences:Ie,heading:Ee,hr:B,html:Oe,lheading:de,list:Fe,newline:Ce,paragraph:fe,table:z,text:Me},ae=d("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",B).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M).getRegex(),Ze={...K,lheading:Le,table:ae,paragraph:d(U).replace("hr",B).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ae).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",M).getRegex()},He={...K,html:d(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",V).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:z,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:d(U).replace("hr",B).replace("heading",` *#{1,6} *[^
]`).replace("lheading",de).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},We=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Ne=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,me=/^( {2,}|\\)\n(?!\s*$)/,je=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,D=/[\p{P}\p{S}]/u,J=/[\s\p{P}\p{S}]/u,ke=/[^\s\p{P}\p{S}]/u,Qe=d(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,J).getRegex(),be=/(?!~)[\p{P}\p{S}]/u,Ue=/(?!~)[\s\p{P}\p{S}]/u,Xe=/(?:[^\s\p{P}\p{S}]|~)/u,Ve=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,ye=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Ke=d(ye,"u").replace(/punct/g,D).getRegex(),Je=d(ye,"u").replace(/punct/g,be).getRegex(),xe="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",et=d(xe,"gu").replace(/notPunctSpace/g,ke).replace(/punctSpace/g,J).replace(/punct/g,D).getRegex(),tt=d(xe,"gu").replace(/notPunctSpace/g,Xe).replace(/punctSpace/g,Ue).replace(/punct/g,be).getRegex(),nt=d("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,ke).replace(/punctSpace/g,J).replace(/punct/g,D).getRegex(),rt=d(/\\(punct)/,"gu").replace(/punct/g,D).getRegex(),it=d(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),st=d(V).replace("(?:-->|$)","-->").getRegex(),at=d("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",st).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),I=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ot=d(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",I).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),we=d(/^!?\[(label)\]\[(ref)\]/).replace("label",I).replace("ref",X).getRegex(),ve=d(/^!?\[(ref)\](?:\[\])?/).replace("ref",X).getRegex(),lt=d("reflink|nolink(?!\\()","g").replace("reflink",we).replace("nolink",ve).getRegex(),ee={_backpedal:z,anyPunctuation:rt,autolink:it,blockSkip:Ve,br:me,code:Ne,del:z,emStrongLDelim:Ke,emStrongRDelimAst:et,emStrongRDelimUnd:nt,escape:We,link:ot,nolink:ve,punctuation:Qe,reflink:we,reflinkSearch:lt,tag:at,text:je,url:z},ct={...ee,link:d(/^!?\[(label)\]\((.*?)\)/).replace("label",I).getRegex(),reflink:d(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",I).getRegex()},Z={...ee,emStrongRDelimAst:tt,emStrongLDelim:Je,url:d(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},pt={...Z,br:d(me).replace("{2,}","*").getRegex(),text:d(Z.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},C={normal:K,gfm:Ze,pedantic:He},q={normal:ee,gfm:Z,breaks:pt,pedantic:ct},ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},oe=t=>ht[t];function S(t,e){if(e){if(w.escapeTest.test(t))return t.replace(w.escapeReplace,oe)}else if(w.escapeTestNoEncode.test(t))return t.replace(w.escapeReplaceNoEncode,oe);return t}function le(t){try{t=encodeURI(t).replace(w.percentDecode,"%")}catch{return null}return t}function ce(t,e){var s;const n=t.replace(w.findPipe,(c,a,p)=>{let o=!1,l=a;for(;--l>=0&&p[l]==="\\";)o=!o;return o?"|":" |"}),r=n.split(w.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((s=r.at(-1))!=null&&s.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(w.slashPipe,"|");return r}function G(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r&&t.charAt(r-i-1)===e;)i++;return t.slice(0,r-i)}function ut(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}function pe(t,e,n,r,i){const s=e.href,c=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;const p={type:t[0].charAt(0)==="!"?"image":"link",raw:n,href:s,title:c,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,p}function gt(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(s=>{const c=s.match(n.other.beginningSpace);if(c===null)return s;const[a]=c;return a.length>=i.length?s.slice(i.length):s}).join(`
`)}var E=class{constructor(t){k(this,"options");k(this,"rules");k(this,"lexer");this.options=t||P}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const n=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?n:G(n,`
`)}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const n=e[0],r=gt(n,e[3]||"",this.rules);return{type:"code",raw:n,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:r}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let n=e[2].trim();if(this.rules.other.endingHash.test(n)){const r=G(n,"#");(this.options.pedantic||!r||this.rules.other.endingSpaceChar.test(r))&&(n=r.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:n,tokens:this.lexer.inline(n)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:G(e[0],`
`)}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let n=G(e[0],`
`).split(`
`),r="",i="";const s=[];for(;n.length>0;){let c=!1;const a=[];let p;for(p=0;p<n.length;p++)if(this.rules.other.blockquoteStart.test(n[p]))a.push(n[p]),c=!0;else if(!c)a.push(n[p]);else break;n=n.slice(p);const o=a.join(`
`),l=o.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");r=r?`${r}
${o}`:o,i=i?`${i}
${l}`:l;const b=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,s,!0),this.lexer.state.top=b,n.length===0)break;const u=s.at(-1);if((u==null?void 0:u.type)==="code")break;if((u==null?void 0:u.type)==="blockquote"){const y=u,f=y.raw+`
`+n.join(`
`),v=this.blockquote(f);s[s.length-1]=v,r=r.substring(0,r.length-y.raw.length)+v.raw,i=i.substring(0,i.length-y.text.length)+v.text;break}else if((u==null?void 0:u.type)==="list"){const y=u,f=y.raw+`
`+n.join(`
`),v=this.list(f);s[s.length-1]=v,r=r.substring(0,r.length-u.raw.length)+v.raw,i=i.substring(0,i.length-y.raw.length)+v.raw,n=f.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:s,text:i}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const s=this.rules.other.listItemRegex(n);let c=!1;for(;t;){let p=!1,o="",l="";if(!(e=s.exec(t))||this.rules.block.hr.test(t))break;o=e[0],t=t.substring(o.length);let b=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,F=>" ".repeat(3*F.length)),u=t.split(`
`,1)[0],y=!b.trim(),f=0;if(this.options.pedantic?(f=2,l=b.trimStart()):y?f=e[1].length+1:(f=e[2].search(this.rules.other.nonSpaceChar),f=f>4?1:f,l=b.slice(f),f+=e[1].length),y&&this.rules.other.blankLine.test(u)&&(o+=u+`
`,t=t.substring(u.length+1),p=!0),!p){const F=this.rules.other.nextBulletRegex(f),re=this.rules.other.hrRegex(f),ie=this.rules.other.fencesBeginRegex(f),se=this.rules.other.headingBeginRegex(f),Se=this.rules.other.htmlBeginRegex(f);for(;t;){const O=t.split(`
`,1)[0];let A;if(u=O,this.options.pedantic?(u=u.replace(this.rules.other.listReplaceNesting,"  "),A=u):A=u.replace(this.rules.other.tabCharGlobal,"    "),ie.test(u)||se.test(u)||Se.test(u)||F.test(u)||re.test(u))break;if(A.search(this.rules.other.nonSpaceChar)>=f||!u.trim())l+=`
`+A.slice(f);else{if(y||b.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||ie.test(b)||se.test(b)||re.test(b))break;l+=`
`+u}!y&&!u.trim()&&(y=!0),o+=O+`
`,t=t.substring(O.length+1),b=A.slice(f)}}i.loose||(c?i.loose=!0:this.rules.other.doubleBlankLine.test(o)&&(c=!0));let v=null,ne;this.options.gfm&&(v=this.rules.other.listIsTask.exec(l),v&&(ne=v[0]!=="[ ] ",l=l.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:o,task:!!v,checked:ne,loose:!1,text:l,tokens:[]}),i.raw+=o}const a=i.items.at(-1);if(a)a.raw=a.raw.trimEnd(),a.text=a.text.trimEnd();else return;i.raw=i.raw.trimEnd();for(let p=0;p<i.items.length;p++)if(this.lexer.state.top=!1,i.items[p].tokens=this.lexer.blockTokens(i.items[p].text,[]),!i.loose){const o=i.items[p].tokens.filter(b=>b.type==="space"),l=o.length>0&&o.some(b=>this.rules.other.anyLine.test(b.raw));i.loose=l}if(i.loose)for(let p=0;p<i.items.length;p++)i.items[p].loose=!0;return i}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const n=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),r=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:n,raw:e[0],href:r,title:i}}}table(t){var c;const e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;const n=ce(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=(c=e[3])!=null&&c.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const a of r)this.rules.other.tableAlignRight.test(a)?s.align.push("right"):this.rules.other.tableAlignCenter.test(a)?s.align.push("center"):this.rules.other.tableAlignLeft.test(a)?s.align.push("left"):s.align.push(null);for(let a=0;a<n.length;a++)s.header.push({text:n[a],tokens:this.lexer.inline(n[a]),header:!0,align:s.align[a]});for(const a of i)s.rows.push(ce(a,s.header.length).map((p,o)=>({text:p,tokens:this.lexer.inline(p),header:!1,align:s.align[o]})));return s}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const n=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:n,tokens:this.lexer.inline(n)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const n=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(n)){if(!this.rules.other.endAngleBracket.test(n))return;const s=G(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=ut(e[2],"()");if(s===-2)return;if(s>-1){const a=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let r=e[2],i="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(r);s&&(r=s[1],i=s[3])}else i=e[3]?e[3].slice(1,-1):"";return r=r.trim(),this.rules.other.startAngleBracket.test(r)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(n)?r=r.slice(1):r=r.slice(1,-1)),pe(e,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:i&&i.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const r=(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," "),i=e[r.toLowerCase()];if(!i){const s=n[0].charAt(0);return{type:"text",raw:s,text:s}}return pe(n,i,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))return;if(!(r[1]||r[2]||"")||!n||this.rules.inline.punctuation.exec(n)){const s=[...r[0]].length-1;let c,a,p=s,o=0;const l=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+s);(r=l.exec(e))!=null;){if(c=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!c)continue;if(a=[...c].length,r[3]||r[4]){p+=a;continue}else if((r[5]||r[6])&&s%3&&!((s+a)%3)){o+=a;continue}if(p-=a,p>0)continue;a=Math.min(a,a+p+o);const b=[...r[0]][0].length,u=t.slice(0,s+r.index+b+a);if(Math.min(s,a)%2){const f=u.slice(1,-1);return{type:"em",raw:u,text:f,tokens:this.lexer.inlineTokens(f)}}const y=u.slice(2,-2);return{type:"strong",raw:u,text:y,tokens:this.lexer.inlineTokens(y)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let n=e[2].replace(this.rules.other.newLineCharGlobal," ");const r=this.rules.other.nonSpaceChar.test(n),i=this.rules.other.startingSpaceChar.test(n)&&this.rules.other.endingSpaceChar.test(n);return r&&i&&(n=n.substring(1,n.length-1)),{type:"codespan",raw:e[0],text:n}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let n,r;return e[2]==="@"?(n=e[1],r="mailto:"+n):(n=e[1],r=n),{type:"link",raw:e[0],text:n,href:r,tokens:[{type:"text",raw:n,text:n}]}}}url(t){var n;let e;if(e=this.rules.inline.url.exec(t)){let r,i;if(e[2]==="@")r=e[0],i="mailto:"+r;else{let s;do s=e[0],e[0]=((n=this.rules.inline._backpedal.exec(e[0]))==null?void 0:n[0])??"";while(s!==e[0]);r=e[0],e[1]==="www."?i="http://"+e[0]:i=e[0]}return{type:"link",raw:e[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){const n=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:n}}}},R=class H{constructor(e){k(this,"tokens");k(this,"options");k(this,"state");k(this,"tokenizer");k(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||P,this.options.tokenizer=this.options.tokenizer||new E,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:w,block:C.normal,inline:q.normal};this.options.pedantic?(n.block=C.pedantic,n.inline=q.pedantic):this.options.gfm&&(n.block=C.gfm,this.options.breaks?n.inline=q.breaks:n.inline=q.gfm),this.tokenizer.rules=n}static get rules(){return{block:C,inline:q}}static lex(e,n){return new H(n).lex(e)}static lexInline(e,n){return new H(n).inlineTokens(e)}lex(e){e=e.replace(w.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,s,c;for(this.options.pedantic&&(e=e.replace(w.tabCharGlobal,"    ").replace(w.spaceLine,""));e;){let a;if((s=(i=this.options.extensions)==null?void 0:i.block)!=null&&s.some(o=>(a=o.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const o=n.at(-1);a.raw.length===1&&o!==void 0?o.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const o=n.at(-1);(o==null?void 0:o.type)==="paragraph"||(o==null?void 0:o.type)==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.at(-1).src=o.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const o=n.at(-1);(o==null?void 0:o.type)==="paragraph"||(o==null?void 0:o.type)==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.raw,this.inlineQueue.at(-1).src=o.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let p=e;if((c=this.options.extensions)!=null&&c.startBlock){let o=1/0;const l=e.slice(1);let b;this.options.extensions.startBlock.forEach(u=>{b=u.call({lexer:this},l),typeof b=="number"&&b>=0&&(o=Math.min(o,b))}),o<1/0&&o>=0&&(p=e.substring(0,o+1))}if(this.state.top&&(a=this.tokenizer.paragraph(p))){const o=n.at(-1);r&&(o==null?void 0:o.type)==="paragraph"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(a),r=p.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const o=n.at(-1);(o==null?void 0:o.type)==="text"?(o.raw+=`
`+a.raw,o.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):n.push(a);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,p,o;let r=e,i=null;if(this.tokens.links){const l=Object.keys(this.tokens.links);if(l.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)l.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let s=!1,c="";for(;e;){s||(c=""),s=!1;let l;if((p=(a=this.options.extensions)==null?void 0:a.inline)!=null&&p.some(u=>(l=u.call({lexer:this},e,n))?(e=e.substring(l.raw.length),n.push(l),!0):!1))continue;if(l=this.tokenizer.escape(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.tag(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.link(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(l.raw.length);const u=n.at(-1);l.type==="text"&&(u==null?void 0:u.type)==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(l=this.tokenizer.emStrong(e,r,c)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.codespan(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.br(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.del(e)){e=e.substring(l.raw.length),n.push(l);continue}if(l=this.tokenizer.autolink(e)){e=e.substring(l.raw.length),n.push(l);continue}if(!this.state.inLink&&(l=this.tokenizer.url(e))){e=e.substring(l.raw.length),n.push(l);continue}let b=e;if((o=this.options.extensions)!=null&&o.startInline){let u=1/0;const y=e.slice(1);let f;this.options.extensions.startInline.forEach(v=>{f=v.call({lexer:this},y),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(b=e.substring(0,u+1))}if(l=this.tokenizer.inlineText(b)){e=e.substring(l.raw.length),l.raw.slice(-1)!=="_"&&(c=l.raw.slice(-1)),s=!0;const u=n.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=l.raw,u.text+=l.text):n.push(l);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return n}},L=class{constructor(t){k(this,"options");k(this,"parser");this.options=t||P}space(t){return""}code({text:t,lang:e,escaped:n}){var s;const r=(s=(e||"").match(w.notSpaceStart))==null?void 0:s[0],i=t.replace(w.endingNewline,"")+`
`;return r?'<pre><code class="language-'+S(r)+'">'+(n?i:S(i,!0))+`</code></pre>
`:"<pre><code>"+(n?i:S(i,!0))+`</code></pre>
`}blockquote({tokens:t}){return`<blockquote>
${this.parser.parse(t)}</blockquote>
`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>
`}hr(t){return`<hr>
`}list(t){const e=t.ordered,n=t.start;let r="";for(let c=0;c<t.items.length;c++){const a=t.items[c];r+=this.listitem(a)}const i=e?"ol":"ul",s=e&&n!==1?' start="'+n+'"':"";return"<"+i+s+`>
`+r+"</"+i+`>
`}listitem(t){var n;let e="";if(t.task){const r=this.checkbox({checked:!!t.checked});t.loose?((n=t.tokens[0])==null?void 0:n.type)==="paragraph"?(t.tokens[0].text=r+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&t.tokens[0].tokens[0].type==="text"&&(t.tokens[0].tokens[0].text=r+" "+S(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:r+" ",text:r+" ",escaped:!0}):e+=r+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>
`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>
`}table(t){let e="",n="";for(let i=0;i<t.header.length;i++)n+=this.tablecell(t.header[i]);e+=this.tablerow({text:n});let r="";for(let i=0;i<t.rows.length;i++){const s=t.rows[i];n="";for(let c=0;c<s.length;c++)n+=this.tablecell(s[c]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow({text:t}){return`<tr>
${t}</tr>
`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>
`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${S(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),i=le(t);if(i===null)return r;t=i;let s='<a href="'+t+'"';return e&&(s+=' title="'+S(e)+'"'),s+=">"+r+"</a>",s}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));const i=le(t);if(i===null)return S(n);t=i;let s=`<img src="${t}" alt="${n}"`;return e&&(s+=` title="${S(e)}"`),s+=">",s}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:S(t.text)}},te=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},$=class W{constructor(e){k(this,"options");k(this,"renderer");k(this,"textRenderer");this.options=e||P,this.options.renderer=this.options.renderer||new L,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new te}static parse(e,n){return new W(n).parse(e)}static parseInline(e,n){return new W(n).parseInline(e)}parse(e,n=!0){var i,s;let r="";for(let c=0;c<e.length;c++){const a=e[c];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){const o=a,l=this.options.extensions.renderers[o.type].call({parser:this},o);if(l!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(o.type)){r+=l||"";continue}}const p=a;switch(p.type){case"space":{r+=this.renderer.space(p);continue}case"hr":{r+=this.renderer.hr(p);continue}case"heading":{r+=this.renderer.heading(p);continue}case"code":{r+=this.renderer.code(p);continue}case"table":{r+=this.renderer.table(p);continue}case"blockquote":{r+=this.renderer.blockquote(p);continue}case"list":{r+=this.renderer.list(p);continue}case"html":{r+=this.renderer.html(p);continue}case"paragraph":{r+=this.renderer.paragraph(p);continue}case"text":{let o=p,l=this.renderer.text(o);for(;c+1<e.length&&e[c+1].type==="text";)o=e[++c],l+=`
`+this.renderer.text(o);n?r+=this.renderer.paragraph({type:"paragraph",raw:l,text:l,tokens:[{type:"text",raw:l,text:l,escaped:!0}]}):r+=l;continue}default:{const o='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}parseInline(e,n=this.renderer){var i,s;let r="";for(let c=0;c<e.length;c++){const a=e[c];if((s=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&s[a.type]){const o=this.options.extensions.renderers[a.type].call({parser:this},a);if(o!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=o||"";continue}}const p=a;switch(p.type){case"escape":{r+=n.text(p);break}case"html":{r+=n.html(p);break}case"link":{r+=n.link(p);break}case"image":{r+=n.image(p);break}case"strong":{r+=n.strong(p);break}case"em":{r+=n.em(p);break}case"codespan":{r+=n.codespan(p);break}case"br":{r+=n.br(p);break}case"del":{r+=n.del(p);break}case"text":{r+=n.text(p);break}default:{const o='Token with "'+p.type+'" type was not found.';if(this.options.silent)return console.error(o),"";throw new Error(o)}}}return r}},Y,_=(Y=class{constructor(t){k(this,"options");k(this,"block");this.options=t||P}preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?R.lex:R.lexInline}provideParser(){return this.block?$.parse:$.parseInline}},k(Y,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),Y),dt=class{constructor(...t){k(this,"defaults",j());k(this,"options",this.setOptions);k(this,"parse",this.parseMarkdown(!0));k(this,"parseInline",this.parseMarkdown(!1));k(this,"Parser",$);k(this,"Renderer",L);k(this,"TextRenderer",te);k(this,"Lexer",R);k(this,"Tokenizer",E);k(this,"Hooks",_);this.use(...t)}walkTokens(t,e){var r,i;let n=[];for(const s of t)switch(n=n.concat(e.call(this,s)),s.type){case"table":{const c=s;for(const a of c.header)n=n.concat(this.walkTokens(a.tokens,e));for(const a of c.rows)for(const p of a)n=n.concat(this.walkTokens(p.tokens,e));break}case"list":{const c=s;n=n.concat(this.walkTokens(c.items,e));break}default:{const c=s;(i=(r=this.defaults.extensions)==null?void 0:r.childTokens)!=null&&i[c.type]?this.defaults.extensions.childTokens[c.type].forEach(a=>{const p=c[a].flat(1/0);n=n.concat(this.walkTokens(p,e))}):c.tokens&&(n=n.concat(this.walkTokens(c.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(n=>{const r={...n};if(r.async=this.defaults.async||r.async||!1,n.extensions&&(n.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){const s=e.renderers[i.name];s?e.renderers[i.name]=function(...c){let a=i.renderer.apply(this,c);return a===!1&&(a=s.apply(this,c)),a}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=e[i.level];s?s.unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),r.extensions=e),n.renderer){const i=this.defaults.renderer||new L(this.defaults);for(const s in n.renderer){if(!(s in i))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const c=s,a=n.renderer[c],p=i[c];i[c]=(...o)=>{let l=a.apply(i,o);return l===!1&&(l=p.apply(i,o)),l||""}}r.renderer=i}if(n.tokenizer){const i=this.defaults.tokenizer||new E(this.defaults);for(const s in n.tokenizer){if(!(s in i))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const c=s,a=n.tokenizer[c],p=i[c];i[c]=(...o)=>{let l=a.apply(i,o);return l===!1&&(l=p.apply(i,o)),l}}r.tokenizer=i}if(n.hooks){const i=this.defaults.hooks||new _;for(const s in n.hooks){if(!(s in i))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const c=s,a=n.hooks[c],p=i[c];_.passThroughHooks.has(s)?i[c]=o=>{if(this.defaults.async)return Promise.resolve(a.call(i,o)).then(b=>p.call(i,b));const l=a.call(i,o);return p.call(i,l)}:i[c]=(...o)=>{let l=a.apply(i,o);return l===!1&&(l=p.apply(i,o)),l}}r.hooks=i}if(n.walkTokens){const i=this.defaults.walkTokens,s=n.walkTokens;r.walkTokens=function(c){let a=[];return a.push(s.call(this,c)),i&&(a=a.concat(i.call(this,c))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return R.lex(t,e??this.defaults)}parser(t,e){return $.parse(t,e??this.defaults)}parseMarkdown(t){return(n,r)=>{const i={...r},s={...this.defaults,...i},c=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&i.async===!1)return c(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof n>"u"||n===null)return c(new Error("marked(): input parameter is undefined or null"));if(typeof n!="string")return c(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(n)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=t);const a=s.hooks?s.hooks.provideLexer():t?R.lex:R.lexInline,p=s.hooks?s.hooks.provideParser():t?$.parse:$.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(n):n).then(o=>a(o,s)).then(o=>s.hooks?s.hooks.processAllTokens(o):o).then(o=>s.walkTokens?Promise.all(this.walkTokens(o,s.walkTokens)).then(()=>o):o).then(o=>p(o,s)).then(o=>s.hooks?s.hooks.postprocess(o):o).catch(c);try{s.hooks&&(n=s.hooks.preprocess(n));let o=a(n,s);s.hooks&&(o=s.hooks.processAllTokens(o)),s.walkTokens&&this.walkTokens(o,s.walkTokens);let l=p(o,s);return s.hooks&&(l=s.hooks.postprocess(l)),l}catch(o){return c(o)}}}onError(t,e){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const r="<p>An error occurred:</p><pre>"+S(n.message+"",!0)+"</pre>";return e?Promise.resolve(r):r}if(e)return Promise.reject(n);throw n}}},T=new dt;function m(t,e){return T.parse(t,e)}m.options=m.setOptions=function(t){return T.setOptions(t),m.defaults=T.defaults,ue(m.defaults),m};m.getDefaults=j;m.defaults=P;m.use=function(...t){return T.use(...t),m.defaults=T.defaults,ue(m.defaults),m};m.walkTokens=function(t,e){return T.walkTokens(t,e)};m.parseInline=T.parseInline;m.Parser=$;m.parser=$.parse;m.Renderer=L;m.TextRenderer=te;m.Lexer=R;m.lexer=R.lex;m.Tokenizer=E;m.Hooks=_;m.parse=m;m.options;m.setOptions;m.use;m.walkTokens;m.parseInline;$.parse;R.lex;function Tt(t){return m.parse(t,{async:!1})}export{Be as D,ze as P,Ge as a,$t as b,Tt as r};
