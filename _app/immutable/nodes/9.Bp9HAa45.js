var qs=Object.defineProperty;var Hs=(i,e,n)=>e in i?qs(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var Re=(i,e,n)=>(Hs(i,typeof e!="symbol"?e+"":e,n),n);import{s as ue,r as ne,k as m,n as x,d as f,I as Ie,e as k,t as U,b as y,f as j,g as M,l as $,x as se,a as A,c as O,j as v,i as ie,a1 as On,q as et,X as he,u as tt,v as nt,w as rt,Y as St,a2 as He,y as ke,Z as jn,J as st,a3 as it,m as De,M as vn,E as Ln,B as Ct,G as Pt,a0 as oe,a4 as Lt,O as Bt,a5 as Xe,a6 as Kt,a7 as Ze,a8 as Rn,a9 as Xt,H as zs,F as Vs}from"../chunks/scheduler.DAF4hTao.js";import{m as Gt,A as Gs,P as ws,T as Js,a as Jt,e as Nn,h as It,u as bn}from"../chunks/PokemonArt.CI3Vxr0i.js";import{S as ce,i as fe,c as L,a as R,m as N,t as E,b as T,d as D,g as ge,e as $e,f as At}from"../chunks/index.Dy0pSeyo.js";import{M as Ws,p as Ys}from"../chunks/MissingNo.BfgJ9dUS.js";import{e as pe,V as Wt,L as at,S as ks,u as ys,o as Es,a as Xs,B as Ts,P as Zs}from"../chunks/Loader.Bz4TX_1L.js";import{I as Qs}from"../chunks/IdBadge.B5xfko6s.js";import{T as ze}from"../chunks/Title.ChC1O-v6.js";import{F as Zt,C as Ve,T as xs}from"../chunks/TypeTag.QeG2oRsd.js";import{b as Se,a as ei}from"../chunks/paths.CSWrVqev.js";import{p as _t}from"../chunks/store.MT6J_eAe.js";import{a as Dn,b as Un,m as ti,e as Mn}from"../chunks/filter.BzkLsrbX.js";import{M as ni}from"../chunks/MoveDescription.DqDzPC18.js";import{m as wn}from"../chunks/store.d99AaN06.js";import{f as Bn,e as xe,t as Kn,a as Fn}from"../chunks/store.DPPKCzgl.js";import{w as ri}from"../chunks/index.9IHGp1c2.js";import{_ as Ot}from"../chunks/preload-helper.D6kgxu3v.js";import{g as Be}from"../chunks/entry.BFyDDumW.js";const si=!0,qn=si;function Hn(i,e,n){const t=i.slice();return t[2]=e[n],t}function zn(i){let e,n=i[2]+"",t;return{c(){e=k("p"),t=U(n)},l(r){e=y(r,"P",{});var s=j(e);t=M(s,n),s.forEach(f)},m(r,s){m(r,e,s),$(e,t)},p(r,s){s&1&&n!==(n=r[2]+"")&&se(t,n)},d(r){r&&f(e)}}}function ii(i){let e,n=pe(i[0]),t=[];for(let r=0;r<n.length;r+=1)t[r]=zn(Hn(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,[s]){if(s&1){n=pe(r[0]);let a;for(a=0;a<n.length;a+=1){const o=Hn(r,n,a);t[a]?t[a].p(o,s):(t[a]=zn(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},i:x,o:x,d(r){r&&f(e),Ie(t,r)}}}function ai(i,e,n){let t,{value:r=""}=e;return i.$$set=s=>{"value"in s&&n(1,r=s.value)},i.$$.update=()=>{i.$$.dirty&2&&n(0,t=r.split(/\n+/))},[t,r]}class li extends ce{constructor(e){super(),fe(this,e,ai,ii,ue,{value:1})}}function oi(i){let e,n="Trainer Id",t,r,s=i[0].readKey+"",a;return{c(){e=k("dt"),e.textContent=n,t=A(),r=k("dd"),a=U(s)},l(o){e=y(o,"DT",{"data-svelte-h":!0}),ie(e)!=="svelte-13n2wjg"&&(e.textContent=n),t=O(o),r=y(o,"DD",{});var l=j(r);a=M(l,s),l.forEach(f)},m(o,l){m(o,e,l),m(o,t,l),m(o,r,l),$(r,a)},p(o,l){l&1&&s!==(s=o[0].readKey+"")&&se(a,s)},d(o){o&&(f(e),f(t),f(r))}}}function ui(i){let e,n,t,r,s;return n=new Zt({props:{columns:2,$$slots:{default:[oi]},$$scope:{ctx:i}}}),r=new li({props:{value:i[0].description}}),{c(){e=k("section"),L(n.$$.fragment),t=A(),L(r.$$.fragment),this.h()},l(a){e=y(a,"SECTION",{class:!0});var o=j(e);R(n.$$.fragment,o),t=O(o),R(r.$$.fragment,o),o.forEach(f),this.h()},h(){v(e,"class","info")},m(a,o){m(a,e,o),N(n,e,null),$(e,t),N(r,e,null),s=!0},p(a,[o]){const l={};o&3&&(l.$$scope={dirty:o,ctx:a}),n.$set(l);const u={};o&1&&(u.value=a[0].description),r.$set(u)},i(a){s||(E(n.$$.fragment,a),E(r.$$.fragment,a),s=!0)},o(a){T(n.$$.fragment,a),T(r.$$.fragment,a),s=!1},d(a){a&&f(e),D(n),D(r)}}}function ci(i,e,n){let{trainer:t}=e;return i.$$set=r=>{"trainer"in r&&n(0,t=r.trainer)},[t]}let fi=class extends ce{constructor(e){super(),fe(this,e,ci,ui,ue,{trainer:0})}};function hi(i){let e,n,t,r,s;const a=i[7].default,o=et(a,i,i[6],null);return{c(){e=k("button"),o&&o.c(),this.h()},l(l){e=y(l,"BUTTON",{type:!0,class:!0});var u=j(e);o&&o.l(u),u.forEach(f),this.h()},h(){v(e,"type",i[1]),v(e,"class",n="button "+i[0]+" "+i[2]+" "+i[3]+" svelte-1ezhafr"),e.disabled=i[4]},m(l,u){m(l,e,u),o&&o.m(e,null),t=!0,r||(s=he(e,"click",i[9]),r=!0)},p(l,u){o&&o.p&&(!t||u&64)&&tt(o,a,l,l[6],t?rt(a,l[6],u,null):nt(l[6]),null),(!t||u&2)&&v(e,"type",l[1]),(!t||u&13&&n!==(n="button "+l[0]+" "+l[2]+" "+l[3]+" svelte-1ezhafr"))&&v(e,"class",n),(!t||u&16)&&(e.disabled=l[4])},i(l){t||(E(o,l),t=!0)},o(l){T(o,l),t=!1},d(l){l&&f(e),o&&o.d(l),r=!1,s()}}}function di(i){let e,n,t,r,s;const a=i[7].default,o=et(a,i,i[6],null);return{c(){e=k("a"),o&&o.c(),this.h()},l(l){e=y(l,"A",{href:!0,class:!0});var u=j(e);o&&o.l(u),u.forEach(f),this.h()},h(){v(e,"href",i[5]),v(e,"class",n="button "+i[0]+" "+i[2]+" "+i[3]+" svelte-1ezhafr"),St(e,"disabled",i[4])},m(l,u){m(l,e,u),o&&o.m(e,null),t=!0,r||(s=he(e,"click",i[8]),r=!0)},p(l,u){o&&o.p&&(!t||u&64)&&tt(o,a,l,l[6],t?rt(a,l[6],u,null):nt(l[6]),null),(!t||u&32)&&v(e,"href",l[5]),(!t||u&13&&n!==(n="button "+l[0]+" "+l[2]+" "+l[3]+" svelte-1ezhafr"))&&v(e,"class",n),(!t||u&29)&&St(e,"disabled",l[4])},i(l){t||(E(o,l),t=!0)},o(l){T(o,l),t=!1},d(l){l&&f(e),o&&o.d(l),r=!1,s()}}}function pi(i){let e,n,t,r;const s=[di,hi],a=[];function o(l,u){return l[5]!=null?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,[u]){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function _i(i,e,n){let{$$slots:t={},$$scope:r}=e,{variant:s="solid"}=e,{type:a="button"}=e,{align:o="center"}=e,{width:l="auto"}=e,{disabled:u=!1}=e,{href:c=void 0}=e;function h(p){On.call(this,i,p)}function d(p){On.call(this,i,p)}return i.$$set=p=>{"variant"in p&&n(0,s=p.variant),"type"in p&&n(1,a=p.type),"align"in p&&n(2,o=p.align),"width"in p&&n(3,l=p.width),"disabled"in p&&n(4,u=p.disabled),"href"in p&&n(5,c=p.href),"$$scope"in p&&n(6,r=p.$$scope)},[s,a,o,l,u,c,r,t,h,d]}class we extends ce{constructor(e){super(),fe(this,e,_i,pi,ue,{variant:0,type:1,align:2,width:3,disabled:4,href:5})}}function mi(i){let e,n;const t=i[1].default,r=et(t,i,i[0],null);return{c(){e=k("div"),r&&r.c(),this.h()},l(s){e=y(s,"DIV",{class:!0});var a=j(e);r&&r.l(a),a.forEach(f),this.h()},h(){v(e,"class","gap-between-items to-right padding-preventing-overflow svelte-1ofqvh4")},m(s,a){m(s,e,a),r&&r.m(e,null),n=!0},p(s,[a]){r&&r.p&&(!n||a&1)&&tt(r,t,s,s[0],n?rt(t,s[0],a,null):nt(s[0]),null)},i(s){n||(E(r,s),n=!0)},o(s){T(r,s),n=!1},d(s){s&&f(e),r&&r.d(s)}}}function gi(i,e,n){let{$$slots:t={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,t]}class je extends ce{constructor(e){super(),fe(this,e,gi,mi,ue,{})}}const de={home:()=>`${Se}`,pokemon:i=>`${Se}/pokemon${i?`/${i}`:""}`,moves:i=>`${Se}/moves${i?`/${i}`:""}`,tms:i=>`${Se}/tms${i?`/${i}`:""}`,trainers:(i,e,n)=>{const t=new URLSearchParams;return i&&t.append("id",i),e&&t.append("pokemon",e),n&&t.append("action",n),`${Se}/trainers?${t.toString()}`}},Te={addPokemon:"add-pokemon",editPokemon:"edit-pokemon",evolvePokemon:"evolve-pokemon",removePokemon:"remove-pokemon",newTrainer:"new-trainer",findTrainer:"find-trainer",editTrainer:"edit-trainer",retireTrainer:"retire-trainer",removeTrainer:"remove-trainer",accessKey:"access-key"};function $i(i){let e;return{c(){e=U("Access Key")},l(n){e=M(n,"Access Key")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function vi(i){let e;return{c(){e=U("Remove")},l(n){e=M(n,"Remove")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Vn(i){let e,n;return e=new we({props:{href:de.trainers(i[1].info.readKey,void 0,Te.editTrainer),$$slots:{default:[bi]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.href=de.trainers(t[1].info.readKey,void 0,Te.editTrainer)),r&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function bi(i){let e;return{c(){e=U("Edit")},l(n){e=M(n,"Edit")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function wi(i){let e,n,t,r,s,a;e=new we({props:{href:de.trainers(i[1].info.readKey,void 0,Te.accessKey),variant:"ghost",$$slots:{default:[$i]},$$scope:{ctx:i}}}),t=new we({props:{href:de.trainers(i[1].info.readKey,void 0,Te.removeTrainer),variant:"ghost",$$slots:{default:[vi]},$$scope:{ctx:i}}});let o=i[1].update&&Vn(i);return{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment),r=A(),o&&o.c(),s=ne()},l(l){R(e.$$.fragment,l),n=O(l),R(t.$$.fragment,l),r=O(l),o&&o.l(l),s=ne()},m(l,u){N(e,l,u),m(l,n,u),N(t,l,u),m(l,r,u),o&&o.m(l,u),m(l,s,u),a=!0},p(l,u){const c={};u&2&&(c.href=de.trainers(l[1].info.readKey,void 0,Te.accessKey)),u&4&&(c.$$scope={dirty:u,ctx:l}),e.$set(c);const h={};u&2&&(h.href=de.trainers(l[1].info.readKey,void 0,Te.removeTrainer)),u&4&&(h.$$scope={dirty:u,ctx:l}),t.$set(h),l[1].update?o?(o.p(l,u),u&2&&E(o,1)):(o=Vn(l),o.c(),E(o,1),o.m(s.parentNode,s)):o&&(ge(),T(o,1,1,()=>{o=null}),$e())},i(l){a||(E(e.$$.fragment,l),E(t.$$.fragment,l),E(o),a=!0)},o(l){T(e.$$.fragment,l),T(t.$$.fragment,l),T(o),a=!1},d(l){l&&(f(n),f(r),f(s)),D(e,l),D(t,l),o&&o.d(l)}}}function ki(i){let e,n,t,r;return e=new fi({props:{trainer:i[1].info}}),t=new je({props:{$$slots:{default:[wi]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.trainer=s[1].info),e.$set(o);const l={};a&6&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function yi(i){let e,n,t,r;return e=new ze({props:{value:i[1].info.name}}),t=new Ve({props:{title:i[1].info.name,$$slots:{default:[ki]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&2&&(o.value=s[1].info.name),e.$set(o);const l={};a&2&&(l.title=s[1].info.name),a&6&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function Ei(i,e,n){let t,r=x,s=()=>(r(),r=He(a,o=>n(1,t=o)),a);i.$$.on_destroy.push(()=>r());let{trainer:a}=e;return s(),i.$$set=o=>{"trainer"in o&&s(n(0,a=o.trainer))},[a,t]}let Ti=class extends ce{constructor(e){super(),fe(this,e,Ei,yi,ue,{trainer:0})}};function Si(i){let e,n;return{c(){e=k("span"),this.h()},l(t){e=y(t,"SPAN",{class:!0,title:!0,"aria-label":!0}),j(e).forEach(f),this.h()},h(){v(e,"class",n="gender "+i[0]+" svelte-dgspm2"),v(e,"title",i[0]),v(e,"aria-label",i[0])},m(t,r){m(t,e,r)},p(t,[r]){r&1&&n!==(n="gender "+t[0]+" svelte-dgspm2")&&v(e,"class",n),r&1&&v(e,"title",t[0]),r&1&&v(e,"aria-label",t[0])},i:x,o:x,d(t){t&&f(e)}}}function Ci(i,e,n){let{gender:t}=e;return i.$$set=r=>{"gender"in r&&n(0,t=r.gender)},[t]}class Ss extends ce{constructor(e){super(),fe(this,e,Ci,Si,ue,{gender:0})}}function Pi(i){let e,n,t,r=i[1].name+"",s,a,o,l,u,c,h,d="Lv.",p,_,g=i[0].level+"",b,w;return l=new Ss({props:{gender:i[0].gender}}),{c(){e=k("div"),n=k("span"),t=k("span"),s=U(r),a=A(),o=k("span"),L(l.$$.fragment),u=A(),c=k("span"),h=k("span"),h.textContent=d,p=A(),_=k("span"),b=U(g),this.h()},l(S){e=y(S,"DIV",{class:!0});var P=j(e);n=y(P,"SPAN",{class:!0});var I=j(n);t=y(I,"SPAN",{});var q=j(t);s=M(q,r),q.forEach(f),a=O(I),o=y(I,"SPAN",{class:!0});var z=j(o);R(l.$$.fragment,z),z.forEach(f),I.forEach(f),u=O(P),c=y(P,"SPAN",{class:!0});var K=j(c);h=y(K,"SPAN",{class:!0,"data-svelte-h":!0}),ie(h)!=="svelte-2tek6b"&&(h.textContent=d),p=O(K),_=y(K,"SPAN",{class:!0});var B=j(_);b=M(B,g),B.forEach(f),K.forEach(f),P.forEach(f),this.h()},h(){v(o,"class","gender svelte-86i3rl"),v(n,"class","name svelte-86i3rl"),v(h,"class","level-text svelte-86i3rl"),v(_,"class","level-number svelte-86i3rl"),v(c,"class","level svelte-86i3rl"),v(e,"class","grid svelte-86i3rl")},m(S,P){m(S,e,P),$(e,n),$(n,t),$(t,s),$(n,a),$(n,o),N(l,o,null),$(e,u),$(e,c),$(c,h),$(c,p),$(c,_),$(_,b),w=!0},p(S,[P]){(!w||P&2)&&r!==(r=S[1].name+"")&&se(s,r);const I={};P&1&&(I.gender=S[0].gender),l.$set(I),(!w||P&1)&&g!==(g=S[0].level+"")&&se(b,g)},i(S){w||(E(l.$$.fragment,S),w=!0)},o(S){T(l.$$.fragment,S),w=!1},d(S){S&&f(e),D(l)}}}function Ii(i,e,n){let{pokemon:t}=e,{species:r}=e;return i.$$set=s=>{"pokemon"in s&&n(0,t=s.pokemon),"species"in s&&n(1,r=s.species)},[t,r]}class Ai extends ce{constructor(e){super(),fe(this,e,Ii,Pi,ue,{pokemon:0,species:1})}}function Oi(i){let e,n,t;return{c(){e=U(i[0]),n=U(" / "),t=U(i[1])},l(r){e=M(r,i[0]),n=M(r," / "),t=M(r,i[1])},m(r,s){m(r,e,s),m(r,n,s),m(r,t,s)},p(r,s){s&1&&se(e,r[0]),s&2&&se(t,r[1])},d(r){r&&(f(e),f(n),f(t))}}}function ji(i){let e,n,t=`${i[3]}%`,r,s,a,o;return s=new Wt({props:{$$slots:{default:[Oi]},$$scope:{ctx:i}}}),{c(){e=k("meter"),n=k("div"),r=A(),L(s.$$.fragment),this.h()},l(l){e=y(l,"METER",{class:!0,max:!0});var u=j(e);n=y(u,"DIV",{class:!0}),j(n).forEach(f),r=O(u),R(s.$$.fragment,u),u.forEach(f),this.h()},h(){v(n,"class","fill svelte-f7vc71"),ke(n,"width",t),v(e,"class",a=jn(i[4])+" svelte-f7vc71"),v(e,"max",i[1]),e.value=i[0],St(e,"secondary",i[2])},m(l,u){m(l,e,u),$(e,n),$(e,r),N(s,e,null),o=!0},p(l,[u]){u&8&&t!==(t=`${l[3]}%`)&&ke(n,"width",t);const c={};u&35&&(c.$$scope={dirty:u,ctx:l}),s.$set(c),(!o||u&16&&a!==(a=jn(l[4])+" svelte-f7vc71"))&&v(e,"class",a),(!o||u&2)&&v(e,"max",l[1]),(!o||u&1)&&(e.value=l[0]),(!o||u&20)&&St(e,"secondary",l[2])},i(l){o||(E(s.$$.fragment,l),o=!0)},o(l){T(s.$$.fragment,l),o=!1},d(l){l&&f(e),D(s)}}}function Li(i,e,n){let t,r,{current:s}=e,{max:a}=e,{secondary:o=!1}=e;return i.$$set=l=>{"current"in l&&n(0,s=l.current),"max"in l&&n(1,a=l.max),"secondary"in l&&n(2,o=l.secondary)},i.$$.update=()=>{i.$$.dirty&3&&n(3,t=Math.max(100*s/a,0)),i.$$.dirty&8&&n(4,r=t>=50?"healthy":t>=20?"warning":"danger")},[s,a,o,t,r]}class un extends ce{constructor(e){super(),fe(this,e,Li,ji,ue,{current:0,max:1,secondary:2})}}function Ri(i){let e,n=`${i[2]+1}ch`,t,r;return{c(){e=k("input"),this.h()},l(s){e=y(s,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){v(e,"id",i[1]),v(e,"type","text"),e.value=i[0],v(e,"class","svelte-182hmq9"),ke(e,"width",n)},m(s,a){m(s,e,a),t||(r=[he(e,"change",i[3]),he(e,"input",i[4])],t=!0)},p(s,[a]){a&2&&v(e,"id",s[1]),a&1&&e.value!==s[0]&&(e.value=s[0]),a&4&&n!==(n=`${s[2]+1}ch`)&&ke(e,"width",n)},i:x,o:x,d(s){s&&f(e),t=!1,st(r)}}}function Ni(i,e,n){var u;const t=it();let{id:r}=e,{value:s}=e,a=((u=s==null?void 0:s.toString())==null?void 0:u.length)??0;const o=c=>{var _;const h=c.target,d=/(\d+)\s*(\+|-)\s*(\d+)/,p=h.value.match(d);if(p!=null)n(0,s=parseFloat(p[1])+parseFloat(p[2]+p[3]));else{const g=parseFloat(h.value);n(0,s=isNaN(g)?0:g)}n(2,a=((_=s==null?void 0:s.toString())==null?void 0:_.length)??0),t("change",{value:s})},l=c=>{const h=c.target;n(2,a=h.value.length)};return i.$$set=c=>{"id"in c&&n(1,r=c.id),"value"in c&&n(0,s=c.value)},[s,r,a,o,l]}class Cs extends ce{constructor(e){super(),fe(this,e,Ni,Ri,ue,{id:1,value:0})}}function Di(i){let e,n="HP";return{c(){e=k("label"),e.textContent=n,this.h()},l(t){e=y(t,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-nr4t2i"&&(e.textContent=n),this.h()},h(){v(e,"for","current-hp")},m(t,r){m(t,e,r)},p:x,d(t){t&&f(e)}}}function Ui(i){let e=i[0].hp.current+"",n;return{c(){n=U(e)},l(t){n=M(t,e)},m(t,r){m(t,n,r)},p(t,r){r&1&&e!==(e=t[0].hp.current+"")&&se(n,e)},i:x,o:x,d(t){t&&f(n)}}}function Mi(i){let e,n;return e=new Cs({props:{id:"current-hp",value:i[3]}}),e.$on("change",i[5]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.value=t[3]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Bi(i){let e,n="Hit Dice";return{c(){e=k("label"),e.textContent=n,this.h()},l(t){e=y(t,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1l1lthl"&&(e.textContent=n),this.h()},h(){v(e,"for","current-hit-dice")},m(t,r){m(t,e,r)},p:x,d(t){t&&f(e)}}}function Ki(i){let e=i[0].hitDice.current+"",n;return{c(){n=U(e)},l(t){n=M(t,e)},m(t,r){m(t,n,r)},p(t,r){r&1&&e!==(e=t[0].hitDice.current+"")&&se(n,e)},i:x,o:x,d(t){t&&f(n)}}}function Fi(i){let e,n;return e=new Cs({props:{id:"current-hit-dice",value:i[4]}}),e.$on("change",i[6]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.value=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function qi(i){let e,n,t,r,s,a,o,l,u,c,h,d,p,_=i[0].hp.max+"",g,b,w,S,P,I,q,z,K,B,F,re,Y,X,V,C=i[0].hitDice.max+"",G,W,Q=i[1].hitDice+"",ee,H,Z;t=new un({props:{current:i[3],max:i[0].hp.max}}),a=new Wt({props:{$$slots:{default:[Di]},$$scope:{ctx:i}}});const te=[Mi,Ui],J=[];function ae(le,ve){return le[2]?0:1}u=ae(i),c=J[u]=te[u](i),P=new un({props:{secondary:!0,current:i[4],max:i[0].hitDice.max}}),z=new Wt({props:{$$slots:{default:[Bi]},$$scope:{ctx:i}}});const me=[Fi,Ki],Pe=[];function Ye(le,ve){return le[2]?0:1}return F=Ye(i),re=Pe[F]=me[F](i),{c(){e=k("div"),n=k("span"),L(t.$$.fragment),r=A(),s=k("span"),L(a.$$.fragment),o=A(),l=k("span"),c.c(),h=A(),d=k("span"),p=U("/ "),g=U(_),b=A(),w=k("span"),S=k("span"),L(P.$$.fragment),I=A(),q=k("span"),L(z.$$.fragment),K=A(),B=k("span"),re.c(),Y=A(),X=k("span"),V=U("/ "),G=U(C),W=U(" ("),ee=U(Q),H=U(")"),this.h()},l(le){e=y(le,"DIV",{class:!0});var ve=j(e);n=y(ve,"SPAN",{class:!0});var Ke=j(n);R(t.$$.fragment,Ke),Ke.forEach(f),r=O(ve),s=y(ve,"SPAN",{class:!0});var Ae=j(s);R(a.$$.fragment,Ae),o=O(Ae),l=y(Ae,"SPAN",{class:!0});var Ge=j(l);c.l(Ge),Ge.forEach(f),h=O(Ae),d=y(Ae,"SPAN",{class:!0});var ye=j(d);p=M(ye,"/ "),g=M(ye,_),ye.forEach(f),Ae.forEach(f),b=O(ve),w=y(ve,"SPAN",{class:!0});var Le=j(w);S=y(Le,"SPAN",{class:!0});var gt=j(S);R(P.$$.fragment,gt),gt.forEach(f),I=O(Le),q=y(Le,"SPAN",{class:!0});var $t=j(q);R(z.$$.fragment,$t),K=O($t),B=y($t,"SPAN",{class:!0});var An=j(B);re.l(An),An.forEach(f),Y=O($t),X=y($t,"SPAN",{class:!0});var vt=j(X);V=M(vt,"/ "),G=M(vt,C),W=M(vt," ("),ee=M(vt,Q),H=M(vt,")"),vt.forEach(f),$t.forEach(f),Le.forEach(f),ve.forEach(f),this.h()},h(){v(n,"class","bar svelte-6ls8yw"),v(l,"class","current-hp svelte-6ls8yw"),v(d,"class","max-hp"),v(s,"class","hp svelte-6ls8yw"),v(S,"class","hit-dice-bar svelte-6ls8yw"),v(B,"class","current-hit-dice svelte-6ls8yw"),v(X,"class","max-hit-dice"),v(q,"class","hit-dice-text svelte-6ls8yw"),v(w,"class","hit-dice svelte-6ls8yw"),v(e,"class","grid svelte-6ls8yw")},m(le,ve){m(le,e,ve),$(e,n),N(t,n,null),$(e,r),$(e,s),N(a,s,null),$(s,o),$(s,l),J[u].m(l,null),$(s,h),$(s,d),$(d,p),$(d,g),$(e,b),$(e,w),$(w,S),N(P,S,null),$(w,I),$(w,q),N(z,q,null),$(q,K),$(q,B),Pe[F].m(B,null),$(q,Y),$(q,X),$(X,V),$(X,G),$(X,W),$(X,ee),$(X,H),Z=!0},p(le,[ve]){const Ke={};ve&8&&(Ke.current=le[3]),ve&1&&(Ke.max=le[0].hp.max),t.$set(Ke);const Ae={};ve&256&&(Ae.$$scope={dirty:ve,ctx:le}),a.$set(Ae);let Ge=u;u=ae(le),u===Ge?J[u].p(le,ve):(ge(),T(J[Ge],1,1,()=>{J[Ge]=null}),$e(),c=J[u],c?c.p(le,ve):(c=J[u]=te[u](le),c.c()),E(c,1),c.m(l,null)),(!Z||ve&1)&&_!==(_=le[0].hp.max+"")&&se(g,_);const ye={};ve&16&&(ye.current=le[4]),ve&1&&(ye.max=le[0].hitDice.max),P.$set(ye);const Le={};ve&256&&(Le.$$scope={dirty:ve,ctx:le}),z.$set(Le);let gt=F;F=Ye(le),F===gt?Pe[F].p(le,ve):(ge(),T(Pe[gt],1,1,()=>{Pe[gt]=null}),$e(),re=Pe[F],re?re.p(le,ve):(re=Pe[F]=me[F](le),re.c()),E(re,1),re.m(B,null)),(!Z||ve&1)&&C!==(C=le[0].hitDice.max+"")&&se(G,C),(!Z||ve&2)&&Q!==(Q=le[1].hitDice+"")&&se(ee,Q)},i(le){Z||(E(t.$$.fragment,le),E(a.$$.fragment,le),E(c),E(P.$$.fragment,le),E(z.$$.fragment,le),E(re),Z=!0)},o(le){T(t.$$.fragment,le),T(a.$$.fragment,le),T(c),T(P.$$.fragment,le),T(z.$$.fragment,le),T(re),Z=!1},d(le){le&&f(e),D(t),D(a),J[u].d(),D(P),D(z),Pe[F].d()}}}function Hi(i,e,n){let t,r;const s=it();let{pokemon:a}=e,{species:o}=e,{editable:l}=e;const u=h=>{s("update",{currentHp:h.detail.value,currentHitDice:r})},c=h=>{s("update",{currentHp:t,currentHitDice:h.detail.value})};return i.$$set=h=>{"pokemon"in h&&n(0,a=h.pokemon),"species"in h&&n(1,o=h.species),"editable"in h&&n(2,l=h.editable)},i.$$.update=()=>{i.$$.dirty&1&&n(3,t=a.hp.current),i.$$.dirty&1&&n(4,r=a.hitDice.current)},[a,o,l,t,r,u,c]}class zi extends ce{constructor(e){super(),fe(this,e,Hi,qi,ue,{pokemon:0,species:1,editable:2})}}const cn=[{name:"athletics",attribute:"str"},{name:"acrobatics",attribute:"dex"},{name:"sleight of hand",attribute:"dex"},{name:"stealth",attribute:"dex"},{name:"arcana",attribute:"int"},{name:"history",attribute:"int"},{name:"investigation",attribute:"int"},{name:"nature",attribute:"int"},{name:"religion",attribute:"int"},{name:"animal handling",attribute:"wis"},{name:"insight",attribute:"wis"},{name:"medicine",attribute:"wis"},{name:"perception",attribute:"wis"},{name:"survival",attribute:"wis"},{name:"deception",attribute:"cha"},{name:"intimidation",attribute:"cha"},{name:"performance",attribute:"cha"},{name:"persuasion",attribute:"cha"}],kn=i=>2+Math.floor((i-1)/4),Gn=(i,e,n)=>{const t=cn.find(r=>r.name===i).attribute;return Gt(e[t])+n};function Jn(i,e,n){const t=i.slice();return t[3]=e[n],t}function Wn(i,e,n){const t=i.slice();return t[6]=e[n],t}function Yn(i){let e,n=Dn(i[6])+"",t;return{c(){e=k("dd"),t=U(n)},l(r){e=y(r,"DD",{});var s=j(e);t=M(s,n),s.forEach(f)},m(r,s){m(r,e,s),$(e,t)},p(r,s){s&2&&n!==(n=Dn(r[6])+"")&&se(t,n)},d(r){r&&f(e)}}}function Xn(i){let e,n="Senses",t,r,s=pe(i[1].senses),a=[];for(let o=0;o<s.length;o+=1)a[o]=Zn(Jn(i,s,o));return{c(){e=k("dt"),e.textContent=n,t=A(),r=k("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=y(o,"DT",{"data-svelte-h":!0}),ie(e)!=="svelte-hlstkx"&&(e.textContent=n),t=O(o),r=y(o,"DIV",{class:!0});var l=j(r);for(let u=0;u<a.length;u+=1)a[u].l(l);l.forEach(f),this.h()},h(){v(r,"class","cap")},m(o,l){m(o,e,l),m(o,t,l),m(o,r,l);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null)},p(o,l){if(l&2){s=pe(o[1].senses);let u;for(u=0;u<s.length;u+=1){const c=Jn(o,s,u);a[u]?a[u].p(c,l):(a[u]=Zn(c),a[u].c(),a[u].m(r,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=s.length}},d(o){o&&(f(e),f(t),f(r)),Ie(a,o)}}}function Zn(i){let e,n=Un(i[3])+"",t;return{c(){e=k("dd"),t=U(n)},l(r){e=y(r,"DD",{});var s=j(e);t=M(s,n),s.forEach(f)},m(r,s){m(r,e,s),$(e,t)},p(r,s){s&2&&n!==(n=Un(r[3])+"")&&se(t,n)},d(r){r&&f(e)}}}function Vi(i){let e,n='<abbr title="Armor Class">AC</abbr>',t,r,s=i[0].ac+"",a,o,l,u="Nature",c,h,d=i[0].nature+"",p,_,g,b="Bonus",w,S,P,I,q,z,K="Size",B,F,re=i[1].size+"",Y,X,V,C="Speed",G,W,Q,ee,H=pe(i[1].speed),Z=[];for(let J=0;J<H.length;J+=1)Z[J]=Yn(Wn(i,H,J));let te=i[1].senses.length>0&&Xn(i);return{c(){e=k("dt"),e.innerHTML=n,t=A(),r=k("dd"),a=U(s),o=A(),l=k("dt"),l.textContent=u,c=A(),h=k("dd"),p=U(d),_=A(),g=k("dt"),g.textContent=b,w=A(),S=k("dd"),P=U("+"),I=U(i[2]),q=A(),z=k("dt"),z.textContent=K,B=A(),F=k("dd"),Y=U(re),X=A(),V=k("dt"),V.textContent=C,G=A(),W=k("div");for(let J=0;J<Z.length;J+=1)Z[J].c();Q=A(),te&&te.c(),ee=ne(),this.h()},l(J){e=y(J,"DT",{"data-svelte-h":!0}),ie(e)!=="svelte-oq9y6j"&&(e.innerHTML=n),t=O(J),r=y(J,"DD",{});var ae=j(r);a=M(ae,s),ae.forEach(f),o=O(J),l=y(J,"DT",{"data-svelte-h":!0}),ie(l)!=="svelte-1u0or05"&&(l.textContent=u),c=O(J),h=y(J,"DD",{class:!0});var me=j(h);p=M(me,d),me.forEach(f),_=O(J),g=y(J,"DT",{"data-svelte-h":!0}),ie(g)!=="svelte-ehj2sb"&&(g.textContent=b),w=O(J),S=y(J,"DD",{});var Pe=j(S);P=M(Pe,"+"),I=M(Pe,i[2]),Pe.forEach(f),q=O(J),z=y(J,"DT",{"data-svelte-h":!0}),ie(z)!=="svelte-rw0fwr"&&(z.textContent=K),B=O(J),F=y(J,"DD",{class:!0});var Ye=j(F);Y=M(Ye,re),Ye.forEach(f),X=O(J),V=y(J,"DT",{"data-svelte-h":!0}),ie(V)!=="svelte-1bqvq2b"&&(V.textContent=C),G=O(J),W=y(J,"DIV",{});var le=j(W);for(let ve=0;ve<Z.length;ve+=1)Z[ve].l(le);le.forEach(f),Q=O(J),te&&te.l(J),ee=ne(),this.h()},h(){v(h,"class","cap"),v(F,"class","cap")},m(J,ae){m(J,e,ae),m(J,t,ae),m(J,r,ae),$(r,a),m(J,o,ae),m(J,l,ae),m(J,c,ae),m(J,h,ae),$(h,p),m(J,_,ae),m(J,g,ae),m(J,w,ae),m(J,S,ae),$(S,P),$(S,I),m(J,q,ae),m(J,z,ae),m(J,B,ae),m(J,F,ae),$(F,Y),m(J,X,ae),m(J,V,ae),m(J,G,ae),m(J,W,ae);for(let me=0;me<Z.length;me+=1)Z[me]&&Z[me].m(W,null);m(J,Q,ae),te&&te.m(J,ae),m(J,ee,ae)},p(J,ae){if(ae&1&&s!==(s=J[0].ac+"")&&se(a,s),ae&1&&d!==(d=J[0].nature+"")&&se(p,d),ae&4&&se(I,J[2]),ae&2&&re!==(re=J[1].size+"")&&se(Y,re),ae&2){H=pe(J[1].speed);let me;for(me=0;me<H.length;me+=1){const Pe=Wn(J,H,me);Z[me]?Z[me].p(Pe,ae):(Z[me]=Yn(Pe),Z[me].c(),Z[me].m(W,null))}for(;me<Z.length;me+=1)Z[me].d(1);Z.length=H.length}J[1].senses.length>0?te?te.p(J,ae):(te=Xn(J),te.c(),te.m(ee.parentNode,ee)):te&&(te.d(1),te=null)},d(J){J&&(f(e),f(t),f(r),f(o),f(l),f(c),f(h),f(_),f(g),f(w),f(S),f(q),f(z),f(B),f(F),f(X),f(V),f(G),f(W),f(Q),f(ee)),Ie(Z,J),te&&te.d(J)}}}function Gi(i){let e,n;return e=new Zt({props:{columns:2,$$slots:{default:[Vi]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&519&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ji(i,e,n){let t,{pokemon:r}=e,{species:s}=e;return i.$$set=a=>{"pokemon"in a&&n(0,r=a.pokemon),"species"in a&&n(1,s=a.species)},i.$$.update=()=>{i.$$.dirty&1&&n(2,t=kn(r.level))},[r,s,t]}class Wi extends ce{constructor(e){super(),fe(this,e,Ji,Gi,ue,{pokemon:0,species:1})}}function Qn(i,e,n){const t=i.slice();return t[2]=e[n],t}function xn(i,e,n){const t=i.slice();return t[5]=e[n],t}function er(i){let e,n=i[5]+"",t,r,s=Gt(i[0].attributes[i[5]])+i[1]+"",a;return{c(){e=k("dd"),t=U(n),r=U(" +"),a=U(s)},l(o){e=y(o,"DD",{});var l=j(e);t=M(l,n),r=M(l," +"),a=M(l,s),l.forEach(f)},m(o,l){m(o,e,l),$(e,t),$(e,r),$(e,a)},p(o,l){l&1&&n!==(n=o[5]+"")&&se(t,n),l&3&&s!==(s=Gt(o[0].attributes[o[5]])+o[1]+"")&&se(a,s)},d(o){o&&f(e)}}}function tr(i){let e,n=i[2]+"",t,r,s=Gn(i[2],i[0].attributes,i[1])+"",a;return{c(){e=k("dd"),t=U(n),r=U(" +"),a=U(s)},l(o){e=y(o,"DD",{});var l=j(e);t=M(l,n),r=M(l," +"),a=M(l,s),l.forEach(f)},m(o,l){m(o,e,l),$(e,t),$(e,r),$(e,a)},p(o,l){l&1&&n!==(n=o[2]+"")&&se(t,n),l&3&&s!==(s=Gn(o[2],o[0].attributes,o[1])+"")&&se(a,s)},d(o){o&&f(e)}}}function Yi(i){let e,n="Saves",t,r,s,a,o="Proficiencies",l,u,c=pe(i[0].savingThrows),h=[];for(let _=0;_<c.length;_+=1)h[_]=er(xn(i,c,_));let d=pe(i[0].proficiencies),p=[];for(let _=0;_<d.length;_+=1)p[_]=tr(Qn(i,d,_));return{c(){e=k("dt"),e.textContent=n,t=A(),r=k("div");for(let _=0;_<h.length;_+=1)h[_].c();s=A(),a=k("dt"),a.textContent=o,l=A(),u=k("div");for(let _=0;_<p.length;_+=1)p[_].c();this.h()},l(_){e=y(_,"DT",{"data-svelte-h":!0}),ie(e)!=="svelte-981634"&&(e.textContent=n),t=O(_),r=y(_,"DIV",{class:!0});var g=j(r);for(let w=0;w<h.length;w+=1)h[w].l(g);g.forEach(f),s=O(_),a=y(_,"DT",{"data-svelte-h":!0}),ie(a)!=="svelte-1kaob9p"&&(a.textContent=o),l=O(_),u=y(_,"DIV",{class:!0});var b=j(u);for(let w=0;w<p.length;w+=1)p[w].l(b);b.forEach(f),this.h()},h(){v(r,"class","upper"),v(u,"class","cap")},m(_,g){m(_,e,g),m(_,t,g),m(_,r,g);for(let b=0;b<h.length;b+=1)h[b]&&h[b].m(r,null);m(_,s,g),m(_,a,g),m(_,l,g),m(_,u,g);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(u,null)},p(_,g){if(g&3){c=pe(_[0].savingThrows);let b;for(b=0;b<c.length;b+=1){const w=xn(_,c,b);h[b]?h[b].p(w,g):(h[b]=er(w),h[b].c(),h[b].m(r,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=c.length}if(g&3){d=pe(_[0].proficiencies);let b;for(b=0;b<d.length;b+=1){const w=Qn(_,d,b);p[b]?p[b].p(w,g):(p[b]=tr(w),p[b].c(),p[b].m(u,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=d.length}},d(_){_&&(f(e),f(t),f(r),f(s),f(a),f(l),f(u)),Ie(h,_),Ie(p,_)}}}function Xi(i){let e,n;return e=new Zt({props:{columns:2,$$slots:{default:[Yi]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Zi(i,e,n){let t,{pokemon:r}=e;return i.$$set=s=>{"pokemon"in s&&n(0,r=s.pokemon)},i.$$.update=()=>{i.$$.dirty&1&&n(1,t=kn(r.level))},[r,t]}class Qi extends ce{constructor(e){super(),fe(this,e,Zi,Xi,ue,{pokemon:0})}}function xi(i){let e,n=i[1].name+"",t,r;return{c(){e=k("label"),t=U(n),r=U(" PP"),this.h()},l(s){e=y(s,"LABEL",{for:!0});var a=j(e);t=M(a,n),r=M(a," PP"),a.forEach(f),this.h()},h(){v(e,"for","current-hp")},m(s,a){m(s,e,a),$(e,t),$(e,r)},p(s,a){a&2&&n!==(n=s[1].name+"")&&se(t,n)},d(s){s&&f(e)}}}function ea(i){let e;return{c(){e=U(i[6])},l(n){e=M(n,i[6])},m(n,t){m(n,e,t)},p(n,t){t&64&&se(e,n[6])},d(n){n&&f(e)}}}function ta(i){let e,n,t,r;return{c(){e=k("input"),this.h()},l(s){e=y(s,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){v(e,"id",n="current-pp-"+i[0].moveId),v(e,"type","number"),e.value=i[6],v(e,"class","svelte-pw49mc")},m(s,a){m(s,e,a),t||(r=he(e,"change",i[7]),t=!0)},p(s,a){a&1&&n!==(n="current-pp-"+s[0].moveId)&&v(e,"id",n),a&64&&e.value!==s[6]&&(e.value=s[6])},d(s){s&&f(e),t=!1,r()}}}function nr(i){let e,n,t,r,s,a;return{c(){e=U("To Hit: +"),n=U(i[5]),t=U(", DC: "),r=U(i[4]),s=U(", Dmg: +"),a=U(i[3])},l(o){e=M(o,"To Hit: +"),n=M(o,i[5]),t=M(o,", DC: "),r=M(o,i[4]),s=M(o,", Dmg: +"),a=M(o,i[3])},m(o,l){m(o,e,l),m(o,n,l),m(o,t,l),m(o,r,l),m(o,s,l),m(o,a,l)},p(o,l){l&32&&se(n,o[5]),l&16&&se(r,o[4]),l&8&&se(a,o[3])},d(o){o&&(f(e),f(n),f(t),f(r),f(s),f(a))}}}function rr(i){let e,n,t,r=i[0].notes+"",s;return{c(){e=k("hr"),n=A(),t=k("div"),s=U(r),this.h()},l(a){e=y(a,"HR",{}),n=O(a),t=y(a,"DIV",{class:!0});var o=j(t);s=M(o,r),o.forEach(f),this.h()},h(){v(t,"class","space-inner smaller-font svelte-pw49mc")},m(a,o){m(a,e,o),m(a,n,o),m(a,t,o),$(t,s)},p(a,o){o&1&&r!==(r=a[0].notes+"")&&se(s,r)},d(a){a&&(f(e),f(n),f(t))}}}function na(i){let e,n,t,r,s,a=i[1].name+"",o,l,u,c,h,d,p,_,g,b,w=i[0].pp.max+"",S,P,I,q,z=i[1].type+"",K,B,F,re=`var(--skin-${i[1].type}-bg)`,Y,X,V,C,G;h=new Wt({props:{$$slots:{default:[xi]},$$scope:{ctx:i}}});function W(te,J){return te[2]?ta:ea}let Q=W(i),ee=Q(i),H=i[1].power!=="none"&&i[1].power!=="varies"&&nr(i);V=new ni({props:{move:i[1]}});let Z=i[0].notes!==void 0&&i[0].notes.length>0&&rr(i);return{c(){e=k("div"),n=k("div"),t=k("div"),r=k("span"),s=k("a"),o=U(a),u=A(),c=k("span"),L(h.$$.fragment),d=A(),p=k("span"),ee.c(),_=A(),g=k("span"),b=U("/ "),S=U(w),P=A(),I=k("div"),q=k("span"),K=U(z),B=A(),F=k("span"),H&&H.c(),Y=A(),X=k("div"),L(V.$$.fragment),C=A(),Z&&Z.c(),this.h()},l(te){e=y(te,"DIV",{class:!0});var J=j(e);n=y(J,"DIV",{class:!0});var ae=j(n);t=y(ae,"DIV",{class:!0});var me=j(t);r=y(me,"SPAN",{class:!0});var Pe=j(r);s=y(Pe,"A",{href:!0,class:!0});var Ye=j(s);o=M(Ye,a),Ye.forEach(f),Pe.forEach(f),u=O(me),c=y(me,"SPAN",{});var le=j(c);R(h.$$.fragment,le),d=O(le),p=y(le,"SPAN",{class:!0});var ve=j(p);ee.l(ve),ve.forEach(f),_=O(le),g=y(le,"SPAN",{class:!0});var Ke=j(g);b=M(Ke,"/ "),S=M(Ke,w),Ke.forEach(f),le.forEach(f),me.forEach(f),P=O(ae),I=y(ae,"DIV",{class:!0});var Ae=j(I);q=y(Ae,"SPAN",{class:!0});var Ge=j(q);K=M(Ge,z),Ge.forEach(f),B=O(Ae),F=y(Ae,"SPAN",{});var ye=j(F);H&&H.l(ye),ye.forEach(f),Ae.forEach(f),ae.forEach(f),Y=O(J),X=y(J,"DIV",{class:!0});var Le=j(X);R(V.$$.fragment,Le),Le.forEach(f),C=O(J),Z&&Z.l(J),J.forEach(f),this.h()},h(){v(s,"href",l=Se+"/moves/"+i[0].moveId),v(s,"class","svelte-pw49mc"),v(r,"class","flex-span svelte-pw49mc"),v(p,"class","current svelte-pw49mc"),v(g,"class","max"),v(t,"class","hrow space-after-tiny svelte-pw49mc"),v(q,"class","capitalize flex-span svelte-pw49mc"),v(I,"class","hrow tiny-font svelte-pw49mc"),v(n,"class","vstack bg-by-type rounded space-inner svelte-pw49mc"),ke(n,"--bg",re),v(X,"class","space-inner smaller-font svelte-pw49mc"),v(e,"class","vstack space-after svelte-pw49mc")},m(te,J){m(te,e,J),$(e,n),$(n,t),$(t,r),$(r,s),$(s,o),$(t,u),$(t,c),N(h,c,null),$(c,d),$(c,p),ee.m(p,null),$(c,_),$(c,g),$(g,b),$(g,S),$(n,P),$(n,I),$(I,q),$(q,K),$(I,B),$(I,F),H&&H.m(F,null),$(e,Y),$(e,X),N(V,X,null),$(e,C),Z&&Z.m(e,null),G=!0},p(te,[J]){(!G||J&2)&&a!==(a=te[1].name+"")&&se(o,a),(!G||J&1&&l!==(l=Se+"/moves/"+te[0].moveId))&&v(s,"href",l);const ae={};J&32770&&(ae.$$scope={dirty:J,ctx:te}),h.$set(ae),Q===(Q=W(te))&&ee?ee.p(te,J):(ee.d(1),ee=Q(te),ee&&(ee.c(),ee.m(p,null))),(!G||J&1)&&w!==(w=te[0].pp.max+"")&&se(S,w),(!G||J&2)&&z!==(z=te[1].type+"")&&se(K,z),te[1].power!=="none"&&te[1].power!=="varies"?H?H.p(te,J):(H=nr(te),H.c(),H.m(F,null)):H&&(H.d(1),H=null),J&2&&re!==(re=`var(--skin-${te[1].type}-bg)`)&&ke(n,"--bg",re);const me={};J&2&&(me.move=te[1]),V.$set(me),te[0].notes!==void 0&&te[0].notes.length>0?Z?Z.p(te,J):(Z=rr(te),Z.c(),Z.m(e,null)):Z&&(Z.d(1),Z=null)},i(te){G||(E(h.$$.fragment,te),E(V.$$.fragment,te),G=!0)},o(te){T(h.$$.fragment,te),T(V.$$.fragment,te),G=!1},d(te){te&&f(e),D(h),ee.d(),H&&H.d(),D(V),Z&&Z.d()}}}function ra(i,e,n){let t,r,s,a,o;const l=it(),u=S=>(P,I)=>S(I)>S(P)?I:P;let{move:c}=e,{moveData:h}=e,{proficiencyBonus:d}=e,{pokemonType:p}=e,{attributes:_}=e,{editable:g}=e,b=0;const w=S=>{l("update",{value:parseInt(S.target.value??"0")})};return i.$$set=S=>{"move"in S&&n(0,c=S.move),"moveData"in S&&n(1,h=S.moveData),"proficiencyBonus"in S&&n(8,d=S.proficiencyBonus),"pokemonType"in S&&n(9,p=S.pokemonType),"attributes"in S&&n(10,_=S.attributes),"editable"in S&&n(2,g=S.editable)},i.$$.update=()=>{if(i.$$.dirty&1&&n(6,t=c.pp.current),i.$$.dirty&1026&&h.power!=="none"&&h.power!=="varies"){const P=(h.power==="any"?["str","dex","con","int","wis","cha"]:h.power).reduce(u(I=>_[I]));n(11,b=Gt(_[P]))}i.$$.dirty&514&&n(12,r=p.includes(h.type)),i.$$.dirty&2304&&n(5,s=d+b),i.$$.dirty&2304&&n(4,a=8+d+b),i.$$.dirty&6144&&n(3,o=b+(r?b:0))},[c,h,g,o,a,s,t,w,d,p,_,b,r]}class sa extends ce{constructor(e){super(),fe(this,e,ra,na,ue,{move:0,moveData:1,proficiencyBonus:8,pokemonType:9,attributes:10,editable:2})}}function sr(i,e,n){const t=i.slice();t[7]=e[n];const r=t[3].find(function(...a){return i[5](t[7],...a)});return t[8]=r,t}function ir(i){let e,n,t,r;const s=[aa,ia],a=[];function o(l,u){return l[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function ia(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function aa(i){let e,n="Moves",t,r,s,a=pe(i[0].moves),o=[];for(let u=0;u<a.length;u+=1)o[u]=ar(sr(i,a,u));const l=u=>T(o[u],1,1,()=>{o[u]=null});return{c(){e=k("h2"),e.textContent=n,t=A(),r=k("ul");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=y(u,"H2",{"data-svelte-h":!0}),ie(e)!=="svelte-cbzy28"&&(e.textContent=n),t=O(u),r=y(u,"UL",{});var c=j(r);for(let h=0;h<o.length;h+=1)o[h].l(c);c.forEach(f),this.h()},h(){ke(r,"list-style","none"),ke(r,"padding","0")},m(u,c){m(u,e,c),m(u,t,c),m(u,r,c);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(r,null);s=!0},p(u,c){if(c&31){a=pe(u[0].moves);let h;for(h=0;h<a.length;h+=1){const d=sr(u,a,h);o[h]?(o[h].p(d,c),E(o[h],1)):(o[h]=ar(d),o[h].c(),E(o[h],1),o[h].m(r,null))}for(ge(),h=a.length;h<o.length;h+=1)l(h);$e()}},i(u){if(!s){for(let c=0;c<a.length;c+=1)E(o[c]);s=!0}},o(u){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)T(o[c]);s=!1},d(u){u&&(f(e),f(t),f(r)),Ie(o,u)}}}function ar(i){let e,n,t,r;return n=new sa({props:{move:i[7],moveData:i[8],editable:i[1],proficiencyBonus:i[2],attributes:i[0].attributes,pokemonType:i[0].type}}),n.$on("update",function(){vn(i[4](i[7]))&&i[4](i[7]).apply(this,arguments)}),{c(){e=k("li"),L(n.$$.fragment),t=A()},l(s){e=y(s,"LI",{});var a=j(e);R(n.$$.fragment,a),t=O(a),a.forEach(f)},m(s,a){m(s,e,a),N(n,e,null),$(e,t),r=!0},p(s,a){i=s;const o={};a&1&&(o.move=i[7]),a&9&&(o.moveData=i[8]),a&2&&(o.editable=i[1]),a&4&&(o.proficiencyBonus=i[2]),a&1&&(o.attributes=i[0].attributes),a&1&&(o.pokemonType=i[0].type),n.$set(o)},i(s){r||(E(n.$$.fragment,s),r=!0)},o(s){T(n.$$.fragment,s),r=!1},d(s){s&&f(e),D(n)}}}function la(i){let e,n,t=i[0].moves.length>0&&ir(i);return{c(){t&&t.c(),e=ne()},l(r){t&&t.l(r),e=ne()},m(r,s){t&&t.m(r,s),m(r,e,s),n=!0},p(r,[s]){r[0].moves.length>0?t?(t.p(r,s),s&1&&E(t,1)):(t=ir(r),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(ge(),T(t,1,1,()=>{t=null}),$e())},i(r){n||(E(t),n=!0)},o(r){T(t),n=!1},d(r){r&&f(e),t&&t.d(r)}}}function oa(i,e,n){let t,r;De(i,wn,c=>n(3,r=c));const s=it();let{pokemon:a}=e,{editable:o=!1}=e;const l=c=>h=>{s("update",{...c,pp:{current:h.detail.value,max:c.pp.max}})},u=(c,h)=>h.id===c.moveId;return i.$$set=c=>{"pokemon"in c&&n(0,a=c.pokemon),"editable"in c&&n(1,o=c.editable)},i.$$.update=()=>{i.$$.dirty&1&&n(2,t=kn(a.level))},[a,o,t,r,l,u]}class ua extends ce{constructor(e){super(),fe(this,e,oa,la,ue,{pokemon:0,editable:1})}}function lr(i){let e,n,t=i[0].name+"",r,s,a=i[0].description+"",o;return{c(){e=k("p"),n=k("strong"),r=U(t),s=U(": "),o=U(a),this.h()},l(l){e=y(l,"P",{class:!0});var u=j(e);n=y(u,"STRONG",{});var c=j(n);r=M(c,t),c.forEach(f),s=M(u,": "),o=M(u,a),u.forEach(f),this.h()},h(){v(e,"class","svelte-1f7kwjm")},m(l,u){m(l,e,u),$(e,n),$(n,r),$(e,s),$(e,o)},p(l,u){u&1&&t!==(t=l[0].name+"")&&se(r,t),u&1&&a!==(a=l[0].description+"")&&se(o,a)},d(l){l&&f(e)}}}function ca(i){let e,n=i[0]&&lr(i);return{c(){n&&n.c(),e=ne()},l(t){n&&n.l(t),e=ne()},m(t,r){n&&n.m(t,r),m(t,e,r)},p(t,[r]){t[0]?n?n.p(t,r):(n=lr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:x,o:x,d(t){t&&f(e),n&&n.d(t)}}}function fa(i,e,n){let t,{pokemon:r}=e,{species:s}=e;return i.$$set=a=>{"pokemon"in a&&n(1,r=a.pokemon),"species"in a&&n(2,s=a.species)},i.$$.update=()=>{i.$$.dirty&6&&n(0,t=s.abilities.find(a=>a.id===r.ability))},[t,r,s]}class ha extends ce{constructor(e){super(),fe(this,e,fa,ca,ue,{pokemon:1,species:2})}}function or(i,e,n){const t=i.slice();return t[1]=e[n],t}function ur(i){let e,n=i[1]+"",t;return{c(){e=k("p"),t=U(n),this.h()},l(r){e=y(r,"P",{class:!0});var s=j(e);t=M(s,n),s.forEach(f),this.h()},h(){v(e,"class","no-space-last svelte-u86twn")},m(r,s){m(r,e,s),$(e,t)},p(r,s){s&1&&n!==(n=r[1]+"")&&se(t,n)},d(r){r&&f(e)}}}function cr(i){let e,n=i[1].length>0&&ur(i);return{c(){n&&n.c(),e=ne()},l(t){n&&n.l(t),e=ne()},m(t,r){n&&n.m(t,r),m(t,e,r)},p(t,r){t[1].length>0?n?n.p(t,r):(n=ur(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){t&&f(e),n&&n.d(t)}}}function da(i){let e,n="General Notes",t,r,s=pe(i[0].notes.split(`
`)),a=[];for(let o=0;o<s.length;o+=1)a[o]=cr(or(i,s,o));return{c(){e=k("h2"),e.textContent=n,t=A(),r=k("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=y(o,"H2",{"data-svelte-h":!0}),ie(e)!=="svelte-1da4q7t"&&(e.textContent=n),t=O(o),r=y(o,"DIV",{class:!0});var l=j(r);for(let u=0;u<a.length;u+=1)a[u].l(l);l.forEach(f),this.h()},h(){v(r,"class","font-sm svelte-u86twn")},m(o,l){m(o,e,l),m(o,t,l),m(o,r,l);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null)},p(o,[l]){if(l&1){s=pe(o[0].notes.split(`
`));let u;for(u=0;u<s.length;u+=1){const c=or(o,s,u);a[u]?a[u].p(c,l):(a[u]=cr(c),a[u].c(),a[u].m(r,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=s.length}},i:x,o:x,d(o){o&&(f(e),f(t),f(r)),Ie(a,o)}}}function pa(i,e,n){let{pokemon:t}=e;return i.$$set=r=>{"pokemon"in r&&n(0,t=r.pokemon)},[t]}class _a extends ce{constructor(e){super(),fe(this,e,pa,da,ue,{pokemon:0})}}function fr(i){let e,n,t;return n=new ws({props:{media:i[1].media,alt:""}}),{c(){e=k("div"),L(n.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var s=j(e);R(n.$$.fragment,s),s.forEach(f),this.h()},h(){v(e,"class","square-image svelte-1lgjxqm"),ke(e,"--size","clamp(8rem, 12.66vw, 9.5rem)")},m(r,s){m(r,e,s),N(n,e,null),t=!0},p(r,s){const a={};s&2&&(a.media=r[1].media),n.$set(a)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){T(n.$$.fragment,r),t=!1},d(r){r&&f(e),D(n)}}}function ma(i){let e,n;return e=new Js({props:{type:i[0].type}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.type=t[0].type),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function hr(i){let e,n,t,r,s;return r=new _a({props:{pokemon:i[0]}}),{c(){e=k("hr"),n=A(),t=k("section"),L(r.$$.fragment),this.h()},l(a){e=y(a,"HR",{}),n=O(a),t=y(a,"SECTION",{class:!0});var o=j(t);R(r.$$.fragment,o),o.forEach(f),this.h()},h(){v(t,"class","svelte-1lgjxqm")},m(a,o){m(a,e,o),m(a,n,o),m(a,t,o),N(r,t,null),s=!0},p(a,o){const l={};o&1&&(l.pokemon=a[0]),r.$set(l)},i(a){s||(E(r.$$.fragment,a),s=!0)},o(a){T(r.$$.fragment,a),s=!1},d(a){a&&(f(e),f(n),f(t)),D(r)}}}function ga(i){var V;let e,n,t,r,s,a,o,l,u,c,h,d,p,_,g,b,w,S,P,I,q,z,K,B,F,re;r=new Ai({props:{pokemon:i[0],species:i[1]}}),a=new zi({props:{pokemon:i[0],species:i[1],editable:i[2]}}),a.$on("update",i[4]),l=new Wi({props:{pokemon:i[0],species:i[1]}});let Y=i[3]&&fr(i);d=new Gs({props:{attributes:i[0].attributes}}),_=new Qi({props:{pokemon:i[0]}}),b=new Zt({props:{$$slots:{default:[ma]},$$scope:{ctx:i}}}),S=new ha({props:{pokemon:i[0],species:i[1]}}),K=new ua({props:{pokemon:i[0],editable:i[2]}}),K.$on("update",i[5]);let X=((V=i[0].notes)==null?void 0:V.length)>0&&hr(i);return{c(){e=k("section"),n=k("div"),t=k("div"),L(r.$$.fragment),s=A(),L(a.$$.fragment),o=A(),L(l.$$.fragment),u=A(),Y&&Y.c(),c=A(),h=k("section"),L(d.$$.fragment),p=A(),L(_.$$.fragment),g=A(),L(b.$$.fragment),w=A(),L(S.$$.fragment),P=A(),I=k("hr"),q=A(),z=k("section"),L(K.$$.fragment),B=A(),X&&X.c(),F=ne(),this.h()},l(C){e=y(C,"SECTION",{class:!0});var G=j(e);n=y(G,"DIV",{});var W=j(n);t=y(W,"DIV",{});var Q=j(t);R(r.$$.fragment,Q),s=O(Q),R(a.$$.fragment,Q),Q.forEach(f),o=O(W),R(l.$$.fragment,W),W.forEach(f),u=O(G),Y&&Y.l(G),G.forEach(f),c=O(C),h=y(C,"SECTION",{class:!0});var ee=j(h);R(d.$$.fragment,ee),p=O(ee),R(_.$$.fragment,ee),g=O(ee),R(b.$$.fragment,ee),w=O(ee),R(S.$$.fragment,ee),ee.forEach(f),P=O(C),I=y(C,"HR",{}),q=O(C),z=y(C,"SECTION",{class:!0});var H=j(z);R(K.$$.fragment,H),H.forEach(f),B=O(C),X&&X.l(C),F=ne(),this.h()},h(){ke(t,"margin-bottom","0.5em"),ke(n,"flex","1"),ke(n,"width","100%"),v(e,"class","info column lg:row svelte-1lgjxqm"),v(h,"class","stats svelte-1lgjxqm"),v(z,"class","svelte-1lgjxqm")},m(C,G){m(C,e,G),$(e,n),$(n,t),N(r,t,null),$(t,s),N(a,t,null),$(n,o),N(l,n,null),$(e,u),Y&&Y.m(e,null),m(C,c,G),m(C,h,G),N(d,h,null),$(h,p),N(_,h,null),$(h,g),N(b,h,null),$(h,w),N(S,h,null),m(C,P,G),m(C,I,G),m(C,q,G),m(C,z,G),N(K,z,null),m(C,B,G),X&&X.m(C,G),m(C,F,G),re=!0},p(C,[G]){var me;const W={};G&1&&(W.pokemon=C[0]),G&2&&(W.species=C[1]),r.$set(W);const Q={};G&1&&(Q.pokemon=C[0]),G&2&&(Q.species=C[1]),G&4&&(Q.editable=C[2]),a.$set(Q);const ee={};G&1&&(ee.pokemon=C[0]),G&2&&(ee.species=C[1]),l.$set(ee),C[3]?Y?(Y.p(C,G),G&8&&E(Y,1)):(Y=fr(C),Y.c(),E(Y,1),Y.m(e,null)):Y&&(ge(),T(Y,1,1,()=>{Y=null}),$e());const H={};G&1&&(H.attributes=C[0].attributes),d.$set(H);const Z={};G&1&&(Z.pokemon=C[0]),_.$set(Z);const te={};G&129&&(te.$$scope={dirty:G,ctx:C}),b.$set(te);const J={};G&1&&(J.pokemon=C[0]),G&2&&(J.species=C[1]),S.$set(J);const ae={};G&1&&(ae.pokemon=C[0]),G&4&&(ae.editable=C[2]),K.$set(ae),((me=C[0].notes)==null?void 0:me.length)>0?X?(X.p(C,G),G&1&&E(X,1)):(X=hr(C),X.c(),E(X,1),X.m(F.parentNode,F)):X&&(ge(),T(X,1,1,()=>{X=null}),$e())},i(C){re||(E(r.$$.fragment,C),E(a.$$.fragment,C),E(l.$$.fragment,C),E(Y),E(d.$$.fragment,C),E(_.$$.fragment,C),E(b.$$.fragment,C),E(S.$$.fragment,C),E(K.$$.fragment,C),E(X),re=!0)},o(C){T(r.$$.fragment,C),T(a.$$.fragment,C),T(l.$$.fragment,C),T(Y),T(d.$$.fragment,C),T(_.$$.fragment,C),T(b.$$.fragment,C),T(S.$$.fragment,C),T(K.$$.fragment,C),T(X),re=!1},d(C){C&&(f(e),f(c),f(h),f(P),f(I),f(q),f(z),f(B),f(F)),D(r),D(a),D(l),Y&&Y.d(),D(d),D(_),D(b),D(S),D(K),X&&X.d(C)}}}function $a(i,e,n){let t;const r=it();let{pokemon:s}=e,{species:a}=e,{editable:o}=e;const l=c=>{r("update-health",{...s,hp:{current:c.detail.currentHp,max:s.hp.max},hitDice:{current:c.detail.currentHitDice,max:s.hitDice.max}})},u=c=>{r("update-pp",c.detail)};return i.$$set=c=>{"pokemon"in c&&n(0,s=c.pokemon),"species"in c&&n(1,a=c.species),"editable"in c&&n(2,o=c.editable)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=a.media!=null)},[s,a,o,t,l,u]}class va extends ce{constructor(e){super(),fe(this,e,$a,ga,ue,{pokemon:0,species:1,editable:2})}}function ba(i){let e,n,t="Cannot find pokemon",r,s,a,o,l,u,c=i[0].name+"",h,d,p,_,g,b,w,S,P=i[0].name+"",I,q,z;return g=new Ws({}),{c(){e=k("div"),n=k("h1"),n.textContent=t,r=A(),s=k("p"),a=U("No pokemon with id "),o=k("strong"),l=U(i[1]),u=U(" belongs to "),h=U(c),d=U("."),p=A(),_=k("p"),L(g.$$.fragment),b=A(),w=k("p"),S=U("Select one of "),I=U(P),q=U("'s pokemon to view its details."),this.h()},l(K){e=y(K,"DIV",{class:!0});var B=j(e);n=y(B,"H1",{class:!0,"data-svelte-h":!0}),ie(n)!=="svelte-a6ssar"&&(n.textContent=t),r=O(B),s=y(B,"P",{});var F=j(s);a=M(F,"No pokemon with id "),o=y(F,"STRONG",{});var re=j(o);l=M(re,i[1]),re.forEach(f),u=M(F," belongs to "),h=M(F,c),d=M(F,"."),F.forEach(f),p=O(B),_=y(B,"P",{class:!0});var Y=j(_);R(g.$$.fragment,Y),Y.forEach(f),b=O(B),w=y(B,"P",{});var X=j(w);S=M(X,"Select one of "),I=M(X,P),q=M(X,"'s pokemon to view its details."),X.forEach(f),B.forEach(f),this.h()},h(){v(n,"class","large-font space-bottom svelte-47myc3"),v(_,"class","missingno svelte-47myc3"),v(e,"class","centered padded svelte-47myc3")},m(K,B){m(K,e,B),$(e,n),$(e,r),$(e,s),$(s,a),$(s,o),$(o,l),$(s,u),$(s,h),$(s,d),$(e,p),$(e,_),N(g,_,null),$(e,b),$(e,w),$(w,S),$(w,I),$(w,q),z=!0},p(K,[B]){(!z||B&2)&&se(l,K[1]),(!z||B&1)&&c!==(c=K[0].name+"")&&se(h,c),(!z||B&1)&&P!==(P=K[0].name+"")&&se(I,P)},i(K){z||(E(g.$$.fragment,K),z=!0)},o(K){T(g.$$.fragment,K),z=!1},d(K){K&&f(e),D(g)}}}function wa(i,e,n){let{trainer:t}=e,{pokemonId:r}=e;return i.$$set=s=>{"trainer"in s&&n(0,t=s.trainer),"pokemonId"in s&&n(1,r=s.pokemonId)},[t,r]}class ka extends ce{constructor(e){super(),fe(this,e,wa,ba,ue,{trainer:0,pokemonId:1})}}function ya(i){let e,n,t,r;return e=new ze({props:{value:"Cannot find pokemon"}}),t=new ka({props:{trainer:i[0].info,pokemonId:i[1]}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.trainer=s[0].info),a&2&&(o.pokemonId=s[1]),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function Ea(i){let e,n,t;e=new ze({props:{value:(i[2]?`${i[2]} `:"")+i[3].nickname}});const r=i[5].default,s=et(r,i,i[4],null);return{c(){L(e.$$.fragment),n=A(),s&&s.c()},l(a){R(e.$$.fragment,a),n=O(a),s&&s.l(a)},m(a,o){N(e,a,o),m(a,n,o),s&&s.m(a,o),t=!0},p(a,o){const l={};o&12&&(l.value=(a[2]?`${a[2]} `:"")+a[3].nickname),e.$set(l),s&&s.p&&(!t||o&16)&&tt(s,r,a,a[4],t?rt(r,a[4],o,null):nt(a[4]),null)},i(a){t||(E(e.$$.fragment,a),E(s,a),t=!0)},o(a){T(e.$$.fragment,a),T(s,a),t=!1},d(a){a&&f(n),D(e,a),s&&s.d(a)}}}function Ta(i){let e,n,t,r;const s=[Ea,ya],a=[];function o(l,u){return l[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,[u]){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function Sa(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{trainer:a}=e,{id:o}=e,{titlePrefix:l=void 0}=e;return i.$$set=u=>{"trainer"in u&&n(0,a=u.trainer),"id"in u&&n(1,o=u.id),"titlePrefix"in u&&n(2,l=u.titlePrefix),"$$scope"in u&&n(4,s=u.$$scope)},i.$$.update=()=>{i.$$.dirty&3&&n(3,t=a.pokemon.find(u=>u.id===o))},[a,o,l,t,s,r]}class Qt extends ce{constructor(e){super(),fe(this,e,Sa,Ta,ue,{trainer:0,id:1,titlePrefix:2})}}function Ca(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Pa(i){let e,n;return e=new Ve({props:{title:i[2].nickname,$$slots:{"header-extra":[Ra],default:[La]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.title=t[2].nickname),r&572&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function dr(i){let e,n;return e=new je({props:{$$slots:{default:[ja]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&540&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ia(i){let e;return{c(){e=U("Remove")},l(n){e=M(n,"Remove")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function pr(i){let e,n;return e=new we({props:{href:de.trainers(i[3].info.readKey,i[2].id,Te.evolvePokemon),variant:"ghost",$$slots:{default:[Aa]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&12&&(s.href=de.trainers(t[3].info.readKey,t[2].id,Te.evolvePokemon)),r&512&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Aa(i){let e;return{c(){e=U("Evolve")},l(n){e=M(n,"Evolve")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Oa(i){let e;return{c(){e=U("Edit")},l(n){e=M(n,"Edit")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function ja(i){var o,l;let e,n,t,r,s;e=new we({props:{href:de.trainers(i[3].info.readKey,i[2].id,Te.removePokemon),variant:"ghost",$$slots:{default:[Ia]},$$scope:{ctx:i}}});let a=((l=(o=i[4].evolution)==null?void 0:o.to)==null?void 0:l.length)>0&&pr(i);return r=new we({props:{href:de.trainers(i[3].info.readKey,i[2].id,Te.editPokemon),$$slots:{default:[Oa]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),a&&a.c(),t=A(),L(r.$$.fragment)},l(u){R(e.$$.fragment,u),n=O(u),a&&a.l(u),t=O(u),R(r.$$.fragment,u)},m(u,c){N(e,u,c),m(u,n,c),a&&a.m(u,c),m(u,t,c),N(r,u,c),s=!0},p(u,c){var p,_;const h={};c&12&&(h.href=de.trainers(u[3].info.readKey,u[2].id,Te.removePokemon)),c&512&&(h.$$scope={dirty:c,ctx:u}),e.$set(h),((_=(p=u[4].evolution)==null?void 0:p.to)==null?void 0:_.length)>0?a?(a.p(u,c),c&16&&E(a,1)):(a=pr(u),a.c(),E(a,1),a.m(t.parentNode,t)):a&&(ge(),T(a,1,1,()=>{a=null}),$e());const d={};c&12&&(d.href=de.trainers(u[3].info.readKey,u[2].id,Te.editPokemon)),c&512&&(d.$$scope={dirty:c,ctx:u}),r.$set(d)},i(u){s||(E(e.$$.fragment,u),E(a),E(r.$$.fragment,u),s=!0)},o(u){T(e.$$.fragment,u),T(a),T(r.$$.fragment,u),s=!1},d(u){u&&(f(n),f(t)),D(e,u),a&&a.d(u),D(r,u)}}}function La(i){let e,n,t,r;e=new va({props:{pokemon:i[2],species:i[4],editable:i[5]}}),e.$on("update-health",i[6]),e.$on("update-pp",i[7]);let s=i[5]&&dr(i);return{c(){L(e.$$.fragment),n=A(),s&&s.c(),t=ne()},l(a){R(e.$$.fragment,a),n=O(a),s&&s.l(a),t=ne()},m(a,o){N(e,a,o),m(a,n,o),s&&s.m(a,o),m(a,t,o),r=!0},p(a,o){const l={};o&4&&(l.pokemon=a[2]),o&16&&(l.species=a[4]),o&32&&(l.editable=a[5]),e.$set(l),a[5]?s?(s.p(a,o),o&32&&E(s,1)):(s=dr(a),s.c(),E(s,1),s.m(t.parentNode,t)):s&&(ge(),T(s,1,1,()=>{s=null}),$e())},i(a){r||(E(e.$$.fragment,a),E(s),r=!0)},o(a){T(e.$$.fragment,a),T(s),r=!1},d(a){a&&(f(n),f(t)),D(e,a),s&&s.d(a)}}}function Ra(i){let e,n;return e=new xs({props:{slot:"header-extra",type:i[2].type}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.type=t[2].type),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Na(i){let e,n,t,r;const s=[Pa,Ca],a=[];function o(l,u){return l[4]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function Da(i){let e,n;return e=new Qt({props:{trainer:i[3],id:i[1],$$slots:{default:[Na]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&8&&(s.trainer=t[3]),r&2&&(s.id=t[1]),r&572&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ua(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=He(c,_=>n(3,a=_)),c),u;De(i,_t,_=>n(8,u=_)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{id:h}=e;const d=_=>{var g;(g=a.update)==null||g.pokemon(_.detail,{optimistic:!0})},p=_=>{var g;(g=a.update)==null||g.move(_.detail,{optimistic:!0})};return i.$$set=_=>{"trainer"in _&&l(n(0,c=_.trainer)),"id"in _&&n(1,h=_.id)},i.$$.update=()=>{i.$$.dirty&8&&n(5,t=a.update!=null),i.$$.dirty&10&&n(2,r=a.pokemon.find(_=>_.id===h)),i.$$.dirty&260&&n(4,s=u==null?void 0:u.find(_=>_.id===(r==null?void 0:r.pokemonId)))},[c,h,r,a,s,t,d,p,u]}class Ma extends ce{constructor(e){super(),fe(this,e,Ua,Da,ue,{trainer:0,id:1})}}function _r(i){let e,n;return{c(){e=k("img"),this.h()},l(t){e=y(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ln(e.src,n=i[2])||v(e,"src",n),v(e,"alt",i[1]),v(e,"class","svelte-1i9inl9")},m(t,r){m(t,e,r)},p(t,r){r&4&&!Ln(e.src,n=t[2])&&v(e,"src",n),r&2&&v(e,"alt",t[1])},d(t){t&&f(e)}}}function Ba(i){var t;let e,n=((t=i[0])==null?void 0:t.sprite)&&_r(i);return{c(){n&&n.c(),e=ne()},l(r){n&&n.l(r),e=ne()},m(r,s){n&&n.m(r,s),m(r,e,s)},p(r,[s]){var a;(a=r[0])!=null&&a.sprite?n?n.p(r,s):(n=_r(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:x,o:x,d(r){r&&f(e),n&&n.d(r)}}}function Ka(i,e,n){let t,r,{media:s}=e,{alt:a}=e;return i.$$set=o=>{"media"in o&&n(0,s=o.media),"alt"in o&&n(1,a=o.alt)},i.$$.update=()=>{i.$$.dirty&1&&n(3,t=/^http/.test(s==null?void 0:s.sprite)),i.$$.dirty&9&&n(2,r=t?s==null?void 0:s.sprite:`${ei}${s==null?void 0:s.sprite}`)},[s,a,r,t]}class Fa extends ce{constructor(e){super(),fe(this,e,Ka,Ba,ue,{media:0,alt:1})}}function qa(i){var X,V;let e,n,t,r,s,a=i[1].nickname+"",o,l,u,c,h,d,p,_,g,b=i[1].hp.current+"",w,S,P=i[1].hp.max+"",I,q,z,K,B=i[1].level+"",F,re,Y;return t=new Fa({props:{media:(X=i[2])==null?void 0:X.media,alt:(V=i[2])==null?void 0:V.name}}),c=new Ss({props:{gender:i[1].gender}}),p=new un({props:{current:i[1].hp.current,max:i[1].hp.max}}),{c(){e=k("a"),n=k("span"),L(t.$$.fragment),r=A(),s=k("span"),o=U(a),l=A(),u=k("span"),L(c.$$.fragment),h=A(),d=k("span"),L(p.$$.fragment),_=A(),g=k("span"),w=U(b),S=U("/"),I=U(P),q=A(),z=k("span"),K=U("Lv. "),F=U(B),this.h()},l(C){e=y(C,"A",{href:!0,class:!0});var G=j(e);n=y(G,"SPAN",{class:!0});var W=j(n);R(t.$$.fragment,W),W.forEach(f),r=O(G),s=y(G,"SPAN",{});var Q=j(s);o=M(Q,a),Q.forEach(f),l=O(G),u=y(G,"SPAN",{class:!0});var ee=j(u);R(c.$$.fragment,ee),ee.forEach(f),h=O(G),d=y(G,"SPAN",{class:!0});var H=j(d);R(p.$$.fragment,H),H.forEach(f),_=O(G),g=y(G,"SPAN",{});var Z=j(g);w=M(Z,b),S=M(Z,"/"),I=M(Z,P),Z.forEach(f),q=O(G),z=y(G,"SPAN",{class:!0});var te=j(z);K=M(te,"Lv. "),F=M(te,B),te.forEach(f),G.forEach(f),this.h()},h(){v(n,"class","max-height svelte-e7mwnc"),ke(n,"grid-area","sprite"),ke(s,"grid-area","name"),v(u,"class","right away-from-edge flex svelte-e7mwnc"),ke(u,"grid-area","gender"),v(d,"class","away-from-edge svelte-e7mwnc"),ke(d,"grid-area","hpbar"),ke(g,"grid-area","hp"),v(z,"class","right svelte-e7mwnc"),ke(z,"grid-area","lv"),v(e,"href",re=de.trainers(i[0],i[1].id)),v(e,"class","selectable-bubble gridded svelte-e7mwnc")},m(C,G){m(C,e,G),$(e,n),N(t,n,null),$(e,r),$(e,s),$(s,o),$(e,l),$(e,u),N(c,u,null),$(e,h),$(e,d),N(p,d,null),$(e,_),$(e,g),$(g,w),$(g,S),$(g,I),$(e,q),$(e,z),$(z,K),$(z,F),Y=!0},p(C,[G]){var H,Z;const W={};G&4&&(W.media=(H=C[2])==null?void 0:H.media),G&4&&(W.alt=(Z=C[2])==null?void 0:Z.name),t.$set(W),(!Y||G&2)&&a!==(a=C[1].nickname+"")&&se(o,a);const Q={};G&2&&(Q.gender=C[1].gender),c.$set(Q);const ee={};G&2&&(ee.current=C[1].hp.current),G&2&&(ee.max=C[1].hp.max),p.$set(ee),(!Y||G&2)&&b!==(b=C[1].hp.current+"")&&se(w,b),(!Y||G&2)&&P!==(P=C[1].hp.max+"")&&se(I,P),(!Y||G&2)&&B!==(B=C[1].level+"")&&se(F,B),(!Y||G&3&&re!==(re=de.trainers(C[0],C[1].id)))&&v(e,"href",re)},i(C){Y||(E(t.$$.fragment,C),E(c.$$.fragment,C),E(p.$$.fragment,C),Y=!0)},o(C){T(t.$$.fragment,C),T(c.$$.fragment,C),T(p.$$.fragment,C),Y=!1},d(C){C&&f(e),D(t),D(c),D(p)}}}function Ha(i,e,n){let t,r;De(i,_t,o=>n(3,r=o));let{trainer:s}=e,{pokemon:a}=e;return i.$$set=o=>{"trainer"in o&&n(0,s=o.trainer),"pokemon"in o&&n(1,a=o.pokemon)},i.$$.update=()=>{i.$$.dirty&10&&n(2,t=r==null?void 0:r.find(o=>o.id===a.pokemonId))},[s,a,t,r]}class za extends ce{constructor(e){super(),fe(this,e,Ha,qa,ue,{trainer:0,pokemon:1})}}const Va=i=>({}),mr=i=>({}),Ga=i=>({}),gr=i=>({});function Ja(i){let e,n,t,r,s,a,o,l;const u=i[2].link,c=et(u,i,i[1],gr),h=i[2].action,d=et(h,i,i[1],mr);return{c(){e=k("div"),n=k("p"),t=U(i[0]),r=A(),s=k("div"),a=k("p"),c&&c.c(),o=A(),d&&d.c(),this.h()},l(p){e=y(p,"DIV",{class:!0});var _=j(e);n=y(_,"P",{class:!0});var g=j(n);t=M(g,i[0]),g.forEach(f),r=O(_),s=y(_,"DIV",{class:!0});var b=j(s);a=y(b,"P",{class:!0});var w=j(a);c&&c.l(w),w.forEach(f),o=O(b),d&&d.l(b),b.forEach(f),_.forEach(f),this.h()},h(){v(n,"class","large-font space-bottom svelte-15u9ut"),v(a,"class","indent small-font no-space svelte-15u9ut"),v(s,"class","flex-row space-between svelte-15u9ut"),v(e,"class","flex-column space-bottom svelte-15u9ut")},m(p,_){m(p,e,_),$(e,n),$(n,t),$(e,r),$(e,s),$(s,a),c&&c.m(a,null),$(s,o),d&&d.m(s,null),l=!0},p(p,[_]){(!l||_&1)&&se(t,p[0]),c&&c.p&&(!l||_&2)&&tt(c,u,p,p[1],l?rt(u,p[1],_,Ga):nt(p[1]),gr),d&&d.p&&(!l||_&2)&&tt(d,h,p,p[1],l?rt(h,p[1],_,Va):nt(p[1]),mr)},i(p){l||(E(c,p),E(d,p),l=!0)},o(p){T(c,p),T(d,p),l=!1},d(p){p&&f(e),c&&c.d(p),d&&d.d(p)}}}function Wa(i,e,n){let{$$slots:t={},$$scope:r}=e,{title:s}=e;return i.$$set=a=>{"title"in a&&n(0,s=a.title),"$$scope"in a&&n(1,r=a.$$scope)},[s,r,t]}class Ps extends ce{constructor(e){super(),fe(this,e,Wa,Ja,ue,{title:0})}}function $r(i,e,n){const t=i.slice();return t[10]=e[n],t}function Ya(i){let e,n="See Trainer List >";return{c(){e=k("a"),e.textContent=n,this.h()},l(t){e=y(t,"A",{href:!0,class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1hdm44n"&&(e.textContent=n),this.h()},h(){v(e,"href",Se+"/trainers"),v(e,"class","dark-font svelte-19jifka")},m(t,r){m(t,e,r)},p:x,d(t){t&&f(e)}}}function Xa(i){let e,n;return{c(){e=k("a"),n=U("View trainer profile >"),this.h()},l(t){e=y(t,"A",{href:!0,class:!0});var r=j(e);n=M(r,"View trainer profile >"),r.forEach(f),this.h()},h(){v(e,"href",i[4]),v(e,"class","dark-font svelte-19jifka")},m(t,r){m(t,e,r),$(e,n)},p(t,r){r&16&&v(e,"href",t[4])},d(t){t&&f(e)}}}function Za(i){let e;function n(s,a){return s[1]?Xa:Ya}let t=n(i),r=t(i);return{c(){e=k("span"),r.c(),this.h()},l(s){e=y(s,"SPAN",{slot:!0});var a=j(e);r.l(a),a.forEach(f),this.h()},h(){v(e,"slot","link")},m(s,a){m(s,e,a),r.m(e,null)},p(s,a){t===(t=n(s))&&r?r.p(s,a):(r.d(1),r=t(s),r&&(r.c(),r.m(e,null)))},d(s){s&&f(e),r.d()}}}function Qa(i){let e;return{c(){e=U("+ Add Pokemon")},l(n){e=M(n,"+ Add Pokemon")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function xa(i){let e,n,t;return n=new we({props:{href:i[4]+"&action=add-pokemon",$$slots:{default:[Qa]},$$scope:{ctx:i}}}),{c(){e=k("span"),L(n.$$.fragment),this.h()},l(r){e=y(r,"SPAN",{slot:!0});var s=j(e);R(n.$$.fragment,s),s.forEach(f),this.h()},h(){v(e,"slot","action"),ke(e,"visibility",i[6]?"visible":"hidden"),ke(e,"display","flex")},m(r,s){m(r,e,s),N(n,e,null),t=!0},p(r,s){const a={};s&16&&(a.href=r[4]+"&action=add-pokemon"),s&8192&&(a.$$scope={dirty:s,ctx:r}),n.$set(a),s&64&&ke(e,"visibility",r[6]?"visible":"hidden")},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){T(n.$$.fragment,r),t=!1},d(r){r&&f(e),D(n)}}}function vr(i,e){let n,t,r,s;return t=new za({props:{trainer:e[2].info.readKey,pokemon:e[10]}}),{key:i,first:null,c(){n=k("li"),L(t.$$.fragment),r=A(),this.h()},l(a){n=y(a,"LI",{class:!0});var o=j(n);R(t.$$.fragment,o),r=O(o),o.forEach(f),this.h()},h(){v(n,"class","space-after svelte-19jifka"),this.first=n},m(a,o){m(a,n,o),N(t,n,null),$(n,r),s=!0},p(a,o){e=a;const l={};o&4&&(l.trainer=e[2].info.readKey),o&32&&(l.pokemon=e[10]),t.$set(l)},i(a){s||(E(t.$$.fragment,a),s=!0)},o(a){T(t.$$.fragment,a),s=!1},d(a){a&&f(n),D(t)}}}function el(i){let e,n,t,r,s,a,o,l,u,c=[],h=new Map,d;e=new Ps({props:{title:i[2].info.name+"'s Pokemon",$$slots:{action:[xa],link:[Za]},$$scope:{ctx:i}}});function p(w){i[7](w)}let _={id:"filter-pokemon",label:"Search",matched:i[5].length,max:i[2].pokemon.length};i[3]!==void 0&&(_.value=i[3]),r=new ks({props:_}),Ct.push(()=>At(r,"value",p));let g=pe(i[5]);const b=w=>w[10].id;for(let w=0;w<g.length;w+=1){let S=$r(i,g,w),P=b(S);h.set(P,c[w]=vr(P,S))}return{c(){L(e.$$.fragment),n=A(),t=k("div"),L(r.$$.fragment),a=A(),o=k("div"),l=k("div"),u=k("ul");for(let w=0;w<c.length;w+=1)c[w].c();this.h()},l(w){R(e.$$.fragment,w),n=O(w),t=y(w,"DIV",{class:!0});var S=j(t);R(r.$$.fragment,S),S.forEach(f),a=O(w),o=y(w,"DIV",{class:!0});var P=j(o);l=y(P,"DIV",{class:!0});var I=j(l);u=y(I,"UL",{class:!0});var q=j(u);for(let z=0;z<c.length;z+=1)c[z].l(q);q.forEach(f),I.forEach(f),P.forEach(f),this.h()},h(){v(t,"class","space-bottom svelte-19jifka"),v(u,"class","nolist no-space partial-width svelte-19jifka"),v(l,"class","scrollable svelte-19jifka"),v(o,"class","relative svelte-19jifka")},m(w,S){N(e,w,S),m(w,n,S),m(w,t,S),N(r,t,null),m(w,a,S),m(w,o,S),$(o,l),$(l,u);for(let P=0;P<c.length;P+=1)c[P]&&c[P].m(u,null);d=!0},p(w,[S]){const P={};S&4&&(P.title=w[2].info.name+"'s Pokemon"),S&8274&&(P.$$scope={dirty:S,ctx:w}),e.$set(P);const I={};S&32&&(I.matched=w[5].length),S&4&&(I.max=w[2].pokemon.length),!s&&S&8&&(s=!0,I.value=w[3],Pt(()=>s=!1)),r.$set(I),S&36&&(g=pe(w[5]),ge(),c=ys(c,S,b,1,w,g,h,u,Es,vr,null,$r),$e())},i(w){if(!d){E(e.$$.fragment,w),E(r.$$.fragment,w);for(let S=0;S<g.length;S+=1)E(c[S]);d=!0}},o(w){T(e.$$.fragment,w),T(r.$$.fragment,w);for(let S=0;S<c.length;S+=1)T(c[S]);d=!1},d(w){w&&(f(n),f(t),f(a),f(o)),D(e,w),D(r);for(let S=0;S<c.length;S+=1)c[S].d()}}}function tl(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=He(c,g=>n(2,a=g)),c),u;De(i,Bn,g=>n(3,u=g)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{currentPokemon:h}=e;const d=g=>(b,w)=>g(b).localeCompare(g(w)),p=g=>b=>b.nickname.toLocaleLowerCase().includes(g)||b.pokemonId.replace("-"," ").includes(g);function _(g){u=g,Bn.set(u)}return i.$$set=g=>{"trainer"in g&&l(n(0,c=g.trainer)),"currentPokemon"in g&&n(1,h=g.currentPokemon)},i.$$.update=()=>{i.$$.dirty&4&&n(6,t=a.update!=null),i.$$.dirty&12&&n(5,r=a.pokemon.filter(p(u.toLocaleLowerCase())).sort(d(g=>g.nickname))),i.$$.dirty&4&&n(4,s=`${Se}/trainers?id=${a.info.readKey}`)},[c,h,a,u,s,r,t,_]}class nl extends ce{constructor(e){super(),fe(this,e,tl,el,ue,{trainer:0,currentPokemon:1})}}var Qe=(i=>(i.Male="male",i.Female="female",i.None="none",i.Other="other",i))(Qe||{});const fn=["reckless","rash","brave","arrogant","skittish","hasty","energetic","clumsy","apathetic","stubborn","grumpy","relaxed","careful","curious","naughty","cheerful","sassy","innocent","hardy","nimble"],yt=["normal","fighting","flying","poison","ground","rock","bug","ghost","steel","fire","water","grass","electric","psychic","ice","dragon","dark","fairy"],Is=i=>yt.includes(i);class rl{constructor(e){Re(this,"allTrainers",async()=>Promise.all(yn().map(e=>this.supabase.rpc("get_trainer",{_read_key:e}).maybeSingle().then(({data:n,error:t})=>{if(t)throw new Ce("Could not get trainer.",t);if(n)return Er(n)}))).then(e=>e.filter(n=>n!=null)));Re(this,"getTrainer",async e=>{const n=await this.supabase.rpc("get_trainer",{_read_key:e}).maybeSingle().then(({data:s,error:a})=>{if(a)throw new Ce("Could not get trainer.",a);if(s)return Er(s)});if(!n)return;br(e);const t=await this.supabase.rpc("get_pokemon",{_trainer_id:n.id}).select().then(({data:s,error:a})=>{if(a)throw new Ce("Could not trainer's pokemon.",a);return s.map(o=>il(o))}).then(s=>Promise.all(s.map(a=>this.getMoveset(a.id).then(o=>({...a,moves:o}))))),r=sl(e);return{info:n,pokemon:t,writeKey:r}});Re(this,"newTrainer",async e=>{const{data:n,error:t}=await this.supabase.rpc("new_trainer",{_name:e.name,_description:e.description}).single();if(t)throw new Ce("Could not create trainer.",t);return br(n.ret_read_key),kr(n.ret_read_key,n.ret_write_key),{info:{...e,id:n.ret_id,readKey:n.ret_read_key},pokemon:[],writeKey:n.ret_write_key}});Re(this,"updateTrainerInfo",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("update_trainer",{_write_key:e,_name:n.name,_description:n.description}).single();if(r)throw new Ce("Could not update trainer.",r);if(t<=0)throw new Ce("Either this trainer does not exist or you do not have permission to edit them.");return t>0});Re(this,"removeTrainer",async(e,n)=>{yr(n),wr(n)});Re(this,"deleteTrainer",async(e,n,t)=>{const{data:r,error:s}=await this.supabase.rpc("delete_trainer",{_write_key:e,_id:n}).single();if(s)throw new Ce("Could not delete trainer.",s);if(r<=0)throw new Ce("Either this trainer does not exist or you do not have permission to edit them.");return yr(t),wr(t),r>0});Re(this,"updatePokemon",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("update_pokemon",{_write_key:e,_id:parseInt(n.id),_species:n.pokemonId,_nickname:n.nickname,_type:n.type,_nature:n.nature,_level:n.level,_gender:n.gender,_strength:n.attributes.str,_dexterity:n.attributes.dex,_constitution:n.attributes.con,_intelligence:n.attributes.int,_wisdom:n.attributes.wis,_charisma:n.attributes.cha,_ac:n.ac,_hp_cur:n.hp.current,_hp_max:n.hp.max,_hit_dice_cur:n.hitDice.current,_hit_dice_max:n.hitDice.max,_prof_athletics:n.proficiencies.includes("athletics"),_prof_acrobatics:n.proficiencies.includes("acrobatics"),_prof_sleight_of_hand:n.proficiencies.includes("sleight of hand"),_prof_stealth:n.proficiencies.includes("stealth"),_prof_arcana:n.proficiencies.includes("arcana"),_prof_history:n.proficiencies.includes("history"),_prof_investigation:n.proficiencies.includes("investigation"),_prof_nature:n.proficiencies.includes("nature"),_prof_religion:n.proficiencies.includes("religion"),_prof_animal_handling:n.proficiencies.includes("animal handling"),_prof_insight:n.proficiencies.includes("insight"),_prof_medicine:n.proficiencies.includes("medicine"),_prof_perception:n.proficiencies.includes("perception"),_prof_survival:n.proficiencies.includes("survival"),_prof_deception:n.proficiencies.includes("deception"),_prof_intimidation:n.proficiencies.includes("intimidation"),_prof_performance:n.proficiencies.includes("performance"),_prof_persuasion:n.proficiencies.includes("persuasion"),_save_str:n.savingThrows.includes("str"),_save_dex:n.savingThrows.includes("dex"),_save_con:n.savingThrows.includes("con"),_save_int:n.savingThrows.includes("int"),_save_wis:n.savingThrows.includes("wis"),_save_cha:n.savingThrows.includes("cha"),_ability:n.ability,_notes:n.notes}).single();if(r)throw new Ce("Could not update pokemon.",r);if(t<=0)throw new Ce("Either this pokemon does not exist or you do not have permission to edit them.");return t>0});Re(this,"addPokemonToTeam",async(e,n,t)=>{var o,l;const r={trainerId:n,pokemonId:t.id,nickname:t.name,type:t.type,nature:fn[0],level:t.minLevel,gender:Qe.None,attributes:t.attributes,ac:t.ac,ability:(o=t.abilities[0])==null?void 0:o.id,hp:{current:t.hp,max:t.hp},hitDice:{current:t.minLevel,max:t.minLevel},proficiencies:t.skills,savingThrows:t.savingThrows,moves:[],notes:""},{data:s,error:a}=await this.supabase.rpc("add_pokemon",{_write_key:e,_nickname:t.name,_species:t.id,_nature:fn[0],_type:t.type,_level:t.minLevel,_gender:Qe.None,_strength:t.attributes.str,_dexterity:t.attributes.dex,_constitution:t.attributes.con,_intelligence:t.attributes.int,_wisdom:t.attributes.wis,_charisma:t.attributes.cha,_ac:t.ac,_hp_cur:t.hp,_hp_max:t.hp,_hit_dice_cur:t.minLevel,_hit_dice_max:t.minLevel,_prof_athletics:t.skills.includes("athletics"),_prof_acrobatics:t.skills.includes("acrobatics"),_prof_sleight_of_hand:t.skills.includes("sleight of hand"),_prof_stealth:t.skills.includes("stealth"),_prof_arcana:t.skills.includes("arcana"),_prof_history:t.skills.includes("history"),_prof_investigation:t.skills.includes("investigation"),_prof_nature:t.skills.includes("nature"),_prof_religion:t.skills.includes("religion"),_prof_animal_handling:t.skills.includes("animal handling"),_prof_insight:t.skills.includes("insight"),_prof_medicine:t.skills.includes("medicine"),_prof_perception:t.skills.includes("perception"),_prof_survival:t.skills.includes("survival"),_prof_deception:t.skills.includes("deception"),_prof_intimidation:t.skills.includes("intimidation"),_prof_performance:t.skills.includes("performance"),_prof_persuasion:t.skills.includes("persuasion"),_save_str:t.savingThrows.includes("str"),_save_dex:t.savingThrows.includes("dex"),_save_con:t.savingThrows.includes("con"),_save_int:t.savingThrows.includes("int"),_save_wis:t.savingThrows.includes("wis"),_save_cha:t.savingThrows.includes("cha"),_ability:(l=t.abilities[0])==null?void 0:l.id,_notes:""}).single();if(a)throw new Ce("Could not add pokemon.",a);return{...r,id:s.toString()}});Re(this,"removePokemon",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("remove_pokemon",{_write_key:e,_id:n}).single();if(r)throw new Ce("Could not remove pokemon.",r);return t>0});Re(this,"updateMoveset",async(e,n,t)=>{const r=await this.getMoveset(n),s=t.map(l=>l.id),a=r.map(l=>l.id),o=a.filter(l=>!s.includes(l));return await Promise.all(o.map(l=>this.supabase.rpc("remove_move",{_write_key:e,_id:l}).single().then(({data:u,error:c})=>{if(c)throw new Ce("Could not delete move.",c);if(u<=0)throw new Ce("Either this pokemon does not exist or you do not have permission to edit them.");return u>0}))),await Promise.all(t.map(l=>a.includes(l.id)?this.supabase.rpc("update_move",{_write_key:e,_id:l.id,_move_id:l.moveId,_pp_cur:l.pp.current,_pp_max:l.pp.max,_notes:l.notes}).single().then(({data:u,error:c})=>{if(c)throw new Ce("Could not update move.",c);if(u<=0)throw new Ce("Either this pokemon does not exist or you do not have permission to edit them.");return{...l}}):this.supabase.rpc("add_move",{_write_key:e,_pokemon_id:n,_move_id:l.moveId,_pp_cur:l.pp.current,_pp_max:l.pp.max,_notes:l.notes}).single().then(({data:u,error:c})=>{if(c)throw new Ce("Could not add move.",c);return{...l,id:u}})))});Re(this,"updateOneMove",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("update_move",{_write_key:e,_id:n.id,_move_id:n.moveId,_pp_cur:n.pp.current,_pp_max:n.pp.max,_notes:n.notes}).single();if(r)throw new Ce("Could not update pokemon.",r);if(t<=0)throw new Ce("Either this pokemon does not exist or you do not have permission to edit them.");return t>0});Re(this,"verifyWriteKey",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("verify_write_key",{_id:e.id,_write_key:n}).single();if(r)throw new Ce("Could not verify trainer.",r);return t>0&&kr(e.readKey,n),t>0});Re(this,"getMoveset",async e=>{const{data:n,error:t}=await this.supabase.rpc("get_moveset",{_pokemon_id:e}).select();if(t)throw new Ce("Could not get moveset.",t);return(n==null?void 0:n.map(r=>al(r)))??[]});this.supabase=e}}const yn=()=>{var i;return((i=localStorage.getItem("trainers"))==null?void 0:i.split(","))??[]},br=i=>{const e=yn(),n=[...new Set(e.concat(i))];localStorage.setItem("trainers",n.join(","))},wr=i=>{const n=yn().filter(t=>t!==i);localStorage.setItem("trainers",n.join(","))},sl=i=>localStorage.getItem(`write:${i}`),kr=(i,e)=>{localStorage.setItem(`write:${i}`,e)},yr=i=>{localStorage.removeItem(`write:${i}`)},Er=i=>({id:i.id,readKey:i.read_key,name:i.name,description:i.description}),Tr=i=>Object.entries(i).filter(([,e])=>e).map(([e])=>e),il=i=>({id:i.id.toString(),trainerId:i.trainer_id,pokemonId:i.species,nickname:i.nickname,type:i.type.filter(Is),nature:i.nature,level:i.level,gender:i.gender,attributes:{str:i.strength,dex:i.dexterity,con:i.constitution,int:i.intelligence,wis:i.wisdom,cha:i.charisma},ac:i.ac,hp:{current:i.hp_cur,max:i.hp_max},hitDice:{current:i.hit_dice_cur,max:i.hit_dice_max},ability:i.ability,proficiencies:Tr({athletics:i.prof_athletics,acrobatics:i.prof_acrobatics,"sleight of hand":i.prof_sleight_of_hand,stealth:i.prof_stealth,arcana:i.prof_arcana,history:i.prof_history,investigation:i.prof_investigation,nature:i.prof_nature,religion:i.prof_religion,"animal handling":i.prof_animal_handling,insight:i.prof_insight,medicine:i.prof_medicine,perception:i.prof_perception,survival:i.prof_survival,deception:i.prof_deception,intimidation:i.prof_intimidation,performance:i.prof_performance,persuasion:i.prof_persuasion}),savingThrows:Tr({str:i.save_str,dex:i.save_dex,con:i.save_con,int:i.save_int,wis:i.save_wis,cha:i.save_cha}),moves:[],notes:i.notes}),al=i=>({id:i.id.toString(),moveId:i.move_id,pp:{current:i.pp_cur,max:i.pp_max},notes:i.notes}),ll="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxvZ25jYmpqZm1udmJmcmpkeG1nIiwicm9sZSI6ImFub24iLCJpYXQiOjE2Njk1ODY2MzEsImV4cCI6MTk4NTE2MjYzMX0.RXw9pfN-4qOR2AbqPoM6GMzjDGRwYnClF9LEiI2VE5k",ol="https://logncbjjfmnvbfrjdxmg.supabase.co",ul=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url).then(({default:t})=>t(...n)):e=fetch,(...n)=>e(...n)};class En extends Error{constructor(e,n="FunctionsError",t){super(e),this.name=n,this.context=t}}class cl extends En{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fl extends En{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class hl extends En{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hn;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(hn||(hn={}));var dl=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(h){a(h)}}function l(c){try{u(t.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};class pl{constructor(e,{headers:n={},customFetch:t,region:r=hn.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=ul(t)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var t;return dl(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:a}=n;let o={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:u}).catch(_=>{throw new cl(_)}),h=c.headers.get("x-relay-error");if(h&&h==="true")throw new fl(c);if(!c.ok)throw new hl(c);let d=((t=c.headers.get("Content-Type"))!==null&&t!==void 0?t:"text/plain").split(";")[0].trim(),p;return d==="application/json"?p=yield c.json():d==="application/octet-stream"?p=yield c.blob():d==="text/event-stream"?p=c:d==="multipart/form-data"?p=yield c.formData():p=yield c.text(),{data:p,error:null}}catch(r){return{data:null,error:r}}})}}var _l=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jt=_l();const ml=jt.fetch,Tn=jt.fetch.bind(jt),As=jt.Headers,gl=jt.Request,$l=jt.Response,qt=Object.freeze(Object.defineProperty({__proto__:null,Headers:As,Request:gl,Response:$l,default:Tn,fetch:ml},Symbol.toStringTag,{value:"Module"}));class vl extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class bl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Tn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const t=this.fetch;let r=t(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let u=null,c=null,h=null,d=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const w=await s.text();w===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=w:c=JSON.parse(w))}const g=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&b&&b.length>1&&(h=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,h=null,d=406,p="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const g=await s.text();try{u=JSON.parse(g),Array.isArray(u)&&s.status===404&&(c=[],u=null,d=200,p="OK")}catch{s.status===404&&g===""?(d=204,p="No Content"):u={message:g}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,d=200,p="OK"),u&&this.shouldThrowOnError)throw new vl(u)}return{error:u,data:c,count:h,status:d,statusText:p}});return this.shouldThrowOnError||(r=r.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,n)}}class wl extends bl{select(e){let n=!1;const t=(e??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",t),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:t,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:t=n}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,n,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:t=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,n?"verbose":null,t?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Et extends wl{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const t=Array.from(new Set(n)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${t})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:t,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=t===void 0?"":`(${t})`;return this.url.searchParams.append(e,`${s}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,t])=>{this.url.searchParams.append(n,`eq.${t}`)}),this}not(e,n,t){return this.url.searchParams.append(e,`not.${n}.${t}`),this}or(e,{foreignTable:n,referencedTable:t=n}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,n,t){return this.url.searchParams.append(e,`${n}.${t}`),this}}class kl{constructor(e,{headers:n={},schema:t,fetch:r}){this.url=e,this.headers=n,this.schema=t,this.fetch=r}select(e,{head:n=!1,count:t}={}){const r=n?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),t&&(this.headers.Prefer=`count=${t}`),new Et({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:t=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),t||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Et({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:t=!1,count:r,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${t?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Et({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const t="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new Et({method:t,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new Et({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const yl="1.15.2",El={"X-Client-Info":`postgrest-js/${yl}`};class Sn{constructor(e,{headers:n={},schema:t,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},El),n),this.schemaName=t,this.fetch=r}from(e){const n=new URL(`${this.url}/${e}`);return new kl(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Sn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:t=!1,get:r=!1,count:s}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;t||r?(a=t?"HEAD":"GET",Object.entries(n).filter(([c,h])=>h!==void 0).map(([c,h])=>[c,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([c,h])=>{o.searchParams.append(c,h)})):(a="POST",l=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new Et({method:a,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}const Tl="2.9.5",Sl={"X-Client-Info":`realtime-js/${Tl}`},Cl="1.0.0",Os=1e4,Pl=1e3;var Tt;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Tt||(Tt={}));var Me;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Me||(Me={}));var We;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(We||(We={}));var dn;(function(i){i.websocket="websocket"})(dn||(dn={}));var pt;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(pt||(pt={}));class js{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Il{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),t=new TextDecoder;return this._decodeBroadcast(e,n,t)}_decodeBroadcast(e,n,t){const r=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=t.decode(e.slice(a,a+r));a=a+r;const l=t.decode(e.slice(a,a+s));a=a+s;const u=JSON.parse(t.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class tn{constructor(e,n,t={},r=Os){this.channel=e,this.event=n,this.payload=t,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var t;return this._hasReceived(e)&&n((t=this.receivedResp)===null||t===void 0?void 0:t.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(t=>t.status===e).forEach(t=>t.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Sr;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Sr||(Sr={}));class Ut{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const t=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ut.syncState(this.state,r,s,a),this.pendingDiffs.forEach(l=>{this.state=Ut.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(t.diff,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Ut.syncDiff(this.state,r,s,a),o())}),this.onJoin((r,s,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:a})}),this.onLeave((r,s,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,t,r){const s=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(s,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const h=s[u];if(h){const d=c.map(b=>b.presence_ref),p=h.map(b=>b.presence_ref),_=c.filter(b=>p.indexOf(b.presence_ref)<0),g=h.filter(b=>d.indexOf(b.presence_ref)<0);_.length>0&&(o[u]=_),g.length>0&&(l[u]=g)}else o[u]=c}),this.syncDiff(s,{joins:o,leaves:l},t,r)}static syncDiff(e,n,t,r){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return t||(t=()=>{}),r||(r=()=>{}),this.map(s,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const h=e[o].map(p=>p.presence_ref),d=c.filter(p=>h.indexOf(p.presence_ref)<0);e[o].unshift(...d)}t(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(h=>h.presence_ref);u=u.filter(h=>c.indexOf(h.presence_ref)<0),e[o]=u,r(o,u,l),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(t=>n(t,e[t]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,t)=>{const r=e[t];return"metas"in r?n[t]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[t]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ee;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ee||(Ee={}));const Cr=(i,e,n={})=>{var t;const r=(t=n.skipTypes)!==null&&t!==void 0?t:[];return Object.keys(e).reduce((s,a)=>(s[a]=Al(a,i,e,r),s),{})},Al=(i,e,n,t)=>{const r=e.find(o=>o.name===i),s=r==null?void 0:r.type,a=n[i];return s&&!t.includes(s)?Ls(s,a):pn(a)},Ls=(i,e)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return Rl(e,n)}switch(i){case Ee.bool:return Ol(e);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return jl(e);case Ee.json:case Ee.jsonb:return Ll(e);case Ee.timestamp:return Nl(e);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return pn(e);default:return pn(e)}},pn=i=>i,Ol=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},jl=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},Ll=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},Rl=(i,e)=>{if(typeof i!="string")return i;const n=i.length-1,t=i[n];if(i[0]==="{"&&t==="}"){let s;const a=i.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>Ls(e,o))}return i},Nl=i=>typeof i=="string"?i.replace(" ","T"):i;var Pr;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Pr||(Pr={}));var Ir;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes"})(Ir||(Ir={}));var Ar;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ar||(Ar={}));class Cn{constructor(e,n={config:{}},t){this.topic=e,this.params=n,this.socket=t,this.bindings={},this.state=Me.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},n.config),this.timeout=this.socket.timeout,this.joinPush=new tn(this,We.join,this.params,this.timeout),this.rejoinTimer=new js(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Me.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this._on(We.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new Ut(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,n=this.timeout){var t,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const o={},l={broadcast:s,presence:a,postgres_changes:(r=(t=this.bindings.postgres_changes)===null||t===void 0?void 0:t.map(u=>u.filter))!==null&&r!==void 0?r:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,d=(c=h==null?void 0:h.length)!==null&&c!==void 0?c:0,p=[];for(let _=0;_<d;_++){const g=h[_],{filter:{event:b,schema:w,table:S,filter:P}}=g,I=u&&u[_];if(I&&I.event===b&&I.schema===w&&I.table===S&&I.filter===P)p.push(Object.assign(Object.assign({},g),{id:I.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,t){return this._on(e,n,t)}async send(e,n={}){var t,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,o={method:"POST",headers:{apikey:(t=this.socket.apiKey)!==null&&t!==void 0?t:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=n.timeout)!==null&&r!==void 0?r:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Me.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(We.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(t=>{const r=new tn(this,We.leave,{},e);r.receive("ok",()=>{n(),t("ok")}).receive("timeout",()=>{n(),t("timed out")}).receive("error",()=>{t("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,n,t){const r=new AbortController,s=setTimeout(()=>r.abort(),t),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(s),a}_push(e,n,t=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new tn(this,e,n,t);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,n,t){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,t){var r,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=We;if(t&&[o,l,u,c].indexOf(a)>=0&&t!==this._joinRef())return;let d=this._onMessage(a,n,t);if(n&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var _,g,b;return((_=p.filter)===null||_===void 0?void 0:_.event)==="*"||((b=(g=p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(p=>p.callback(d,t)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var _,g,b,w,S,P;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const I=p.id,q=(_=p.filter)===null||_===void 0?void 0:_.event;return I&&((g=n.ids)===null||g===void 0?void 0:g.includes(I))&&(q==="*"||(q==null?void 0:q.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const I=(S=(w=p==null?void 0:p.filter)===null||w===void 0?void 0:w.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return I==="*"||I===((P=n==null?void 0:n.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof d=="object"&&"ids"in d){const _=d.data,{schema:g,table:b,commit_timestamp:w,type:S,errors:P}=_;d=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:w,eventType:S,new:{},old:{},errors:P}),this._getPayloadRecords(_))}p.callback(d,t)})}_isClosed(){return this.state===Me.closed}_isJoined(){return this.state===Me.joined}_isJoining(){return this.state===Me.joining}_isLeaving(){return this.state===Me.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,t){const r=e.toLocaleLowerCase(),s={type:r,filter:n,callback:t};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,n){const t=e.toLocaleLowerCase();return this.bindings[t]=this.bindings[t].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===t&&Cn.isEqual(r.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const t in e)if(e[t]!==n[t])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(We.close,{},e)}_onError(e){this._on(We.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Me.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Cr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Cr(e.columns,e.old_record)),n}}const Dl=()=>{},Ul=typeof WebSocket<"u";class Ml{constructor(e,n){var t;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Sl,this.params={},this.timeout=Os,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Dl,this.conn=null,this.sendBuffer=[],this.serializer=new Il,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${dn.websocket}`,n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(t=n==null?void 0:n.params)===null||t===void 0?void 0:t.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,a)=>a(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new js(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Ul){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Bl(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Ot(()=>import("../chunks/browser.BImCA5dO.js").then(e=>e.b),[],import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,t){this.logger(e,n,t)}connectionState(){switch(this.conn&&this.conn.readyState){case Tt.connecting:return pt.Connecting;case Tt.open:return pt.Open;case Tt.closing:return pt.Closing;default:return pt.Closed}}isConnected(){return this.connectionState()===pt.Open}channel(e,n={config:{}}){const t=new Cn(`realtime:${e}`,n,this);return this.channels.push(t),t}push(e){const{topic:n,event:t,payload:r,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${t} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(We.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Cl}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:t,event:r,payload:s,ref:a}=n;(a&&a===this.pendingHeartbeatRef||r===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${r} ${a&&"("+a+")"||""}`,s),this.channels.filter(o=>o._isMember(t)).forEach(o=>o._trigger(r,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(We.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const t=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${t}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Pl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Bl{constructor(e,n,t){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Tt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=t.close}}class Pn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Oe(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Kl extends Pn{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Or extends Pn{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Fl=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(h){a(h)}}function l(c){try{u(t.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};const Rs=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url).then(({default:t})=>t(...n)):e=fetch,(...n)=>e(...n)},ql=()=>Fl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url)).Response:Response});var Rt=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(h){a(h)}}function l(c){try{u(t.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};const nn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Hl=(i,e)=>Rt(void 0,void 0,void 0,function*(){const n=yield ql();i instanceof n?i.json().then(t=>{e(new Kl(nn(t),i.status||500))}).catch(t=>{e(new Or(nn(t),t))}):e(new Or(nn(i),i))}),zl=(i,e,n,t)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(t),Object.assign(Object.assign({},r),n))};function xt(i,e,n,t,r,s){return Rt(this,void 0,void 0,function*(){return new Promise((a,o)=>{i(n,zl(e,t,r,s)).then(l=>{if(!l.ok)throw l;return t!=null&&t.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>Hl(l,o))})})}function _n(i,e,n,t){return Rt(this,void 0,void 0,function*(){return xt(i,"GET",e,n,t)})}function ut(i,e,n,t,r){return Rt(this,void 0,void 0,function*(){return xt(i,"POST",e,t,r,n)})}function Vl(i,e,n,t,r){return Rt(this,void 0,void 0,function*(){return xt(i,"PUT",e,t,r,n)})}function Ns(i,e,n,t,r){return Rt(this,void 0,void 0,function*(){return xt(i,"DELETE",e,t,r,n)})}var Fe=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(h){a(h)}}function l(c){try{u(t.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};const Gl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},jr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Jl{constructor(e,n={},t,r){this.url=e,this.headers=n,this.bucketId=t,this.fetch=Rs(r)}uploadOrUpdate(e,n,t,r){return Fe(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},jr),r),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&t instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),s.append("",t)):typeof FormData<"u"&&t instanceof FormData?(s=t,s.append("cacheControl",a.cacheControl)):(s=t,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),h=yield c.json();return c.ok?{data:{path:l,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}upload(e,n,t){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,t)})}uploadToSignedUrl(e,n,t,r){return Fe(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:jr.upsert},r),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.append("cacheControl",u.cacheControl)):(l=t,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const h=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),d=yield h.json();return h.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(Oe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return Fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const t=yield ut(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:this.headers}),r=new URL(this.url+t.url),s=r.searchParams.get("token");if(!s)throw new Pn("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:s},error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}update(e,n,t){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,t)})}move(e,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n},{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}copy(e,n){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield ut(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n},{headers:this.headers})).Key},error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}createSignedUrl(e,n,t){return Fe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield ut(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},t!=null&&t.transform?{transform:t.transform}:{}),{headers:this.headers});const a=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,t){return Fe(this,void 0,void 0,function*(){try{const r=yield ut(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}download(e,n){return Fe(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield _n(this.fetch,`${this.url}/${r}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Oe(o))return{data:null,error:o};throw o}})}getPublicUrl(e,n){const t=this._getFinalPath(e),r=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&r.push(s);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${t}${u}`)}}}remove(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}list(e,n,t){return Fe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Gl),n),{prefix:e||""});return{data:yield ut(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Wl="2.5.5",Yl={"X-Client-Info":`storage-js/${Wl}`};var bt=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(h){a(h)}}function l(c){try{u(t.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};class Xl{constructor(e,n={},t){this.url=e,this.headers=Object.assign(Object.assign({},Yl),n),this.fetch=Rs(t)}listBuckets(){return bt(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Oe(e))return{data:null,error:e};throw e}})}getBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return bt(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}updateBucket(e,n){return bt(this,void 0,void 0,function*(){try{return{data:yield Vl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}emptyBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield ut(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}}class Zl extends Xl{constructor(e,n={},t){super(e,n,t)}from(e){return new Jl(this.url,this.headers,e,this.fetch)}}const Ql="2.43.4";let Dt="";typeof Deno<"u"?Dt="deno":typeof document<"u"?Dt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dt="react-native":Dt="node";const xl={"X-Client-Info":`supabase-js-${Dt}/${Ql}`},eo={headers:xl},to={schema:"public"},no={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ro={};var so=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(h){a(h)}}function l(c){try{u(t.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};const io=i=>{let e;return i?e=i:typeof fetch>"u"?e=Tn:e=fetch,(...n)=>e(...n)},ao=()=>typeof Headers>"u"?As:Headers,lo=(i,e,n)=>{const t=io(n),r=ao();return(s,a)=>so(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:i;let u=new r(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",i),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),t(s,Object.assign(Object.assign({},a),{headers:u}))})};function oo(i){return i.replace(/\/$/,"")}function uo(i,e){const{db:n,auth:t,realtime:r,global:s}=i,{db:a,auth:o,realtime:l,global:u}=e;return{db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),t),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},u),s)}}const Ds="2.64.2",co="http://localhost:9999",fo="supabase.auth.token",ho={"X-Client-Info":`gotrue-js/${Ds}`},Lr=10,mn="X-Supabase-Api-Version",Us={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function po(i){return Math.round(Date.now()/1e3)+i}function _o(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const Je=()=>typeof document<"u",ft={tested:!1,writable:!1},Mt=()=>{if(!Je())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ft.tested)return ft.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),ft.tested=!0,ft.writable=!0}catch{ft.tested=!0,ft.writable=!1}return ft.writable};function rn(i){const e={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return n.searchParams.forEach((t,r)=>{e[r]=t}),e}const Ms=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url).then(({default:t})=>t(...n)):e=fetch,(...n)=>e(...n)},mo=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Bs=async(i,e,n)=>{await i.setItem(e,JSON.stringify(n))},Ht=async(i,e)=>{const n=await i.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},sn=async(i,e)=>{await i.removeItem(e)};function go(i){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",t,r,s,a,o,l,u,c=0;for(i=i.replace("-","+").replace("_","/");c<i.length;)a=e.indexOf(i.charAt(c++)),o=e.indexOf(i.charAt(c++)),l=e.indexOf(i.charAt(c++)),u=e.indexOf(i.charAt(c++)),t=a<<2|o>>4,r=(o&15)<<4|l>>2,s=(l&3)<<6|u,n=n+String.fromCharCode(t),l!=64&&r!=0&&(n=n+String.fromCharCode(r)),u!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class en{constructor(){this.promise=new en.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}en.promiseConstructor=Promise;function Rr(i){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=i.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const t=n[1];return JSON.parse(go(t))}async function $o(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function vo(i,e){return new Promise((t,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await i(s);if(!e(s,null,a)){t(a);return}}catch(a){if(!e(s,a)){r(a);return}}})()})}function bo(i){return("0"+i.toString(16)).substr(-2)}function wo(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=n.length;let r="";for(let s=0;s<56;s++)r+=n.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,bo).join("")}async function ko(i){const n=new TextEncoder().encode(i),t=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(t);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}function yo(i){return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Eo(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await ko(i);return yo(n)}async function wt(i,e,n=!1){const t=wo();let r=t;n&&(r+="/PASSWORD_RECOVERY"),await Bs(i,`${e}-code-verifier`,r);const s=await Eo(t);return[s,t===s?"plain":"s256"]}const To=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function So(i){const e=i.headers.get(mn);if(!e||!e.match(To))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class In extends Error{constructor(e,n,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=t}}function _e(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Co extends In{constructor(e,n,t){super(e,n,t),this.name="AuthApiError",this.status=n,this.code=t}}function Po(i){return _e(i)&&i.name==="AuthApiError"}class Ks extends In{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class mt extends In{constructor(e,n,t,r){super(e,t,r),this.name=n,this.status=t}}class ht extends mt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class an extends mt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zt extends mt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vt extends mt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Nr extends mt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gn extends mt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ln(i){return _e(i)&&i.name==="AuthRetryableFetchError"}class Dr extends mt{constructor(e,n,t){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=t}}var Io=function(i,e){var n={};for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(i);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(i,t[r])&&(n[t[r]]=i[t[r]]);return n};const dt=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Ao=[502,503,504];async function Ur(i){var e;if(!mo(i))throw new gn(dt(i),0);if(Ao.includes(i.status))throw new gn(dt(i),i.status);let n;try{n=await i.json()}catch(s){throw new Ks(dt(s),s)}let t;const r=So(i);if(r&&r.getTime()>=Us["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?t=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(t=n.error_code),t){if(t==="weak_password")throw new Dr(dt(n),i.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Dr(dt(n),i.status,n.weak_password.reasons);throw new Co(dt(n),i.status||500,t)}const Oo=(i,e,n,t)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(t),Object.assign(Object.assign({},r),n))};async function be(i,e,n,t){var r;const s=Object.assign({},t==null?void 0:t.headers);s[mn]||(s[mn]=Us["2024-01-01"].name),t!=null&&t.jwt&&(s.Authorization=`Bearer ${t.jwt}`);const a=(r=t==null?void 0:t.query)!==null&&r!==void 0?r:{};t!=null&&t.redirectTo&&(a.redirect_to=t.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await jo(i,e,n+o,{headers:s,noResolveJson:t==null?void 0:t.noResolveJson},{},t==null?void 0:t.body);return t!=null&&t.xform?t==null?void 0:t.xform(l):{data:Object.assign({},l),error:null}}async function jo(i,e,n,t,r,s){const a=Oo(e,t,r,s);let o;try{o=await i(n,Object.assign({},a))}catch(l){throw console.error(l),new gn(dt(l),0)}if(o.ok||await Ur(o),t!=null&&t.noResolveJson)return o;try{return await o.json()}catch(l){await Ur(l)}}function ot(i){var e;let n=null;Do(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=po(i.expires_in)));const t=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:n,user:t},error:null}}function Mr(i){const e=ot(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,t)=>n&&typeof t=="string",!0)&&(e.data.weak_password=i.weak_password),e}function ct(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function Lo(i){return{data:i,error:null}}function Ro(i){const{action_link:e,email_otp:n,hashed_token:t,redirect_to:r,verification_type:s}=i,a=Io(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:t,redirect_to:r,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function No(i){return i}function Do(i){return i.access_token&&i.refresh_token&&i.expires_in}var Uo=function(i,e){var n={};for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(i);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(i,t[r])&&(n[t[r]]=i[t[r]]);return n};class Mo{constructor({url:e="",headers:n={},fetch:t}){this.url=e,this.headers=n,this.fetch=Ms(t),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(_e(t))return{data:null,error:t};throw t}}async inviteUserByEmail(e,n={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ct})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}}async generateLink(e){try{const{options:n}=e,t=Uo(e,["options"]),r=Object.assign(Object.assign({},t),n);return"newEmail"in t&&(r.new_email=t==null?void 0:t.newEmail,delete r.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Ro,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(_e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ct})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,t,r,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(t=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&t!==void 0?t:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:No});if(c.error)throw c.error;const h=await c.json(),d=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(_=>{const g=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(_.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},h),u),error:null}}catch(u){if(_e(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ct})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ct})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}}async deleteUser(e,n=!1){try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ct})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}}async _listFactors(e){try{const{data:n,error:t}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:t}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}}const Bo={getItem:i=>Mt()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{Mt()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{Mt()&&globalThis.localStorage.removeItem(i)}};function Br(i={}){return{getItem:e=>i[e]||null,setItem:(e,n)=>{i[e]=n},removeItem:e=>{delete i[e]}}}function Ko(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const kt={debug:!!(globalThis&&Mt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Fs extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Fo extends Fs{}async function qo(i,e,n){kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const t=new globalThis.AbortController;return e>0&&setTimeout(()=>{t.abort(),kt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:t.signal},async r=>{if(r){kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,r.name);try{return await n()}finally{kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,r.name)}}else{if(e===0)throw kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Fo(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(kt.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}Ko();const Ho={url:co,storageKey:fo,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ho,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Nt=30*1e3,Kr=3;async function Fr(i,e,n){return await n()}class Ft{constructor(e){var n,t;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ft.nextInstanceID,Ft.nextInstanceID+=1,this.instanceID>0&&Je()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ho),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Mo({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ms(r.fetch),this.lock=r.lock||Fr,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Je()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=qo:this.lock=Fr,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Mt()?this.storage=Bo:(this.memoryStorage={},this.storage=Br(this.memoryStorage)):(this.memoryStorage={},this.storage=Br(this.memoryStorage)),Je()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Ds}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=Je()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:t}=await this._getSessionFromURL(e);if(t)return this._debug("#_initialize()","error detecting session from URL",t),(t==null?void 0:t.message)==="Identity is already linked"||(t==null?void 0:t.message)==="Identity is already linked to another user"?{error:t}:(await this._removeSession(),{error:t});const{session:r,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",r,"redirect type",s),await this._saveSession(r),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return _e(e)?{error:e}:{error:new Ks("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,t,r;try{await this._removeSession();const s=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(t=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:ot}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,t,r;try{await this._removeSession();let s;if("email"in e){const{email:c,password:h,options:d}=e;let p=null,_=null;this.flowType==="pkce"&&([p,_]=await wt(this.storage,this.storageKey)),s=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:h,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:_},xform:ot})}else if("phone"in e){const{phone:c,password:h,options:d}=e;s=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:h,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},channel:(r=d==null?void 0:d.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:ot})}else throw new zt("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(_e(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let n;if("email"in e){const{email:s,password:a,options:o}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mr})}else if("phone"in e){const{phone:s,password:a,options:o}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mr})}else throw new zt("You must provide either an email or phone number and a password");const{data:t,error:r}=n;return r?{data:{user:null,session:null},error:r}:!t||!t.session||!t.user?{data:{user:null,session:null},error:new an}:(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({user:t.user,session:t.session},t.weak_password?{weakPassword:t.weak_password}:null),error:r})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,t,r,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(t=e.options)===null||t===void 0?void 0:t.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Ht(this.storage,`${this.storageKey}-code-verifier`),[t,r]=(n??"").split("/"),{data:s,error:a}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:ot});return await sn(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new an}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:n,provider:t,token:r,access_token:s,nonce:a}=e,o=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:t,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ot}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new an}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,t,r,s,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await wt(this.storage,this.storageKey));const{error:h}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(t=l==null?void 0:l.shouldCreateUser)!==null&&t!==void 0?t:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new zt("You must provide either an email or phone number.")}catch(o){if(_e(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,t;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let r,s;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(t=e.options)===null||t===void 0?void 0:t.captchaToken);const{data:a,error:o}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:ot});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var n,t,r;try{await this._removeSession();let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await wt(this.storage,this.storageKey)),await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(t=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&t!==void 0?t:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:Lo})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:t}=e;if(t)throw t;if(!n)throw new ht;const{error:r}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(_e(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const n=`${this.url}/resend`;if("email"in e){const{email:t,type:r,options:s}=e,{error:a}=await be(this.fetch,"POST",n,{headers:this.headers,body:{email:t,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:t,type:r,options:s}=e,{data:a,error:o}=await be(this.fetch,"POST",n,{headers:this.headers,body:{phone:t,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new zt("You must provide either an email or phone number and a type")}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const t=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await t,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const t=n();for(this.pendingInLock.push((async()=>{try{await t}catch{}})()),await t;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await t}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t){if(this.storage.isServer){const a=this.suppressGetSessionWarning;e=new Proxy(e,{get(l,u,c){return!a&&u==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(l,u,c)}})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ct}):await this._useSession(async n=>{var t,r,s;const{data:a,error:o}=n;if(o)throw o;return!(!((t=a.session)===null||t===void 0)&&t.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ht}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:ct})})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async t=>{const{data:r,error:s}=t;if(s)throw s;if(!r.session)throw new ht;const a=r.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await wt(this.storage,this.storageKey));const{data:u,error:c}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:ct});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(t){if(_e(t))return{data:{user:null},error:t};throw t}}_decodeJWT(e){return Rr(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ht;const n=Date.now()/1e3;let t=n,r=!0,s=null;const a=Rr(e.access_token);if(a.exp&&(t=a.exp,r=t<=n),r){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:t-n,expires_at:t},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(_e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var t;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(t=a.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new ht;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!Je())throw new Vt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Vt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Nr("Not a valid PKCE flow url.");const n=rn(window.location.href);if(e){if(!n.code)throw new Nr("No code detected.");const{data:S,error:P}=await this._exchangeCodeForSession(n.code);if(P)throw P;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:S.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Vt(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:t,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=n;if(!s||!o||!a||!u)throw new Vt("No session defined in URL");const c=Math.round(Date.now()/1e3),h=parseInt(o);let d=c+h;l&&(d=parseInt(l));const p=d-c;p*1e3<=Nt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const _=d-h;c-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,d,c):c-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",_,d,c);const{data:g,error:b}=await this._getUser(s);if(b)throw b;const w={provider_token:t,provider_refresh_token:r,access_token:s,expires_in:h,expires_at:d,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:w,redirectType:n.type},error:null}}catch(n){if(_e(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=rn(window.location.href);return!!(Je()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=rn(window.location.href),n=await Ht(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var t;const{data:r,error:s}=n;if(s)return{error:s};const a=(t=r.session)===null||t===void 0?void 0:t.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Po(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await sn(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const n=_o(),t={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,t),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:t}}}async _emitInitialSession(e){return await this._useSession(async n=>{var t,r;try{const{data:{session:s},error:a}=n;if(a)throw a;await((t=this.stateChangeEmitters.get(e))===null||t===void 0?void 0:t.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let t=null,r=null;this.flowType==="pkce"&&([t,r]=await wt(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:t,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(_e(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:t}=await this.getUser();if(t)throw t;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:t,error:r}=await this._useSession(async s=>{var a,o,l,u,c;const{data:h,error:d}=s;if(d)throw d;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=h.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(r)throw r;return Je()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(t==null?void 0:t.url),{data:{provider:e.provider,url:t==null?void 0:t.url},error:null}}catch(t){if(_e(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var t,r;const{data:s,error:a}=n;if(a)throw a;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const t=Date.now();return await vo(async r=>(r>0&&await $o(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ot})),(r,s)=>{const a=200*Math.pow(2,r);return s&&ln(s)&&Date.now()+a-t<Nt})}catch(t){if(this._debug(n,"error",t),_e(t))return{data:{session:null,user:null},error:t};throw t}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const t=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",t),Je()&&!n.skipBrowserRedirect&&window.location.assign(t),{data:{provider:e,url:t},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const t=await Ht(this.storage,this.storageKey);if(this._debug(n,"session from storage",t),!this._isValidSession(t)){this._debug(n,"session is not valid"),t!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),s=((e=t.expires_at)!==null&&e!==void 0?e:1/0)<r+Lr;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Lr}s`),s){if(this.autoRefreshToken&&t.refresh_token){const{error:a}=await this._callRefreshToken(t.refresh_token);a&&(console.error(a),ln(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){this._debug(n,"error",t),console.error(t);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,t;if(!e)throw new ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new en;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new ht;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(r,"error",s),_e(s)){const a={session:null,error:s};return ln(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(t=this.refreshingDeferred)===null||t===void 0||t.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,t=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${t}`);try{this.broadcastChannel&&t&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Bs(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await sn(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Je()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:t}}=n;if(!t||!t.refresh_token||!t.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((t.expires_at*1e3-e)/Nt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Nt}ms, refresh threshold is ${Kr} ticks`),r<=Kr&&await this._callRefreshToken(t.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Fs)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Je()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,t){const r=[`provider=${encodeURIComponent(n)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const[s,a]=await wt(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(t!=null&&t.queryParams){const s=new URLSearchParams(t.queryParams);r.push(s.toString())}return t!=null&&t.skipBrowserRedirect&&r.push(`skip_http_redirect=${t.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var t;const{data:r,error:s}=n;return s?{data:null,error:s}:await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var t,r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await be(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=s==null?void 0:s.session)===null||t===void 0?void 0:t.access_token});return l?{data:null,error:l}:(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var t;const{data:r,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:o}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var t;const{data:r,error:s}=n;return s?{data:null,error:s}:await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:t}=await this._challenge({factorId:e.factorId});return t?{data:null,error:t}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const t=(e==null?void 0:e.factors)||[],r=t.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:t,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,t;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((t=(n=r.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Ft.nextInstanceID=0;const zo=Ft;class Vo extends zo{constructor(e){super(e)}}var Go=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(h){a(h)}}function l(c){try{u(t.throw(c))}catch(h){a(h)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};class Jo{constructor(e,n,t){var r,s,a;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=oo(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:to,realtime:ro,auth:Object.assign(Object.assign({},no),{storageKey:l}),global:eo},c=uo(t??{},u);this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=lo(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},c.realtime)),this.rest=new Sn(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new pl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Zl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},t={}){return this.rest.rpc(e,n,t)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Go(this,void 0,void 0,function*(){const{data:t}=yield this.auth.getSession();return(n=(e=t.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:t,storage:r,storageKey:s,flowType:a,debug:o},l,u){var c;const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Vo({url:this.authUrl,headers:Object.assign(Object.assign({},h),l),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:t,storage:r,flowType:a,debug:o,fetch:u,hasCustomAuthorizationHeader:(c="Authorization"in this.headers)!==null&&c!==void 0?c:!1})}_initRealtimeClient(e){return new Ml(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,n,t){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t??null),this.changedAccessToken=t):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Wo=(i,e,n)=>new Jo(i,e,n),Yo=Wo(ol,ll);let Xo=1;const on=()=>(++Xo).toString();let Zo=1;const Ue=()=>(++Zo).toString();on(),Qe.Male,Ue(),Ue(),Ue(),Ue(),Ue(),on(),Qe.Female,Ue(),Ue(),Ue(),Ue(),on(),Qe.Male,Ue(),Ue(),Ue(),Ue();class Ce extends Error{constructor(e,n){super(e+(n!=null&&n.code?` Code: ${n.code}`:"")),this.diagnostics=n}}const Ne=new rl(Yo),Qo=()=>{const{subscribe:i,update:e}=ri({}),n={};let t;const r=(a,o)=>{e(l=>({...l,[a]:{...l[a],...o(l[a])}}))},s=a=>()=>Ne.removeTrainer(a.id,a.readKey).then(()=>{e(o=>{const{[a.readKey]:l,...u}=o;return u})});return{get:a=>(n[a]==null&&(n[a]=Ne.getTrainer(a).then(o=>{var h;if(o==null)return;const l=d=>({info:p=>Ne.updateTrainerInfo(d.writeKey,p).then(()=>{r(a,_=>({..._,info:{..._.info,...p}}))}).catch(_=>{throw xe.show(_.message),_}),retire:()=>Ne.deleteTrainer(d.writeKey,d.info.id,d.info.readKey).then(()=>{e(p=>{const{[d.info.readKey]:_,...g}=p;return g})}).catch(p=>{throw xe.show(p.message),p}),pokemon:(p,_={})=>{let g;const b=w=>r(a,S=>{const P=[...S.pokemon],I=P.findIndex(q=>q.id===w.id);return g=P[I],P[I]={...S.pokemon[I],...w},{...S,pokemon:P}});return _.optimistic?(b(p),Ne.updatePokemon(d.writeKey,p).then(()=>{}).catch(w=>{throw b(g),xe.show(w.message),w})):Ne.updatePokemon(d.writeKey,p).then(()=>{b(p)}).catch(w=>{throw xe.show(w.message),w})},moveset:p=>Ne.updateMoveset(d.writeKey,p.id,p.moves).then(_=>{r(a,g=>{const b=[...g.pokemon],w=b.findIndex(S=>S.id===p.id);return b[w]={...g.pokemon[w],moves:_},{...g,pokemon:b}})}).catch(_=>{throw xe.show(_.message),_}),move:(p,_={})=>{let g;const b=w=>{r(a,S=>{const P=S.pokemon.find(q=>q.moves.map(z=>z.id).includes(w.id));if(!P)return S;const I=P.moves.findIndex(q=>q.id===w.id);return g=P.moves[I],P.moves[I]=w,{...S}})};return _.optimistic?(b(p),Ne.updateOneMove(d.writeKey,p).then(()=>{}).catch(w=>{throw b(g),xe.show(w.message),w})):Ne.updateOneMove(d.writeKey,p).then(()=>{b(p)}).catch(w=>{throw xe.show(w.message),w})},addToTeam:p=>Ne.addPokemonToTeam(d.writeKey,d.info.id,p).then(_=>(r(a,g=>{const b=[...g.pokemon,_];return{...g,pokemon:b}}),_)).catch(_=>{throw xe.show(_.message),_}),removeFromTeam:p=>Ne.removePokemon(d.writeKey,p).then(()=>{r(a,_=>{const g=_.pokemon.filter(b=>b.id!==p);return{..._,pokemon:g}})}).catch(_=>{throw xe.show(_.message),_})});let u;((h=o.writeKey)==null?void 0:h.length)>0&&(u=l(o));let c=!1;return{subscribe:d=>i(p=>{d(p[a]??{...o,update:u,remove:s(o.info)}),c||(c=!0,e(_=>({..._,[a]:{...o,update:u,remove:s(o.info)}})))}),verifyAccess:d=>Ne.verifyWriteKey(o.info,d).then(p=>(p&&r(a,_=>({..._,writeKey:d,update:l({..._,writeKey:d})})),p))}})),n[a]),all:()=>(t==null&&(t=Ne.allTrainers().then(a=>{let o=!1;return{subscribe:l=>i(u=>{l(Object.values(u).map(c=>c.info)),o||(o=!0,e(c=>a.reduce((h,d)=>({[d.readKey]:{info:d,pokemon:[],remove:s(d)},...h}),c)))})}})),t),new:a=>Ne.newTrainer(a).then(o=>(r(o.info.readKey,()=>o),o))}},Yt=Qo();function qr(i,e,n){const t=i.slice();return t[10]=e[n],t}function xo(i){let e,n="<p>You do not have permission to add pokemon to this trainer.</p>";return{c(){e=k("section"),e.innerHTML=n},l(t){e=y(t,"SECTION",{"data-svelte-h":!0}),ie(e)!=="svelte-lyju69"&&(e.innerHTML=n)},m(t,r){m(t,e,r)},p:x,i:x,o:x,d(t){t&&f(e)}}}function eu(i){let e,n,t="Start typing the pokemon's species, then select from the provided list.",r,s,a,o="Species",l,u,c,h,d,p,_,g;const b=[nu,tu],w=[];function S(P,I){return P[4].length===0&&P[1].length>0?0:1}return h=S(i),d=w[h]=b[h](i),{c(){e=k("section"),n=k("p"),n.textContent=t,r=A(),s=k("div"),a=k("label"),a.textContent=o,l=A(),u=k("input"),c=A(),d.c(),this.h()},l(P){e=y(P,"SECTION",{});var I=j(e);n=y(I,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-1nt5sai"&&(n.textContent=t),r=O(I),s=y(I,"DIV",{class:!0});var q=j(s);a=y(q,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(a)!=="svelte-1ytjvnz"&&(a.textContent=o),l=O(q),u=y(q,"INPUT",{id:!0,type:!0,class:!0}),q.forEach(f),c=O(I),d.l(I),I.forEach(f),this.h()},h(){v(a,"for","species-input"),v(a,"class","font-sm spaced-sm svelte-1d06a77"),v(u,"id","species-input"),v(u,"type","text"),v(u,"class","font-lg svelte-1d06a77"),u.disabled=i[3],v(s,"class","vertical spaced-lg svelte-1d06a77")},m(P,I){m(P,e,I),$(e,n),$(e,r),$(e,s),$(s,a),$(s,l),$(s,u),oe(u,i[1]),$(e,c),w[h].m(e,null),p=!0,_||(g=he(u,"input",i[8]),_=!0)},p(P,I){(!p||I&8)&&(u.disabled=P[3]),I&2&&u.value!==P[1]&&oe(u,P[1]);let q=h;h=S(P),h===q?w[h].p(P,I):(ge(),T(w[q],1,1,()=>{w[q]=null}),$e(),d=w[h],d?d.p(P,I):(d=w[h]=b[h](P),d.c()),E(d,1),d.m(e,null))},i(P){p||(E(d),p=!0)},o(P){T(d),p=!1},d(P){P&&f(e),w[h].d(),_=!1,g()}}}function tu(i){let e,n,t=pe(i[4]),r=[];for(let a=0;a<t.length;a+=1)r[a]=Hr(qr(i,t,a));const s=a=>T(r[a],1,1,()=>{r[a]=null});return{c(){e=k("ul");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=y(a,"UL",{class:!0});var o=j(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(f),this.h()},h(){v(e,"class","no-list columnated svelte-1d06a77")},m(a,o){m(a,e,o);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);n=!0},p(a,o){if(o&88){t=pe(a[4]);let l;for(l=0;l<t.length;l+=1){const u=qr(a,t,l);r[l]?(r[l].p(u,o),E(r[l],1)):(r[l]=Hr(u),r[l].c(),E(r[l],1),r[l].m(e,null))}for(ge(),l=t.length;l<r.length;l+=1)s(l);$e()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)E(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)T(r[o]);n=!1},d(a){a&&f(e),Ie(r,a)}}}function nu(i){let e,n="No matched pokemon";return{c(){e=k("p"),e.textContent=n,this.h()},l(t){e=y(t,"P",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1bl65jz"&&(e.textContent=n),this.h()},h(){v(e,"class","muted center svelte-1d06a77")},m(t,r){m(t,e,r)},p:x,i:x,o:x,d(t){t&&f(e)}}}function ru(i){let e=i[10].name+"",n;return{c(){n=U(e)},l(t){n=M(t,e)},m(t,r){m(t,n,r)},p(t,r){r&16&&e!==(e=t[10].name+"")&&se(n,e)},d(t){t&&f(n)}}}function Hr(i){let e,n,t,r;return n=new we({props:{align:"left",width:"full",disabled:i[3],$$slots:{default:[ru]},$$scope:{ctx:i}}}),n.$on("click",function(){vn(i[6](i[10]))&&i[6](i[10]).apply(this,arguments)}),{c(){e=k("li"),L(n.$$.fragment),t=A(),this.h()},l(s){e=y(s,"LI",{class:!0});var a=j(e);R(n.$$.fragment,a),t=O(a),a.forEach(f),this.h()},h(){v(e,"class","spaced-sm svelte-1d06a77")},m(s,a){m(s,e,a),N(n,e,null),$(e,t),r=!0},p(s,a){i=s;const o={};a&8&&(o.disabled=i[3]),a&8208&&(o.$$scope={dirty:a,ctx:i}),n.$set(o)},i(s){r||(E(n.$$.fragment,s),r=!0)},o(s){T(n.$$.fragment,s),r=!1},d(s){s&&f(e),D(n)}}}function su(i){let e,n,t,r;const s=[eu,xo],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function iu(i){let e,n,t,r;return e=new ze({props:{value:"Add Pokemon"}}),t=new Ve({props:{title:"Add to "+i[2].info.name+"'s team",$$slots:{default:[su]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&4&&(o.title="Add to "+s[2].info.name+"'s team"),a&8250&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function au(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=He(c,g=>n(2,a=g)),c),u;De(i,_t,g=>n(7,u=g)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let h="",d=!1;const p=g=>()=>{var b;n(3,d=!0),(b=a.update)==null||b.addToTeam(g).then(({id:w})=>{Be(`${Se}/trainers?id=${r}&pokemon=${w}`)}).catch(()=>{n(3,d=!1)})};function _(){h=this.value,n(1,h)}return i.$$set=g=>{"trainer"in g&&l(n(0,c=g.trainer))},i.$$.update=()=>{i.$$.dirty&4&&n(5,t=a.update!=null),i.$$.dirty&4&&(r=a.info.readKey),i.$$.dirty&130&&n(4,s=h.length>0?(u==null?void 0:u.filter(ti(h)))??[]:[])},[c,h,a,d,s,t,p,u,_]}class lu extends ce{constructor(e){super(),fe(this,e,au,iu,ue,{trainer:0})}}function ou(i){let e,n;return{c(){e=k("a"),n=U("Find by trainer ID >"),this.h()},l(t){e=y(t,"A",{slot:!0,href:!0,class:!0});var r=j(e);n=M(r,"Find by trainer ID >"),r.forEach(f),this.h()},h(){v(e,"slot","link"),v(e,"href",de.trainers(void 0,void 0,Te.findTrainer)),v(e,"class","dark-font svelte-1nzhjm0")},m(t,r){m(t,e,r),$(e,n)},p:x,d(t){t&&f(e)}}}function uu(i){let e;return{c(){e=U("+ New Trainer")},l(n){e=M(n,"+ New Trainer")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function cu(i){let e,n;return e=new we({props:{slot:"action",href:Se+"/trainers?action=new-trainer",$$slots:{default:[uu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&512&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function fu(i){let e,n=i[8].name+"",t,r;return{c(){e=k("a"),t=U(n),this.h()},l(s){e=y(s,"A",{href:!0});var a=j(e);t=M(a,n),a.forEach(f),this.h()},h(){v(e,"href",r=Se+"/trainers?id="+i[8].readKey)},m(s,a){m(s,e,a),$(e,t)},p(s,a){a&256&&n!==(n=s[8].name+"")&&se(t,n),a&256&&r!==(r=Se+"/trainers?id="+s[8].readKey)&&v(e,"href",r)},d(s){s&&f(e)}}}function hu(i){let e,n;return e=new Ts.Cell({props:{primary:!0,$$slots:{default:[fu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&768&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function du(i){let e,n;return e=new Ts.Row({props:{interactive:!0,mainBg:"var(--skin-bg-dark)",$$slots:{default:[hu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&768&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function pu(i){let e,n,t,r,s,a,o,l,u;e=new Ps({props:{title:"Trainer List",$$slots:{action:[cu],link:[ou]},$$scope:{ctx:i}}});function c(_){i[6](_)}let h={id:"filter-pokemon",label:"Search",matched:i[3].length,max:i[2].length};i[1]!==void 0&&(h.value=i[1]),r=new ks({props:h}),Ct.push(()=>At(r,"value",c));function d(_){i[7](_)}let p={items:i[3],headers:[{key:"name",name:"Name",ratio:1,sort:i[5](_u)}],$$slots:{default:[du,({item:_})=>({8:_}),({item:_})=>_?256:0]},$$scope:{ctx:i}};return i[4]!==void 0&&(p.currentSorter=i[4]),o=new Xs({props:p}),Ct.push(()=>At(o,"currentSorter",d)),{c(){L(e.$$.fragment),n=A(),t=k("div"),L(r.$$.fragment),a=A(),L(o.$$.fragment),this.h()},l(_){R(e.$$.fragment,_),n=O(_),t=y(_,"DIV",{class:!0});var g=j(t);R(r.$$.fragment,g),g.forEach(f),a=O(_),R(o.$$.fragment,_),this.h()},h(){v(t,"class","space-bottom svelte-1nzhjm0")},m(_,g){N(e,_,g),m(_,n,g),m(_,t,g),N(r,t,null),m(_,a,g),N(o,_,g),u=!0},p(_,[g]){const b={};g&512&&(b.$$scope={dirty:g,ctx:_}),e.$set(b);const w={};g&8&&(w.matched=_[3].length),g&4&&(w.max=_[2].length),!s&&g&2&&(s=!0,w.value=_[1],Pt(()=>s=!1)),r.$set(w);const S={};g&8&&(S.items=_[3]),g&768&&(S.$$scope={dirty:g,ctx:_}),!l&&g&16&&(l=!0,S.currentSorter=_[4],Pt(()=>l=!1)),o.$set(S)},i(_){u||(E(e.$$.fragment,_),E(r.$$.fragment,_),E(o.$$.fragment,_),u=!0)},o(_){T(e.$$.fragment,_),T(r.$$.fragment,_),T(o.$$.fragment,_),u=!1},d(_){_&&(f(n),f(t),f(a)),D(e,_),D(r),D(o,_)}}}const _u=i=>i.name;function mu(i,e,n){let t,r,s,a=x,o=()=>(a(),a=He(u,p=>n(2,s=p)),u),l;De(i,Kn,p=>n(1,r=p)),De(i,Fn,p=>n(4,l=p)),i.$$.on_destroy.push(()=>a());let{trainers:u}=e;o();const c=p=>(_,g)=>p(_).localeCompare(p(g));function h(p){r=p,Kn.set(r)}function d(p){l=p,Fn.set(l)}return i.$$set=p=>{"trainers"in p&&o(n(0,u=p.trainers))},i.$$.update=()=>{i.$$.dirty&6&&n(3,t=s.filter(p=>p.name.toLocaleLowerCase().includes(r.toLocaleLowerCase())))},[u,r,s,t,l,c,h,d]}class gu extends ce{constructor(e){super(),fe(this,e,mu,pu,ue,{trainers:0})}}function zr(i){let e,n,t,r;return t=new at({props:{caption:i[1]}}),{c(){e=k("div"),n=k("div"),L(t.$$.fragment),this.h()},l(s){e=y(s,"DIV",{class:!0,"aria-live":!0});var a=j(e);n=y(a,"DIV",{class:!0});var o=j(n);R(t.$$.fragment,o),o.forEach(f),a.forEach(f),this.h()},h(){v(n,"class","fixed svelte-1mvnop4"),v(e,"class","center-overlay svelte-1mvnop4"),v(e,"aria-live","assertive")},m(s,a){m(s,e,a),$(e,n),N(t,n,null),r=!0},p(s,a){const o={};a&2&&(o.caption=s[1]),t.$set(o)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){T(t.$$.fragment,s),r=!1},d(s){s&&f(e),D(t)}}}function $u(i){let e,n,t,r;const s=i[3].default,a=et(s,i,i[2],null);let o=i[0]&&zr(i);return{c(){e=k("div"),n=k("div"),a&&a.c(),t=A(),o&&o.c(),this.h()},l(l){e=y(l,"DIV",{class:!0});var u=j(e);n=y(u,"DIV",{class:!0});var c=j(n);a&&a.l(c),c.forEach(f),t=O(u),o&&o.l(u),u.forEach(f),this.h()},h(){v(n,"class","svelte-1mvnop4"),St(n,"muted",i[0]),v(e,"class","relative svelte-1mvnop4")},m(l,u){m(l,e,u),$(e,n),a&&a.m(n,null),$(e,t),o&&o.m(e,null),r=!0},p(l,[u]){a&&a.p&&(!r||u&4)&&tt(a,s,l,l[2],r?rt(s,l[2],u,null):nt(l[2]),null),(!r||u&1)&&St(n,"muted",l[0]),l[0]?o?(o.p(l,u),u&1&&E(o,1)):(o=zr(l),o.c(),E(o,1),o.m(e,null)):o&&(ge(),T(o,1,1,()=>{o=null}),$e())},i(l){r||(E(a,l),E(o),r=!0)},o(l){T(a,l),T(o),r=!1},d(l){l&&f(e),a&&a.d(l),o&&o.d()}}}function vu(i,e,n){let{$$slots:t={},$$scope:r}=e,{saving:s}=e,{caption:a="Saving..."}=e;return i.$$set=o=>{"saving"in o&&n(0,s=o.saving),"caption"in o&&n(1,a=o.caption),"$$scope"in o&&n(2,r=o.$$scope)},[s,a,r,t]}class lt extends ce{constructor(e){super(),fe(this,e,vu,$u,ue,{saving:0,caption:1})}}function bu(i){let e,n,t,r,s,a,o;const l=i[3].default,u=et(l,i,i[2],null);return{c(){e=k("fieldset"),n=k("legend"),t=k("span"),r=U(i[0]),s=A(),a=k("div"),u&&u.c(),this.h()},l(c){e=y(c,"FIELDSET",{class:!0});var h=j(e);n=y(h,"LEGEND",{class:!0});var d=j(n);t=y(d,"SPAN",{class:!0});var p=j(t);r=M(p,i[0]),p.forEach(f),d.forEach(f),s=O(h),a=y(h,"DIV",{class:!0});var _=j(a);u&&u.l(_),_.forEach(f),h.forEach(f),this.h()},h(){v(t,"class","unskew svelte-1dpvf4s"),v(n,"class","svelte-1dpvf4s"),v(a,"class","grid svelte-1dpvf4s"),v(e,"class","svelte-1dpvf4s"),ke(e,"--columns",i[1])},m(c,h){m(c,e,h),$(e,n),$(n,t),$(t,r),$(e,s),$(e,a),u&&u.m(a,null),o=!0},p(c,[h]){(!o||h&1)&&se(r,c[0]),u&&u.p&&(!o||h&4)&&tt(u,l,c,c[2],o?rt(l,c[2],h,null):nt(c[2]),null),h&2&&ke(e,"--columns",c[1])},i(c){o||(E(u,c),o=!0)},o(c){T(u,c),o=!1},d(c){c&&f(e),u&&u.d(c)}}}function wu(i,e,n){let{$$slots:t={},$$scope:r}=e,{title:s}=e,{columns:a=1}=e;return i.$$set=o=>{"title"in o&&n(0,s=o.title),"columns"in o&&n(1,a=o.columns),"$$scope"in o&&n(2,r=o.$$scope)},[s,a,r,t]}class qe extends ce{constructor(e){super(),fe(this,e,wu,bu,ue,{title:0,columns:1})}}function ku(i){let e,n="Name",t,r,s,a,o="Description",l,u,c,h;return{c(){e=k("label"),e.textContent=n,t=A(),r=k("input"),s=A(),a=k("label"),a.textContent=o,l=A(),u=k("textarea"),this.h()},l(d){e=y(d,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-10tkgu3"&&(e.textContent=n),t=O(d),r=y(d,"INPUT",{name:!0,id:!0,type:!0}),s=O(d),a=y(d,"LABEL",{for:!0,"data-svelte-h":!0}),ie(a)!=="svelte-8xwm31"&&(a.textContent=o),l=O(d),u=y(d,"TEXTAREA",{name:!0,id:!0,rows:!0}),j(u).forEach(f),this.h()},h(){v(e,"for","name-input"),v(r,"name","name"),r.required=!0,v(r,"id","name-input"),v(r,"type","text"),r.disabled=i[3],v(a,"for","description-input"),ke(a,"place-self","start"),v(u,"name","description"),v(u,"id","description-input"),v(u,"rows","6"),u.disabled=i[3]},m(d,p){m(d,e,p),m(d,t,p),m(d,r,p),oe(r,i[1]),m(d,s,p),m(d,a,p),m(d,l,p),m(d,u,p),oe(u,i[2]),c||(h=[he(r,"input",i[6]),he(u,"input",i[7])],c=!0)},p(d,p){p&8&&(r.disabled=d[3]),p&2&&r.value!==d[1]&&oe(r,d[1]),p&8&&(u.disabled=d[3]),p&4&&oe(u,d[2])},d(d){d&&(f(e),f(t),f(r),f(s),f(a),f(l),f(u)),c=!1,st(h)}}}function yu(i){let e;return{c(){e=U("Cancel")},l(n){e=M(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Eu(i){let e;return{c(){e=U("Finish!")},l(n){e=M(n,"Finish!")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Tu(i){let e,n,t,r;return e=new we({props:{variant:"ghost",disabled:i[3],$$slots:{default:[yu]},$$scope:{ctx:i}}}),e.$on("click",i[5]),t=new we({props:{type:"submit",disabled:i[3],$$slots:{default:[Eu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&8&&(o.disabled=s[3]),a&256&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&8&&(l.disabled=s[3]),a&256&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function Su(i){let e,n,t,r,s,a,o;return n=new qe({props:{title:"Basic Info",$$slots:{default:[ku]},$$scope:{ctx:i}}}),r=new je({props:{$$slots:{default:[Tu]},$$scope:{ctx:i}}}),{c(){e=k("form"),L(n.$$.fragment),t=A(),L(r.$$.fragment)},l(l){e=y(l,"FORM",{});var u=j(e);R(n.$$.fragment,u),t=O(u),R(r.$$.fragment,u),u.forEach(f)},m(l,u){m(l,e,u),N(n,e,null),$(e,t),N(r,e,null),s=!0,a||(o=he(e,"submit",Lt(i[4])),a=!0)},p(l,u){const c={};u&270&&(c.$$scope={dirty:u,ctx:l}),n.$set(c);const h={};u&264&&(h.$$scope={dirty:u,ctx:l}),r.$set(h)},i(l){s||(E(n.$$.fragment,l),E(r.$$.fragment,l),s=!0)},o(l){T(n.$$.fragment,l),T(r.$$.fragment,l),s=!1},d(l){l&&f(e),D(n),D(r),a=!1,o()}}}function Cu(i){let e,n,t;return n=new lt({props:{saving:i[0],$$slots:{default:[Su]},$$scope:{ctx:i}}}),{c(){e=k("section"),L(n.$$.fragment)},l(r){e=y(r,"SECTION",{});var s=j(e);R(n.$$.fragment,s),s.forEach(f)},m(r,s){m(r,e,s),N(n,e,null),t=!0},p(r,s){const a={};s&1&&(a.saving=r[0]),s&270&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){T(n.$$.fragment,r),t=!1},d(r){r&&f(e),D(n)}}}function Pu(i){let e,n,t,r;return e=new ze({props:{value:"Create Trainer"}}),t=new Ve({props:{title:"Create a New Trainer",$$slots:{default:[Cu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&271&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function Iu(i,e,n){let t,r="",s="",a=!1;const o=()=>{n(0,a=!0),Yt.new({name:r,description:s}).then(({info:h})=>{Be(`${Se}/trainers?id=${h.readKey}`)}).catch(()=>{n(0,a=!1)})},l=()=>{Be(`${Se}/trainers`)};function u(){r=this.value,n(1,r)}function c(){s=this.value,n(2,s)}return i.$$.update=()=>{i.$$.dirty&1&&n(3,t=a)},[a,r,s,t,o,l,u,c]}class Au extends ce{constructor(e){super(),fe(this,e,Iu,Pu,ue,{})}}function Ou(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ju(i){let e,n;return e=new Ve({props:{title:"Remove "+i[2].nickname+"?",$$slots:{default:[Fu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.title="Remove "+t[2].nickname+"?"),r&636&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Lu(i){let e,n,t="You do not have permission to remove this pokemon.",r,s,a;return s=new je({props:{$$slots:{default:[Du]},$$scope:{ctx:i}}}),{c(){e=k("section"),n=k("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=y(o,"SECTION",{});var l=j(e);n=y(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-tjgn9a"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(f)},m(o,l){m(o,e,l),$(e,n),$(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&524&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&f(e),D(s)}}}function Ru(i){let e,n;return e=new lt({props:{saving:i[4],$$slots:{default:[Ku]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.saving=t[4]),r&556&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Nu(i){let e;return{c(){e=U("Go Back")},l(n){e=M(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Du(i){let e,n;return e=new we({props:{href:Se+"/trainers?id="+i[3].info.readKey+"&pokemon="+i[2].id,$$slots:{default:[Nu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&12&&(s.href=Se+"/trainers?id="+t[3].info.readKey+"&pokemon="+t[2].id),r&512&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Vr(i){let e,n,t;return n=new ws({props:{media:i[5].media,alt:i[5].name}}),{c(){e=k("p"),L(n.$$.fragment),this.h()},l(r){e=y(r,"P",{class:!0});var s=j(e);R(n.$$.fragment,s),s.forEach(f),this.h()},h(){v(e,"class","centered greyscale svelte-li4qwo")},m(r,s){m(r,e,s),N(n,e,null),t=!0},p(r,s){const a={};s&32&&(a.media=r[5].media),s&32&&(a.alt=r[5].name),n.$set(a)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){T(n.$$.fragment,r),t=!1},d(r){r&&f(e),D(n)}}}function Uu(i){let e;return{c(){e=U("Cancel")},l(n){e=M(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Mu(i){let e;return{c(){e=U("Delete")},l(n){e=M(n,"Delete")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Bu(i){let e,n,t,r;return e=new we({props:{href:Se+"/trainers?id="+i[3].info.readKey+"&pokemon="+i[2].id,variant:"ghost",$$slots:{default:[Uu]},$$scope:{ctx:i}}}),t=new we({props:{variant:"danger",$$slots:{default:[Mu]},$$scope:{ctx:i}}}),t.$on("click",i[7]),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&12&&(o.href=Se+"/trainers?id="+s[3].info.readKey+"&pokemon="+s[2].id),a&512&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&512&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function Ku(i){var S;let e,n,t,r=i[2].nickname+"",s,a,o=i[3].info.name+"",l,u,c,h,d="Removal is permanent and cannot be undone!",p,_,g,b,w=((S=i[5].media)==null?void 0:S.main)&&Vr(i);return g=new je({props:{$$slots:{default:[Bu]},$$scope:{ctx:i}}}),{c(){e=k("section"),n=k("p"),t=U("Are you sure you want to remove "),s=U(r),a=U(" from "),l=U(o),u=U("'s team?"),c=A(),h=k("p"),h.textContent=d,p=A(),w&&w.c(),_=A(),L(g.$$.fragment)},l(P){e=y(P,"SECTION",{});var I=j(e);n=y(I,"P",{});var q=j(n);t=M(q,"Are you sure you want to remove "),s=M(q,r),a=M(q," from "),l=M(q,o),u=M(q,"'s team?"),q.forEach(f),c=O(I),h=y(I,"P",{"data-svelte-h":!0}),ie(h)!=="svelte-raeweb"&&(h.textContent=d),p=O(I),w&&w.l(I),_=O(I),R(g.$$.fragment,I),I.forEach(f)},m(P,I){m(P,e,I),$(e,n),$(n,t),$(n,s),$(n,a),$(n,l),$(n,u),$(e,c),$(e,h),$(e,p),w&&w.m(e,null),$(e,_),N(g,e,null),b=!0},p(P,I){var z;(!b||I&4)&&r!==(r=P[2].nickname+"")&&se(s,r),(!b||I&8)&&o!==(o=P[3].info.name+"")&&se(l,o),(z=P[5].media)!=null&&z.main?w?(w.p(P,I),I&32&&E(w,1)):(w=Vr(P),w.c(),E(w,1),w.m(e,_)):w&&(ge(),T(w,1,1,()=>{w=null}),$e());const q={};I&524&&(q.$$scope={dirty:I,ctx:P}),g.$set(q)},i(P){b||(E(w),E(g.$$.fragment,P),b=!0)},o(P){T(w),T(g.$$.fragment,P),b=!1},d(P){P&&f(e),w&&w.d(),D(g)}}}function Fu(i){let e,n,t,r;const s=[Ru,Lu],a=[];function o(l,u){return l[6]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function qu(i){let e,n,t,r;const s=[ju,Ou],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function Hu(i){let e,n;return e=new Qt({props:{trainer:i[3],id:i[1],titlePrefix:"Remove",$$slots:{default:[qu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&8&&(s.trainer=t[3]),r&2&&(s.id=t[1]),r&636&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function zu(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=He(c,_=>n(3,a=_)),c),u;De(i,_t,_=>n(8,u=_)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{id:h}=e,d=!1;const p=()=>{var _;n(4,d=!0),(_=a.update)==null||_.removeFromTeam(h).then(()=>{Be(`${Se}/trainers?id=${a.info.readKey}`)}).catch(()=>{n(4,d=!1)})};return i.$$set=_=>{"trainer"in _&&l(n(0,c=_.trainer)),"id"in _&&n(1,h=_.id)},i.$$.update=()=>{i.$$.dirty&8&&n(6,t=a.update!=null),i.$$.dirty&10&&n(2,r=a.pokemon.find(_=>_.id===h)),i.$$.dirty&260&&n(5,s=u==null?void 0:u.find(_=>_.id===(r==null?void 0:r.pokemonId)))},[c,h,r,a,d,s,t,p,u]}class Vu extends ce{constructor(e){super(),fe(this,e,zu,Hu,ue,{trainer:0,id:1})}}function Gu(i,e,n){const t=i.slice();return t[6]=e[n],t}function Ju(i){let e,n;return{c(){e=k("option"),n=U(i[6]),this.h()},l(t){e=y(t,"OPTION",{});var r=j(e);n=M(r,i[6]),r.forEach(f),this.h()},h(){e.__value=i[6],oe(e,e.__value)},m(t,r){m(t,e,r),$(e,n)},p:x,d(t){t&&f(e)}}}function Gr(i){let e,n,t,r,s,a,o,l,u,c,h;return{c(){e=k("span"),n=A(),t=k("span"),r=k("label"),s=U("Specify:"),o=A(),l=k("input"),this.h()},l(d){e=y(d,"SPAN",{}),j(e).forEach(f),n=O(d),t=y(d,"SPAN",{class:!0});var p=j(t);r=y(p,"LABEL",{for:!0});var _=j(r);s=M(_,"Specify:"),_.forEach(f),o=O(p),l=y(p,"INPUT",{class:!0,id:!0,type:!0}),p.forEach(f),this.h()},h(){v(r,"for",a=i[2]+"-custom"),v(l,"class","full-width"),v(l,"id",u=i[2]+"-custom"),v(l,"type","text"),l.disabled=i[3],v(t,"class","hrow")},m(d,p){m(d,e,p),m(d,n,p),m(d,t,p),$(t,r),$(r,s),$(t,o),$(t,l),oe(l,i[1]),c||(h=he(l,"input",i[5]),c=!0)},p(d,p){p&4&&a!==(a=d[2]+"-custom")&&v(r,"for",a),p&4&&u!==(u=d[2]+"-custom")&&v(l,"id",u),p&8&&(l.disabled=d[3]),p&2&&l.value!==d[1]&&oe(l,d[1])},d(d){d&&(f(e),f(n),f(t)),c=!1,h()}}}function Wu(i){let e,n,t,r,s,a="Other",o,l,u,c,h=pe(fn),d=[];for(let _=0;_<h.length;_+=1)d[_]=Ju(Gu(i,h,_));let p=i[0]==="other"&&Gr(i);return{c(){e=k("label"),n=U("Nature"),t=A(),r=k("select");for(let _=0;_<d.length;_+=1)d[_].c();s=k("option"),s.textContent=a,o=A(),p&&p.c(),l=ne(),this.h()},l(_){e=y(_,"LABEL",{for:!0});var g=j(e);n=M(g,"Nature"),g.forEach(f),t=O(_),r=y(_,"SELECT",{id:!0,class:!0});var b=j(r);for(let w=0;w<d.length;w+=1)d[w].l(b);s=y(b,"OPTION",{"data-svelte-h":!0}),ie(s)!=="svelte-902jce"&&(s.textContent=a),b.forEach(f),o=O(_),p&&p.l(_),l=ne(),this.h()},h(){v(e,"for",i[2]),s.__value="other",oe(s,s.__value),v(r,"id",i[2]),v(r,"class","cap"),r.disabled=i[3],i[0]===void 0&&Bt(()=>i[4].call(r))},m(_,g){m(_,e,g),$(e,n),m(_,t,g),m(_,r,g);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(r,null);$(r,s),Xe(r,i[0],!0),m(_,o,g),p&&p.m(_,g),m(_,l,g),u||(c=he(r,"change",i[4]),u=!0)},p(_,[g]){g&4&&v(e,"for",_[2]),g&4&&v(r,"id",_[2]),g&8&&(r.disabled=_[3]),g&1&&Xe(r,_[0]),_[0]==="other"?p?p.p(_,g):(p=Gr(_),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},i:x,o:x,d(_){_&&(f(e),f(t),f(r),f(o),f(l)),Ie(d,_),p&&p.d(_),u=!1,c()}}}function Yu(i,e,n){let{id:t}=e,{value:r}=e,{custom:s}=e,{disabled:a=!1}=e;function o(){r=Kt(this),n(0,r)}function l(){s=this.value,n(1,s)}return i.$$set=u=>{"id"in u&&n(2,t=u.id),"value"in u&&n(0,r=u.value),"custom"in u&&n(1,s=u.custom),"disabled"in u&&n(3,a=u.disabled)},[r,s,t,a,o,l]}class Xu extends ce{constructor(e){super(),fe(this,e,Yu,Wu,ue,{id:2,value:0,custom:1,disabled:3})}}function Jr(i,e,n){const t=i.slice();return t[9]=e[n],t}function Wr(i){let e,n=i[9].name+"",t,r;return{c(){e=k("option"),t=U(n),this.h()},l(s){e=y(s,"OPTION",{});var a=j(e);t=M(a,n),a.forEach(f),this.h()},h(){e.__value=r=i[9].id,oe(e,e.__value)},m(s,a){m(s,e,a),$(e,t)},p(s,a){a&4&&n!==(n=s[9].name+"")&&se(t,n),a&4&&r!==(r=s[9].id)&&(e.__value=r,oe(e,e.__value))},d(s){s&&f(e)}}}function Zu(i){let e;return{c(){e=U("Remove")},l(n){e=M(n,"Remove")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Qu(i){let e,n,t,r,s,a,o,l,u,c,h,d,p,_,g,b,w,S,P,I,q,z,K,B,F,re,Y=pe(i[2]??[]),X=[];for(let V=0;V<Y.length;V+=1)X[V]=Wr(Jr(i,Y,V));return u=new we({props:{$$slots:{default:[Zu]},$$scope:{ctx:i}}}),u.$on("click",i[4]),{c(){e=k("label"),n=U("Move"),r=A(),s=k("div"),a=k("select");for(let V=0;V<X.length;V+=1)X[V].c();l=A(),L(u.$$.fragment),c=A(),h=k("label"),d=U("Max PP"),_=A(),g=k("input"),w=A(),S=k("label"),P=U("Notes"),q=A(),z=k("textarea"),this.h()},l(V){e=y(V,"LABEL",{for:!0});var C=j(e);n=M(C,"Move"),C.forEach(f),r=O(V),s=y(V,"DIV",{class:!0});var G=j(s);a=y(G,"SELECT",{id:!0});var W=j(a);for(let H=0;H<X.length;H+=1)X[H].l(W);W.forEach(f),l=O(G),R(u.$$.fragment,G),G.forEach(f),c=O(V),h=y(V,"LABEL",{for:!0});var Q=j(h);d=M(Q,"Max PP"),Q.forEach(f),_=O(V),g=y(V,"INPUT",{id:!0,type:!0}),w=O(V),S=y(V,"LABEL",{for:!0});var ee=j(S);P=M(ee,"Notes"),ee.forEach(f),q=O(V),z=y(V,"TEXTAREA",{id:!0,rows:!0}),j(z).forEach(f),this.h()},h(){v(e,"for",t="move-name-input-"+i[0].id),v(a,"id",o="move-name-input-"+i[0].id),i[0].moveId===void 0&&Bt(()=>i[5].call(a)),ke(a,"flex","1"),v(s,"class","flex-row svelte-uv9pcx"),v(h,"for",p="move-pp-input-"+i[0].id),v(g,"id",b="move-pp-input-"+i[0].id),v(g,"type","number"),g.disabled=i[1],v(S,"for",I="move-notes-input-"+i[0].id),ke(S,"place-self","start"),v(z,"id",K="move-notes-input-"+i[0].id),v(z,"rows","5"),ke(z,"margin-block-end","1em")},m(V,C){m(V,e,C),$(e,n),m(V,r,C),m(V,s,C),$(s,a);for(let G=0;G<X.length;G+=1)X[G]&&X[G].m(a,null);Xe(a,i[0].moveId,!0),$(s,l),N(u,s,null),m(V,c,C),m(V,h,C),$(h,d),m(V,_,C),m(V,g,C),oe(g,i[0].pp.max),m(V,w,C),m(V,S,C),$(S,P),m(V,q,C),m(V,z,C),oe(z,i[0].notes),B=!0,F||(re=[he(a,"change",i[5]),he(a,"change",i[3]),he(g,"input",i[6]),he(z,"input",i[7])],F=!0)},p(V,[C]){if((!B||C&5&&t!==(t="move-name-input-"+V[0].id))&&v(e,"for",t),C&4){Y=pe(V[2]??[]);let W;for(W=0;W<Y.length;W+=1){const Q=Jr(V,Y,W);X[W]?X[W].p(Q,C):(X[W]=Wr(Q),X[W].c(),X[W].m(a,null))}for(;W<X.length;W+=1)X[W].d(1);X.length=Y.length}(!B||C&5&&o!==(o="move-name-input-"+V[0].id))&&v(a,"id",o),C&5&&Xe(a,V[0].moveId);const G={};C&4096&&(G.$$scope={dirty:C,ctx:V}),u.$set(G),(!B||C&5&&p!==(p="move-pp-input-"+V[0].id))&&v(h,"for",p),(!B||C&5&&b!==(b="move-pp-input-"+V[0].id))&&v(g,"id",b),(!B||C&2)&&(g.disabled=V[1]),C&5&&Ze(g.value)!==V[0].pp.max&&oe(g,V[0].pp.max),(!B||C&5&&I!==(I="move-notes-input-"+V[0].id))&&v(S,"for",I),(!B||C&5&&K!==(K="move-notes-input-"+V[0].id))&&v(z,"id",K),C&5&&oe(z,V[0].notes)},i(V){B||(E(u.$$.fragment,V),B=!0)},o(V){T(u.$$.fragment,V),B=!1},d(V){V&&(f(e),f(r),f(s),f(c),f(h),f(_),f(g),f(w),f(S),f(q),f(z)),Ie(X,V),D(u),F=!1,st(re)}}}function xu(i,e,n){let t;De(i,wn,d=>n(2,t=d));const r=it();let{move:s}=e,{disabled:a=!1}=e;const o=()=>{var p;const d=((p=t.find(_=>_.id===s.moveId))==null?void 0:p.pp)??0;n(0,s.pp.current=d,s),n(0,s.pp.max=d,s)},l=()=>{r("remove")};function u(){s.moveId=Kt(this),n(0,s)}function c(){s.pp.max=Ze(this.value),n(0,s)}function h(){s.notes=this.value,n(0,s)}return i.$$set=d=>{"move"in d&&n(0,s=d.move),"disabled"in d&&n(1,a=d.disabled)},[s,a,t,o,l,u,c,h]}class ec extends ce{constructor(e){super(),fe(this,e,xu,Qu,ue,{move:0,disabled:1})}}function Yr(i,e,n){const t=i.slice();return t[8]=e[n],t}function Xr(i,e,n){const t=i.slice();return t[8]=e[n],t}function tc(i,e,n){const t=i.slice();return t[8]=e[n],t}function nc(i){let e,n;return{c(){e=k("option"),n=U(i[8]),this.h()},l(t){e=y(t,"OPTION",{class:!0});var r=j(e);n=M(r,i[8]),r.forEach(f),this.h()},h(){e.__value=i[8],oe(e,e.__value),v(e,"class","svelte-18pcmkd")},m(t,r){m(t,e,r),$(e,n)},p:x,d(t){t&&f(e)}}}function Zr(i){let e,n,t;return{c(){e=k("option"),n=U(i[8]),this.h()},l(r){e=y(r,"OPTION",{class:!0});var s=j(e);n=M(s,i[8]),s.forEach(f),this.h()},h(){e.__value=i[8],oe(e,e.__value),e.disabled=t=i[8]===i[1],v(e,"class","svelte-18pcmkd")},m(r,s){m(r,e,s),$(e,n)},p(r,s){s&2&&t!==(t=r[8]===r[1])&&(e.disabled=t)},d(r){r&&f(e)}}}function Qr(i){let e,n,t,r,s,a,o,l,u,c;return{c(){e=k("input"),s=A(),a=k("label"),o=U(i[8]),this.h()},l(h){e=y(h,"INPUT",{id:!0,type:!0}),s=O(h),a=y(h,"LABEL",{for:!0,class:!0});var d=j(a);o=M(d,i[8]),d.forEach(f),this.h()},h(){v(e,"id",n=i[0]+"-checkbox-"+i[8]),v(e,"type","checkbox"),e.value=i[8],e.disabled=t=i[8]===i[1]||i[8]===i[2],e.checked=r=i[3].includes(i[8])||i[8]===i[1]||i[8]===i[2],v(a,"for",l=i[0]+"-checkbox-"+i[8]),v(a,"class","cap")},m(h,d){m(h,e,d),m(h,s,d),m(h,a,d),$(a,o),u||(c=he(e,"change",i[4]),u=!0)},p(h,d){d&1&&n!==(n=h[0]+"-checkbox-"+h[8])&&v(e,"id",n),d&6&&t!==(t=h[8]===h[1]||h[8]===h[2])&&(e.disabled=t),d&14&&r!==(r=h[3].includes(h[8])||h[8]===h[1]||h[8]===h[2])&&(e.checked=r),d&1&&l!==(l=h[0]+"-checkbox-"+h[8])&&v(a,"for",l)},d(h){h&&(f(e),f(s),f(a)),u=!1,c()}}}function rc(i){let e,n,t,r,s,a,o,l,u,c,h,d,p,_,g,b,w,S,P="Additional Types",I,q,z,K,B=pe(yt),F=[];for(let C=0;C<B.length;C+=1)F[C]=nc(tc(i,B,C));let re=pe(yt),Y=[];for(let C=0;C<re.length;C+=1)Y[C]=Zr(Xr(i,re,C));let X=pe(yt),V=[];for(let C=0;C<X.length;C+=1)V[C]=Qr(Yr(i,X,C));return{c(){e=k("label"),n=U("Primary"),r=A(),s=k("select");for(let C=0;C<F.length;C+=1)F[C].c();o=A(),l=k("label"),u=U("Secondary"),h=A(),d=k("select"),p=k("option"),_=U("- None -");for(let C=0;C<Y.length;C+=1)Y[C].c();b=A(),w=k("fieldset"),S=k("legend"),S.textContent=P,I=A(),q=k("div");for(let C=0;C<V.length;C+=1)V[C].c();this.h()},l(C){e=y(C,"LABEL",{for:!0});var G=j(e);n=M(G,"Primary"),G.forEach(f),r=O(C),s=y(C,"SELECT",{id:!0});var W=j(s);for(let J=0;J<F.length;J+=1)F[J].l(W);W.forEach(f),o=O(C),l=y(C,"LABEL",{for:!0});var Q=j(l);u=M(Q,"Secondary"),Q.forEach(f),h=O(C),d=y(C,"SELECT",{id:!0});var ee=j(d);p=y(ee,"OPTION",{class:!0});var H=j(p);_=M(H,"- None -"),H.forEach(f);for(let J=0;J<Y.length;J+=1)Y[J].l(ee);ee.forEach(f),b=O(C),w=y(C,"FIELDSET",{});var Z=j(w);S=y(Z,"LEGEND",{"data-svelte-h":!0}),ie(S)!=="svelte-1aammnk"&&(S.textContent=P),I=O(Z),q=y(Z,"DIV",{class:!0});var te=j(q);for(let J=0;J<V.length;J+=1)V[J].l(te);te.forEach(f),Z.forEach(f),this.h()},h(){v(e,"for",t=i[0]+"-primary"),v(s,"id",a=i[0]+"-primary"),s.required=!0,i[1]===void 0&&Bt(()=>i[6].call(s)),v(l,"for",c=i[0]+"-secondary"),p.__value=$n,oe(p,p.__value),v(p,"class","svelte-18pcmkd"),v(d,"id",g=i[0]+"-secondary"),i[2]===void 0&&Bt(()=>i[7].call(d)),v(q,"class","three-columns svelte-18pcmkd"),ke(w,"grid-column","span 2")},m(C,G){m(C,e,G),$(e,n),m(C,r,G),m(C,s,G);for(let W=0;W<F.length;W+=1)F[W]&&F[W].m(s,null);Xe(s,i[1],!0),m(C,o,G),m(C,l,G),$(l,u),m(C,h,G),m(C,d,G),$(d,p),$(p,_);for(let W=0;W<Y.length;W+=1)Y[W]&&Y[W].m(d,null);Xe(d,i[2],!0),m(C,b,G),m(C,w,G),$(w,S),$(w,I),$(w,q);for(let W=0;W<V.length;W+=1)V[W]&&V[W].m(q,null);z||(K=[he(s,"change",i[6]),he(d,"change",i[7])],z=!0)},p(C,G){if(G&1&&t!==(t=C[0]+"-primary")&&v(e,"for",t),G&1&&a!==(a=C[0]+"-primary")&&v(s,"id",a),G&2&&Xe(s,C[1]),G&1&&c!==(c=C[0]+"-secondary")&&v(l,"for",c),G&2){re=pe(yt);let W;for(W=0;W<re.length;W+=1){const Q=Xr(C,re,W);Y[W]?Y[W].p(Q,G):(Y[W]=Zr(Q),Y[W].c(),Y[W].m(d,null))}for(;W<Y.length;W+=1)Y[W].d(1);Y.length=re.length}if(G&1&&g!==(g=C[0]+"-secondary")&&v(d,"id",g),G&4&&Xe(d,C[2]),G&31){X=pe(yt);let W;for(W=0;W<X.length;W+=1){const Q=Yr(C,X,W);V[W]?V[W].p(Q,G):(V[W]=Qr(Q),V[W].c(),V[W].m(q,null))}for(;W<V.length;W+=1)V[W].d(1);V.length=X.length}},d(C){C&&(f(e),f(r),f(s),f(o),f(l),f(h),f(d),f(b),f(w)),Ie(F,C),Ie(Y,C),Ie(V,C),z=!1,st(K)}}}function sc(i){let e,n;return e=new qe({props:{title:"Type",$$slots:{default:[rc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}const $n="";function ic(i,e,n){let{value:t}=e,{id:r="type-input"}=e,s=t[0],a=t[1]??$n,o=t.slice(2);const l=h=>{const d=h.target;d.checked?n(3,o=o.concat([d.value])):n(3,o=o.filter(p=>p!==d.value))};function u(){s=Kt(this),n(1,s)}function c(){a=Kt(this),n(2,a),n(1,s)}return i.$$set=h=>{"value"in h&&n(5,t=h.value),"id"in h&&n(0,r=h.id)},i.$$.update=()=>{i.$$.dirty&6&&n(2,a=s===a?$n:a),i.$$.dirty&14&&n(5,t=[...new Set([s,a].concat(o).filter(Is))])},[r,s,a,o,l,t,u,c]}class ac extends ce{constructor(e){super(),fe(this,e,ic,sc,ue,{value:5,id:0})}}function lc(i){let e,n,t,r,s,a;const o=i[2].default,l=et(o,i,i[1],null);return{c(){e=k("details"),n=k("summary"),t=k("h2"),r=U(i[0]),s=A(),l&&l.c(),this.h()},l(u){e=y(u,"DETAILS",{class:!0});var c=j(e);n=y(c,"SUMMARY",{class:!0});var h=j(n);t=y(h,"H2",{class:!0});var d=j(t);r=M(d,i[0]),d.forEach(f),h.forEach(f),s=O(c),l&&l.l(c),c.forEach(f),this.h()},h(){v(t,"class","svelte-ykbmly"),v(n,"class","svelte-ykbmly"),v(e,"class","svelte-ykbmly")},m(u,c){m(u,e,c),$(e,n),$(n,t),$(t,r),$(e,s),l&&l.m(e,null),a=!0},p(u,[c]){(!a||c&1)&&se(r,u[0]),l&&l.p&&(!a||c&2)&&tt(l,o,u,u[1],a?rt(o,u[1],c,null):nt(u[1]),null)},i(u){a||(E(l,u),a=!0)},o(u){T(l,u),a=!1},d(u){u&&f(e),l&&l.d(u)}}}function oc(i,e,n){let{$$slots:t={},$$scope:r}=e,{title:s}=e;return i.$$set=a=>{"title"in a&&n(0,s=a.title),"$$scope"in a&&n(1,r=a.$$scope)},[s,r,t]}class uc extends ce{constructor(e){super(),fe(this,e,oc,lc,ue,{title:0})}}function xr(i,e,n){const t=i.slice();return t[45]=e[n],t}function es(i,e,n){const t=i.slice();return t[48]=e[n],t}function ts(i,e,n){const t=i.slice();t[51]=e[n];const r=t[18](t[51].name);return t[52]=r,t}function ns(i,e,n){const t=i.slice();return t[55]=e[n],t}function rs(i,e,n){const t=i.slice();return t[48]=e[n],t[58]=e,t[59]=n,t}function cc(i){let e,n="Nickname",t,r,s,a,o,l,u,c,h="Level",d,p,_,g,b="AC",w,S,P,I,q="Max HP",z,K,B,F,re="Max Hit Dice",Y,X,V,C,G;function W(H){i[26](H)}function Q(H){i[27](H)}let ee={id:"nature-input",disabled:i[17]};return i[3]!==void 0&&(ee.value=i[3]),i[4]!==void 0&&(ee.custom=i[4]),a=new Xu({props:ee}),Ct.push(()=>At(a,"value",W)),Ct.push(()=>At(a,"custom",Q)),{c(){e=k("label"),e.textContent=n,t=A(),r=k("input"),s=A(),L(a.$$.fragment),u=A(),c=k("label"),c.textContent=h,d=A(),p=k("input"),_=A(),g=k("label"),g.textContent=b,w=A(),S=k("input"),P=A(),I=k("label"),I.textContent=q,z=A(),K=k("input"),B=A(),F=k("label"),F.textContent=re,Y=A(),X=k("input"),this.h()},l(H){e=y(H,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-128v817"&&(e.textContent=n),t=O(H),r=y(H,"INPUT",{name:!0,id:!0,type:!0}),s=O(H),R(a.$$.fragment,H),u=O(H),c=y(H,"LABEL",{for:!0,"data-svelte-h":!0}),ie(c)!=="svelte-8wxrph"&&(c.textContent=h),d=O(H),p=y(H,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0}),_=O(H),g=y(H,"LABEL",{for:!0,"data-svelte-h":!0}),ie(g)!=="svelte-z00dtr"&&(g.textContent=b),w=O(H),S=y(H,"INPUT",{name:!0,id:!0,min:!0,max:!0,type:!0}),P=O(H),I=y(H,"LABEL",{for:!0,"data-svelte-h":!0}),ie(I)!=="svelte-1c7akfc"&&(I.textContent=q),z=O(H),K=y(H,"INPUT",{name:!0,id:!0,min:!0,type:!0}),B=O(H),F=y(H,"LABEL",{for:!0,"data-svelte-h":!0}),ie(F)!=="svelte-1cvfb23"&&(F.textContent=re),Y=O(H),X=y(H,"INPUT",{name:!0,id:!0,min:!0,type:!0}),this.h()},h(){v(e,"for","nickname-input"),v(r,"name","name"),v(r,"id","nickname-input"),v(r,"type","text"),r.disabled=i[17],v(c,"for","level-input"),v(p,"name","level"),v(p,"id","level-input"),v(p,"type","number"),v(p,"min","1"),v(p,"max","20"),p.value=i[5],p.disabled=i[17],v(g,"for","ac-input"),v(S,"name","ac"),v(S,"id","ac-input"),v(S,"min","0"),v(S,"max","30"),v(S,"type","number"),S.disabled=i[17],v(I,"for","max-hp-input"),v(K,"name","max-hp"),v(K,"id","max-hp-input"),v(K,"min","1"),v(K,"type","number"),K.disabled=i[17],v(F,"for","max-hit-dice-input"),v(X,"name","max-hit-dice"),v(X,"id","max-hit-dice-input"),v(X,"min","1"),v(X,"type","number"),X.disabled=i[17]},m(H,Z){m(H,e,Z),m(H,t,Z),m(H,r,Z),oe(r,i[2]),m(H,s,Z),N(a,H,Z),m(H,u,Z),m(H,c,Z),m(H,d,Z),m(H,p,Z),m(H,_,Z),m(H,g,Z),m(H,w,Z),m(H,S,Z),oe(S,i[6]),m(H,P,Z),m(H,I,Z),m(H,z,Z),m(H,K,Z),oe(K,i[7]),m(H,B,Z),m(H,F,Z),m(H,Y,Z),m(H,X,Z),oe(X,i[8]),V=!0,C||(G=[he(r,"input",i[25]),he(p,"change",i[19]),he(S,"input",i[28]),he(K,"input",i[29]),he(X,"input",i[30])],C=!0)},p(H,Z){(!V||Z[0]&131072)&&(r.disabled=H[17]),Z[0]&4&&r.value!==H[2]&&oe(r,H[2]);const te={};Z[0]&131072&&(te.disabled=H[17]),!o&&Z[0]&8&&(o=!0,te.value=H[3],Pt(()=>o=!1)),!l&&Z[0]&16&&(l=!0,te.custom=H[4],Pt(()=>l=!1)),a.$set(te),(!V||Z[0]&32&&p.value!==H[5])&&(p.value=H[5]),(!V||Z[0]&131072)&&(p.disabled=H[17]),(!V||Z[0]&131072)&&(S.disabled=H[17]),Z[0]&64&&Ze(S.value)!==H[6]&&oe(S,H[6]),(!V||Z[0]&131072)&&(K.disabled=H[17]),Z[0]&128&&Ze(K.value)!==H[7]&&oe(K,H[7]),(!V||Z[0]&131072)&&(X.disabled=H[17]),Z[0]&256&&Ze(X.value)!==H[8]&&oe(X,H[8])},i(H){V||(E(a.$$.fragment,H),V=!0)},o(H){T(a.$$.fragment,H),V=!1},d(H){H&&(f(e),f(t),f(r),f(s),f(u),f(c),f(d),f(p),f(_),f(g),f(w),f(S),f(P),f(I),f(z),f(K),f(B),f(F),f(Y),f(X)),D(a,H),C=!1,st(G)}}}function fc(i){let e,n,t,r="Male",s,a,o,l,u="Female",c,h,d,p,_="None",g,b,w,S,P="Other",I,q,z;return I=Xt(i[32][2]),{c(){e=k("input"),n=A(),t=k("label"),t.textContent=r,s=A(),a=k("input"),o=A(),l=k("label"),l.textContent=u,c=A(),h=k("input"),d=A(),p=k("label"),p.textContent=_,g=A(),b=k("input"),w=A(),S=k("label"),S.textContent=P,this.h()},l(K){e=y(K,"INPUT",{type:!0,id:!0,name:!0}),n=O(K),t=y(K,"LABEL",{for:!0,"data-svelte-h":!0}),ie(t)!=="svelte-ua66e3"&&(t.textContent=r),s=O(K),a=y(K,"INPUT",{type:!0,id:!0,name:!0}),o=O(K),l=y(K,"LABEL",{for:!0,"data-svelte-h":!0}),ie(l)!=="svelte-1jldybb"&&(l.textContent=u),c=O(K),h=y(K,"INPUT",{type:!0,id:!0,name:!0}),d=O(K),p=y(K,"LABEL",{for:!0,"data-svelte-h":!0}),ie(p)!=="svelte-123wqev"&&(p.textContent=_),g=O(K),b=y(K,"INPUT",{type:!0,id:!0,name:!0}),w=O(K),S=y(K,"LABEL",{for:!0,"data-svelte-h":!0}),ie(S)!=="svelte-1jz62gn"&&(S.textContent=P),this.h()},h(){e.__value=Qe.Male,oe(e,e.__value),v(e,"type","radio"),v(e,"id","gender-input-male"),v(e,"name","gender"),e.disabled=i[17],v(t,"for","gender-input-male"),a.__value=Qe.Female,oe(a,a.__value),v(a,"type","radio"),v(a,"id","gender-input-female"),v(a,"name","gender"),a.disabled=i[17],v(l,"for","gender-input-female"),h.__value=Qe.None,oe(h,h.__value),v(h,"type","radio"),v(h,"id","gender-input-none"),v(h,"name","gender"),h.disabled=i[17],v(p,"for","gender-input-none"),b.__value=Qe.Other,oe(b,b.__value),v(b,"type","radio"),v(b,"id","gender-input-other"),v(b,"name","gender"),b.disabled=i[17],v(S,"for","gender-input-other"),I.p(e,a,h,b)},m(K,B){m(K,e,B),e.checked=e.__value===i[9],m(K,n,B),m(K,t,B),m(K,s,B),m(K,a,B),a.checked=a.__value===i[9],m(K,o,B),m(K,l,B),m(K,c,B),m(K,h,B),h.checked=h.__value===i[9],m(K,d,B),m(K,p,B),m(K,g,B),m(K,b,B),b.checked=b.__value===i[9],m(K,w,B),m(K,S,B),q||(z=[he(e,"change",i[31]),he(a,"change",i[33]),he(h,"change",i[34]),he(b,"change",i[35])],q=!0)},p(K,B){B[0]&131072&&(e.disabled=K[17]),B[0]&512&&(e.checked=e.__value===K[9]),B[0]&131072&&(a.disabled=K[17]),B[0]&512&&(a.checked=a.__value===K[9]),B[0]&131072&&(h.disabled=K[17]),B[0]&512&&(h.checked=h.__value===K[9]),B[0]&131072&&(b.disabled=K[17]),B[0]&512&&(b.checked=b.__value===K[9])},d(K){K&&(f(e),f(n),f(t),f(s),f(a),f(o),f(l),f(c),f(h),f(d),f(p),f(g),f(b),f(w),f(S)),I.r(),q=!1,st(z)}}}function ss(i){let e,n=i[48].abbr+"",t,r,s,a,o;function l(){i[36].call(s,i[48])}return{c(){e=k("label"),t=U(n),r=A(),s=k("input"),this.h()},l(u){e=y(u,"LABEL",{for:!0,class:!0});var c=j(e);t=M(c,n),c.forEach(f),r=O(u),s=y(u,"INPUT",{name:!0,id:!0,min:!0,max:!0,type:!0}),this.h()},h(){v(e,"for",i[48].abbr+"-input"),v(e,"class","upper"),v(s,"name",i[48].abbr),v(s,"id",i[48].abbr+"-input"),v(s,"min","0"),v(s,"max","30"),v(s,"type","number"),s.disabled=i[17],ke(s,"max-width","4em")},m(u,c){m(u,e,c),$(e,t),m(u,r,c),m(u,s,c),oe(s,i[10][i[48].abbr]),a||(o=he(s,"input",l),a=!0)},p(u,c){i=u,c[0]&131072&&(s.disabled=i[17]),c[0]&1024&&Ze(s.value)!==i[10][i[48].abbr]&&oe(s,i[10][i[48].abbr])},d(u){u&&(f(e),f(r),f(s)),a=!1,o()}}}function hc(i){let e,n=pe(Jt),t=[];for(let r=0;r<n.length;r+=1)t[r]=ss(rs(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,s){if(s[0]&132096){n=pe(Jt);let a;for(a=0;a<n.length;a+=1){const o=rs(r,n,a);t[a]?t[a].p(o,s):(t[a]=ss(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&f(e),Ie(t,r)}}}function is(i){let e,n=i[55].name+"",t,r;return{c(){e=k("option"),t=U(n),this.h()},l(s){e=y(s,"OPTION",{});var a=j(e);t=M(a,n),a.forEach(f),this.h()},h(){e.__value=r=i[55].id,oe(e,e.__value)},m(s,a){m(s,e,a),$(e,t)},p(s,a){a[0]&1&&n!==(n=s[55].name+"")&&se(t,n),a[0]&1&&r!==(r=s[55].id)&&(e.__value=r,oe(e,e.__value))},d(s){s&&f(e)}}}function dc(i){let e,n="Ability",t,r,s,a,o=pe(i[0].abilities),l=[];for(let u=0;u<o.length;u+=1)l[u]=is(ns(i,o,u));return{c(){e=k("label"),e.textContent=n,t=A(),r=k("select");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=y(u,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1jmh84x"&&(e.textContent=n),t=O(u),r=y(u,"SELECT",{id:!0});var c=j(r);for(let h=0;h<l.length;h+=1)l[h].l(c);c.forEach(f),this.h()},h(){v(e,"for","ability-input"),v(r,"id","ability-input"),i[11]===void 0&&Bt(()=>i[37].call(r))},m(u,c){m(u,e,c),m(u,t,c),m(u,r,c);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(r,null);Xe(r,i[11],!0),s||(a=he(r,"change",i[37]),s=!0)},p(u,c){if(c[0]&1){o=pe(u[0].abilities);let h;for(h=0;h<o.length;h+=1){const d=ns(u,o,h);l[h]?l[h].p(d,c):(l[h]=is(d),l[h].c(),l[h].m(r,null))}for(;h<l.length;h+=1)l[h].d(1);l.length=o.length}c[0]&2049&&Xe(r,u[11])},d(u){u&&(f(e),f(t),f(r)),Ie(l,u),s=!1,a()}}}function as(i){let e,n,t,r=i[51].name+"",s,a,o,l;return a=Xt(i[32][1]),{c(){e=k("input"),n=A(),t=k("label"),s=U(r),this.h()},l(u){e=y(u,"INPUT",{type:!0,id:!0,name:!0}),n=O(u),t=y(u,"LABEL",{for:!0,class:!0});var c=j(t);s=M(c,r),c.forEach(f),this.h()},h(){e.__value=i[51].name,oe(e,e.__value),v(e,"type","checkbox"),v(e,"id","proficiencies-input-"+i[52]),v(e,"name","proficiencies"),e.disabled=i[17],v(t,"for","proficiencies-input-"+i[52]),v(t,"class","cap"),a.p(e)},m(u,c){m(u,e,c),e.checked=~(i[12]||[]).indexOf(e.__value),m(u,n,c),m(u,t,c),$(t,s),o||(l=he(e,"change",i[38]),o=!0)},p(u,c){c[0]&131072&&(e.disabled=u[17]),c[0]&4096&&(e.checked=~(u[12]||[]).indexOf(e.__value))},d(u){u&&(f(e),f(n),f(t)),a.r(),o=!1,l()}}}function pc(i){let e,n=pe(cn),t=[];for(let r=0;r<n.length;r+=1)t[r]=as(ts(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,s){if(s[0]&397312){n=pe(cn);let a;for(a=0;a<n.length;a+=1){const o=ts(r,n,a);t[a]?t[a].p(o,s):(t[a]=as(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&f(e),Ie(t,r)}}}function ls(i){let e,n,t,r=i[48].name+"",s,a,o,l;return a=Xt(i[32][0]),{c(){e=k("input"),n=A(),t=k("label"),s=U(r),this.h()},l(u){e=y(u,"INPUT",{type:!0,id:!0,name:!0}),n=O(u),t=y(u,"LABEL",{for:!0,class:!0});var c=j(t);s=M(c,r),c.forEach(f),this.h()},h(){e.__value=i[48].abbr,oe(e,e.__value),v(e,"type","checkbox"),v(e,"id","saves-input-"+i[48].abbr),v(e,"name","saves"),e.disabled=i[17],v(t,"for","saves-input-"+i[48].abbr),v(t,"class","cap"),a.p(e)},m(u,c){m(u,e,c),e.checked=~(i[13]||[]).indexOf(e.__value),m(u,n,c),m(u,t,c),$(t,s),o||(l=he(e,"change",i[39]),o=!0)},p(u,c){c[0]&131072&&(e.disabled=u[17]),c[0]&8192&&(e.checked=~(u[13]||[]).indexOf(e.__value))},d(u){u&&(f(e),f(n),f(t)),a.r(),o=!1,l()}}}function _c(i){let e,n=pe(Jt),t=[];for(let r=0;r<n.length;r+=1)t[r]=ls(es(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,s){if(s[0]&139264){n=pe(Jt);let a;for(a=0;a<n.length;a+=1){const o=es(r,n,a);t[a]?t[a].p(o,s):(t[a]=ls(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&f(e),Ie(t,r)}}}function os(i,e){let n,t,r;return t=new ec({props:{move:e[45],disabled:e[17]}}),t.$on("remove",function(){vn(e[20](e[45].id))&&e[20](e[45].id).apply(this,arguments)}),{key:i,first:null,c(){n=ne(),L(t.$$.fragment),this.h()},l(s){n=ne(),R(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){m(s,n,a),N(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&65536&&(o.move=e[45]),a[0]&131072&&(o.disabled=e[17]),t.$set(o)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(t,s)}}}function mc(i){let e;return{c(){e=U("Add Move")},l(n){e=M(n,"Add Move")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function gc(i){let e=[],n=new Map,t,r,s,a,o,l=pe(i[16]);const u=c=>c[45].id;for(let c=0;c<l.length;c+=1){let h=xr(i,l,c),d=u(h);n.set(d,e[c]=os(d,h))}return a=new we({props:{$$slots:{default:[mc]},$$scope:{ctx:i}}}),a.$on("click",i[21]),{c(){for(let c=0;c<e.length;c+=1)e[c].c();t=A(),r=k("span"),s=A(),L(a.$$.fragment)},l(c){for(let h=0;h<e.length;h+=1)e[h].l(c);t=O(c),r=y(c,"SPAN",{}),j(r).forEach(f),s=O(c),R(a.$$.fragment,c)},m(c,h){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(c,h);m(c,t,h),m(c,r,h),m(c,s,h),N(a,c,h),o=!0},p(c,h){h[0]&1245184&&(l=pe(c[16]),ge(),e=ys(e,h,u,1,c,l,n,t.parentNode,Es,os,t,xr),$e());const d={};h[1]&536870912&&(d.$$scope={dirty:h,ctx:c}),a.$set(d)},i(c){if(!o){for(let h=0;h<l.length;h+=1)E(e[h]);E(a.$$.fragment,c),o=!0}},o(c){for(let h=0;h<e.length;h+=1)T(e[h]);T(a.$$.fragment,c),o=!1},d(c){c&&(f(t),f(r),f(s));for(let h=0;h<e.length;h+=1)e[h].d(c);D(a,c)}}}function $c(i){let e,n,t="Notes",r,s,a,o;return{c(){e=k("div"),n=k("label"),n.textContent=t,r=A(),s=k("textarea"),this.h()},l(l){e=y(l,"DIV",{class:!0});var u=j(e);n=y(u,"LABEL",{for:!0,"data-svelte-h":!0}),ie(n)!=="svelte-14hlr3r"&&(n.textContent=t),r=O(u),s=y(u,"TEXTAREA",{name:!0,id:!0,rows:!0,class:!0,placeholder:!0}),j(s).forEach(f),u.forEach(f),this.h()},h(){v(n,"for","notes-input"),v(s,"name","notes"),v(s,"id","notes-input"),v(s,"rows","6"),v(s,"class","font-sm svelte-lj4qgx"),v(s,"placeholder","Use this for any general notes not covered by the above fields..."),v(e,"class","stacked svelte-lj4qgx")},m(l,u){m(l,e,u),$(e,n),$(e,r),$(e,s),oe(s,i[14]),a||(o=he(s,"input",i[40]),a=!0)},p(l,u){u[0]&16384&&oe(s,l[14])},d(l){l&&f(e),a=!1,o()}}}function vc(i){let e,n,t;function r(a){i[41](a)}let s={id:"type-input"};return i[15]!==void 0&&(s.value=i[15]),e=new ac({props:s}),Ct.push(()=>At(e,"value",r)),{c(){L(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,o){N(e,a,o),t=!0},p(a,o){const l={};!n&&o[0]&32768&&(n=!0,l.value=a[15],Pt(()=>n=!1)),e.$set(l)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){D(e,a)}}}function bc(i){let e;return{c(){e=U("Cancel")},l(n){e=M(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function wc(i){let e;return{c(){e=U("Finish!")},l(n){e=M(n,"Finish!")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function kc(i){let e,n,t,r;return e=new we({props:{variant:"ghost",disabled:i[17],$$slots:{default:[bc]},$$scope:{ctx:i}}}),e.$on("click",i[22]),t=new we({props:{type:"submit",disabled:i[17],$$slots:{default:[wc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a[0]&131072&&(o.disabled=s[17]),a[1]&536870912&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a[0]&131072&&(l.disabled=s[17]),a[1]&536870912&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function yc(i){let e,n,t,r,s,a,o,l,u,c,h,d,p,_,g,b,w,S,P,I,q,z,K;return n=new qe({props:{title:"Basic Info",$$slots:{default:[cc]},$$scope:{ctx:i}}}),r=new qe({props:{title:"Gender",columns:4,$$slots:{default:[fc]},$$scope:{ctx:i}}}),a=new qe({props:{title:"Attributes",columns:3,$$slots:{default:[hc]},$$scope:{ctx:i}}}),l=new qe({props:{title:"Feats",$$slots:{default:[dc]},$$scope:{ctx:i}}}),c=new qe({props:{title:"Proficiencies",columns:2,$$slots:{default:[pc]},$$scope:{ctx:i}}}),d=new qe({props:{title:"Saving Throws",columns:2,$$slots:{default:[_c]},$$scope:{ctx:i}}}),_=new qe({props:{title:"Moves",$$slots:{default:[gc]},$$scope:{ctx:i}}}),b=new qe({props:{title:"General",$$slots:{default:[$c]},$$scope:{ctx:i}}}),S=new uc({props:{title:"Advanced",$$slots:{default:[vc]},$$scope:{ctx:i}}}),I=new je({props:{$$slots:{default:[kc]},$$scope:{ctx:i}}}),{c(){e=k("form"),L(n.$$.fragment),t=A(),L(r.$$.fragment),s=A(),L(a.$$.fragment),o=A(),L(l.$$.fragment),u=A(),L(c.$$.fragment),h=A(),L(d.$$.fragment),p=A(),L(_.$$.fragment),g=A(),L(b.$$.fragment),w=A(),L(S.$$.fragment),P=A(),L(I.$$.fragment)},l(B){e=y(B,"FORM",{});var F=j(e);R(n.$$.fragment,F),t=O(F),R(r.$$.fragment,F),s=O(F),R(a.$$.fragment,F),o=O(F),R(l.$$.fragment,F),u=O(F),R(c.$$.fragment,F),h=O(F),R(d.$$.fragment,F),p=O(F),R(_.$$.fragment,F),g=O(F),R(b.$$.fragment,F),w=O(F),R(S.$$.fragment,F),P=O(F),R(I.$$.fragment,F),F.forEach(f)},m(B,F){m(B,e,F),N(n,e,null),$(e,t),N(r,e,null),$(e,s),N(a,e,null),$(e,o),N(l,e,null),$(e,u),N(c,e,null),$(e,h),N(d,e,null),$(e,p),N(_,e,null),$(e,g),N(b,e,null),$(e,w),N(S,e,null),$(e,P),N(I,e,null),q=!0,z||(K=he(e,"submit",Lt(i[23])),z=!0)},p(B,F){const re={};F[0]&131580|F[1]&536870912&&(re.$$scope={dirty:F,ctx:B}),n.$set(re);const Y={};F[0]&131584|F[1]&536870912&&(Y.$$scope={dirty:F,ctx:B}),r.$set(Y);const X={};F[0]&132096|F[1]&536870912&&(X.$$scope={dirty:F,ctx:B}),a.$set(X);const V={};F[0]&2049|F[1]&536870912&&(V.$$scope={dirty:F,ctx:B}),l.$set(V);const C={};F[0]&135168|F[1]&536870912&&(C.$$scope={dirty:F,ctx:B}),c.$set(C);const G={};F[0]&139264|F[1]&536870912&&(G.$$scope={dirty:F,ctx:B}),d.$set(G);const W={};F[0]&196608|F[1]&536870912&&(W.$$scope={dirty:F,ctx:B}),_.$set(W);const Q={};F[0]&16384|F[1]&536870912&&(Q.$$scope={dirty:F,ctx:B}),b.$set(Q);const ee={};F[0]&32768|F[1]&536870912&&(ee.$$scope={dirty:F,ctx:B}),S.$set(ee);const H={};F[0]&131072|F[1]&536870912&&(H.$$scope={dirty:F,ctx:B}),I.$set(H)},i(B){q||(E(n.$$.fragment,B),E(r.$$.fragment,B),E(a.$$.fragment,B),E(l.$$.fragment,B),E(c.$$.fragment,B),E(d.$$.fragment,B),E(_.$$.fragment,B),E(b.$$.fragment,B),E(S.$$.fragment,B),E(I.$$.fragment,B),q=!0)},o(B){T(n.$$.fragment,B),T(r.$$.fragment,B),T(a.$$.fragment,B),T(l.$$.fragment,B),T(c.$$.fragment,B),T(d.$$.fragment,B),T(_.$$.fragment,B),T(b.$$.fragment,B),T(S.$$.fragment,B),T(I.$$.fragment,B),q=!1},d(B){B&&f(e),D(n),D(r),D(a),D(l),D(c),D(d),D(_),D(b),D(S),D(I),z=!1,K()}}}function Ec(i){let e,n;return e=new lt({props:{saving:i[1],$$slots:{default:[yc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r[0]&2&&(s.saving=t[1]),r[0]&262141|r[1]&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Tc(i,e,n){let t;const r=ye=>ye.replace(/\s/g,""),s=it();let{pokemon:a}=e,{species:o}=e,{saving:l=!1}=e,u=a.nickname,c=a.nature,h=a.nature,d=a.level,p=a.ac,_=a.hp.max,g=a.hitDice.max,b=a.gender,w={...a.attributes},S=a.ability,P=a.proficiencies,I=a.savingThrows,q=a.notes,z=a.type;const K=ye=>{const Le=ye.target;d===g&&n(8,g=parseInt(Le.value)),n(5,d=parseInt(Le.value))};let B=-1001;const F=()=>(--B).toString();let re=structuredClone(a.moves);const Y=ye=>()=>{n(16,re=re.filter(Le=>Le.id!==ye))},X=()=>{n(16,re=[...re,{id:F(),moveId:"tackle",pp:{current:20,max:20},notes:""}])},V=()=>{s("cancel")},C=()=>{s("update",{...a,nickname:u.length>0?u:o.name,type:z,nature:c==="other"?h:c,level:d,ac:p,hp:{current:a.hp.current+(_-a.hp.max),max:_},hitDice:{current:a.hitDice.current+(g-a.hitDice.max),max:g},gender:b,attributes:w,ability:S,proficiencies:P,savingThrows:I,moves:re,notes:q})},G=[[],[],[]];function W(){u=this.value,n(2,u)}function Q(ye){c=ye,n(3,c)}function ee(ye){h=ye,n(4,h)}function H(){p=Ze(this.value),n(6,p)}function Z(){_=Ze(this.value),n(7,_)}function te(){g=Ze(this.value),n(8,g)}function J(){b=this.__value,n(9,b)}function ae(){b=this.__value,n(9,b)}function me(){b=this.__value,n(9,b)}function Pe(){b=this.__value,n(9,b)}function Ye(ye){w[ye.abbr]=Ze(this.value),n(10,w)}function le(){S=Kt(this),n(11,S),n(0,o)}function ve(){P=Rn(G[1],this.__value,this.checked),n(12,P)}function Ke(){I=Rn(G[0],this.__value,this.checked),n(13,I)}function Ae(){q=this.value,n(14,q)}function Ge(ye){z=ye,n(15,z)}return i.$$set=ye=>{"pokemon"in ye&&n(24,a=ye.pokemon),"species"in ye&&n(0,o=ye.species),"saving"in ye&&n(1,l=ye.saving)},i.$$.update=()=>{i.$$.dirty[0]&2&&n(17,t=l)},[o,l,u,c,h,d,p,_,g,b,w,S,P,I,q,z,re,t,r,K,Y,X,V,C,a,W,Q,ee,H,Z,te,J,G,ae,me,Pe,Ye,le,ve,Ke,Ae,Ge]}let Sc=class extends ce{constructor(e){super(),fe(this,e,Tc,Ec,ue,{pokemon:24,species:0,saving:1},null,[-1,-1])}};function Cc(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Pc(i){let e,n;return e=new Ve({props:{title:"Edit "+i[2].nickname,$$slots:{default:[Lc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.title="Edit "+t[2].nickname),r&1150&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ic(i){let e,n,t="You do not have permission to edit this pokemon.",r,s,a;return s=new je({props:{$$slots:{default:[jc]},$$scope:{ctx:i}}}),{c(){e=k("section"),n=k("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=y(o,"SECTION",{});var l=j(e);n=y(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-1ag681u"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(f)},m(o,l){m(o,e,l),$(e,n),$(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&1034&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&f(e),D(s)}}}function Ac(i){let e,n;return e=new Sc({props:{pokemon:i[2],species:i[5],saving:i[4]}}),e.$on("cancel",i[8]),e.$on("update",i[7]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.pokemon=t[2]),r&32&&(s.species=t[5]),r&16&&(s.saving=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Oc(i){let e;return{c(){e=U("Go Back")},l(n){e=M(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function jc(i){let e,n;return e=new we({props:{href:de.trainers(i[3].info.readKey,i[1]),$$slots:{default:[Oc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&10&&(s.href=de.trainers(t[3].info.readKey,t[1])),r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Lc(i){let e,n,t,r;const s=[Ac,Ic],a=[];function o(l,u){return l[6]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function Rc(i){let e,n,t,r;const s=[Pc,Cc],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function Nc(i){let e,n;return e=new Qt({props:{trainer:i[3],id:i[1],titlePrefix:"Edit",$$slots:{default:[Rc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&8&&(s.trainer=t[3]),r&2&&(s.id=t[1]),r&1150&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Dc(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=He(c,g=>n(3,a=g)),c),u;De(i,_t,g=>n(9,u=g)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{id:h}=e,d=!1;const p=g=>{var b;n(4,d=!0),(b=a.update)==null||b.pokemon(g.detail).then(()=>{var w;return(w=a.update)==null?void 0:w.moveset(g.detail)}).then(()=>{n(4,d=!1),Be(de.trainers(a.info.readKey,h))}).catch(()=>{n(4,d=!1)})},_=()=>{Be(de.trainers(a.info.readKey,h))};return i.$$set=g=>{"trainer"in g&&l(n(0,c=g.trainer)),"id"in g&&n(1,h=g.id)},i.$$.update=()=>{i.$$.dirty&8&&n(6,t=a.update!=null),i.$$.dirty&10&&n(2,r=a.pokemon.find(g=>g.id===h)),i.$$.dirty&516&&n(5,s=u==null?void 0:u.find(g=>g.id===(r==null?void 0:r.pokemonId)))},[c,h,r,a,d,s,t,p,_,u]}class Uc extends ce{constructor(e){super(),fe(this,e,Dc,Nc,ue,{trainer:0,id:1})}}const us=i=>e=>i.filter(n=>!e.includes(n));function cs(i,e,n){var s,a;const t=i.slice();t[22]=e[n];const r=((a=(s=t[5])==null?void 0:s.find(function(...l){return i[20](t[22],...l)}))==null?void 0:a.name)??"";return t[23]=r,t}function fs(i){let e,n,t,r,s,a,o,l,u;n=new qe({props:{title:"Choose one",columns:2,$$slots:{default:[Mc]},$$scope:{ctx:i}}});let c=i[11]&&ds(i);return a=new je({props:{$$slots:{default:[Fc]},$$scope:{ctx:i}}}),{c(){e=k("form"),L(n.$$.fragment),t=A(),r=k("section"),c&&c.c(),s=A(),L(a.$$.fragment),this.h()},l(h){e=y(h,"FORM",{});var d=j(e);R(n.$$.fragment,d),t=O(d),r=y(d,"SECTION",{class:!0});var p=j(r);c&&c.l(p),p.forEach(f),s=O(d),R(a.$$.fragment,d),d.forEach(f),this.h()},h(){v(r,"class","svelte-1r7xq7f"),ke(r,"min-height","12em")},m(h,d){m(h,e,d),N(n,e,null),$(e,t),$(e,r),c&&c.m(r,null),$(e,s),N(a,e,null),o=!0,l||(u=he(e,"submit",Lt(i[15])),l=!0)},p(h,d){const p={};d&67113002&&(p.$$scope={dirty:d,ctx:h}),n.$set(p),h[11]?c?c.p(h,d):(c=ds(h),c.c(),c.m(r,null)):c&&(c.d(1),c=null);const _={};d&67112960&&(_.$$scope={dirty:d,ctx:h}),a.$set(_)},i(h){o||(E(n.$$.fragment,h),E(a.$$.fragment,h),o=!0)},o(h){T(n.$$.fragment,h),T(a.$$.fragment,h),o=!1},d(h){h&&f(e),D(n),c&&c.d(),D(a),l=!1,u()}}}function hs(i){let e,n,t,r=!1,s,a,o=i[23]+"",l,u,c,h,d;return c=Xt(i[19][0]),{c(){e=k("input"),s=A(),a=k("label"),l=U(o),this.h()},l(p){e=y(p,"INPUT",{id:!0,name:!0,type:!0}),s=O(p),a=y(p,"LABEL",{for:!0});var _=j(a);l=M(_,o),_.forEach(f),this.h()},h(){v(e,"id",n="evolve-to-"+i[22].id),v(e,"name","evolve-to"),v(e,"type","radio"),e.__value=t=i[22].id,oe(e,e.__value),e.disabled=i[12],e.required=!0,v(a,"for",u="evolve-to-"+i[22].id),c.p(e)},m(p,_){m(p,e,_),e.checked=e.__value===i[3],m(p,s,_),m(p,a,_),$(a,l),h||(d=he(e,"change",i[18]),h=!0)},p(p,_){_&2&&n!==(n="evolve-to-"+p[22].id)&&v(e,"id",n),_&2&&t!==(t=p[22].id)&&(e.__value=t,oe(e,e.__value),r=!0),_&4096&&(e.disabled=p[12]),(r||_&10)&&(e.checked=e.__value===p[3]),_&34&&o!==(o=p[23]+"")&&se(l,o),_&2&&u!==(u="evolve-to-"+p[22].id)&&v(a,"for",u)},d(p){p&&(f(e),f(s),f(a)),c.r(),h=!1,d()}}}function Mc(i){let e,n=pe(i[1].evolution.to),t=[];for(let r=0;r<n.length;r+=1)t[r]=hs(cs(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,s){if(s&4138){n=pe(r[1].evolution.to);let a;for(a=0;a<n.length;a+=1){const o=cs(r,n,a);t[a]?t[a].p(o,s):(t[a]=hs(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&f(e),Ie(t,r)}}}function ds(i){let e,n,t=Nn(i[1].name,i[11],Mn(Se,i[5],i[13]))+"",r,s,a="Evolving this pokemon will have these effects:",o,l,u,c,h,d,p,_,g,b=i[9]>0&&ps(i),w=i[8].length>0&&_s(i),S=i[7].length>0&&ms(i),P=i[6]&&i[0].ability!==i[6].id&&gs(i);return{c(){e=k("p"),n=new zs(!1),r=A(),s=k("p"),s.textContent=a,o=A(),l=k("ul"),u=k("li"),c=U("Max HP will increase by "),h=U(i[10]),d=A(),b&&b.c(),p=A(),w&&w.c(),_=A(),S&&S.c(),g=A(),P&&P.c(),this.h()},l(I){e=y(I,"P",{});var q=j(e);n=Vs(q,!1),q.forEach(f),r=O(I),s=y(I,"P",{"data-svelte-h":!0}),ie(s)!=="svelte-stsmeq"&&(s.textContent=a),o=O(I),l=y(I,"UL",{});var z=j(l);u=y(z,"LI",{});var K=j(u);c=M(K,"Max HP will increase by "),h=M(K,i[10]),K.forEach(f),d=O(z),b&&b.l(z),p=O(z),w&&w.l(z),_=O(z),S&&S.l(z),g=O(z),P&&P.l(z),z.forEach(f),this.h()},h(){n.a=null},m(I,q){m(I,e,q),n.m(t,e),m(I,r,q),m(I,s,q),m(I,o,q),m(I,l,q),$(l,u),$(u,c),$(u,h),$(l,d),b&&b.m(l,null),$(l,p),w&&w.m(l,null),$(l,_),S&&S.m(l,null),$(l,g),P&&P.m(l,null)},p(I,q){q&10274&&t!==(t=Nn(I[1].name,I[11],Mn(Se,I[5],I[13]))+"")&&n.p(t),q&1024&&se(h,I[10]),I[9]>0?b?b.p(I,q):(b=ps(I),b.c(),b.m(l,p)):b&&(b.d(1),b=null),I[8].length>0?w?w.p(I,q):(w=_s(I),w.c(),w.m(l,_)):w&&(w.d(1),w=null),I[7].length>0?S?S.p(I,q):(S=ms(I),S.c(),S.m(l,g)):S&&(S.d(1),S=null),I[6]&&I[0].ability!==I[6].id?P?P.p(I,q):(P=gs(I),P.c(),P.m(l,null)):P&&(P.d(1),P=null)},d(I){I&&(f(e),f(r),f(s),f(o),f(l)),b&&b.d(),w&&w.d(),S&&S.d(),P&&P.d()}}}function ps(i){let e,n,t;return{c(){e=k("li"),n=U("AC will increase by "),t=U(i[9])},l(r){e=y(r,"LI",{});var s=j(e);n=M(s,"AC will increase by "),t=M(s,i[9]),s.forEach(f)},m(r,s){m(r,e,s),$(e,n),$(e,t)},p(r,s){s&512&&se(t,r[9])},d(r){r&&f(e)}}}function _s(i){let e,n,t,r=i[8].join(", ")+"",s;return{c(){e=k("li"),n=U("Proficiency in "),t=k("span"),s=U(r),this.h()},l(a){e=y(a,"LI",{});var o=j(e);n=M(o,"Proficiency in "),t=y(o,"SPAN",{class:!0});var l=j(t);s=M(l,r),l.forEach(f),o.forEach(f),this.h()},h(){v(t,"class","cap")},m(a,o){m(a,e,o),$(e,n),$(e,t),$(t,s)},p(a,o){o&256&&r!==(r=a[8].join(", ")+"")&&se(s,r)},d(a){a&&f(e)}}}function ms(i){let e,n,t,r=i[7].join(", ")+"",s,a;return{c(){e=k("li"),n=U("Proficiency in "),t=k("span"),s=U(r),a=U(" saving throws"),this.h()},l(o){e=y(o,"LI",{});var l=j(e);n=M(l,"Proficiency in "),t=y(l,"SPAN",{class:!0});var u=j(t);s=M(u,r),u.forEach(f),a=M(l," saving throws"),l.forEach(f),this.h()},h(){v(t,"class","upper")},m(o,l){m(o,e,l),$(e,n),$(e,t),$(t,s),$(e,a)},p(o,l){l&128&&r!==(r=o[7].join(", ")+"")&&se(s,r)},d(o){o&&f(e)}}}function gs(i){let e,n,t=i[4].name+"",r,s,a=i[6].name+"",o;return{c(){e=k("li"),n=U("Ability will change from "),r=U(t),s=U(" to "),o=U(a)},l(l){e=y(l,"LI",{});var u=j(e);n=M(u,"Ability will change from "),r=M(u,t),s=M(u," to "),o=M(u,a),u.forEach(f)},m(l,u){m(l,e,u),$(e,n),$(e,r),$(e,s),$(e,o)},p(l,u){u&16&&t!==(t=l[4].name+"")&&se(r,t),u&64&&a!==(a=l[6].name+"")&&se(o,a)},d(l){l&&f(e)}}}function Bc(i){let e;return{c(){e=U("Cancel")},l(n){e=M(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Kc(i){let e;return{c(){e=U("Evolve!")},l(n){e=M(n,"Evolve!")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Fc(i){let e,n,t,r;return e=new we({props:{variant:"ghost",disabled:i[12],$$slots:{default:[Bc]},$$scope:{ctx:i}}}),e.$on("click",i[14]),t=new we({props:{type:"submit",disabled:i[12],$$slots:{default:[Kc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.disabled=s[12]),a&67108864&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&4096&&(l.disabled=s[12]),a&67108864&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function qc(i){var r,s;let e,n,t=((s=(r=i[1].evolution)==null?void 0:r.to)==null?void 0:s.length)>0&&fs(i);return{c(){t&&t.c(),e=ne()},l(a){t&&t.l(a),e=ne()},m(a,o){t&&t.m(a,o),m(a,e,o),n=!0},p(a,o){var l,u;((u=(l=a[1].evolution)==null?void 0:l.to)==null?void 0:u.length)>0?t?(t.p(a,o),o&2&&E(t,1)):(t=fs(a),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(ge(),T(t,1,1,()=>{t=null}),$e())},i(a){n||(E(t),n=!0)},o(a){T(t),n=!1},d(a){a&&f(e),t&&t.d(a)}}}function Hc(i){let e,n;return e=new lt({props:{saving:i[2],$$slots:{default:[qc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&4&&(s.saving=t[2]),r&67125243&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function zc(i,e,n){var F,re;let t,r,s,a,o,l,u,c,h,d,p,_;De(i,_t,Y=>n(5,p=Y)),De(i,wn,Y=>n(13,_=Y));const g=it();let{pokemon:b}=e,{species:w}=e,{saving:S=!1}=e,P=((re=(F=w.evolution)==null?void 0:F.to)==null?void 0:re.length)===1?w.evolution.to[0].id:void 0;const I=()=>{g("cancel")},q=()=>{const Y={...b,pokemonId:P,nickname:b.nickname===w.name?o.name:b.nickname,hp:{current:b.hp.max+l,max:b.hp.max+l},ac:b.ac+u,proficiencies:b.proficiencies.concat(c),savingThrows:b.savingThrows.concat(h),ability:(d==null?void 0:d.id)??b.ability};g("submit",Y)},z=[[]];function K(){P=this.__value,n(3,P)}const B=(Y,X)=>X.id===Y.id;return i.$$set=Y=>{"pokemon"in Y&&n(0,b=Y.pokemon),"species"in Y&&n(1,w=Y.species),"saving"in Y&&n(2,S=Y.saving)},i.$$.update=()=>{var Y,X;i.$$.dirty&4&&n(12,t=S),i.$$.dirty&3&&n(4,r=w.abilities.find(V=>V.id===b.ability)),i.$$.dirty&18&&n(17,s=w.abilities.indexOf(r)),i.$$.dirty&10&&n(11,a=(X=(Y=w.evolution)==null?void 0:Y.to)==null?void 0:X.find(V=>V.id===P)),i.$$.dirty&40&&n(16,o=p==null?void 0:p.find(V=>V.id===P)),i.$$.dirty&1&&n(10,l=b.level*2),i.$$.dirty&65537&&n(9,u=Math.max(0,((o==null?void 0:o.ac)??0)-b.ac)),i.$$.dirty&65537&&n(8,c=us((o==null?void 0:o.skills)??[])(b.proficiencies)),i.$$.dirty&65537&&n(7,h=us((o==null?void 0:o.savingThrows)??[])(b.savingThrows)),i.$$.dirty&196608&&n(6,d=o==null?void 0:o.abilities[Math.min((o==null?void 0:o.abilities.length)-1,s)])},[b,w,S,P,r,p,d,h,c,u,l,a,t,_,I,q,o,s,K,z,B]}class Vc extends ce{constructor(e){super(),fe(this,e,zc,Hc,ue,{pokemon:0,species:1,saving:2})}}function Gc(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Jc(i){let e,n;return e=new Ve({props:{title:"Evolve "+i[2].nickname,$$slots:{default:[Qc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.title="Evolve "+t[2].nickname),r&1150&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Wc(i){let e,n,t="You do not have permission to evolve this pokemon.",r,s,a;return s=new je({props:{$$slots:{default:[Zc]},$$scope:{ctx:i}}}),{c(){e=k("section"),n=k("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=y(o,"SECTION",{});var l=j(e);n=y(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-756k5x"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(f)},m(o,l){m(o,e,l),$(e,n),$(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&1034&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&f(e),D(s)}}}function Yc(i){let e,n;return e=new Vc({props:{pokemon:i[2],species:i[5],saving:i[4]}}),e.$on("cancel",i[8]),e.$on("submit",i[7]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.pokemon=t[2]),r&32&&(s.species=t[5]),r&16&&(s.saving=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Xc(i){let e;return{c(){e=U("Go Back")},l(n){e=M(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Zc(i){let e,n;return e=new we({props:{href:de.trainers(i[3].info.readKey,i[1]),$$slots:{default:[Xc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&10&&(s.href=de.trainers(t[3].info.readKey,t[1])),r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Qc(i){let e,n,t,r;const s=[Yc,Wc],a=[];function o(l,u){return l[6]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function xc(i){let e,n,t,r;const s=[Jc,Gc],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function ef(i){let e,n;return e=new Qt({props:{trainer:i[3],id:i[1],titlePrefix:"Evolve",$$slots:{default:[xc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&8&&(s.trainer=t[3]),r&2&&(s.id=t[1]),r&1150&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function tf(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=He(c,g=>n(3,a=g)),c),u;De(i,_t,g=>n(9,u=g)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{id:h}=e,d=!1;const p=g=>{var b;n(4,d=!0),(b=a.update)==null||b.pokemon(g.detail).then(()=>{n(4,d=!1),Be(de.trainers(a.info.readKey,h))}).catch(()=>{n(4,d=!1)})},_=()=>{Be(de.trainers(a.info.readKey,h))};return i.$$set=g=>{"trainer"in g&&l(n(0,c=g.trainer)),"id"in g&&n(1,h=g.id)},i.$$.update=()=>{i.$$.dirty&8&&n(6,t=a.update!=null),i.$$.dirty&10&&n(2,r=a.pokemon.find(g=>g.id===h)),i.$$.dirty&516&&n(5,s=u==null?void 0:u.find(g=>g.id===(r==null?void 0:r.pokemonId)))},[c,h,r,a,d,s,t,p,_,u]}class nf extends ce{constructor(e){super(),fe(this,e,tf,ef,ue,{trainer:0,id:1})}}function rf(i){let e,n="Cannot find trainer",t,r,s,a,o,l,u,c,h=`You can view a <a href="${de.trainers()}">list of your trainers</a> or search by trainer id.`;return{c(){e=k("h1"),e.textContent=n,t=A(),r=k("p"),s=U("No trainer with id "),a=k("strong"),o=U(i[0]),l=U(" seems to be registered."),u=A(),c=k("p"),c.innerHTML=h,this.h()},l(d){e=y(d,"H1",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-q8duw8"&&(e.textContent=n),t=O(d),r=y(d,"P",{class:!0});var p=j(r);s=M(p,"No trainer with id "),a=y(p,"STRONG",{});var _=j(a);o=M(_,i[0]),_.forEach(f),l=M(p," seems to be registered."),p.forEach(f),u=O(d),c=y(d,"P",{class:!0,"data-svelte-h":!0}),ie(c)!=="svelte-dt3m1x"&&(c.innerHTML=h),this.h()},h(){v(e,"class","large-font space-bottom bubble-padded svelte-1st51oh"),v(r,"class","bubble-padded svelte-1st51oh"),v(c,"class","bubble svelte-1st51oh")},m(d,p){m(d,e,p),m(d,t,p),m(d,r,p),$(r,s),$(r,a),$(a,o),$(r,l),m(d,u,p),m(d,c,p)},p(d,[p]){p&1&&se(o,d[0])},i:x,o:x,d(d){d&&(f(e),f(t),f(r),f(u),f(c))}}}function sf(i,e,n){let{trainerKey:t}=e;return i.$$set=r=>{"trainerKey"in r&&n(0,t=r.trainerKey)},[t]}class af extends ce{constructor(e){super(),fe(this,e,sf,rf,ue,{trainerKey:0})}}const lf=""+new URL("../assets/find-trainer-id.DcdDbnCJ.png",import.meta.url).href;function of(i){let e;return{c(){e=U("Search")},l(n){e=M(n,"Search")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function $s(i){let e,n="No trainer is registered with this id";return{c(){e=k("p"),e.textContent=n,this.h()},l(t){e=y(t,"P",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-y99bmo"&&(e.textContent=n),this.h()},h(){v(e,"class","font-sm error svelte-jn36bw")},m(t,r){m(t,e,r)},d(t){t&&f(e)}}}function uf(i){let e,n,t=`Enter the trainer's unique ID below and click "Search".`,r,s,a,o="Trainer ID",l,u,c,h,d,p,_,g,b,w,S=`<p>Each trainer has a unique 12-character ID. You can find it on their page, pictured below.</p> <figure class="spaced-lg svelte-jn36bw"><img src="${lf}" alt="The label &#39;Trainer ID&#39; denotes the trainer&#39;s id." width="800" height="256" class="svelte-jn36bw"/> <figcaption>Use this ID for searching</figcaption></figure> <p>Searching by a trainer&#39;s ID can allow you to view a friend&#39;s pokemon or view your own trainer&#39;s pokemon on different devices.</p>`,P,I,q;d=new we({props:{type:"submit",disabled:i[2],$$slots:{default:[of]},$$scope:{ctx:i}}});let z=i[1].length>0&&i[1]===i[0]&&$s();return{c(){e=k("section"),n=k("p"),n.textContent=t,r=A(),s=k("form"),a=k("label"),a.textContent=o,l=A(),u=k("div"),c=k("input"),h=A(),L(d.$$.fragment),p=A(),z&&z.c(),_=A(),g=k("hr"),b=A(),w=k("section"),w.innerHTML=S,this.h()},l(K){e=y(K,"SECTION",{});var B=j(e);n=y(B,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-xh6jag"&&(n.textContent=t),r=O(B),s=y(B,"FORM",{class:!0,disabled:!0});var F=j(s);a=y(F,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(a)!=="svelte-16wff6"&&(a.textContent=o),l=O(F),u=y(F,"DIV",{class:!0});var re=j(u);c=y(re,"INPUT",{id:!0,type:!0,class:!0,maxlength:!0,placeholder:!0}),h=O(re),R(d.$$.fragment,re),re.forEach(f),p=O(F),z&&z.l(F),F.forEach(f),B.forEach(f),_=O(K),g=y(K,"HR",{}),b=O(K),w=y(K,"SECTION",{"data-svelte-h":!0}),ie(w)!=="svelte-xekllv"&&(w.innerHTML=S),this.h()},h(){v(a,"for","id-input"),v(a,"class","font-sm spaced-sm svelte-jn36bw"),v(c,"id","id-input"),v(c,"type","text"),v(c,"class","font-lg svelte-jn36bw"),v(c,"maxlength","12"),v(c,"placeholder","e.g. H4PF8E2GZA0A"),c.disabled=i[2],c.required=!0,ke(c,"flex","1"),v(u,"class","horizontal spaced-sm svelte-jn36bw"),v(s,"class","vertical spaced-lg svelte-jn36bw"),v(s,"disabled",i[2])},m(K,B){m(K,e,B),$(e,n),$(e,r),$(e,s),$(s,a),$(s,l),$(s,u),$(u,c),oe(c,i[0]),$(u,h),N(d,u,null),$(s,p),z&&z.m(s,null),m(K,_,B),m(K,g,B),m(K,b,B),m(K,w,B),P=!0,I||(q=[he(c,"input",i[4]),he(s,"submit",Lt(i[3]))],I=!0)},p(K,B){(!P||B&4)&&(c.disabled=K[2]),B&1&&c.value!==K[0]&&oe(c,K[0]);const F={};B&4&&(F.disabled=K[2]),B&32&&(F.$$scope={dirty:B,ctx:K}),d.$set(F),K[1].length>0&&K[1]===K[0]?z||(z=$s(),z.c(),z.m(s,null)):z&&(z.d(1),z=null),(!P||B&4)&&v(s,"disabled",K[2])},i(K){P||(E(d.$$.fragment,K),P=!0)},o(K){T(d.$$.fragment,K),P=!1},d(K){K&&(f(e),f(_),f(g),f(b),f(w)),D(d),z&&z.d(),I=!1,st(q)}}}function cf(i){let e,n;return e=new lt({props:{saving:i[2],caption:"Searching...",$$slots:{default:[uf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.saving=t[2]),r&39&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ff(i){let e,n,t,r;return e=new ze({props:{value:"Find Trainer by ID"}}),t=new Ve({props:{title:"Find Trainer by ID",$$slots:{default:[cf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&39&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function hf(i,e,n){let t="",r="",s=!1;const a=()=>{n(2,s=!0),Yt.get(t).then(l=>{l?Be(de.trainers(t)):(n(2,s=!1),n(1,r=t))})};function o(){t=this.value,n(0,t)}return i.$$.update=()=>{i.$$.dirty&1&&n(0,t=t.toLocaleUpperCase().replace(/[^a-zA-Z0-9]/g,""))},[t,r,s,a,o]}class df extends ce{constructor(e){super(),fe(this,e,hf,ff,ue,{})}}function pf(i){let e,n="Name",t,r,s,a,o="Description",l,u,c,h;return{c(){e=k("label"),e.textContent=n,t=A(),r=k("input"),s=A(),a=k("label"),a.textContent=o,l=A(),u=k("textarea"),this.h()},l(d){e=y(d,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-10tkgu3"&&(e.textContent=n),t=O(d),r=y(d,"INPUT",{name:!0,id:!0,type:!0}),s=O(d),a=y(d,"LABEL",{for:!0,"data-svelte-h":!0}),ie(a)!=="svelte-8xwm31"&&(a.textContent=o),l=O(d),u=y(d,"TEXTAREA",{name:!0,id:!0,rows:!0}),j(u).forEach(f),this.h()},h(){v(e,"for","name-input"),v(r,"name","name"),v(r,"id","name-input"),v(r,"type","text"),r.disabled=i[3],v(a,"for","description-input"),ke(a,"place-self","start"),v(u,"name","description"),v(u,"id","description-input"),v(u,"rows","6"),u.disabled=i[3]},m(d,p){m(d,e,p),m(d,t,p),m(d,r,p),oe(r,i[1]),m(d,s,p),m(d,a,p),m(d,l,p),m(d,u,p),oe(u,i[2]),c||(h=[he(r,"input",i[7]),he(u,"input",i[8])],c=!0)},p(d,p){p&8&&(r.disabled=d[3]),p&2&&r.value!==d[1]&&oe(r,d[1]),p&8&&(u.disabled=d[3]),p&4&&oe(u,d[2])},d(d){d&&(f(e),f(t),f(r),f(s),f(a),f(l),f(u)),c=!1,st(h)}}}function _f(i){let e;return{c(){e=U("Cancel")},l(n){e=M(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function mf(i){let e;return{c(){e=U("Finish!")},l(n){e=M(n,"Finish!")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function gf(i){let e,n,t,r;return e=new we({props:{variant:"ghost",disabled:i[3],$$slots:{default:[_f]},$$scope:{ctx:i}}}),e.$on("click",i[4]),t=new we({props:{type:"submit",disabled:i[3],$$slots:{default:[mf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&8&&(o.disabled=s[3]),a&1024&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&8&&(l.disabled=s[3]),a&1024&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function $f(i){let e,n,t,r,s,a,o;return n=new qe({props:{title:"Basic Info",$$slots:{default:[pf]},$$scope:{ctx:i}}}),r=new je({props:{$$slots:{default:[gf]},$$scope:{ctx:i}}}),{c(){e=k("form"),L(n.$$.fragment),t=A(),L(r.$$.fragment)},l(l){e=y(l,"FORM",{});var u=j(e);R(n.$$.fragment,u),t=O(u),R(r.$$.fragment,u),u.forEach(f)},m(l,u){m(l,e,u),N(n,e,null),$(e,t),N(r,e,null),s=!0,a||(o=he(e,"submit",Lt(i[5])),a=!0)},p(l,u){const c={};u&1038&&(c.$$scope={dirty:u,ctx:l}),n.$set(c);const h={};u&1032&&(h.$$scope={dirty:u,ctx:l}),r.$set(h)},i(l){s||(E(n.$$.fragment,l),E(r.$$.fragment,l),s=!0)},o(l){T(n.$$.fragment,l),T(r.$$.fragment,l),s=!1},d(l){l&&f(e),D(n),D(r),a=!1,o()}}}function vf(i){let e,n;return e=new lt({props:{saving:i[0],$$slots:{default:[$f]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&1&&(s.saving=t[0]),r&1038&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function bf(i,e,n){let t;const r=it();let{trainer:s}=e,{saving:a=!1}=e,o=s.name,l=s.description;const u=()=>{r("cancel")},c=()=>{r("update",{name:o,description:l})};function h(){o=this.value,n(1,o)}function d(){l=this.value,n(2,l)}return i.$$set=p=>{"trainer"in p&&n(6,s=p.trainer),"saving"in p&&n(0,a=p.saving)},i.$$.update=()=>{i.$$.dirty&1&&n(3,t=a)},[a,o,l,t,u,c,s,h,d]}class wf extends ce{constructor(e){super(),fe(this,e,bf,vf,ue,{trainer:6,saving:0})}}function kf(i){let e,n,t="You do not have permission to edit this trainer.",r,s,a;return s=new je({props:{$$slots:{default:[Tf]},$$scope:{ctx:i}}}),{c(){e=k("section"),n=k("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=y(o,"SECTION",{});var l=j(e);n=y(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-1kn7ebq"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(f)},m(o,l){m(o,e,l),$(e,n),$(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&66&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&f(e),D(s)}}}function yf(i){let e,n;return e=new wf({props:{trainer:i[1].info,saving:i[2]}}),e.$on("update",i[5]),e.$on("cancel",i[4]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.trainer=t[1].info),r&4&&(s.saving=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ef(i){let e;return{c(){e=U("Go Back")},l(n){e=M(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Tf(i){let e,n;return e=new we({props:{href:de.trainers(i[1].info.readKey),$$slots:{default:[Ef]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.href=de.trainers(t[1].info.readKey)),r&64&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Sf(i){let e,n,t,r;const s=[yf,kf],a=[];function o(l,u){return l[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function Cf(i){let e,n,t,r;return e=new ze({props:{value:"Edit "+i[1].info.name}}),t=new Ve({props:{title:i[1].info.name,$$slots:{default:[Sf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&2&&(o.value="Edit "+s[1].info.name),e.$set(o);const l={};a&2&&(l.title=s[1].info.name),a&78&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function Pf(i,e,n){let t,r,s=x,a=()=>(s(),s=He(o,h=>n(1,r=h)),o);i.$$.on_destroy.push(()=>s());let{trainer:o}=e;a();let l=!1;const u=()=>{Be(de.trainers(r.info.readKey))},c=h=>{var d;n(2,l=!0),(d=r.update)==null||d.info(h.detail).then(()=>{n(2,l=!1),Be(de.trainers(r.info.readKey))}).catch(()=>{n(2,l=!1)})};return i.$$set=h=>{"trainer"in h&&a(n(0,o=h.trainer))},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=r.update!=null)},[o,r,l,t,u,c]}class If extends ce{constructor(e){super(),fe(this,e,Pf,Cf,ue,{trainer:0})}}function Af(i){let e,n,t="You do not have permission to retire this trainer.",r,s,a;return s=new je({props:{$$slots:{default:[Lf]},$$scope:{ctx:i}}}),{c(){e=k("section"),n=k("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=y(o,"SECTION",{});var l=j(e);n=y(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-10ipcbz"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(f)},m(o,l){m(o,e,l),$(e,n),$(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&66&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&f(e),D(s)}}}function Of(i){let e,n;return e=new lt({props:{saving:i[2],$$slots:{default:[Uf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.saving=t[2]),r&82&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function jf(i){let e;return{c(){e=U("Go Back")},l(n){e=M(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Lf(i){var t;let e,n;return e=new we({props:{href:de.trainers((t=i[1])==null?void 0:t.info.readKey),$$slots:{default:[jf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,s){N(e,r,s),n=!0},p(r,s){var o;const a={};s&2&&(a.href=de.trainers((o=r[1])==null?void 0:o.info.readKey)),s&64&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function Rf(i){let e;return{c(){e=U("Cancel")},l(n){e=M(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Nf(i){let e;return{c(){e=U("Delete")},l(n){e=M(n,"Delete")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Df(i){var s;let e,n,t,r;return e=new we({props:{href:de.trainers((s=i[1])==null?void 0:s.info.readKey),variant:"ghost",$$slots:{default:[Rf]},$$scope:{ctx:i}}}),t=new we({props:{variant:"danger",$$slots:{default:[Nf]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(a){R(e.$$.fragment,a),n=O(a),R(t.$$.fragment,a)},m(a,o){N(e,a,o),m(a,n,o),N(t,a,o),r=!0},p(a,o){var c;const l={};o&2&&(l.href=de.trainers((c=a[1])==null?void 0:c.info.readKey)),o&64&&(l.$$scope={dirty:o,ctx:a}),e.$set(l);const u={};o&64&&(u.$$scope={dirty:o,ctx:a}),t.$set(u)},i(a){r||(E(e.$$.fragment,a),E(t.$$.fragment,a),r=!0)},o(a){T(e.$$.fragment,a),T(t.$$.fragment,a),r=!1},d(a){a&&f(n),D(e,a),D(t,a)}}}function Uf(i){let e,n,t,r,s,a,o,l="<strong>This is permanent and cannot be undone!</strong>",u,c,h;return c=new je({props:{$$slots:{default:[Df]},$$scope:{ctx:i}}}),{c(){e=k("section"),n=k("p"),t=U("Are you sure you want to retire "),r=U(i[4]),s=U("? This will delete all of their data, including all of their pokemon, from our records."),a=A(),o=k("p"),o.innerHTML=l,u=A(),L(c.$$.fragment)},l(d){e=y(d,"SECTION",{});var p=j(e);n=y(p,"P",{});var _=j(n);t=M(_,"Are you sure you want to retire "),r=M(_,i[4]),s=M(_,"? This will delete all of their data, including all of their pokemon, from our records."),_.forEach(f),a=O(p),o=y(p,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-1ocw14s"&&(o.innerHTML=l),u=O(p),R(c.$$.fragment,p),p.forEach(f)},m(d,p){m(d,e,p),$(e,n),$(n,t),$(n,r),$(n,s),$(e,a),$(e,o),$(e,u),N(c,e,null),h=!0},p(d,p){(!h||p&16)&&se(r,d[4]);const _={};p&66&&(_.$$scope={dirty:p,ctx:d}),c.$set(_)},i(d){h||(E(c.$$.fragment,d),h=!0)},o(d){T(c.$$.fragment,d),h=!1},d(d){d&&f(e),D(c)}}}function Mf(i){let e,n,t,r;const s=[Of,Af],a=[];function o(l,u){return l[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function Bf(i){let e,n,t,r;return e=new ze({props:{value:"Retire "+i[4]+"?"}}),t=new Ve({props:{title:"Retire "+i[4]+"?",$$slots:{default:[Mf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&16&&(o.value="Retire "+s[4]+"?"),e.$set(o);const l={};a&16&&(l.title="Retire "+s[4]+"?"),a&94&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function Kf(i,e,n){let t,r,s,a=x,o=()=>(a(),a=He(l,h=>n(1,s=h)),l);i.$$.on_destroy.push(()=>a());let{trainer:l}=e;o();let u=!1;const c=()=>{var h;n(2,u=!0),(h=s.update)==null||h.retire().then(()=>{Be(de.trainers())}).catch(()=>{n(2,u=!1)})};return i.$$set=h=>{"trainer"in h&&o(n(0,l=h.trainer))},i.$$.update=()=>{i.$$.dirty&2&&n(4,t=(s==null?void 0:s.info.name)??""),i.$$.dirty&2&&n(3,r=s.update!=null)},[l,s,u,r,t,c]}class Ff extends ce{constructor(e){super(),fe(this,e,Kf,Bf,ue,{trainer:0})}}const qf=""+new URL("../assets/find-access-key.BK3o4iYv.png",import.meta.url).href;function Hf(i){let e,n="<p>A trainer&#39;s <dfn>Access Key</dfn> is a special code that allows you to manage a trainer&#39;s info and their pokemon. Each trainer has a unique key, and the key must be saved to each device from which you want to manage the trainer.</p>",t,r,s,a,o,l;const u=[Gf,Vf],c=[];function h(d,p){return d[6]?0:1}return r=h(i),s=c[r]=u[r](i),o=new je({props:{$$slots:{default:[Zf]},$$scope:{ctx:i}}}),{c(){e=k("section"),e.innerHTML=n,t=A(),s.c(),a=A(),L(o.$$.fragment)},l(d){e=y(d,"SECTION",{"data-svelte-h":!0}),ie(e)!=="svelte-pmiax8"&&(e.innerHTML=n),t=O(d),s.l(d),a=O(d),R(o.$$.fragment,d)},m(d,p){m(d,e,p),m(d,t,p),c[r].m(d,p),m(d,a,p),N(o,d,p),l=!0},p(d,p){let _=r;r=h(d),r===_?c[r].p(d,p):(ge(),T(c[_],1,1,()=>{c[_]=null}),$e(),s=c[r],s?s.p(d,p):(s=c[r]=u[r](d),s.c()),E(s,1),s.m(a.parentNode,a));const g={};p&16388&&(g.$$scope={dirty:p,ctx:d}),o.$set(g)},i(d){l||(E(s),E(o.$$.fragment,d),l=!0)},o(d){T(s),T(o.$$.fragment,d),l=!1},d(d){d&&(f(e),f(t),f(a)),c[r].d(d),D(o,d)}}}function zf(i){let e,n,t="<strong>Success!</strong>",r,s,a,o,l,u,c,h;return c=new je({props:{$$slots:{default:[xf]},$$scope:{ctx:i}}}),{c(){e=k("section"),n=k("p"),n.innerHTML=t,r=A(),s=k("p"),a=U("You can now manage "),o=U(i[7]),l=U(" and their pokemon."),u=A(),L(c.$$.fragment)},l(d){e=y(d,"SECTION",{});var p=j(e);n=y(p,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-no3oh3"&&(n.innerHTML=t),r=O(p),s=y(p,"P",{});var _=j(s);a=M(_,"You can now manage "),o=M(_,i[7]),l=M(_," and their pokemon."),_.forEach(f),u=O(p),R(c.$$.fragment,p),p.forEach(f)},m(d,p){m(d,e,p),$(e,n),$(e,r),$(e,s),$(s,a),$(s,o),$(s,l),$(e,u),N(c,e,null),h=!0},p(d,p){(!h||p&128)&&se(o,d[7]);const _={};p&16388&&(_.$$scope={dirty:p,ctx:d}),c.$set(_)},i(d){h||(E(c.$$.fragment,d),h=!0)},o(d){T(c.$$.fragment,d),h=!1},d(d){d&&f(e),D(c)}}}function Vf(i){let e,n;return e=new lt({props:{saving:i[3],caption:"Searching...",$$slots:{default:[Wf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.saving=t[3]),r&16538&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Gf(i){let e,n,t,r,s,a,o,l,u="Access Key",c,h,d,p,_,g,b;return g=new we({props:{$$slots:{default:[Yf]},$$scope:{ctx:i}}}),g.$on("click",i[10]),{c(){e=k("section"),n=k("p"),t=U("You currently have "),r=U(i[7]),s=U("'s access key saved to this device. To share this key, press Reveal below."),a=A(),o=k("div"),l=k("label"),l.textContent=u,c=A(),h=k("div"),d=k("input"),_=A(),L(g.$$.fragment),this.h()},l(w){e=y(w,"SECTION",{});var S=j(e);n=y(S,"P",{});var P=j(n);t=M(P,"You currently have "),r=M(P,i[7]),s=M(P,"'s access key saved to this device. To share this key, press Reveal below."),P.forEach(f),a=O(S),o=y(S,"DIV",{class:!0});var I=j(o);l=y(I,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(l)!=="svelte-3bojr9"&&(l.textContent=u),c=O(I),h=y(I,"DIV",{class:!0});var q=j(h);d=y(q,"INPUT",{id:!0,type:!0,class:!0}),_=O(q),R(g.$$.fragment,q),q.forEach(f),I.forEach(f),S.forEach(f),this.h()},h(){v(l,"for","key-input"),v(l,"class","font-sm spaced-sm svelte-jn36bw"),v(d,"id","key-input"),d.value=p=i[2].writeKey,v(d,"type",i[9]),v(d,"class","font-lg svelte-jn36bw"),d.disabled=!0,ke(d,"flex","1"),v(h,"class","horizontal spaced-sm svelte-jn36bw"),v(o,"class","vertical spaced-lg svelte-jn36bw")},m(w,S){m(w,e,S),$(e,n),$(n,t),$(n,r),$(n,s),$(e,a),$(e,o),$(o,l),$(o,c),$(o,h),$(h,d),$(h,_),N(g,h,null),b=!0},p(w,S){(!b||S&128)&&se(r,w[7]),(!b||S&4&&p!==(p=w[2].writeKey)&&d.value!==p)&&(d.value=p),(!b||S&512)&&v(d,"type",w[9]);const P={};S&16640&&(P.$$scope={dirty:S,ctx:w}),g.$set(P)},i(w){b||(E(g.$$.fragment,w),b=!0)},o(w){T(g.$$.fragment,w),b=!1},d(w){w&&f(e),D(g)}}}function Jf(i){let e;return{c(){e=U("Submit")},l(n){e=M(n,"Submit")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function vs(i){let e,n="The provided access key does match this trainer's key";return{c(){e=k("p"),e.textContent=n,this.h()},l(t){e=y(t,"P",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-7yk1wk"&&(e.textContent=n),this.h()},h(){v(e,"class","font-sm error svelte-jn36bw")},m(t,r){m(t,e,r)},d(t){t&&f(e)}}}function Wf(i){let e,n,t,r,s,a,o,l,u,c,h="Access Key",d,p,_,g,b,w,S,P,I,q,z,K,B,F,re,Y,X=`<img src="${qf}" alt="&#39;Access Key&#39; is a button at the bottom of the trainer&#39;s page." width="800" height="250" class="svelte-jn36bw"/> <figcaption>Click this button to get the access key</figcaption>`,V,C,G;b=new we({props:{type:"submit",$$slots:{default:[Jf]},$$scope:{ctx:i}}});let W=i[4].length>0&&i[4]===i[1]&&vs();return{c(){e=k("section"),n=k("p"),t=U("You currently do not have permission to manage "),r=U(i[7]),s=U(". To obtain permission, put "),a=U(i[7]),o=U("'s access key into the field below and press Submit."),l=A(),u=k("form"),c=k("label"),c.textContent=h,d=A(),p=k("div"),_=k("input"),g=A(),L(b.$$.fragment),w=A(),W&&W.c(),S=A(),P=k("hr"),I=A(),q=k("section"),z=k("p"),K=U("If you are managing "),B=U(i[7]),F=U(" from another device, you can find their access code from the trainer's page."),re=A(),Y=k("figure"),Y.innerHTML=X,this.h()},l(Q){e=y(Q,"SECTION",{});var ee=j(e);n=y(ee,"P",{});var H=j(n);t=M(H,"You currently do not have permission to manage "),r=M(H,i[7]),s=M(H,". To obtain permission, put "),a=M(H,i[7]),o=M(H,"'s access key into the field below and press Submit."),H.forEach(f),l=O(ee),u=y(ee,"FORM",{class:!0});var Z=j(u);c=y(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(c)!=="svelte-3bojr9"&&(c.textContent=h),d=O(Z),p=y(Z,"DIV",{class:!0});var te=j(p);_=y(te,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),g=O(te),R(b.$$.fragment,te),te.forEach(f),w=O(Z),W&&W.l(Z),Z.forEach(f),ee.forEach(f),S=O(Q),P=y(Q,"HR",{}),I=O(Q),q=y(Q,"SECTION",{});var J=j(q);z=y(J,"P",{});var ae=j(z);K=M(ae,"If you are managing "),B=M(ae,i[7]),F=M(ae," from another device, you can find their access code from the trainer's page."),ae.forEach(f),re=O(J),Y=y(J,"FIGURE",{class:!0,"data-svelte-h":!0}),ie(Y)!=="svelte-squzr5"&&(Y.innerHTML=X),J.forEach(f),this.h()},h(){v(c,"for","key-input"),v(c,"class","font-sm spaced-sm svelte-jn36bw"),v(_,"id","key-input"),v(_,"type","text"),v(_,"placeholder","e.g. JM7WEZ0YKW3WGC8I"),v(_,"class","font-lg svelte-jn36bw"),_.disabled=i[3],_.required=!0,ke(_,"flex","1"),v(p,"class","horizontal spaced-sm svelte-jn36bw"),v(u,"class","vertical spaced-lg svelte-jn36bw"),v(Y,"class","spaced-lg svelte-jn36bw")},m(Q,ee){m(Q,e,ee),$(e,n),$(n,t),$(n,r),$(n,s),$(n,a),$(n,o),$(e,l),$(e,u),$(u,c),$(u,d),$(u,p),$(p,_),oe(_,i[1]),$(p,g),N(b,p,null),$(u,w),W&&W.m(u,null),m(Q,S,ee),m(Q,P,ee),m(Q,I,ee),m(Q,q,ee),$(q,z),$(z,K),$(z,B),$(z,F),$(q,re),$(q,Y),V=!0,C||(G=[he(_,"input",i[13]),he(u,"submit",Lt(i[11]))],C=!0)},p(Q,ee){(!V||ee&128)&&se(r,Q[7]),(!V||ee&128)&&se(a,Q[7]),(!V||ee&8)&&(_.disabled=Q[3]),ee&2&&_.value!==Q[1]&&oe(_,Q[1]);const H={};ee&16384&&(H.$$scope={dirty:ee,ctx:Q}),b.$set(H),Q[4].length>0&&Q[4]===Q[1]?W||(W=vs(),W.c(),W.m(u,null)):W&&(W.d(1),W=null),(!V||ee&128)&&se(B,Q[7])},i(Q){V||(E(b.$$.fragment,Q),V=!0)},o(Q){T(b.$$.fragment,Q),V=!1},d(Q){Q&&(f(e),f(S),f(P),f(I),f(q)),D(b),W&&W.d(),C=!1,st(G)}}}function Yf(i){let e;return{c(){e=U(i[8])},l(n){e=M(n,i[8])},m(n,t){m(n,e,t)},p(n,t){t&256&&se(e,n[8])},d(n){n&&f(e)}}}function Xf(i){let e;return{c(){e=U("Go Back")},l(n){e=M(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function Zf(i){var t;let e,n;return e=new we({props:{href:de.trainers((t=i[2])==null?void 0:t.info.readKey),variant:"ghost",$$slots:{default:[Xf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,s){N(e,r,s),n=!0},p(r,s){var o;const a={};s&4&&(a.href=de.trainers((o=r[2])==null?void 0:o.info.readKey)),s&16384&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function Qf(i){let e;return{c(){e=U("Go to Trainer's Page")},l(n){e=M(n,"Go to Trainer's Page")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function xf(i){var t;let e,n;return e=new we({props:{href:de.trainers((t=i[2])==null?void 0:t.info.readKey),$$slots:{default:[Qf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,s){N(e,r,s),n=!0},p(r,s){var o;const a={};s&4&&(a.href=de.trainers((o=r[2])==null?void 0:o.info.readKey)),s&16384&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function eh(i){let e,n,t,r;const s=[zf,Hf],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function th(i){let e,n,t,r;return e=new ze({props:{value:i[7]+"'s Access Key"}}),t=new Ve({props:{title:i[7]+"'s Access Key",$$slots:{default:[eh]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&128&&(o.value=s[7]+"'s Access Key"),e.$set(o);const l={};a&128&&(l.title=s[7]+"'s Access Key"),a&17406&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function nh(i,e,n){let t,r,s,a,o,l=x,u=()=>(l(),l=He(c,P=>n(2,o=P)),c);i.$$.on_destroy.push(()=>l());let{trainer:c}=e;u();let h=!1;const d=()=>n(12,h=!h);let p="",_=!1,g="",b=!1;const w=()=>{n(3,_=!0),c.verifyAccess(p).then(P=>{P?n(5,b=!0):n(4,g=p)}).finally(()=>{n(3,_=!1)})};function S(){p=this.value,n(1,p)}return i.$$set=P=>{"trainer"in P&&u(n(0,c=P.trainer))},i.$$.update=()=>{i.$$.dirty&4096&&n(9,t=h?"text":"password"),i.$$.dirty&4096&&n(8,r=h?"Hide":"Reveal"),i.$$.dirty&2&&n(1,p=p.toLocaleUpperCase().replace(/[^a-zA-Z0-9]/g,"")),i.$$.dirty&4&&n(7,s=(o==null?void 0:o.info.name)??""),i.$$.dirty&4&&n(6,a=o.update!=null)},[c,p,o,_,g,b,a,s,r,t,d,w,h,S]}class rh extends ce{constructor(e){super(),fe(this,e,nh,th,ue,{trainer:0})}}function sh(i){let e;return{c(){e=U("Cancel")},l(n){e=M(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function ih(i){let e;return{c(){e=U("Remove")},l(n){e=M(n,"Remove")},m(n,t){m(n,e,t)},d(n){n&&f(e)}}}function ah(i){var s;let e,n,t,r;return e=new we({props:{href:de.trainers((s=i[1])==null?void 0:s.info.readKey),variant:"ghost",$$slots:{default:[sh]},$$scope:{ctx:i}}}),t=new we({props:{variant:"danger",$$slots:{default:[ih]},$$scope:{ctx:i}}}),t.$on("click",i[4]),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(a){R(e.$$.fragment,a),n=O(a),R(t.$$.fragment,a)},m(a,o){N(e,a,o),m(a,n,o),N(t,a,o),r=!0},p(a,o){var c;const l={};o&2&&(l.href=de.trainers((c=a[1])==null?void 0:c.info.readKey)),o&32&&(l.$$scope={dirty:o,ctx:a}),e.$set(l);const u={};o&32&&(u.$$scope={dirty:o,ctx:a}),t.$set(u)},i(a){r||(E(e.$$.fragment,a),E(t.$$.fragment,a),r=!0)},o(a){T(e.$$.fragment,a),T(t.$$.fragment,a),r=!1},d(a){a&&f(n),D(e,a),D(t,a)}}}function lh(i){let e,n,t,r,s,a,o,l,u,c="This is not a permanent removal. The trainer can still be accessed via their access code, and they will continue to exist on other devices' lists until removed from those devices explicitly.",h,d,p;return d=new je({props:{$$slots:{default:[ah]},$$scope:{ctx:i}}}),{c(){e=k("section"),n=k("p"),t=U("Are you sure you want to remove "),r=U(i[3]),s=U("? This will remove "),a=U(i[3]),o=U(" from your list of trainers."),l=A(),u=k("p"),u.textContent=c,h=A(),L(d.$$.fragment)},l(_){e=y(_,"SECTION",{});var g=j(e);n=y(g,"P",{});var b=j(n);t=M(b,"Are you sure you want to remove "),r=M(b,i[3]),s=M(b,"? This will remove "),a=M(b,i[3]),o=M(b," from your list of trainers."),b.forEach(f),l=O(g),u=y(g,"P",{"data-svelte-h":!0}),ie(u)!=="svelte-148gamw"&&(u.textContent=c),h=O(g),R(d.$$.fragment,g),g.forEach(f)},m(_,g){m(_,e,g),$(e,n),$(n,t),$(n,r),$(n,s),$(n,a),$(n,o),$(e,l),$(e,u),$(e,h),N(d,e,null),p=!0},p(_,g){(!p||g&8)&&se(r,_[3]),(!p||g&8)&&se(a,_[3]);const b={};g&34&&(b.$$scope={dirty:g,ctx:_}),d.$set(b)},i(_){p||(E(d.$$.fragment,_),p=!0)},o(_){T(d.$$.fragment,_),p=!1},d(_){_&&f(e),D(d)}}}function oh(i){let e,n;return e=new lt({props:{saving:i[2],$$slots:{default:[lh]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.saving=t[2]),r&42&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function uh(i){let e,n,t,r;return e=new ze({props:{value:"Remove "+i[3]+"?"}}),t=new Ve({props:{title:"Remove "+i[3]+"?",$$slots:{default:[oh]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&8&&(o.value="Remove "+s[3]+"?"),e.$set(o);const l={};a&8&&(l.title="Remove "+s[3]+"?"),a&46&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function ch(i,e,n){let t,r,s=x,a=()=>(s(),s=He(o,c=>n(1,r=c)),o);i.$$.on_destroy.push(()=>s());let{trainer:o}=e;a();let l=!1;const u=()=>{n(2,l=!0),r.remove().then(()=>{Be(de.trainers())}).catch(()=>{n(2,l=!1)})};return i.$$set=c=>{"trainer"in c&&a(n(0,o=c.trainer))},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=(r==null?void 0:r.info.name)??"")},[o,r,l,t,u]}class fh extends ce{constructor(e){super(),fe(this,e,ch,uh,ue,{trainer:0})}}function hh(i){let e,n;return e=new ze({props:{value:"Trainers"}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function dh(i){let e,n;return e=new df({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ph(i){let e,n;return e=new Au({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function _h(i){let e,n,t,r={ctx:i,current:null,token:null,hasCatch:!1,pending:Ih,then:gh,catch:mh,value:4,blocks:[,,,]};return It(n=i[4],r),{c(){e=ne(),r.block.c()},l(s){e=ne(),r.block.l(s)},m(s,a){m(s,e,a),r.block.m(s,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(s,a){i=s,r.ctx=i,a&16&&n!==(n=i[4])&&It(n,r)||bn(r,i,a)},i(s){t||(E(r.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const o=r.blocks[a];T(o)}t=!1},d(s){s&&f(e),r.block.d(s),r.token=null,r=null}}}function mh(i){return{c:x,l:x,m:x,p:x,i:x,o:x,d:x}}function gh(i){let e,n,t,r;const s=[Ph,Ch,Sh,Th,Eh,yh,kh,wh,bh,vh,$h],a=[];function o(l,u){return l[4]?l[1]===Te.addPokemon?1:l[1]===Te.editPokemon?2:l[1]===Te.evolvePokemon?3:l[1]===Te.removePokemon?4:l[2]?5:l[1]===Te.editTrainer?6:l[1]===Te.removeTrainer?7:l[1]===Te.retireTrainer?8:l[1]===Te.accessKey?9:10:0}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function $h(i){let e,n;return e=new Ti({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function vh(i){let e,n;return e=new rh({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function bh(i){let e,n;return e=new Ff({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function wh(i){let e,n;return e=new fh({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function kh(i){let e,n;return e=new If({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function yh(i){let e,n;return e=new Ma({props:{trainer:i[4],id:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.id=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Eh(i){let e,n;return e=new Vu({props:{trainer:i[4],id:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.id=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Th(i){let e,n;return e=new nf({props:{trainer:i[4],id:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.id=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Sh(i){let e,n;return e=new Uc({props:{trainer:i[4],id:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.id=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ch(i){let e,n;return e=new lu({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ph(i){let e;return{c(){e=k("br")},l(n){e=y(n,"BR",{})},m(n,t){m(n,e,t)},p:x,i:x,o:x,d(n){n&&f(e)}}}function Ih(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ah(i){let e,n,t,r;const s=[_h,ph,dh,hh],a=[];function o(l,u){return l[0]?0:l[1]===Te.newTrainer?1:l[1]===Te.findTrainer?2:3}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function Oh(i){let e,n;return e=new Qs({props:{slot:"icon"}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function jh(i){let e,n,t,r={ctx:i,current:null,token:null,hasCatch:!1,pending:Dh,then:Nh,catch:Rh,value:3,blocks:[,,,]};return It(n=i[3],r),{c(){e=ne(),r.block.c()},l(s){e=ne(),r.block.l(s)},m(s,a){m(s,e,a),r.block.m(s,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(s,a){i=s,r.ctx=i,a&8&&n!==(n=i[3])&&It(n,r)||bn(r,i,a)},i(s){t||(E(r.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const o=r.blocks[a];T(o)}t=!1},d(s){s&&f(e),r.block.d(s),r.token=null,r=null}}}function Lh(i){let e,n,t,r={ctx:i,current:null,token:null,hasCatch:!1,pending:Fh,then:Mh,catch:Uh,value:4,blocks:[,,,]};return It(n=i[4],r),{c(){e=ne(),r.block.c()},l(s){e=ne(),r.block.l(s)},m(s,a){m(s,e,a),r.block.m(s,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(s,a){i=s,r.ctx=i,a&16&&n!==(n=i[4])&&It(n,r)||bn(r,i,a)},i(s){t||(E(r.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const o=r.blocks[a];T(o)}t=!1},d(s){s&&f(e),r.block.d(s),r.token=null,r=null}}}function Rh(i){return{c:x,l:x,m:x,p:x,i:x,o:x,d:x}}function Nh(i){let e,n,t=i[3]&&bs(i);return{c(){t&&t.c(),e=ne()},l(r){t&&t.l(r),e=ne()},m(r,s){t&&t.m(r,s),m(r,e,s),n=!0},p(r,s){r[3]?t?(t.p(r,s),s&8&&E(t,1)):(t=bs(r),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(ge(),T(t,1,1,()=>{t=null}),$e())},i(r){n||(E(t),n=!0)},o(r){T(t),n=!1},d(r){r&&f(e),t&&t.d(r)}}}function bs(i){let e,n;return e=new gu({props:{trainers:i[3]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.trainers=t[3]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Dh(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Uh(i){return{c:x,l:x,m:x,p:x,i:x,o:x,d:x}}function Mh(i){let e,n,t,r;const s=[Kh,Bh],a=[];function o(l,u){return l[4]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&f(t),a[e].d(l)}}}function Bh(i){let e,n;return e=new af({props:{trainerKey:i[0]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.trainerKey=t[0]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Kh(i){let e,n;return e=new nl({props:{trainer:i[4],currentPokemon:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.currentPokemon=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Fh(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function qh(i){let e,n,t,r;const s=[Lh,jh],a=[];function o(l,u){return l[0]?0:1}return n=o(i),t=a[n]=s[n](i),{c(){e=k("nav"),t.c(),this.h()},l(l){e=y(l,"NAV",{slot:!0,class:!0,"aria-label":!0});var u=j(e);t.l(u),u.forEach(f),this.h()},h(){v(e,"slot","side"),v(e,"class","table svelte-1yryrve"),v(e,"aria-label","Pokemon List")},m(l,u){m(l,e,u),a[n].m(e,null),r=!0},p(l,u){let c=n;n=o(l),n===c?a[n].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),t=a[n],t?t.p(l,u):(t=a[n]=s[n](l),t.c()),E(t,1),t.m(e,null))},i(l){r||(E(t),r=!0)},o(l){T(t),r=!1},d(l){l&&f(e),a[n].d()}}}function Hh(i){let e,n,t,r;return e=new ze({props:{value:"Trainers"}}),t=new Zs({props:{theme:"green",$$slots:{side:[qh],icon:[Oh],default:[Ah]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&95&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&f(n),D(e,s),D(t,s)}}}function zh(i,e,n){let t,r,s,a;De(i,Ys,u=>n(5,a=u));let o,l;return i.$$.update=()=>{i.$$.dirty&32&&n(0,t=a.url.searchParams.get("id")),i.$$.dirty&32&&n(2,r=a.url.searchParams.get("pokemon")),i.$$.dirty&32&&n(1,s=a.url.searchParams.get("action")),i.$$.dirty&1&&(t&&qn?(n(3,o=void 0),n(4,l=Yt.get(t))):!t&&qn?(n(3,o=Yt.all()),n(4,l=void 0)):(n(4,l=void 0),n(3,o=void 0)))},[t,s,r,o,l,a]}class hd extends ce{constructor(e){super(),fe(this,e,zh,Hh,ue,{})}}export{hd as component};
