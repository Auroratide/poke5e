import{a3 as Ct,S as gt,i as $t,s as bt,u as ee,f as d,F as It,j as Ie,ab as ft,l as w,g as D,k as m,K as We,n as b,o as M,p as j,w as N,q as k,r as F,y as S,O as Lt,d as H,t as y,a as E,m as U,c as B,b as q,e as ut,I as Ve,J as Ae,a9 as Ot,a1 as kt,N as ye,_ as we,$ as Te,z as Ce,T as Nt,R as ct,W as mt}from"../chunks/CDFLjuqR.js";import{S as Pt,P as St}from"../chunks/CIB9ZFTq.js";import"../chunks/BxlXVsHr.js";import"../chunks/BHr3Jov9.js";import{g as Mt}from"../chunks/DNTgK4in.js";import"../chunks/BsiqRlYd.js";import"../chunks/CdRAs_Ty.js";import"../chunks/B1_3h3uv.js";import{U as Ye}from"../chunks/DEpnwz-E.js";/* empty css                */import{e as Dt}from"../chunks/Bpj21dPT.js";import"../chunks/BMmmFbWz.js";import{e as Vt}from"../chunks/BF6IE1tl.js";import{e as Ze,u as At,o as Rt}from"../chunks/BiGovSyu.js";import{p as Ht}from"../chunks/BYs7GprO.js";import{P as Ut}from"../chunks/Edfpr6WS.js";import{V as Bt}from"../chunks/CuwmF-VP.js";import{S as qt}from"../chunks/DxZ6EANA.js";import{I as Xt,A as Zt,a as Qe,R as jt}from"../chunks/njachiLu.js";import{a as Xe}from"../chunks/j16m2h5a.js";import{S as Ft}from"../chunks/BIZBet1_.js";import{B as je}from"../chunks/C7sVI32S.js";import{L as Kt}from"../chunks/aRzcfC_g.js";import{a as Gt}from"../chunks/DPLW2myb.js";import{T as zt}from"../chunks/CzUoH4N4.js";import{P as Jt}from"../chunks/DLn0St_8.js";import{T as Wt}from"../chunks/x7sxFla9.js";import{C as Yt}from"../chunks/Blwt0Wp3.js";import{P as Qt}from"../chunks/BXyMhrl-.js";import{e as Fe}from"../chunks/JuRZtsSX.js";import{L as xt}from"../chunks/C2DumLO3.js";import{p as Je}from"../chunks/DxQlPuZ1.js";const en=async({fetch:l})=>{const e=Ct(Pt.canonList()),t=await l(Ye.api.biomes()).then(async o=>{if(o.status===404)Vt(404);else return{item:await o.json()}});return e!=null&&e.length>0?{pokemonList:e,biomes:t}:{pokemonList:await l(Ye.api.pokemon()).then(o=>o.json()).then(o=>o.items.map(a=>St.fromJson(a))).then(o=>o.filter(a=>!a.wasNonCanonNonFakemon())),biomes:t}},fl=Object.freeze(Object.defineProperty({__proto__:null,load:en},Symbol.toStringTag,{value:"Module"}));function tn(l){let e;return{c(){e=F("-")},l(t){e=j(t,"-")},m(t,n){D(t,e,n)},d(t){t&&d(e)}}}function nn(l){let e;return{c(){e=F("×")},l(t){e=j(t,"×")},m(t,n){D(t,e,n)},d(t){t&&d(e)}}}function ln(l){let e,t,n,o,a,s,i,r,u,$,g,_,p,h;function O(P,A){return P[4]?nn:tn}let C=O(l),V=C(l);return{c(){e=k("div"),t=k("button"),n=F("+"),a=S(),s=k("span"),i=F(l[0]),r=S(),u=k("button"),V.c(),this.h()},l(P){e=b(P,"DIV",{class:!0});var A=M(e);t=b(A,"BUTTON",{"aria-label":!0,class:!0});var ce=M(t);n=j(ce,"+"),ce.forEach(d),a=N(A),s=b(A,"SPAN",{class:!0});var K=M(s);i=j(K,l[0]),K.forEach(d),r=N(A),u=b(A,"BUTTON",{class:!0,"aria-label":!0});var W=M(u);V.l(W),W.forEach(d),A.forEach(d),this.h()},h(){t.disabled=o=l[3]||l[0]>=l[2],w(t,"aria-label","Increase"),w(t,"class","svelte-126rx5g"),w(s,"class","value svelte-126rx5g"),u.disabled=$=l[3]||l[0]<=l[1],w(u,"class",g=ft(l[4]?"can-be-deleted":"")+" svelte-126rx5g"),w(u,"aria-label",_=l[4]?"Remove":"Decrease"),w(e,"class","stepper svelte-126rx5g")},m(P,A){D(P,e,A),m(e,t),m(t,n),m(e,a),m(e,s),m(s,i),m(e,r),m(e,u),V.m(u,null),p||(h=[We(t,"click",l[5]),We(u,"click",l[6])],p=!0)},p(P,[A]){A&13&&o!==(o=P[3]||P[0]>=P[2])&&(t.disabled=o),A&1&&Ie(i,P[0]),C!==(C=O(P))&&(V.d(1),V=C(P),V&&(V.c(),V.m(u,null))),A&11&&$!==($=P[3]||P[0]<=P[1])&&(u.disabled=$),A&16&&g!==(g=ft(P[4]?"can-be-deleted":"")+" svelte-126rx5g")&&w(u,"class",g),A&16&&_!==(_=P[4]?"Remove":"Decrease")&&w(u,"aria-label",_)},i:ee,o:ee,d(P){P&&d(e),V.d(),p=!1,It(h)}}}function on(l,e,t){let n,{value:o=0}=e,{min:a=-1/0}=e,{max:s=1/0}=e,{step:i=1}=e,{disabled:r=!1}=e,{deleteOnZero:u=!1}=e;const $=Lt();function g(){o+i<=s&&(t(0,o+=i),$("change",o))}function _(){u&&o-i<=0&&$("delete"),o-i>=a&&(t(0,o-=i),$("change",o))}return l.$$set=p=>{"value"in p&&t(0,o=p.value),"min"in p&&t(1,a=p.min),"max"in p&&t(2,s=p.max),"step"in p&&t(7,i=p.step),"disabled"in p&&t(3,r=p.disabled),"deleteOnZero"in p&&t(8,u=p.deleteOnZero)},l.$$.update=()=>{l.$$.dirty&385&&t(4,n=u&&o-i<=0)},[o,a,s,r,n,g,_,i,u]}class an extends gt{constructor(e){super(),$t(this,e,on,ln,bt,{value:0,min:1,max:2,step:7,disabled:3,deleteOnZero:8})}}const Ke=20,pe={createEmpty(){return{pokemon:[]}},totalExp(l){return l.pokemon.reduce((e,t)=>{const n=Fe(t.level,t.data.sr.data);return e+(isNaN(n)?0:n)*t.count},0)},count(l){return l.pokemon.reduce((e,t)=>e+t.count,0)},addPokemon(l,e,t){const n=l.pokemon.find(o=>o.data.id.data===e.id.data);return n?n.count+=1:l.pokemon.push({data:e,count:1,level:t}),{...l,pokemon:[...l.pokemon]}},removePokemon(l,e){return{...l,pokemon:l.pokemon.filter(t=>t.data.id.data!==e.data.id)}},generate({pool:l,targetExp:e,pokemonLimit:t=1/0,maxLevel:n=20}){const o={pokemon:[]};let a=0,s=0,i=0;const r=500;for(;i<r&&(i++,!(s>=t));){const u=e-a;if(u<=0)break;const $=l.map(_=>{const p=Math.max(_.data.minLevel,Math.floor(Math.random()*n)+1),h=Fe(p,Number(_.data.sr));return{pokemon:_,level:p,exp:h}}).filter(_=>_.exp<=u);if($.length===0)break;let g;if(t<1/0){const _=t-s,p=u/_;$.sort((O,C)=>Math.abs(O.exp-p)-Math.abs(C.exp-p));const h=$.slice(0,3);g=h[Math.floor(Math.random()*h.length)]}else g=$[Math.floor(Math.random()*$.length)];a+=g.exp,s+=1,pe.addPokemon(o,g.pokemon,g.level)}return o},async saveToTrainers(l){if(pe.count(l)===0)throw new Error("Cannot save an empty encounter. Please add pokémon to it.");if(pe.count(l)>Ke)throw new Error(`Cannot save encounter with more than ${Ke} pokémon.`);const e=await Je.newTrainer({name:"Encounter",description:"Created using the encounter tool."}),t=(await Promise.all(l.pokemon.map(async n=>await Promise.all(Array(n.count).fill(0).map(async()=>{const o=await Je.addPokemonToTeam(e.writeKey,e.info.id,n.data);return o.level=new xt(n.level),await Je.updatePokemon(e.writeKey,o),o}))))).flat();return e.pokemon=t,e}};function pt(l,e,t){const n=l.slice();return n[48]=e[t],n[49]=e,n[50]=t,n}function dt(l,e,t){const n=l.slice();return n[51]=e[t],n[52]=e,n[53]=t,n}function rn(l){let e,t="No Players in the Party.";return{c(){e=k("p"),e.textContent=t},l(n){e=b(n,"P",{"data-svelte-h":!0}),Ce(e)!=="svelte-q8vb3h"&&(e.textContent=t)},m(n,o){D(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&d(e)}}}function sn(l){let e,t,n=Ze(l[2]),o=[];for(let s=0;s<n.length;s+=1)o[s]=_t(dt(l,n,s));const a=s=>y(o[s],1,1,()=>{o[s]=null});return{c(){e=k("div");for(let s=0;s<o.length;s+=1)o[s].c();this.h()},l(s){e=b(s,"DIV",{class:!0});var i=M(e);for(let r=0;r<o.length;r+=1)o[r].l(i);i.forEach(d),this.h()},h(){w(e,"class","player-list")},m(s,i){D(s,e,i);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(e,null);t=!0},p(s,i){if(i[0]&1048580){n=Ze(s[2]);let r;for(r=0;r<n.length;r+=1){const u=dt(s,n,r);o[r]?(o[r].p(u,i),E(o[r],1)):(o[r]=_t(u),o[r].c(),E(o[r],1),o[r].m(e,null))}for(Ve(),r=n.length;r<o.length;r+=1)a(r);Ae()}},i(s){if(!t){for(let i=0;i<n.length;i+=1)E(o[i]);t=!0}},o(s){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)y(o[i]);t=!1},d(s){s&&d(e),Nt(o,s)}}}function fn(l){let e,t,n,o,a,s,i;function r(_){l[33](_,l[51])}let u={label:"Level",min:1};l[51].level!==void 0&&(u.value=l[51].level),t=new Qe({props:u}),ye.push(()=>we(t,"value",r));function $(_){l[34](_,l[51])}let g={label:"Pokémon",min:1};return l[51].numberOfPokemon!==void 0&&(g.value=l[51].numberOfPokemon),a=new Qe({props:g}),ye.push(()=>we(a,"value",$)),{c(){e=k("div"),q(t.$$.fragment),o=S(),q(a.$$.fragment),this.h()},l(_){e=b(_,"DIV",{class:!0});var p=M(e);B(t.$$.fragment,p),o=N(p),B(a.$$.fragment,p),p.forEach(d),this.h()},h(){w(e,"class","player-fields svelte-fn8s5t")},m(_,p){D(_,e,p),U(t,e,null),m(e,o),U(a,e,null),i=!0},p(_,p){l=_;const h={};!n&&p[0]&4&&(n=!0,h.value=l[51].level,Te(()=>n=!1)),t.$set(h);const O={};!s&&p[0]&4&&(s=!0,O.value=l[51].numberOfPokemon,Te(()=>s=!1)),a.$set(O)},i(_){i||(E(t.$$.fragment,_),E(a.$$.fragment,_),i=!0)},o(_){y(t.$$.fragment,_),y(a.$$.fragment,_),i=!1},d(_){_&&d(e),H(t),H(a)}}}function _t(l){let e,t,n,o;function a(){return l[35](l[51])}return t=new jt({props:{$$slots:{default:[fn]},$$scope:{ctx:l}}}),t.$on("remove",a),{c(){e=k("div"),q(t.$$.fragment),n=S(),this.h()},l(s){e=b(s,"DIV",{class:!0});var i=M(e);B(t.$$.fragment,i),n=N(i),i.forEach(d),this.h()},h(){w(e,"class","player-item svelte-fn8s5t")},m(s,i){D(s,e,i),U(t,e,null),m(e,n),o=!0},p(s,i){l=s;const r={};i[0]&4|i[1]&8388608&&(r.$$scope={dirty:i,ctx:l}),t.$set(r)},i(s){o||(E(t.$$.fragment,s),o=!0)},o(s){y(t.$$.fragment,s),o=!1},d(s){s&&d(e),H(t)}}}function un(l){let e;return{c(){e=F("Add Player")},l(t){e=j(t,"Add Player")},m(t,n){D(t,e,n)},d(t){t&&d(e)}}}function cn(l){let e;return{c(){e=k("p")},l(t){e=b(t,"P",{}),M(e).forEach(d)},m(t,n){D(t,e,n)},p:ee,i:ee,o:ee,d(t){t&&d(e)}}}function mn(l){let e,t,n;function o(s){l[40](s)}let a={label:"Limit",min:1};return l[8]!==void 0&&(a.value=l[8]),e=new Qe({props:a}),ye.push(()=>we(e,"value",o)),{c(){q(e.$$.fragment)},l(s){B(e.$$.fragment,s)},m(s,i){U(e,s,i),n=!0},p(s,i){const r={};!t&&i[0]&256&&(t=!0,r.value=s[8],Te(()=>t=!1)),e.$set(r)},i(s){n||(E(e.$$.fragment,s),n=!0)},o(s){y(e.$$.fragment,s),n=!1},d(s){H(e,s)}}}function pn(l){let e;return{c(){e=F("Generate Encounter")},l(t){e=j(t,"Generate Encounter")},m(t,n){D(t,e,n)},d(t){t&&d(e)}}}function dn(l){let e,t="No Pokémon added.";return{c(){e=k("p"),e.textContent=t},l(n){e=b(n,"P",{"data-svelte-h":!0}),Ce(e)!=="svelte-1y30vce"&&(e.textContent=t)},m(n,o){D(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&d(e)}}}function _n(l){let e,t="No Pokémon meet the criteria!";return{c(){e=k("p"),e.textContent=t,this.h()},l(n){e=b(n,"P",{class:!0,"data-svelte-h":!0}),Ce(e)!=="svelte-y8i6lw"&&(e.textContent=t),this.h()},h(){w(e,"class","no-matches svelte-fn8s5t")},m(n,o){D(n,e,o)},p:ee,i:ee,o:ee,d(n){n&&d(e)}}}function hn(l){let e,t=[],n=new Map,o,a=Ze(l[1].pokemon);const s=i=>i[48].data.id.data;for(let i=0;i<a.length;i+=1){let r=pt(l,a,i),u=s(r);n.set(u,t[i]=ht(u,r))}return{c(){e=k("div");for(let i=0;i<t.length;i+=1)t[i].c();this.h()},l(i){e=b(i,"DIV",{class:!0});var r=M(e);for(let u=0;u<t.length;u+=1)t[u].l(r);r.forEach(d),this.h()},h(){w(e,"class","pokemon-list svelte-fn8s5t")},m(i,r){D(i,e,r);for(let u=0;u<t.length;u+=1)t[u]&&t[u].m(e,null);o=!0},p(i,r){r[0]&4194306&&(a=Ze(i[1].pokemon),Ve(),t=At(t,r,s,1,i,a,n,e,Rt,ht,null,pt),Ae())},i(i){if(!o){for(let r=0;r<a.length;r+=1)E(t[r]);o=!0}},o(i){for(let r=0;r<t.length;r+=1)y(t[r]);o=!1},d(i){i&&d(e);for(let r=0;r<t.length;r+=1)t[r].d()}}}function ht(l,e){let t,n,o,a,s,i,r,u=e[48].data.name+"",$,g,_,p,h,O,C,V,P=e[48].data.sr+"",A,ce,K=Fe(e[48].level,e[48].data.data.sr)+"",W,ue,X,J,z,Z,Y,R,ve,_e;a=new Ft({props:{media:e[48].data.media,alt:e[48].data.name}});function te(){e[41].call(h,e[49],e[50])}X=new Wt({props:{type:e[48].data.data.type}});function ne(I){e[42](I,e[48])}function ge(){return e[43](e[48])}let $e={deleteOnZero:!0};return e[48].count!==void 0&&($e.value=e[48].count),z=new an({props:$e}),ye.push(()=>we(z,"value",ne)),z.$on("delete",ge),{key:l,first:null,c(){t=k("div"),n=k("div"),o=k("div"),q(a.$$.fragment),s=S(),i=k("div"),r=k("p"),$=F(u),g=S(),_=k("label"),p=F("Lv. "),h=k("input"),O=S(),C=k("p"),V=F("SR: "),A=F(P),ce=F(" • XP: "),W=F(K),ue=S(),q(X.$$.fragment),J=S(),q(z.$$.fragment),Y=S(),this.h()},l(I){t=b(I,"DIV",{class:!0});var T=M(t);n=b(T,"DIV",{class:!0});var le=M(n);o=b(le,"DIV",{class:!0});var oe=M(o);B(a.$$.fragment,oe),oe.forEach(d),s=N(le),i=b(le,"DIV",{class:!0});var G=M(i);r=b(G,"P",{class:!0});var de=M(r);$=j(de,u),g=N(de),_=b(de,"LABEL",{class:!0});var Q=M(_);p=j(Q,"Lv. "),h=b(Q,"INPUT",{type:!0,min:!0,class:!0}),Q.forEach(d),de.forEach(d),O=N(G),C=b(G,"P",{class:!0});var ae=M(C);V=j(ae,"SR: "),A=j(ae,P),ce=j(ae," • XP: "),W=j(ae,K),ae.forEach(d),ue=N(G),B(X.$$.fragment,G),G.forEach(d),le.forEach(d),J=N(T),B(z.$$.fragment,T),Y=N(T),T.forEach(d),this.h()},h(){w(o,"class","pokemon-sprite svelte-fn8s5t"),w(h,"type","number"),w(h,"min",1),w(h,"class","svelte-fn8s5t"),w(_,"class","pokemon-level svelte-fn8s5t"),w(r,"class","pokemon-name svelte-fn8s5t"),w(C,"class","pokemon-stats svelte-fn8s5t"),w(i,"class","pokemon-info svelte-fn8s5t"),w(n,"class","pokemon-data svelte-fn8s5t"),w(t,"class","pokemon-item svelte-fn8s5t"),this.first=t},m(I,T){D(I,t,T),m(t,n),m(n,o),U(a,o,null),m(n,s),m(n,i),m(i,r),m(r,$),m(r,g),m(r,_),m(_,p),m(_,h),mt(h,e[48].level),m(i,O),m(i,C),m(C,V),m(C,A),m(C,ce),m(C,W),m(i,ue),U(X,i,null),m(t,J),U(z,t,null),m(t,Y),R=!0,ve||(_e=We(h,"input",te),ve=!0)},p(I,T){e=I;const le={};T[0]&2&&(le.media=e[48].data.media),T[0]&2&&(le.alt=e[48].data.name),a.$set(le),(!R||T[0]&2)&&u!==(u=e[48].data.name+"")&&Ie($,u),T[0]&2&&kt(h.value)!==e[48].level&&mt(h,e[48].level),(!R||T[0]&2)&&P!==(P=e[48].data.sr+"")&&Ie(A,P),(!R||T[0]&2)&&K!==(K=Fe(e[48].level,e[48].data.data.sr)+"")&&Ie(W,K);const oe={};T[0]&2&&(oe.type=e[48].data.data.type),X.$set(oe);const G={};!Z&&T[0]&2&&(Z=!0,G.value=e[48].count,Te(()=>Z=!1)),z.$set(G)},i(I){R||(E(a.$$.fragment,I),E(X.$$.fragment,I),E(z.$$.fragment,I),R=!0)},o(I){y(a.$$.fragment,I),y(X.$$.fragment,I),y(z.$$.fragment,I),R=!1},d(I){I&&d(t),H(a),H(X),H(z),ve=!1,_e()}}}function vt(l){let e,t,n,o="Total XP:",a,s,i,r=Math.round(l[4]/l[2].length)+"",u,$,g,_=l[13].label+"",p;return{c(){e=k("div"),t=k("p"),n=k("strong"),n.textContent=o,a=S(),s=F(l[4]),i=F(" ("),u=F(r),$=F(`/player)
								`),g=k("span"),p=F(_),this.h()},l(h){e=b(h,"DIV",{});var O=M(e);t=b(O,"P",{});var C=M(t);n=b(C,"STRONG",{"data-svelte-h":!0}),Ce(n)!=="svelte-1h8t7xe"&&(n.textContent=o),a=N(C),s=j(C,l[4]),i=j(C," ("),u=j(C,r),$=j(C,`/player)
								`),g=b(C,"SPAN",{class:!0,style:!0});var V=M(g);p=j(V,_),V.forEach(d),C.forEach(d),O.forEach(d),this.h()},h(){w(g,"class","difficulty-badge svelte-fn8s5t"),ct(g,"background-color",l[13].color)},m(h,O){D(h,e,O),m(e,t),m(t,n),m(t,a),m(t,s),m(t,i),m(t,u),m(t,$),m(t,g),m(g,p)},p(h,O){O[0]&16&&Ie(s,h[4]),O[0]&20&&r!==(r=Math.round(h[4]/h[2].length)+"")&&Ie(u,r),O[0]&8192&&_!==(_=h[13].label+"")&&Ie(p,_),O[0]&8192&&ct(g,"background-color",h[13].color)},d(h){h&&d(e)}}}function vn(l){let e;return{c(){e=F('"Use Encounter" will add this to Trainers, allowing you to track HP, add moves, and manage the details.')},l(t){e=j(t,'"Use Encounter" will add this to Trainers, allowing you to track HP, add moves, and manage the details.')},m(t,n){D(t,e,n)},d(t){t&&d(e)}}}function gn(l){let e;return{c(){e=F("Clear")},l(t){e=j(t,"Clear")},m(t,n){D(t,e,n)},d(t){t&&d(e)}}}function $n(l){let e;return{c(){e=F("Use Encounter")},l(t){e=j(t,"Use Encounter")},m(t,n){D(t,e,n)},d(t){t&&d(e)}}}function bn(l){let e,t,n,o;return e=new je({props:{variant:"danger",$$slots:{default:[gn]},$$scope:{ctx:l}}}),e.$on("click",l[24]),n=new je({props:{disabled:l[11]!=null,$$slots:{default:[$n]},$$scope:{ctx:l}}}),n.$on("click",l[25]),{c(){q(e.$$.fragment),t=S(),q(n.$$.fragment)},l(a){B(e.$$.fragment,a),t=N(a),B(n.$$.fragment,a)},m(a,s){U(e,a,s),D(a,t,s),U(n,a,s),o=!0},p(a,s){const i={};s[1]&8388608&&(i.$$scope={dirty:s,ctx:a}),e.$set(i);const r={};s[0]&2048&&(r.disabled=a[11]!=null),s[1]&8388608&&(r.$$scope={dirty:s,ctx:a}),n.$set(r)},i(a){o||(E(e.$$.fragment,a),E(n.$$.fragment,a),o=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),o=!1},d(a){a&&d(t),H(e,a),H(n,a)}}}function kn(l){let e,t="<p>Welcome to the Encounter Tool! Please, keep in mind that this system is being currently tested and might not be accurately balanced.</p>",n,o,a,s="Players",i,r,u,$,g,_,p,h,O="Configuration",C,V,P,A,ce,K,W,ue,X,J,z,Z,Y,R,ve,_e,te,ne,ge,$e,I,T,le,oe,G,de,Q,ae,Be="Encounter",Re,me,re,se,Me,He,c,L,ie,Le;const qe=[sn,rn],be=[];function xe(f,v){return f[2].length>0?0:1}r=xe(l),u=be[r]=qe[r](l),g=new je({props:{variant:"success",width:"full",$$slots:{default:[un]},$$scope:{ctx:l}}}),g.$on("click",l[19]);function Et(f){l[36](f)}let et={label:"Biome",options:l[14]};l[5]!==void 0&&(et.value=l[5]),P=new Xe({props:et}),ye.push(()=>we(P,"value",Et));function yt(f){l[37](f)}let tt={label:"Type in common",options:l[16]};l[6]!==void 0&&(tt.value=l[6]),K=new Xe({props:tt}),ye.push(()=>we(K,"value",yt));function wt(f){l[38](f)}let nt={label:"Difficulty",options:l[17]};l[0]!==void 0&&(nt.value=l[0]),J=new Xe({props:nt}),ye.push(()=>we(J,"value",wt));function Tt(f){l[39](f)}let lt={label:"Pokémon Limit",options:l[18]};l[7]!==void 0&&(lt.value=l[7]),ne=new Xe({props:lt}),ye.push(()=>we(ne,"value",Tt));const ot=[mn,cn],ke=[];function at(f,v){return f[7]==="yes"?0:1}I=at(l),T=ke[I]=ot[I](l),G=new je({props:{width:"full",$$slots:{default:[pn]},$$scope:{ctx:l}}}),G.$on("click",l[23]);const rt=[hn,_n,dn],Pe=[];function st(f,v){return f[1].pokemon.length>0?0:f[9]?1:2}re=st(l),se=Pe[re]=rt[re](l);let x=l[1].pokemon.length>0&&vt(l);return c=new Xt({props:{$$slots:{default:[vn]},$$scope:{ctx:l}}}),ie=new Zt({props:{error:l[11],$$slots:{default:[bn]},$$scope:{ctx:l}}}),{c(){e=k("section"),e.innerHTML=t,n=S(),o=k("section"),a=k("h2"),a.textContent=s,i=S(),u.c(),$=S(),q(g.$$.fragment),_=S(),p=k("section"),h=k("h2"),h.textContent=O,C=S(),V=k("div"),q(P.$$.fragment),ce=S(),q(K.$$.fragment),ue=S(),X=k("div"),q(J.$$.fragment),Z=S(),Y=k("p"),R=F(l[3]),ve=F(" XP"),_e=S(),te=k("div"),q(ne.$$.fragment),$e=S(),T.c(),le=S(),oe=k("p"),q(G.$$.fragment),de=S(),Q=k("section"),ae=k("h2"),ae.textContent=Be,Re=S(),me=k("div"),se.c(),Me=S(),x&&x.c(),He=S(),q(c.$$.fragment),L=S(),q(ie.$$.fragment),this.h()},l(f){e=b(f,"SECTION",{"data-svelte-h":!0}),Ce(e)!=="svelte-6r8vcf"&&(e.innerHTML=t),n=N(f),o=b(f,"SECTION",{});var v=M(o);a=b(v,"H2",{"data-svelte-h":!0}),Ce(a)!=="svelte-1st78ho"&&(a.textContent=s),i=N(v),u.l(v),$=N(v),B(g.$$.fragment,v),v.forEach(d),_=N(f),p=b(f,"SECTION",{});var fe=M(p);h=b(fe,"H2",{"data-svelte-h":!0}),Ce(h)!=="svelte-bx2tqs"&&(h.textContent=O),C=N(fe),V=b(fe,"DIV",{class:!0});var Oe=M(V);B(P.$$.fragment,Oe),ce=N(Oe),B(K.$$.fragment,Oe),Oe.forEach(d),ue=N(fe),X=b(fe,"DIV",{class:!0});var Ee=M(X);B(J.$$.fragment,Ee),Z=N(Ee),Y=b(Ee,"P",{class:!0});var De=M(Y);R=j(De,l[3]),ve=j(De," XP"),De.forEach(d),Ee.forEach(d),_e=N(fe),te=b(fe,"DIV",{class:!0});var Ne=M(te);B(ne.$$.fragment,Ne),$e=N(Ne),T.l(Ne),Ne.forEach(d),le=N(fe),oe=b(fe,"P",{class:!0});var Ue=M(oe);B(G.$$.fragment,Ue),Ue.forEach(d),fe.forEach(d),de=N(f),Q=b(f,"SECTION",{});var he=M(Q);ae=b(he,"H2",{"data-svelte-h":!0}),Ce(ae)!=="svelte-npd11l"&&(ae.textContent=Be),Re=N(he),me=b(he,"DIV",{class:!0});var Se=M(me);se.l(Se),Me=N(Se),x&&x.l(Se),Se.forEach(d),He=N(he),B(c.$$.fragment,he),he.forEach(d),L=N(f),B(ie.$$.fragment,f),this.h()},h(){w(V,"class","simple-type-field svelte-fn8s5t"),w(Y,"class","xp-awarded svelte-fn8s5t"),w(X,"class","simple-type-field svelte-fn8s5t"),w(te,"class","simple-type-field svelte-fn8s5t"),w(oe,"class","larger svelte-fn8s5t"),w(me,"class","manual-pokemon-list")},m(f,v){D(f,e,v),D(f,n,v),D(f,o,v),m(o,a),m(o,i),be[r].m(o,null),m(o,$),U(g,o,null),D(f,_,v),D(f,p,v),m(p,h),m(p,C),m(p,V),U(P,V,null),m(V,ce),U(K,V,null),m(p,ue),m(p,X),U(J,X,null),m(X,Z),m(X,Y),m(Y,R),m(Y,ve),m(p,_e),m(p,te),U(ne,te,null),m(te,$e),ke[I].m(te,null),m(p,le),m(p,oe),U(G,oe,null),D(f,de,v),D(f,Q,v),m(Q,ae),m(Q,Re),m(Q,me),Pe[re].m(me,null),m(me,Me),x&&x.m(me,null),m(Q,He),U(c,Q,null),D(f,L,v),U(ie,f,v),Le=!0},p(f,v){let fe=r;r=xe(f),r===fe?be[r].p(f,v):(Ve(),y(be[fe],1,1,()=>{be[fe]=null}),Ae(),u=be[r],u?u.p(f,v):(u=be[r]=qe[r](f),u.c()),E(u,1),u.m(o,$));const Oe={};v[1]&8388608&&(Oe.$$scope={dirty:v,ctx:f}),g.$set(Oe);const Ee={};v[0]&16384&&(Ee.options=f[14]),!A&&v[0]&32&&(A=!0,Ee.value=f[5],Te(()=>A=!1)),P.$set(Ee);const De={};!W&&v[0]&64&&(W=!0,De.value=f[6],Te(()=>W=!1)),K.$set(De);const Ne={};!z&&v[0]&1&&(z=!0,Ne.value=f[0],Te(()=>z=!1)),J.$set(Ne),(!Le||v[0]&8)&&Ie(R,f[3]);const Ue={};!ge&&v[0]&128&&(ge=!0,Ue.value=f[7],Te(()=>ge=!1)),ne.$set(Ue);let he=I;I=at(f),I===he?ke[I].p(f,v):(Ve(),y(ke[he],1,1,()=>{ke[he]=null}),Ae(),T=ke[I],T?T.p(f,v):(T=ke[I]=ot[I](f),T.c()),E(T,1),T.m(te,null));const Se={};v[1]&8388608&&(Se.$$scope={dirty:v,ctx:f}),G.$set(Se);let Ge=re;re=st(f),re===Ge?Pe[re].p(f,v):(Ve(),y(Pe[Ge],1,1,()=>{Pe[Ge]=null}),Ae(),se=Pe[re],se?se.p(f,v):(se=Pe[re]=rt[re](f),se.c()),E(se,1),se.m(me,Me)),f[1].pokemon.length>0?x?x.p(f,v):(x=vt(f),x.c(),x.m(me,null)):x&&(x.d(1),x=null);const it={};v[1]&8388608&&(it.$$scope={dirty:v,ctx:f}),c.$set(it);const ze={};v[0]&2048&&(ze.error=f[11]),v[0]&2048|v[1]&8388608&&(ze.$$scope={dirty:v,ctx:f}),ie.$set(ze)},i(f){Le||(E(u),E(g.$$.fragment,f),E(P.$$.fragment,f),E(K.$$.fragment,f),E(J.$$.fragment,f),E(ne.$$.fragment,f),E(T),E(G.$$.fragment,f),E(se),E(c.$$.fragment,f),E(ie.$$.fragment,f),Le=!0)},o(f){y(u),y(g.$$.fragment,f),y(P.$$.fragment,f),y(K.$$.fragment,f),y(J.$$.fragment,f),y(ne.$$.fragment,f),y(T),y(G.$$.fragment,f),y(se),y(c.$$.fragment,f),y(ie.$$.fragment,f),Le=!1},d(f){f&&(d(e),d(n),d(o),d(_),d(p),d(de),d(Q),d(L)),be[r].d(),H(g),H(P),H(K),H(J),H(ne),ke[I].d(),H(G),Pe[re].d(),x&&x.d(),H(c),H(ie,f)}}}function Pn(l){let e,t;return e=new qt({props:{saving:l[10],$$slots:{default:[kn]},$$scope:{ctx:l}}}),{c(){q(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,o){U(e,n,o),t=!0},p(n,o){const a={};o[0]&1024&&(a.saving=n[10]),o[0]&27647|o[1]&8388608&&(a.$$scope={dirty:o,ctx:n}),e.$set(a)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function En(l){let e,t,n,o;return e=new zt({props:{value:"Encounter Tool"}}),n=new Yt({props:{title:"Encounter Tool",$$slots:{default:[Pn]},$$scope:{ctx:l}}}),{c(){q(e.$$.fragment),t=S(),q(n.$$.fragment)},l(a){B(e.$$.fragment,a),t=N(a),B(n.$$.fragment,a)},m(a,s){U(e,a,s),D(a,t,s),U(n,a,s),o=!0},p(a,s){const i={};s[0]&28671|s[1]&8388608&&(i.$$scope={dirty:s,ctx:a}),n.$set(i)},i(a){o||(E(e.$$.fragment,a),E(n.$$.fragment,a),o=!0)},o(a){y(e.$$.fragment,a),y(n.$$.fragment,a),o=!1},d(a){a&&d(t),H(e,a),H(n,a)}}}function yn(l){let e,t;return e=new Bt({props:{slot:"icon"}}),{c(){q(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,o){U(e,n,o),t=!0},p:ee,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function wn(l){let e,t;return e=new Kt({}),{c(){q(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,o){U(e,n,o),t=!0},p:ee,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function Tn(l){let e,t;return e=new Qt({props:{pokemons:l[12],onClick:l[32],disableLink:!0}}),{c(){q(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,o){U(e,n,o),t=!0},p(n,o){const a={};o[0]&4096&&(a.pokemons=n[12]),e.$set(a)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function Cn(l){let e,t,n,o;const a=[Tn,wn],s=[];function i(r,u){return r[12]!==void 0?0:1}return t=i(l),n=s[t]=a[t](l),{c(){e=k("nav"),n.c(),this.h()},l(r){e=b(r,"NAV",{id:!0,slot:!0,class:!0,"aria-label":!0});var u=M(e);n.l(u),u.forEach(d),this.h()},h(){w(e,"id",Gt),w(e,"slot","side"),w(e,"class","table svelte-fn8s5t"),w(e,"aria-label","Pokémon List")},m(r,u){D(r,e,u),s[t].m(e,null),o=!0},p(r,u){let $=t;t=i(r),t===$?s[t].p(r,u):(Ve(),y(s[$],1,1,()=>{s[$]=null}),Ae(),n=s[t],n?n.p(r,u):(n=s[t]=a[t](r),n.c()),E(n,1),n.m(e,null))},i(r){o||(E(n),o=!0)},o(r){y(n),o=!1},d(r){r&&d(e),s[t].d()}}}function In(l){let e,t;return e=new Ut({props:{theme:"forest",$$slots:{side:[Cn],icon:[yn],default:[En]},$$scope:{ctx:l}}}),{c(){q(e.$$.fragment)},l(n){B(e.$$.fragment,n)},m(n,o){U(e,n,o),t=!0},p(n,o){const a={};o[0]&32767|o[1]&8388608&&(a.$$scope={dirty:o,ctx:n}),e.$set(a)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}const Ln="";function On(l,e,t){let n,o,a,s,i,r,u,$,g,_,p,h,O;ut(l,Ht,c=>t(31,O=c));const C=Pt.canonList();ut(l,C,c=>t(30,h=c));const P=[{name:"- None -",value:Ln}].concat(Jt.list.map(c=>({name:c,value:c}))),A=[{name:"Low",value:"low"},{name:"Moderate",value:"moderate"},{name:"High",value:"high"}],ce=[{name:"No",value:"no"},{name:"Yes",value:"yes"}],K={low:1,moderate:1.5,high:2};let W="",ue="low",X,J="no",z=1,Z=pe.createEmpty(),Y=!1,R=[],ve=1;const _e=()=>{t(2,R=[...R,{id:ve++,level:1,numberOfPokemon:1}])},te=c=>{t(2,R=R.filter(L=>L.id!==c))},ne=(c,L)=>{R.length||_e(),t(1,Z=pe.addPokemon(Z,c,L??1)),console.log("??"),t(9,Y=!1)},ge=c=>{t(1,Z=pe.removePokemon(Z,c.data))},$e=async()=>{if(!R.length){for(let L=0;L<4;L++)_e();await Ot()}const c=[];for(let L=0;L<a.length;L++){const ie=a[L],Le=W===""||ie.data.habitat.biomes.includes(W),qe=!X||ie.data.type.includes(X);Le&&qe&&c.push(ie)}if(c.length===0){t(9,Y=!0);return}t(1,Z=pe.generate({pool:c,targetExp:$,pokemonLimit:J==="yes"?z:1/0,maxLevel:i})),Z.pokemon.length===0&&t(9,Y=!0)},I=()=>{t(1,Z=pe.createEmpty())};let T=!1;const le=async()=>{t(10,T=!0);try{const c=await pe.saveToTrainers(Z);Mt(Ye.trainers(c.info.readKey))}catch(c){Dt.show(c.message)}finally{t(10,T=!1)}},oe=c=>ne(c);function G(c,L){l.$$.not_equal(L.level,c)&&(L.level=c,t(2,R))}function de(c,L){l.$$.not_equal(L.numberOfPokemon,c)&&(L.numberOfPokemon=c,t(2,R))}const Q=c=>te(c.id);function ae(c){W=c,t(5,W)}function Be(c){X=c,t(6,X)}function Re(c){ue=c,t(0,ue)}function me(c){J=c,t(7,J)}function re(c){z=c,t(8,z)}function se(c,L){c[L].level=kt(this.value),t(1,Z)}function Me(c,L){l.$$.not_equal(L.count,c)&&(L.count=c,t(1,Z))}const He=c=>ge(c);return l.$$.update=()=>{l.$$.dirty[1]&1&&t(28,n=O.data.biomes),l.$$.dirty[1]&1&&t(29,o=O.data.pokemonList),l.$$.dirty[0]&1610612736&&t(12,a=o??h),l.$$.dirty[0]&268435456&&t(14,s=[{name:"- None -",value:""},...(n.item.biomes??[]).map(c=>({name:c.name,value:c.id}))]),l.$$.dirty[0]&4&&(i=R.length>0?Math.max(...R.map(c=>c.level)):1),l.$$.dirty[0]&4&&t(27,r=R.reduce((c,L)=>c+L.level,0)),l.$$.dirty[0]&4&&t(26,u=R.reduce((c,L)=>{const ie=L.numberOfPokemon>1?(L.numberOfPokemon-1)*.1:0;return c+ie},0)),l.$$.dirty[0]&201326593&&t(3,$=Math.round(r*50*(1+u)*K[ue])),l.$$.dirty[0]&2&&t(4,g=pe.totalExp(Z)),l.$$.dirty[0]&25&&t(13,_=(()=>{const c=g/$*K[ue];return c<.9?{label:"Trivial",color:"#9e9e9e"}:c<=1.15?{label:"Low",color:"#4caf50"}:c<=1.5?{label:"Moderate",color:"#ff9800"}:c<=2?{label:"High",color:"#f44336"}:{label:"Deadly",color:"#7b1fa2"}})()),l.$$.dirty[0]&2&&t(11,p=pe.count(Z)===0?"Add Pokémon to this encounter to save it.":pe.count(Z)>Ke?`Reduce the number of Pokémon in this encounter to ${Ke} or less to save it.`:void 0)},[ue,Z,R,$,g,W,X,J,z,Y,T,p,a,_,s,C,P,A,ce,_e,te,ne,ge,$e,I,le,u,r,n,o,h,O,oe,G,de,Q,ae,Be,Re,me,re,se,Me,He]}class ul extends gt{constructor(e){super(),$t(this,e,On,In,bt,{},null,[-1,-1])}}export{ul as component,fl as universal};
