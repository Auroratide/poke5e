import{S as Q,i as Z,s as x,A as fe,f as d,t as P,a as N,j as pe,B as de,C as me,D as _e,g as K,k as b,l as h,n as v,o as E,p as F,w as C,q as w,r as U,y as I,K as ee,N as Ie,d as L,E as ne,m as q,c as M,b as H,L as Ne,u as X,I as De,J as Pe,a6 as Y,a7 as z,X as re,Y as Re,z as Ae}from"../chunks/CDFLjuqR.js";import{g as R}from"../chunks/BxlXVsHr.js";import{s as oe}from"../chunks/CwHq6mbt.js";/* empty css                */import{C as Oe}from"../chunks/Blwt0Wp3.js";import"../chunks/DNTgK4in.js";import"../chunks/BHr3Jov9.js";import{B as Fe,a as le}from"../chunks/Dt4bj8mA.js";import{S as Ue}from"../chunks/DxZ6EANA.js";import{B as Le}from"../chunks/C7sVI32S.js";import{V as qe}from"../chunks/D5hX8t0t.js";import{P as Me}from"../chunks/Edfpr6WS.js";import{T as He}from"../chunks/CzUoH4N4.js";import{F as te}from"../chunks/BMmmFbWz.js";import{T as J}from"../chunks/DxQlPuZ1.js";import{U as Ve}from"../chunks/DEpnwz-E.js";import{g as je}from"../chunks/CIB9ZFTq.js";import{t as Je}from"../chunks/BFZYw8mg.js";const he=()=>"<p>All of the data for your trainers and custom pokemon are stored locally on your computer. This is why you don't need an account to use the Poké 5e app! Unfortunately, it also means you can lose your data if your browser's data gets cleared.</p><p>To protect against this, it's a good idea to <strong>back up</strong> your list of trainers and fakémon so that you can recover them, just in case.</p>",We=he,Ye=(s={},e={})=>(e.locale??R())==="en"?he():We(),be=()=>"Download Backup File",ze=be,Xe=(s={},e={})=>(e.locale??R())==="en"?be():ze(),ke=()=>"This will download a <code>.poke5e</code> file containing the IDs and Access Keys of all your Trainers and Fakémon.",Ge=ke,Qe=(s={},e={})=>(e.locale??R())==="en"?ke():Ge(),ge=()=>"Backup successfully downloaded!",Ze=ge,xe=(s={},e={})=>(e.locale??R())==="en"?ge():Ze(),$e=()=>"Restore Backup File",et=$e,tt=(s={},e={})=>(e.locale??R())==="en"?$e():et(),ve=()=>"Restoring...",st=ve,at=(s={},e={})=>(e.locale??R())==="en"?ve():st(),we=()=>"Choose a <code>.poke5e</code> file on your device. This adds the Trainers and Fakémon in the file to this site.",nt=we,rt=(s={},e={})=>(e.locale??R())==="en"?we():nt(),ye=s=>`Backup successfully restored! Found ${s==null?void 0:s.trainers} trainers and ${s==null?void 0:s.fakemon} fakémon.`,ot=ye,lt=(s,e={})=>(e.locale??R())==="en"?ye(s):ot(s),Ee=s=>`Something went wrong restoring the backup. ${s==null?void 0:s.message}`,ct=Ee,it=(s,e={})=>(e.locale??R())==="en"?Ee(s):ct(s),Se=()=>"Manual Backup",ut=Se,ft=(s={},e={})=>(e.locale??R())==="en"?Se():ut(),Te=()=>"If you wish to manually keep your trainer IDs and Fakémon somewhere, you may copy them from below.",pt=Te,dt=(s={},e={})=>(e.locale??R())==="en"?Te():pt(),Be=()=>"<strong>Note:</strong> The manual backup cannot be uploaded to automatically restore missing trainers and fakémon.",mt=Be,_t=(s={},e={})=>(e.locale??R())==="en"?Be():mt(),Ke=()=>"IDs and Access Keys",ht=Ke,bt=(s={},e={})=>(e.locale??R())==="en"?Ke():ht();function ce(s){let e,t,a,n,o;function p(i,u){return i[3]?gt:kt}let c=p(s),r=c(s);return{c(){e=w("menu"),t=w("li"),a=w("button"),r.c(),this.h()},l(i){e=v(i,"MENU",{class:!0});var u=E(e);t=v(u,"LI",{});var k=E(t);a=v(k,"BUTTON",{class:!0});var l=E(a);r.l(l),l.forEach(d),k.forEach(d),u.forEach(d),this.h()},h(){h(a,"class","svelte-1am3xrv"),h(e,"class","svelte-1am3xrv")},m(i,u){K(i,e,u),b(e,t),b(t,a),r.m(a,null),n||(o=ee(a,"click",s[5]),n=!0)},p(i,u){c!==(c=p(i))&&(r.d(1),r=c(i),r&&(r.c(),r.m(a,null)))},d(i){i&&d(e),r.d(),n=!1,o()}}}function kt(s){let e;return{c(){e=U("Copy")},l(t){e=F(t,"Copy")},m(t,a){K(t,e,a)},d(t){t&&d(e)}}}function gt(s){let e;return{c(){e=U("✓ Copied!")},l(t){e=F(t,"✓ Copied!")},m(t,a){K(t,e,a)},d(t){t&&d(e)}}}function $t(s){let e,t,a,n,o,p,c,r,i,u=s[1]&&s[4]&&ce(s);const k=s[7].default,l=fe(k,s,s[6],null);return{c(){e=w("div"),t=w("div"),a=w("span"),n=U(s[0]),o=I(),u&&u.c(),p=I(),c=w("pre"),r=w("code"),l&&l.c(),this.h()},l(f){e=v(f,"DIV",{class:!0});var m=E(e);t=v(m,"DIV",{class:!0});var g=E(t);a=v(g,"SPAN",{class:!0});var O=E(a);n=F(O,s[0]),O.forEach(d),o=C(g),u&&u.l(g),g.forEach(d),p=C(m),c=v(m,"PRE",{class:!0});var T=E(c);r=v(T,"CODE",{class:!0});var y=E(r);l&&l.l(y),y.forEach(d),T.forEach(d),m.forEach(d),this.h()},h(){h(a,"class","title"),h(t,"class","header svelte-1am3xrv"),h(r,"class","max-height svelte-1am3xrv"),h(c,"class","svelte-1am3xrv"),h(e,"class","code-block svelte-1am3xrv")},m(f,m){K(f,e,m),b(e,t),b(t,a),b(a,n),b(t,o),u&&u.m(t,null),b(e,p),b(e,c),b(c,r),l&&l.m(r,null),s[8](c),i=!0},p(f,[m]){(!i||m&1)&&pe(n,f[0]),f[1]&&f[4]?u?u.p(f,m):(u=ce(f),u.c(),u.m(t,null)):u&&(u.d(1),u=null),l&&l.p&&(!i||m&64)&&de(l,k,f,f[6],i?_e(k,f[6],m,null):me(f[6]),null)},i(f){i||(N(l,f),i=!0)},o(f){P(l,f),i=!1},d(f){f&&d(e),u&&u.d(),l&&l.d(f),s[8](null)}}}function vt(s,e,t){let{$$slots:a={},$$scope:n}=e,{title:o}=e,{copiable:p=!1}=e,c,r=!1;const i="clipboard"in navigator,u=()=>{navigator.clipboard.writeText(c==null?void 0:c.textContent),t(3,r=!0),setTimeout(()=>t(3,r=!1),2e3)};function k(l){Ie[l?"unshift":"push"](()=>{c=l,t(2,c)})}return s.$$set=l=>{"title"in l&&t(0,o=l.title),"copiable"in l&&t(1,p=l.copiable),"$$scope"in l&&t(6,n=l.$$scope)},[o,p,c,r,i,u,n,a,k]}class wt extends Q{constructor(e){super(),Z(this,e,vt,$t,x,{title:0,copiable:1})}}function yt(s){let e,t,a;return{c(){e=w("input"),this.h()},l(n){e=v(n,"INPUT",{id:!0,type:!0,accept:!0}),this.h()},h(){h(e,"id",s[0]),h(e,"type","file"),h(e,"accept",s[5]),e.disabled=s[4]},m(n,o){K(n,e,o),t||(a=ee(e,"change",s[7]),t=!0)},p(n,o){o&1&&h(e,"id",n[0]),o&32&&h(e,"accept",n[5]),o&16&&(e.disabled=n[4])},d(n){n&&d(e),t=!1,a()}}}function Et(s){let e,t,a,n,o;const p=s[6].default,c=fe(p,s,s[8],null);return n=new qe({props:{inline:!0,$$slots:{default:[yt]},$$scope:{ctx:s}}}),{c(){e=w("label"),c&&c.c(),a=I(),H(n.$$.fragment),this.h()},l(r){e=v(r,"LABEL",{class:!0,for:!0});var i=E(e);c&&c.l(i),i.forEach(d),a=C(r),M(n.$$.fragment,r),this.h()},h(){h(e,"class",t="button "+s[1]+" "+s[2]+" "+s[3]+" svelte-5wfibh"),h(e,"for",s[0]),ne(e,"disabled",s[4])},m(r,i){K(r,e,i),c&&c.m(e,null),K(r,a,i),q(n,r,i),o=!0},p(r,[i]){c&&c.p&&(!o||i&256)&&de(c,p,r,r[8],o?_e(p,r[8],i,null):me(r[8]),null),(!o||i&14&&t!==(t="button "+r[1]+" "+r[2]+" "+r[3]+" svelte-5wfibh"))&&h(e,"class",t),(!o||i&1)&&h(e,"for",r[0]),(!o||i&30)&&ne(e,"disabled",r[4]);const u={};i&305&&(u.$$scope={dirty:i,ctx:r}),n.$set(u)},i(r){o||(N(c,r),N(n.$$.fragment,r),o=!0)},o(r){P(c,r),P(n.$$.fragment,r),o=!1},d(r){r&&(d(e),d(a)),c&&c.d(r),L(n,r)}}}function St(s,e,t){let{$$slots:a={},$$scope:n}=e,{id:o}=e,{variant:p="solid"}=e,{align:c="center"}=e,{width:r="auto"}=e,{disabled:i=!1}=e,{accept:u=void 0}=e;function k(l){Ne.call(this,s,l)}return s.$$set=l=>{"id"in l&&t(0,o=l.id),"variant"in l&&t(1,p=l.variant),"align"in l&&t(2,c=l.align),"width"in l&&t(3,r=l.width),"disabled"in l&&t(4,i=l.disabled),"accept"in l&&t(5,u=l.accept),"$$scope"in l&&t(8,n=l.$$scope)},[o,p,c,r,i,u,a,k,n]}class Tt extends Q{constructor(e){super(),Z(this,e,St,Et,x,{id:0,variant:1,align:2,width:3,disabled:4,accept:5})}}class Ce extends Error{constructor(e){super(e)}}async function Bt(){const s=J.getReadKeys().map(a=>({readKey:a,writeKey:J.getWriteKey(a)})),e=te.list(),t={$schema:Ve.backups.schemas[202602](),createdAt:new Date().toISOString(),fakemon:e,trainers:s};return new Blob([JSON.stringify(t)],{type:"application/json"})}function Kt(s){const e=[];if("fakemon"in s?Array.isArray(s.fakemon)?s.fakemon.some(t=>!("id"in t)||!("readKey"in t))&&e.push("fakemon require id and readKey"):e.push("fakemon is not an array"):e.push("fakemon is required"),"trainers"in s?Array.isArray(s.trainers)?s.trainers.some(t=>!("readKey"in t))&&e.push("trainers require readKey"):e.push("trainers is not an array"):e.push("trainers is required"),e.length>0)throw new Ce(e.join("; "));return!0}async function Ct(s){let e={};try{const t=await s.text();e=JSON.parse(t)}catch(t){throw console.error(t),new Ce("Backup file has the wrong format.")}if(Kt(e)){e.fakemon.map(n=>{te.add(n)}),e.trainers.map(n=>{J.addReadKey(n.readKey),n.writeKey&&J.addWriteKey(n.readKey,n.writeKey)});const t=(await Promise.all(e.fakemon.map(n=>je.get(n.readKey)))).filter(n=>n!=null);return{trainers:(await Promise.all(e.trainers.map(n=>Je.get(n.readKey)))).filter(n=>n!=null).length,fakemon:t.length}}}const ie={create:Bt,restore:Ct};function It(){const s=J.getReadKeys().map(a=>({readKey:a,writeKey:J.getWriteKey(a)})),e=te.list();return`# Trainers

Trainer ID   | Access Key
-------------|-----------------
${s.map(a=>`${a.readKey} | ${a.writeKey??""}`).join(`
`)}


# Fakemon

Fakemon ID      | Access Key
----------------|-----------------
${e.map(a=>`F.${a.readKey} | ${a.writeKey??""}`).join(`
`)}`}const Nt={create:It};function Dt(s){let e=Xe()+"",t;return{c(){t=U(e)},l(a){t=F(a,e)},m(a,n){K(a,t,n)},p:X,d(a){a&&d(t)}}}function Pt(s){let e=tt()+"",t;return{c(){t=U(e)},l(a){t=F(a,e)},m(a,n){K(a,t,n)},p:X,d(a){a&&d(t)}}}function Rt(s){let e,t,a,n,o,p,c,r=Qe()+"",i,u,k,l,f,m,g,O=rt()+"",T;return n=new Le({props:{disabled:s[1],$$slots:{default:[Dt]},$$scope:{ctx:s}}}),n.$on("click",s[3]),l=new Tt({props:{id:"restore-backup",accept:".poke5e",disabled:s[1],$$slots:{default:[Pt]},$$scope:{ctx:s}}}),l.$on("change",s[4]),{c(){e=w("div"),t=w("section"),a=w("p"),H(n.$$.fragment),o=I(),p=w("p"),c=new z(!1),i=I(),u=w("section"),k=w("p"),H(l.$$.fragment),f=I(),m=w("p"),g=new z(!1),this.h()},l(y){e=v(y,"DIV",{class:!0});var B=E(e);t=v(B,"SECTION",{class:!0});var D=E(t);a=v(D,"P",{class:!0});var V=E(a);M(n.$$.fragment,V),V.forEach(d),o=C(D),p=v(D,"P",{class:!0});var j=E(p);c=Y(j,!1),j.forEach(d),D.forEach(d),i=C(B),u=v(B,"SECTION",{class:!0});var $=E(u);k=v($,"P",{class:!0});var _=E(k);M(l.$$.fragment,_),_.forEach(d),f=C($),m=v($,"P",{class:!0});var S=E(m);g=Y(S,!1),S.forEach(d),$.forEach(d),B.forEach(d),this.h()},h(){h(a,"class","button-wrapper svelte-hsncu2"),c.a=null,h(p,"class","description svelte-hsncu2"),h(t,"class","svelte-hsncu2"),h(k,"class","button-wrapper svelte-hsncu2"),g.a=null,h(m,"class","description svelte-hsncu2"),h(u,"class","svelte-hsncu2"),h(e,"class","row svelte-hsncu2")},m(y,B){K(y,e,B),b(e,t),b(t,a),q(n,a,null),b(t,o),b(t,p),c.m(r,p),b(e,i),b(e,u),b(u,k),q(l,k,null),b(u,f),b(u,m),g.m(O,m),T=!0},p(y,B){const D={};B&2&&(D.disabled=y[1]),B&1024&&(D.$$scope={dirty:B,ctx:y}),n.$set(D);const V={};B&2&&(V.disabled=y[1]),B&1024&&(V.$$scope={dirty:B,ctx:y}),l.$set(V)},i(y){T||(N(n.$$.fragment,y),N(l.$$.fragment,y),T=!0)},o(y){P(n.$$.fragment,y),P(l.$$.fragment,y),T=!1},d(y){y&&d(e),L(n),L(l)}}}function ue(s){let e,t,a="×",n,o,p=s[0].message+"",c,r,i,u,k,l;return{c(){e=w("section"),t=w("button"),t.textContent=a,n=I(),o=w("p"),c=U(p),this.h()},l(f){e=v(f,"SECTION",{"aria-live":!0,class:!0});var m=E(e);t=v(m,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),Ae(t)!=="svelte-uxo80m"&&(t.textContent=a),n=C(m),o=v(m,"P",{class:!0});var g=E(o);c=F(g,p),g.forEach(d),m.forEach(d),this.h()},h(){h(t,"class","close-button svelte-hsncu2"),h(t,"aria-label","dismiss"),h(o,"class","svelte-hsncu2"),h(e,"aria-live","assertive"),h(e,"class",r="status status-"+s[0].type+" svelte-hsncu2")},m(f,m){K(f,e,m),b(e,t),b(e,n),b(e,o),b(o,c),u=!0,k||(l=ee(t,"click",s[2]),k=!0)},p(f,m){s=f,(!u||m&1)&&p!==(p=s[0].message+"")&&pe(c,p),(!u||m&1&&r!==(r="status status-"+s[0].type+" svelte-hsncu2"))&&h(e,"class",r)},i(f){u||(f&&Re(()=>{u&&(i||(i=re(e,oe,{duration:G},!0)),i.run(1))}),u=!0)},o(f){f&&(i||(i=re(e,oe,{duration:G},!1)),i.run(0)),u=!1},d(f){f&&d(e),f&&i&&i.end(),k=!1,l()}}}function At(s){let e;return{c(){e=U(s[5])},l(t){e=F(t,s[5])},m(t,a){K(t,e,a)},p:X,d(t){t&&d(e)}}}function Ot(s){let e,t,a=Ye()+"",n,o,p,c,r,i,u=ft()+"",k,l,f,m=dt()+"",g,O,T,y,B,D,V=_t()+"",j;o=new Ue({props:{saving:s[1],caption:at(),$$slots:{default:[Rt]},$$scope:{ctx:s}}});let $=s[0]&&ue(s);return T=new wt({props:{title:bt(),copiable:!0,$$slots:{default:[At]},$$scope:{ctx:s}}}),{c(){e=w("section"),t=new z(!1),n=I(),H(o.$$.fragment),p=I(),$&&$.c(),c=I(),r=w("section"),i=w("h2"),k=U(u),l=I(),f=w("p"),g=U(m),O=I(),H(T.$$.fragment),y=I(),B=w("p"),D=new z(!1),this.h()},l(_){e=v(_,"SECTION",{class:!0});var S=E(e);t=Y(S,!1),S.forEach(d),n=C(_),M(o.$$.fragment,_),p=C(_),$&&$.l(_),c=C(_),r=v(_,"SECTION",{class:!0});var A=E(r);i=v(A,"H2",{});var W=E(i);k=F(W,u),W.forEach(d),l=C(A),f=v(A,"P",{});var se=E(f);g=F(se,m),se.forEach(d),O=C(A),M(T.$$.fragment,A),y=C(A),B=v(A,"P",{});var ae=E(B);D=Y(ae,!1),ae.forEach(d),A.forEach(d),this.h()},h(){t.a=null,h(e,"class","svelte-hsncu2"),D.a=null,h(r,"class","svelte-hsncu2")},m(_,S){K(_,e,S),t.m(a,e),K(_,n,S),q(o,_,S),K(_,p,S),$&&$.m(_,S),K(_,c,S),K(_,r,S),b(r,i),b(i,k),b(r,l),b(r,f),b(f,g),b(r,O),q(T,r,null),b(r,y),b(r,B),D.m(V,B),j=!0},p(_,S){const A={};S&2&&(A.saving=_[1]),S&1026&&(A.$$scope={dirty:S,ctx:_}),o.$set(A),_[0]?$?($.p(_,S),S&1&&N($,1)):($=ue(_),$.c(),N($,1),$.m(c.parentNode,c)):$&&(De(),P($,1,1,()=>{$=null}),Pe());const W={};S&1024&&(W.$$scope={dirty:S,ctx:_}),T.$set(W)},i(_){j||(N(o.$$.fragment,_),N($),N(T.$$.fragment,_),j=!0)},o(_){P(o.$$.fragment,_),P($),P(T.$$.fragment,_),j=!1},d(_){_&&(d(e),d(n),d(p),d(c),d(r)),L(o,_),$&&$.d(_),L(T)}}}function Ft(s){let e,t;return e=new Oe({props:{title:"Backup and Restoration",$$slots:{default:[Ot]},$$scope:{ctx:s}}}),{c(){H(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,n){q(e,a,n),t=!0},p(a,n){const o={};n&1027&&(o.$$scope={dirty:n,ctx:a}),e.$set(o)},i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){L(e,a)}}}function Ut(s){let e,t;return e=new Fe({props:{slot:"icon"}}),{c(){H(e.$$.fragment)},l(a){M(e.$$.fragment,a)},m(a,n){q(e,a,n),t=!0},p:X,i(a){t||(N(e.$$.fragment,a),t=!0)},o(a){P(e.$$.fragment,a),t=!1},d(a){L(e,a)}}}function Lt(s){let e,t,a,n;return e=new He({props:{value:"Backup and Restoration"}}),a=new Me({props:{theme:"grey",$$slots:{icon:[Ut],default:[Ft]},$$scope:{ctx:s}}}),{c(){H(e.$$.fragment),t=I(),H(a.$$.fragment)},l(o){M(e.$$.fragment,o),t=C(o),M(a.$$.fragment,o)},m(o,p){q(e,o,p),K(o,t,p),q(a,o,p),n=!0},p(o,[p]){const c={};p&1027&&(c.$$scope={dirty:p,ctx:o}),a.$set(c)},i(o){n||(N(e.$$.fragment,o),N(a.$$.fragment,o),n=!0)},o(o){P(e.$$.fragment,o),P(a.$$.fragment,o),n=!1},d(o){o&&d(t),L(e,o),L(a,o)}}}const G=200;function qt(s,e,t){let a,n=-1;const o=f=>m=>{window.clearTimeout(n),a!=null?(t(0,a=void 0),n=window.setTimeout(()=>{t(0,a={type:f,message:m})},G+10)):t(0,a={type:f,message:m})},p=()=>{window.clearTimeout(n),t(0,a=void 0)},c=o("success"),r=o("error"),i=async()=>{const f=await ie.create(),m=URL.createObjectURL(f),g=new Date,O=`backup-${g.getFullYear()}${(g.getMonth()+1).toString().padStart(2,"0")}${g.getDate().toString().padStart(2,"0")}${g.getHours().toString().padStart(2,"0")}${g.getMinutes().toString().padStart(2,"0")}${g.getSeconds().toString().padStart(2,"0")}.poke5e`,T=document.createElement("a");T.href=m,T.download=O,T.click(),URL.revokeObjectURL(m),c(xe())};let u=!1;const k=async f=>{const m=f.target.files[0];if(m)try{t(1,u=!0);const g=await ie.restore(m);c(lt(g)),le("success")}catch(g){r(it({message:g.message})),le("error")}finally{t(1,u=!1)}},l=Nt.create();return[a,u,p,i,k,l]}class rs extends Q{constructor(e){super(),Z(this,e,qt,Lt,x,{})}}export{rs as component};
