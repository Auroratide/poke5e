var Fs=Object.defineProperty;var Ks=(i,e,n)=>e in i?Fs(i,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):i[e]=n;var Ne=(i,e,n)=>(Ks(i,typeof e!="symbol"?e+"":e,n),n);import{s as ue,r as ne,k as m,n as x,d as h,I as Pe,e as w,t as M,b as k,f as j,g as B,l as v,x as se,a as A,c as O,j as $,i as ie,a1 as On,q as et,X as he,u as tt,v as nt,w as rt,Y as St,a2 as Ge,y as we,Z as jn,J as st,a3 as it,m as Re,M as vn,E as Ln,B as Ct,G as It,a0 as oe,a4 as Lt,O as Bt,a5 as Xe,a6 as Ft,a7 as Ze,a8 as Rn,a9 as Xt,H as qs,F as Hs}from"../chunks/scheduler.DAF4hTao.js";import{m as Gt,A as zs,P as vs,T as Vs,a as Jt,e as Nn,h as Pt,u as bn}from"../chunks/PokemonArt.u-xhlmDO.js";import{S as ce,i as fe,c as L,a as R,m as N,t as E,b as T,d as D,g as ge,e as $e,f as At}from"../chunks/index.Dy0pSeyo.js";import{M as Gs,p as Js}from"../chunks/MissingNo.CuVyQpGi.js";import{e as de,V as Wt,L as at,S as bs,u as ws,o as ks,a as Ws,B as ys,P as Ys}from"../chunks/Loader.Bz4TX_1L.js";import{I as Xs}from"../chunks/IdBadge.B5xfko6s.js";import{T as Je}from"../chunks/Title.ChC1O-v6.js";import{F as Zt,C as We,T as Zs}from"../chunks/TypeTag.QeG2oRsd.js";import{b as Te,a as Qs}from"../chunks/paths.Du9uG8Hu.js";import{p as _t}from"../chunks/store.BG9TlB2P.js";import{a as Dn,b as Un,m as xs,e as Mn}from"../chunks/filter.BzkLsrbX.js";import{M as ei}from"../chunks/MoveDescription.DqDzPC18.js";import{m as wn}from"../chunks/store.Bzb4wIdt.js";import{f as Bn,e as xe,t as Fn,a as Kn}from"../chunks/store.DPPKCzgl.js";import{w as ti}from"../chunks/index.9IHGp1c2.js";import{_ as Ot}from"../chunks/preload-helper.D6kgxu3v.js";import{g as qe}from"../chunks/entry.wB0_7QRd.js";const ni=!0,qn=ni;function Hn(i,e,n){const t=i.slice();return t[2]=e[n],t}function zn(i){let e,n=i[2]+"",t;return{c(){e=w("p"),t=M(n)},l(r){e=k(r,"P",{});var s=j(e);t=B(s,n),s.forEach(h)},m(r,s){m(r,e,s),v(e,t)},p(r,s){s&1&&n!==(n=r[2]+"")&&se(t,n)},d(r){r&&h(e)}}}function ri(i){let e,n=de(i[0]),t=[];for(let r=0;r<n.length;r+=1)t[r]=zn(Hn(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,[s]){if(s&1){n=de(r[0]);let a;for(a=0;a<n.length;a+=1){const o=Hn(r,n,a);t[a]?t[a].p(o,s):(t[a]=zn(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},i:x,o:x,d(r){r&&h(e),Pe(t,r)}}}function si(i,e,n){let t,{value:r=""}=e;return i.$$set=s=>{"value"in s&&n(1,r=s.value)},i.$$.update=()=>{i.$$.dirty&2&&n(0,t=r.split(/\n+/))},[t,r]}class ii extends ce{constructor(e){super(),fe(this,e,si,ri,ue,{value:1})}}function ai(i){let e,n="Trainer Id",t,r,s=i[0].readKey+"",a;return{c(){e=w("dt"),e.textContent=n,t=A(),r=w("dd"),a=M(s)},l(o){e=k(o,"DT",{"data-svelte-h":!0}),ie(e)!=="svelte-13n2wjg"&&(e.textContent=n),t=O(o),r=k(o,"DD",{});var l=j(r);a=B(l,s),l.forEach(h)},m(o,l){m(o,e,l),m(o,t,l),m(o,r,l),v(r,a)},p(o,l){l&1&&s!==(s=o[0].readKey+"")&&se(a,s)},d(o){o&&(h(e),h(t),h(r))}}}function li(i){let e,n,t,r,s;return n=new Zt({props:{columns:2,$$slots:{default:[ai]},$$scope:{ctx:i}}}),r=new ii({props:{value:i[0].description}}),{c(){e=w("section"),L(n.$$.fragment),t=A(),L(r.$$.fragment),this.h()},l(a){e=k(a,"SECTION",{class:!0});var o=j(e);R(n.$$.fragment,o),t=O(o),R(r.$$.fragment,o),o.forEach(h),this.h()},h(){$(e,"class","info")},m(a,o){m(a,e,o),N(n,e,null),v(e,t),N(r,e,null),s=!0},p(a,[o]){const l={};o&3&&(l.$$scope={dirty:o,ctx:a}),n.$set(l);const u={};o&1&&(u.value=a[0].description),r.$set(u)},i(a){s||(E(n.$$.fragment,a),E(r.$$.fragment,a),s=!0)},o(a){T(n.$$.fragment,a),T(r.$$.fragment,a),s=!1},d(a){a&&h(e),D(n),D(r)}}}function oi(i,e,n){let{trainer:t}=e;return i.$$set=r=>{"trainer"in r&&n(0,t=r.trainer)},[t]}let ui=class extends ce{constructor(e){super(),fe(this,e,oi,li,ue,{trainer:0})}};function ci(i){let e,n,t,r,s;const a=i[7].default,o=et(a,i,i[6],null);return{c(){e=w("button"),o&&o.c(),this.h()},l(l){e=k(l,"BUTTON",{type:!0,class:!0});var u=j(e);o&&o.l(u),u.forEach(h),this.h()},h(){$(e,"type",i[1]),$(e,"class",n="button "+i[0]+" "+i[2]+" "+i[3]+" svelte-1ezhafr"),e.disabled=i[4]},m(l,u){m(l,e,u),o&&o.m(e,null),t=!0,r||(s=he(e,"click",i[9]),r=!0)},p(l,u){o&&o.p&&(!t||u&64)&&tt(o,a,l,l[6],t?rt(a,l[6],u,null):nt(l[6]),null),(!t||u&2)&&$(e,"type",l[1]),(!t||u&13&&n!==(n="button "+l[0]+" "+l[2]+" "+l[3]+" svelte-1ezhafr"))&&$(e,"class",n),(!t||u&16)&&(e.disabled=l[4])},i(l){t||(E(o,l),t=!0)},o(l){T(o,l),t=!1},d(l){l&&h(e),o&&o.d(l),r=!1,s()}}}function fi(i){let e,n,t,r,s;const a=i[7].default,o=et(a,i,i[6],null);return{c(){e=w("a"),o&&o.c(),this.h()},l(l){e=k(l,"A",{href:!0,class:!0});var u=j(e);o&&o.l(u),u.forEach(h),this.h()},h(){$(e,"href",i[5]),$(e,"class",n="button "+i[0]+" "+i[2]+" "+i[3]+" svelte-1ezhafr"),St(e,"disabled",i[4])},m(l,u){m(l,e,u),o&&o.m(e,null),t=!0,r||(s=he(e,"click",i[8]),r=!0)},p(l,u){o&&o.p&&(!t||u&64)&&tt(o,a,l,l[6],t?rt(a,l[6],u,null):nt(l[6]),null),(!t||u&32)&&$(e,"href",l[5]),(!t||u&13&&n!==(n="button "+l[0]+" "+l[2]+" "+l[3]+" svelte-1ezhafr"))&&$(e,"class",n),(!t||u&29)&&St(e,"disabled",l[4])},i(l){t||(E(o,l),t=!0)},o(l){T(o,l),t=!1},d(l){l&&h(e),o&&o.d(l),r=!1,s()}}}function hi(i){let e,n,t,r;const s=[fi,ci],a=[];function o(l,u){return l[5]!=null?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,[u]){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function di(i,e,n){let{$$slots:t={},$$scope:r}=e,{variant:s="solid"}=e,{type:a="button"}=e,{align:o="center"}=e,{width:l="auto"}=e,{disabled:u=!1}=e,{href:c=void 0}=e;function f(p){On.call(this,i,p)}function d(p){On.call(this,i,p)}return i.$$set=p=>{"variant"in p&&n(0,s=p.variant),"type"in p&&n(1,a=p.type),"align"in p&&n(2,o=p.align),"width"in p&&n(3,l=p.width),"disabled"in p&&n(4,u=p.disabled),"href"in p&&n(5,c=p.href),"$$scope"in p&&n(6,r=p.$$scope)},[s,a,o,l,u,c,r,t,f,d]}class ke extends ce{constructor(e){super(),fe(this,e,di,hi,ue,{variant:0,type:1,align:2,width:3,disabled:4,href:5})}}function pi(i){let e,n;const t=i[1].default,r=et(t,i,i[0],null);return{c(){e=w("div"),r&&r.c(),this.h()},l(s){e=k(s,"DIV",{class:!0});var a=j(e);r&&r.l(a),a.forEach(h),this.h()},h(){$(e,"class","gap-between-items to-right padding-preventing-overflow svelte-1ofqvh4")},m(s,a){m(s,e,a),r&&r.m(e,null),n=!0},p(s,[a]){r&&r.p&&(!n||a&1)&&tt(r,t,s,s[0],n?rt(t,s[0],a,null):nt(s[0]),null)},i(s){n||(E(r,s),n=!0)},o(s){T(r,s),n=!1},d(s){s&&h(e),r&&r.d(s)}}}function _i(i,e,n){let{$$slots:t={},$$scope:r}=e;return i.$$set=s=>{"$$scope"in s&&n(0,r=s.$$scope)},[r,t]}class Le extends ce{constructor(e){super(),fe(this,e,_i,pi,ue,{})}}const me={home:()=>`${Te}`,pokemon:i=>`${Te}/pokemon${i?`/${i}`:""}`,moves:i=>`${Te}/moves${i?`/${i}`:""}`,tms:i=>`${Te}/tms${i?`/${i}`:""}`,trainers:(i,e,n)=>{const t=new URLSearchParams;return i&&t.append("id",i),e&&t.append("pokemon",e),n&&t.append("action",n),`${Te}/trainers?${t.toString()}`}},Ie={addPokemon:"add-pokemon",editPokemon:"edit-pokemon",evolvePokemon:"evolve-pokemon",removePokemon:"remove-pokemon",newTrainer:"new-trainer",findTrainer:"find-trainer",editTrainer:"edit-trainer",retireTrainer:"retire-trainer",accessKey:"access-key"};function mi(i){let e;return{c(){e=M("Access Key")},l(n){e=B(n,"Access Key")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Vn(i){let e,n;return e=new ke({props:{href:me.trainers(i[1].info.readKey,void 0,Ie.editTrainer),$$slots:{default:[gi]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.href=me.trainers(t[1].info.readKey,void 0,Ie.editTrainer)),r&4&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function gi(i){let e;return{c(){e=M("Edit")},l(n){e=B(n,"Edit")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function $i(i){let e,n,t,r;e=new ke({props:{href:me.trainers(i[1].info.readKey,void 0,Ie.accessKey),variant:"ghost",$$slots:{default:[mi]},$$scope:{ctx:i}}});let s=i[1].update&&Vn(i);return{c(){L(e.$$.fragment),n=A(),s&&s.c(),t=ne()},l(a){R(e.$$.fragment,a),n=O(a),s&&s.l(a),t=ne()},m(a,o){N(e,a,o),m(a,n,o),s&&s.m(a,o),m(a,t,o),r=!0},p(a,o){const l={};o&2&&(l.href=me.trainers(a[1].info.readKey,void 0,Ie.accessKey)),o&4&&(l.$$scope={dirty:o,ctx:a}),e.$set(l),a[1].update?s?(s.p(a,o),o&2&&E(s,1)):(s=Vn(a),s.c(),E(s,1),s.m(t.parentNode,t)):s&&(ge(),T(s,1,1,()=>{s=null}),$e())},i(a){r||(E(e.$$.fragment,a),E(s),r=!0)},o(a){T(e.$$.fragment,a),T(s),r=!1},d(a){a&&(h(n),h(t)),D(e,a),s&&s.d(a)}}}function vi(i){let e,n,t,r;return e=new ui({props:{trainer:i[1].info}}),t=new Le({props:{$$slots:{default:[$i]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&2&&(o.trainer=s[1].info),e.$set(o);const l={};a&6&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function bi(i){let e,n,t,r;return e=new Je({props:{value:i[1].info.name}}),t=new We({props:{title:i[1].info.name,$$slots:{default:[vi]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&2&&(o.value=s[1].info.name),e.$set(o);const l={};a&2&&(l.title=s[1].info.name),a&6&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function wi(i,e,n){let t,r=x,s=()=>(r(),r=Ge(a,o=>n(1,t=o)),a);i.$$.on_destroy.push(()=>r());let{trainer:a}=e;return s(),i.$$set=o=>{"trainer"in o&&s(n(0,a=o.trainer))},[a,t]}let ki=class extends ce{constructor(e){super(),fe(this,e,wi,bi,ue,{trainer:0})}};function yi(i){let e,n;return{c(){e=w("span"),this.h()},l(t){e=k(t,"SPAN",{class:!0,title:!0,"aria-label":!0}),j(e).forEach(h),this.h()},h(){$(e,"class",n="gender "+i[0]+" svelte-dgspm2"),$(e,"title",i[0]),$(e,"aria-label",i[0])},m(t,r){m(t,e,r)},p(t,[r]){r&1&&n!==(n="gender "+t[0]+" svelte-dgspm2")&&$(e,"class",n),r&1&&$(e,"title",t[0]),r&1&&$(e,"aria-label",t[0])},i:x,o:x,d(t){t&&h(e)}}}function Ei(i,e,n){let{gender:t}=e;return i.$$set=r=>{"gender"in r&&n(0,t=r.gender)},[t]}class Es extends ce{constructor(e){super(),fe(this,e,Ei,yi,ue,{gender:0})}}function Ti(i){let e,n,t,r=i[1].name+"",s,a,o,l,u,c,f,d="Lv.",p,_,g=i[0].level+"",b,y;return l=new Es({props:{gender:i[0].gender}}),{c(){e=w("div"),n=w("span"),t=w("span"),s=M(r),a=A(),o=w("span"),L(l.$$.fragment),u=A(),c=w("span"),f=w("span"),f.textContent=d,p=A(),_=w("span"),b=M(g),this.h()},l(S){e=k(S,"DIV",{class:!0});var P=j(e);n=k(P,"SPAN",{class:!0});var I=j(n);t=k(I,"SPAN",{});var H=j(t);s=B(H,r),H.forEach(h),a=O(I),o=k(I,"SPAN",{class:!0});var G=j(o);R(l.$$.fragment,G),G.forEach(h),I.forEach(h),u=O(P),c=k(P,"SPAN",{class:!0});var F=j(c);f=k(F,"SPAN",{class:!0,"data-svelte-h":!0}),ie(f)!=="svelte-2tek6b"&&(f.textContent=d),p=O(F),_=k(F,"SPAN",{class:!0});var U=j(_);b=B(U,g),U.forEach(h),F.forEach(h),P.forEach(h),this.h()},h(){$(o,"class","gender svelte-86i3rl"),$(n,"class","name svelte-86i3rl"),$(f,"class","level-text svelte-86i3rl"),$(_,"class","level-number svelte-86i3rl"),$(c,"class","level svelte-86i3rl"),$(e,"class","grid svelte-86i3rl")},m(S,P){m(S,e,P),v(e,n),v(n,t),v(t,s),v(n,a),v(n,o),N(l,o,null),v(e,u),v(e,c),v(c,f),v(c,p),v(c,_),v(_,b),y=!0},p(S,[P]){(!y||P&2)&&r!==(r=S[1].name+"")&&se(s,r);const I={};P&1&&(I.gender=S[0].gender),l.$set(I),(!y||P&1)&&g!==(g=S[0].level+"")&&se(b,g)},i(S){y||(E(l.$$.fragment,S),y=!0)},o(S){T(l.$$.fragment,S),y=!1},d(S){S&&h(e),D(l)}}}function Si(i,e,n){let{pokemon:t}=e,{species:r}=e;return i.$$set=s=>{"pokemon"in s&&n(0,t=s.pokemon),"species"in s&&n(1,r=s.species)},[t,r]}class Ci extends ce{constructor(e){super(),fe(this,e,Si,Ti,ue,{pokemon:0,species:1})}}function Ii(i){let e,n,t;return{c(){e=M(i[0]),n=M(" / "),t=M(i[1])},l(r){e=B(r,i[0]),n=B(r," / "),t=B(r,i[1])},m(r,s){m(r,e,s),m(r,n,s),m(r,t,s)},p(r,s){s&1&&se(e,r[0]),s&2&&se(t,r[1])},d(r){r&&(h(e),h(n),h(t))}}}function Pi(i){let e,n,t=`${i[3]}%`,r,s,a,o;return s=new Wt({props:{$$slots:{default:[Ii]},$$scope:{ctx:i}}}),{c(){e=w("meter"),n=w("div"),r=A(),L(s.$$.fragment),this.h()},l(l){e=k(l,"METER",{class:!0,max:!0});var u=j(e);n=k(u,"DIV",{class:!0}),j(n).forEach(h),r=O(u),R(s.$$.fragment,u),u.forEach(h),this.h()},h(){$(n,"class","fill svelte-f7vc71"),we(n,"width",t),$(e,"class",a=jn(i[4])+" svelte-f7vc71"),$(e,"max",i[1]),e.value=i[0],St(e,"secondary",i[2])},m(l,u){m(l,e,u),v(e,n),v(e,r),N(s,e,null),o=!0},p(l,[u]){u&8&&t!==(t=`${l[3]}%`)&&we(n,"width",t);const c={};u&35&&(c.$$scope={dirty:u,ctx:l}),s.$set(c),(!o||u&16&&a!==(a=jn(l[4])+" svelte-f7vc71"))&&$(e,"class",a),(!o||u&2)&&$(e,"max",l[1]),(!o||u&1)&&(e.value=l[0]),(!o||u&20)&&St(e,"secondary",l[2])},i(l){o||(E(s.$$.fragment,l),o=!0)},o(l){T(s.$$.fragment,l),o=!1},d(l){l&&h(e),D(s)}}}function Ai(i,e,n){let t,r,{current:s}=e,{max:a}=e,{secondary:o=!1}=e;return i.$$set=l=>{"current"in l&&n(0,s=l.current),"max"in l&&n(1,a=l.max),"secondary"in l&&n(2,o=l.secondary)},i.$$.update=()=>{i.$$.dirty&3&&n(3,t=Math.max(100*s/a,0)),i.$$.dirty&8&&n(4,r=t>=50?"healthy":t>=20?"warning":"danger")},[s,a,o,t,r]}class un extends ce{constructor(e){super(),fe(this,e,Ai,Pi,ue,{current:0,max:1,secondary:2})}}function Oi(i){let e,n=`${i[2]+1}ch`,t,r;return{c(){e=w("input"),this.h()},l(s){e=k(s,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){$(e,"id",i[1]),$(e,"type","text"),e.value=i[0],$(e,"class","svelte-182hmq9"),we(e,"width",n)},m(s,a){m(s,e,a),t||(r=[he(e,"change",i[3]),he(e,"input",i[4])],t=!0)},p(s,[a]){a&2&&$(e,"id",s[1]),a&1&&e.value!==s[0]&&(e.value=s[0]),a&4&&n!==(n=`${s[2]+1}ch`)&&we(e,"width",n)},i:x,o:x,d(s){s&&h(e),t=!1,st(r)}}}function ji(i,e,n){var u;const t=it();let{id:r}=e,{value:s}=e,a=((u=s==null?void 0:s.toString())==null?void 0:u.length)??0;const o=c=>{var _;const f=c.target,d=/(\d+)\s*(\+|-)\s*(\d+)/,p=f.value.match(d);if(p!=null)n(0,s=parseFloat(p[1])+parseFloat(p[2]+p[3]));else{const g=parseFloat(f.value);n(0,s=isNaN(g)?0:g)}n(2,a=((_=s==null?void 0:s.toString())==null?void 0:_.length)??0),t("change",{value:s})},l=c=>{const f=c.target;n(2,a=f.value.length)};return i.$$set=c=>{"id"in c&&n(1,r=c.id),"value"in c&&n(0,s=c.value)},[s,r,a,o,l]}class Ts extends ce{constructor(e){super(),fe(this,e,ji,Oi,ue,{id:1,value:0})}}function Li(i){let e,n="HP";return{c(){e=w("label"),e.textContent=n,this.h()},l(t){e=k(t,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-nr4t2i"&&(e.textContent=n),this.h()},h(){$(e,"for","current-hp")},m(t,r){m(t,e,r)},p:x,d(t){t&&h(e)}}}function Ri(i){let e=i[0].hp.current+"",n;return{c(){n=M(e)},l(t){n=B(t,e)},m(t,r){m(t,n,r)},p(t,r){r&1&&e!==(e=t[0].hp.current+"")&&se(n,e)},i:x,o:x,d(t){t&&h(n)}}}function Ni(i){let e,n;return e=new Ts({props:{id:"current-hp",value:i[3]}}),e.$on("change",i[5]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.value=t[3]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Di(i){let e,n="Hit Dice";return{c(){e=w("label"),e.textContent=n,this.h()},l(t){e=k(t,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1l1lthl"&&(e.textContent=n),this.h()},h(){$(e,"for","current-hit-dice")},m(t,r){m(t,e,r)},p:x,d(t){t&&h(e)}}}function Ui(i){let e=i[0].hitDice.current+"",n;return{c(){n=M(e)},l(t){n=B(t,e)},m(t,r){m(t,n,r)},p(t,r){r&1&&e!==(e=t[0].hitDice.current+"")&&se(n,e)},i:x,o:x,d(t){t&&h(n)}}}function Mi(i){let e,n;return e=new Ts({props:{id:"current-hit-dice",value:i[4]}}),e.$on("change",i[6]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.value=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Bi(i){let e,n,t,r,s,a,o,l,u,c,f,d,p,_=i[0].hp.max+"",g,b,y,S,P,I,H,G,F,U,K,re,Y,X,z,C=i[0].hitDice.max+"",V,W,Q=i[1].hitDice+"",ee,q,Z;t=new un({props:{current:i[3],max:i[0].hp.max}}),a=new Wt({props:{$$slots:{default:[Li]},$$scope:{ctx:i}}});const te=[Ni,Ri],J=[];function ae(le,ve){return le[2]?0:1}u=ae(i),c=J[u]=te[u](i),P=new un({props:{secondary:!0,current:i[4],max:i[0].hitDice.max}}),G=new Wt({props:{$$slots:{default:[Di]},$$scope:{ctx:i}}});const _e=[Mi,Ui],Ce=[];function Ye(le,ve){return le[2]?0:1}return K=Ye(i),re=Ce[K]=_e[K](i),{c(){e=w("div"),n=w("span"),L(t.$$.fragment),r=A(),s=w("span"),L(a.$$.fragment),o=A(),l=w("span"),c.c(),f=A(),d=w("span"),p=M("/ "),g=M(_),b=A(),y=w("span"),S=w("span"),L(P.$$.fragment),I=A(),H=w("span"),L(G.$$.fragment),F=A(),U=w("span"),re.c(),Y=A(),X=w("span"),z=M("/ "),V=M(C),W=M(" ("),ee=M(Q),q=M(")"),this.h()},l(le){e=k(le,"DIV",{class:!0});var ve=j(e);n=k(ve,"SPAN",{class:!0});var Be=j(n);R(t.$$.fragment,Be),Be.forEach(h),r=O(ve),s=k(ve,"SPAN",{class:!0});var Ae=j(s);R(a.$$.fragment,Ae),o=O(Ae),l=k(Ae,"SPAN",{class:!0});var He=j(l);c.l(He),He.forEach(h),f=O(Ae),d=k(Ae,"SPAN",{class:!0});var ye=j(d);p=B(ye,"/ "),g=B(ye,_),ye.forEach(h),Ae.forEach(h),b=O(ve),y=k(ve,"SPAN",{class:!0});var je=j(y);S=k(je,"SPAN",{class:!0});var gt=j(S);R(P.$$.fragment,gt),gt.forEach(h),I=O(je),H=k(je,"SPAN",{class:!0});var $t=j(H);R(G.$$.fragment,$t),F=O($t),U=k($t,"SPAN",{class:!0});var An=j(U);re.l(An),An.forEach(h),Y=O($t),X=k($t,"SPAN",{class:!0});var vt=j(X);z=B(vt,"/ "),V=B(vt,C),W=B(vt," ("),ee=B(vt,Q),q=B(vt,")"),vt.forEach(h),$t.forEach(h),je.forEach(h),ve.forEach(h),this.h()},h(){$(n,"class","bar svelte-6ls8yw"),$(l,"class","current-hp svelte-6ls8yw"),$(d,"class","max-hp"),$(s,"class","hp svelte-6ls8yw"),$(S,"class","hit-dice-bar svelte-6ls8yw"),$(U,"class","current-hit-dice svelte-6ls8yw"),$(X,"class","max-hit-dice"),$(H,"class","hit-dice-text svelte-6ls8yw"),$(y,"class","hit-dice svelte-6ls8yw"),$(e,"class","grid svelte-6ls8yw")},m(le,ve){m(le,e,ve),v(e,n),N(t,n,null),v(e,r),v(e,s),N(a,s,null),v(s,o),v(s,l),J[u].m(l,null),v(s,f),v(s,d),v(d,p),v(d,g),v(e,b),v(e,y),v(y,S),N(P,S,null),v(y,I),v(y,H),N(G,H,null),v(H,F),v(H,U),Ce[K].m(U,null),v(H,Y),v(H,X),v(X,z),v(X,V),v(X,W),v(X,ee),v(X,q),Z=!0},p(le,[ve]){const Be={};ve&8&&(Be.current=le[3]),ve&1&&(Be.max=le[0].hp.max),t.$set(Be);const Ae={};ve&256&&(Ae.$$scope={dirty:ve,ctx:le}),a.$set(Ae);let He=u;u=ae(le),u===He?J[u].p(le,ve):(ge(),T(J[He],1,1,()=>{J[He]=null}),$e(),c=J[u],c?c.p(le,ve):(c=J[u]=te[u](le),c.c()),E(c,1),c.m(l,null)),(!Z||ve&1)&&_!==(_=le[0].hp.max+"")&&se(g,_);const ye={};ve&16&&(ye.current=le[4]),ve&1&&(ye.max=le[0].hitDice.max),P.$set(ye);const je={};ve&256&&(je.$$scope={dirty:ve,ctx:le}),G.$set(je);let gt=K;K=Ye(le),K===gt?Ce[K].p(le,ve):(ge(),T(Ce[gt],1,1,()=>{Ce[gt]=null}),$e(),re=Ce[K],re?re.p(le,ve):(re=Ce[K]=_e[K](le),re.c()),E(re,1),re.m(U,null)),(!Z||ve&1)&&C!==(C=le[0].hitDice.max+"")&&se(V,C),(!Z||ve&2)&&Q!==(Q=le[1].hitDice+"")&&se(ee,Q)},i(le){Z||(E(t.$$.fragment,le),E(a.$$.fragment,le),E(c),E(P.$$.fragment,le),E(G.$$.fragment,le),E(re),Z=!0)},o(le){T(t.$$.fragment,le),T(a.$$.fragment,le),T(c),T(P.$$.fragment,le),T(G.$$.fragment,le),T(re),Z=!1},d(le){le&&h(e),D(t),D(a),J[u].d(),D(P),D(G),Ce[K].d()}}}function Fi(i,e,n){let t,r;const s=it();let{pokemon:a}=e,{species:o}=e,{editable:l}=e;const u=f=>{s("update",{currentHp:f.detail.value,currentHitDice:r})},c=f=>{s("update",{currentHp:t,currentHitDice:f.detail.value})};return i.$$set=f=>{"pokemon"in f&&n(0,a=f.pokemon),"species"in f&&n(1,o=f.species),"editable"in f&&n(2,l=f.editable)},i.$$.update=()=>{i.$$.dirty&1&&n(3,t=a.hp.current),i.$$.dirty&1&&n(4,r=a.hitDice.current)},[a,o,l,t,r,u,c]}class Ki extends ce{constructor(e){super(),fe(this,e,Fi,Bi,ue,{pokemon:0,species:1,editable:2})}}const cn=[{name:"athletics",attribute:"str"},{name:"acrobatics",attribute:"dex"},{name:"sleight of hand",attribute:"dex"},{name:"stealth",attribute:"dex"},{name:"arcana",attribute:"int"},{name:"history",attribute:"int"},{name:"investigation",attribute:"int"},{name:"nature",attribute:"int"},{name:"religion",attribute:"int"},{name:"animal handling",attribute:"wis"},{name:"insight",attribute:"wis"},{name:"medicine",attribute:"wis"},{name:"perception",attribute:"wis"},{name:"survival",attribute:"wis"},{name:"deception",attribute:"cha"},{name:"intimidation",attribute:"cha"},{name:"performance",attribute:"cha"},{name:"persuasion",attribute:"cha"}],kn=i=>2+Math.floor((i-1)/4),Gn=(i,e,n)=>{const t=cn.find(r=>r.name===i).attribute;return Gt(e[t])+n};function Jn(i,e,n){const t=i.slice();return t[3]=e[n],t}function Wn(i,e,n){const t=i.slice();return t[6]=e[n],t}function Yn(i){let e,n=Dn(i[6])+"",t;return{c(){e=w("dd"),t=M(n)},l(r){e=k(r,"DD",{});var s=j(e);t=B(s,n),s.forEach(h)},m(r,s){m(r,e,s),v(e,t)},p(r,s){s&2&&n!==(n=Dn(r[6])+"")&&se(t,n)},d(r){r&&h(e)}}}function Xn(i){let e,n="Senses",t,r,s=de(i[1].senses),a=[];for(let o=0;o<s.length;o+=1)a[o]=Zn(Jn(i,s,o));return{c(){e=w("dt"),e.textContent=n,t=A(),r=w("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=k(o,"DT",{"data-svelte-h":!0}),ie(e)!=="svelte-hlstkx"&&(e.textContent=n),t=O(o),r=k(o,"DIV",{class:!0});var l=j(r);for(let u=0;u<a.length;u+=1)a[u].l(l);l.forEach(h),this.h()},h(){$(r,"class","cap")},m(o,l){m(o,e,l),m(o,t,l),m(o,r,l);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null)},p(o,l){if(l&2){s=de(o[1].senses);let u;for(u=0;u<s.length;u+=1){const c=Jn(o,s,u);a[u]?a[u].p(c,l):(a[u]=Zn(c),a[u].c(),a[u].m(r,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=s.length}},d(o){o&&(h(e),h(t),h(r)),Pe(a,o)}}}function Zn(i){let e,n=Un(i[3])+"",t;return{c(){e=w("dd"),t=M(n)},l(r){e=k(r,"DD",{});var s=j(e);t=B(s,n),s.forEach(h)},m(r,s){m(r,e,s),v(e,t)},p(r,s){s&2&&n!==(n=Un(r[3])+"")&&se(t,n)},d(r){r&&h(e)}}}function qi(i){let e,n='<abbr title="Armor Class">AC</abbr>',t,r,s=i[0].ac+"",a,o,l,u="Nature",c,f,d=i[0].nature+"",p,_,g,b="Bonus",y,S,P,I,H,G,F="Size",U,K,re=i[1].size+"",Y,X,z,C="Speed",V,W,Q,ee,q=de(i[1].speed),Z=[];for(let J=0;J<q.length;J+=1)Z[J]=Yn(Wn(i,q,J));let te=i[1].senses.length>0&&Xn(i);return{c(){e=w("dt"),e.innerHTML=n,t=A(),r=w("dd"),a=M(s),o=A(),l=w("dt"),l.textContent=u,c=A(),f=w("dd"),p=M(d),_=A(),g=w("dt"),g.textContent=b,y=A(),S=w("dd"),P=M("+"),I=M(i[2]),H=A(),G=w("dt"),G.textContent=F,U=A(),K=w("dd"),Y=M(re),X=A(),z=w("dt"),z.textContent=C,V=A(),W=w("div");for(let J=0;J<Z.length;J+=1)Z[J].c();Q=A(),te&&te.c(),ee=ne(),this.h()},l(J){e=k(J,"DT",{"data-svelte-h":!0}),ie(e)!=="svelte-oq9y6j"&&(e.innerHTML=n),t=O(J),r=k(J,"DD",{});var ae=j(r);a=B(ae,s),ae.forEach(h),o=O(J),l=k(J,"DT",{"data-svelte-h":!0}),ie(l)!=="svelte-1u0or05"&&(l.textContent=u),c=O(J),f=k(J,"DD",{class:!0});var _e=j(f);p=B(_e,d),_e.forEach(h),_=O(J),g=k(J,"DT",{"data-svelte-h":!0}),ie(g)!=="svelte-ehj2sb"&&(g.textContent=b),y=O(J),S=k(J,"DD",{});var Ce=j(S);P=B(Ce,"+"),I=B(Ce,i[2]),Ce.forEach(h),H=O(J),G=k(J,"DT",{"data-svelte-h":!0}),ie(G)!=="svelte-rw0fwr"&&(G.textContent=F),U=O(J),K=k(J,"DD",{class:!0});var Ye=j(K);Y=B(Ye,re),Ye.forEach(h),X=O(J),z=k(J,"DT",{"data-svelte-h":!0}),ie(z)!=="svelte-1bqvq2b"&&(z.textContent=C),V=O(J),W=k(J,"DIV",{});var le=j(W);for(let ve=0;ve<Z.length;ve+=1)Z[ve].l(le);le.forEach(h),Q=O(J),te&&te.l(J),ee=ne(),this.h()},h(){$(f,"class","cap"),$(K,"class","cap")},m(J,ae){m(J,e,ae),m(J,t,ae),m(J,r,ae),v(r,a),m(J,o,ae),m(J,l,ae),m(J,c,ae),m(J,f,ae),v(f,p),m(J,_,ae),m(J,g,ae),m(J,y,ae),m(J,S,ae),v(S,P),v(S,I),m(J,H,ae),m(J,G,ae),m(J,U,ae),m(J,K,ae),v(K,Y),m(J,X,ae),m(J,z,ae),m(J,V,ae),m(J,W,ae);for(let _e=0;_e<Z.length;_e+=1)Z[_e]&&Z[_e].m(W,null);m(J,Q,ae),te&&te.m(J,ae),m(J,ee,ae)},p(J,ae){if(ae&1&&s!==(s=J[0].ac+"")&&se(a,s),ae&1&&d!==(d=J[0].nature+"")&&se(p,d),ae&4&&se(I,J[2]),ae&2&&re!==(re=J[1].size+"")&&se(Y,re),ae&2){q=de(J[1].speed);let _e;for(_e=0;_e<q.length;_e+=1){const Ce=Wn(J,q,_e);Z[_e]?Z[_e].p(Ce,ae):(Z[_e]=Yn(Ce),Z[_e].c(),Z[_e].m(W,null))}for(;_e<Z.length;_e+=1)Z[_e].d(1);Z.length=q.length}J[1].senses.length>0?te?te.p(J,ae):(te=Xn(J),te.c(),te.m(ee.parentNode,ee)):te&&(te.d(1),te=null)},d(J){J&&(h(e),h(t),h(r),h(o),h(l),h(c),h(f),h(_),h(g),h(y),h(S),h(H),h(G),h(U),h(K),h(X),h(z),h(V),h(W),h(Q),h(ee)),Pe(Z,J),te&&te.d(J)}}}function Hi(i){let e,n;return e=new Zt({props:{columns:2,$$slots:{default:[qi]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&519&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function zi(i,e,n){let t,{pokemon:r}=e,{species:s}=e;return i.$$set=a=>{"pokemon"in a&&n(0,r=a.pokemon),"species"in a&&n(1,s=a.species)},i.$$.update=()=>{i.$$.dirty&1&&n(2,t=kn(r.level))},[r,s,t]}class Vi extends ce{constructor(e){super(),fe(this,e,zi,Hi,ue,{pokemon:0,species:1})}}function Qn(i,e,n){const t=i.slice();return t[2]=e[n],t}function xn(i,e,n){const t=i.slice();return t[5]=e[n],t}function er(i){let e,n=i[5]+"",t,r,s=Gt(i[0].attributes[i[5]])+i[1]+"",a;return{c(){e=w("dd"),t=M(n),r=M(" +"),a=M(s)},l(o){e=k(o,"DD",{});var l=j(e);t=B(l,n),r=B(l," +"),a=B(l,s),l.forEach(h)},m(o,l){m(o,e,l),v(e,t),v(e,r),v(e,a)},p(o,l){l&1&&n!==(n=o[5]+"")&&se(t,n),l&3&&s!==(s=Gt(o[0].attributes[o[5]])+o[1]+"")&&se(a,s)},d(o){o&&h(e)}}}function tr(i){let e,n=i[2]+"",t,r,s=Gn(i[2],i[0].attributes,i[1])+"",a;return{c(){e=w("dd"),t=M(n),r=M(" +"),a=M(s)},l(o){e=k(o,"DD",{});var l=j(e);t=B(l,n),r=B(l," +"),a=B(l,s),l.forEach(h)},m(o,l){m(o,e,l),v(e,t),v(e,r),v(e,a)},p(o,l){l&1&&n!==(n=o[2]+"")&&se(t,n),l&3&&s!==(s=Gn(o[2],o[0].attributes,o[1])+"")&&se(a,s)},d(o){o&&h(e)}}}function Gi(i){let e,n="Saves",t,r,s,a,o="Proficiencies",l,u,c=de(i[0].savingThrows),f=[];for(let _=0;_<c.length;_+=1)f[_]=er(xn(i,c,_));let d=de(i[0].proficiencies),p=[];for(let _=0;_<d.length;_+=1)p[_]=tr(Qn(i,d,_));return{c(){e=w("dt"),e.textContent=n,t=A(),r=w("div");for(let _=0;_<f.length;_+=1)f[_].c();s=A(),a=w("dt"),a.textContent=o,l=A(),u=w("div");for(let _=0;_<p.length;_+=1)p[_].c();this.h()},l(_){e=k(_,"DT",{"data-svelte-h":!0}),ie(e)!=="svelte-981634"&&(e.textContent=n),t=O(_),r=k(_,"DIV",{class:!0});var g=j(r);for(let y=0;y<f.length;y+=1)f[y].l(g);g.forEach(h),s=O(_),a=k(_,"DT",{"data-svelte-h":!0}),ie(a)!=="svelte-1kaob9p"&&(a.textContent=o),l=O(_),u=k(_,"DIV",{class:!0});var b=j(u);for(let y=0;y<p.length;y+=1)p[y].l(b);b.forEach(h),this.h()},h(){$(r,"class","upper"),$(u,"class","cap")},m(_,g){m(_,e,g),m(_,t,g),m(_,r,g);for(let b=0;b<f.length;b+=1)f[b]&&f[b].m(r,null);m(_,s,g),m(_,a,g),m(_,l,g),m(_,u,g);for(let b=0;b<p.length;b+=1)p[b]&&p[b].m(u,null)},p(_,g){if(g&3){c=de(_[0].savingThrows);let b;for(b=0;b<c.length;b+=1){const y=xn(_,c,b);f[b]?f[b].p(y,g):(f[b]=er(y),f[b].c(),f[b].m(r,null))}for(;b<f.length;b+=1)f[b].d(1);f.length=c.length}if(g&3){d=de(_[0].proficiencies);let b;for(b=0;b<d.length;b+=1){const y=Qn(_,d,b);p[b]?p[b].p(y,g):(p[b]=tr(y),p[b].c(),p[b].m(u,null))}for(;b<p.length;b+=1)p[b].d(1);p.length=d.length}},d(_){_&&(h(e),h(t),h(r),h(s),h(a),h(l),h(u)),Pe(f,_),Pe(p,_)}}}function Ji(i){let e,n;return e=new Zt({props:{columns:2,$$slots:{default:[Gi]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&259&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Wi(i,e,n){let t,{pokemon:r}=e;return i.$$set=s=>{"pokemon"in s&&n(0,r=s.pokemon)},i.$$.update=()=>{i.$$.dirty&1&&n(1,t=kn(r.level))},[r,t]}class Yi extends ce{constructor(e){super(),fe(this,e,Wi,Ji,ue,{pokemon:0})}}function Xi(i){let e,n=i[1].name+"",t,r;return{c(){e=w("label"),t=M(n),r=M(" PP"),this.h()},l(s){e=k(s,"LABEL",{for:!0});var a=j(e);t=B(a,n),r=B(a," PP"),a.forEach(h),this.h()},h(){$(e,"for","current-hp")},m(s,a){m(s,e,a),v(e,t),v(e,r)},p(s,a){a&2&&n!==(n=s[1].name+"")&&se(t,n)},d(s){s&&h(e)}}}function Zi(i){let e;return{c(){e=M(i[6])},l(n){e=B(n,i[6])},m(n,t){m(n,e,t)},p(n,t){t&64&&se(e,n[6])},d(n){n&&h(e)}}}function Qi(i){let e,n,t,r;return{c(){e=w("input"),this.h()},l(s){e=k(s,"INPUT",{id:!0,type:!0,class:!0}),this.h()},h(){$(e,"id",n="current-pp-"+i[0].moveId),$(e,"type","number"),e.value=i[6],$(e,"class","svelte-pw49mc")},m(s,a){m(s,e,a),t||(r=he(e,"change",i[7]),t=!0)},p(s,a){a&1&&n!==(n="current-pp-"+s[0].moveId)&&$(e,"id",n),a&64&&e.value!==s[6]&&(e.value=s[6])},d(s){s&&h(e),t=!1,r()}}}function nr(i){let e,n,t,r,s,a;return{c(){e=M("To Hit: +"),n=M(i[5]),t=M(", DC: "),r=M(i[4]),s=M(", Dmg: +"),a=M(i[3])},l(o){e=B(o,"To Hit: +"),n=B(o,i[5]),t=B(o,", DC: "),r=B(o,i[4]),s=B(o,", Dmg: +"),a=B(o,i[3])},m(o,l){m(o,e,l),m(o,n,l),m(o,t,l),m(o,r,l),m(o,s,l),m(o,a,l)},p(o,l){l&32&&se(n,o[5]),l&16&&se(r,o[4]),l&8&&se(a,o[3])},d(o){o&&(h(e),h(n),h(t),h(r),h(s),h(a))}}}function rr(i){let e,n,t,r=i[0].notes+"",s;return{c(){e=w("hr"),n=A(),t=w("div"),s=M(r),this.h()},l(a){e=k(a,"HR",{}),n=O(a),t=k(a,"DIV",{class:!0});var o=j(t);s=B(o,r),o.forEach(h),this.h()},h(){$(t,"class","space-inner smaller-font svelte-pw49mc")},m(a,o){m(a,e,o),m(a,n,o),m(a,t,o),v(t,s)},p(a,o){o&1&&r!==(r=a[0].notes+"")&&se(s,r)},d(a){a&&(h(e),h(n),h(t))}}}function xi(i){let e,n,t,r,s,a=i[1].name+"",o,l,u,c,f,d,p,_,g,b,y=i[0].pp.max+"",S,P,I,H,G=i[1].type+"",F,U,K,re=`var(--skin-${i[1].type}-bg)`,Y,X,z,C,V;f=new Wt({props:{$$slots:{default:[Xi]},$$scope:{ctx:i}}});function W(te,J){return te[2]?Qi:Zi}let Q=W(i),ee=Q(i),q=i[1].power!=="none"&&i[1].power!=="varies"&&nr(i);z=new ei({props:{move:i[1]}});let Z=i[0].notes!==void 0&&i[0].notes.length>0&&rr(i);return{c(){e=w("div"),n=w("div"),t=w("div"),r=w("span"),s=w("a"),o=M(a),u=A(),c=w("span"),L(f.$$.fragment),d=A(),p=w("span"),ee.c(),_=A(),g=w("span"),b=M("/ "),S=M(y),P=A(),I=w("div"),H=w("span"),F=M(G),U=A(),K=w("span"),q&&q.c(),Y=A(),X=w("div"),L(z.$$.fragment),C=A(),Z&&Z.c(),this.h()},l(te){e=k(te,"DIV",{class:!0});var J=j(e);n=k(J,"DIV",{class:!0});var ae=j(n);t=k(ae,"DIV",{class:!0});var _e=j(t);r=k(_e,"SPAN",{class:!0});var Ce=j(r);s=k(Ce,"A",{href:!0,class:!0});var Ye=j(s);o=B(Ye,a),Ye.forEach(h),Ce.forEach(h),u=O(_e),c=k(_e,"SPAN",{});var le=j(c);R(f.$$.fragment,le),d=O(le),p=k(le,"SPAN",{class:!0});var ve=j(p);ee.l(ve),ve.forEach(h),_=O(le),g=k(le,"SPAN",{class:!0});var Be=j(g);b=B(Be,"/ "),S=B(Be,y),Be.forEach(h),le.forEach(h),_e.forEach(h),P=O(ae),I=k(ae,"DIV",{class:!0});var Ae=j(I);H=k(Ae,"SPAN",{class:!0});var He=j(H);F=B(He,G),He.forEach(h),U=O(Ae),K=k(Ae,"SPAN",{});var ye=j(K);q&&q.l(ye),ye.forEach(h),Ae.forEach(h),ae.forEach(h),Y=O(J),X=k(J,"DIV",{class:!0});var je=j(X);R(z.$$.fragment,je),je.forEach(h),C=O(J),Z&&Z.l(J),J.forEach(h),this.h()},h(){$(s,"href",l=Te+"/moves/"+i[0].moveId),$(s,"class","svelte-pw49mc"),$(r,"class","flex-span svelte-pw49mc"),$(p,"class","current svelte-pw49mc"),$(g,"class","max"),$(t,"class","hrow space-after-tiny svelte-pw49mc"),$(H,"class","capitalize flex-span svelte-pw49mc"),$(I,"class","hrow tiny-font svelte-pw49mc"),$(n,"class","vstack bg-by-type rounded space-inner svelte-pw49mc"),we(n,"--bg",re),$(X,"class","space-inner smaller-font svelte-pw49mc"),$(e,"class","vstack space-after svelte-pw49mc")},m(te,J){m(te,e,J),v(e,n),v(n,t),v(t,r),v(r,s),v(s,o),v(t,u),v(t,c),N(f,c,null),v(c,d),v(c,p),ee.m(p,null),v(c,_),v(c,g),v(g,b),v(g,S),v(n,P),v(n,I),v(I,H),v(H,F),v(I,U),v(I,K),q&&q.m(K,null),v(e,Y),v(e,X),N(z,X,null),v(e,C),Z&&Z.m(e,null),V=!0},p(te,[J]){(!V||J&2)&&a!==(a=te[1].name+"")&&se(o,a),(!V||J&1&&l!==(l=Te+"/moves/"+te[0].moveId))&&$(s,"href",l);const ae={};J&32770&&(ae.$$scope={dirty:J,ctx:te}),f.$set(ae),Q===(Q=W(te))&&ee?ee.p(te,J):(ee.d(1),ee=Q(te),ee&&(ee.c(),ee.m(p,null))),(!V||J&1)&&y!==(y=te[0].pp.max+"")&&se(S,y),(!V||J&2)&&G!==(G=te[1].type+"")&&se(F,G),te[1].power!=="none"&&te[1].power!=="varies"?q?q.p(te,J):(q=nr(te),q.c(),q.m(K,null)):q&&(q.d(1),q=null),J&2&&re!==(re=`var(--skin-${te[1].type}-bg)`)&&we(n,"--bg",re);const _e={};J&2&&(_e.move=te[1]),z.$set(_e),te[0].notes!==void 0&&te[0].notes.length>0?Z?Z.p(te,J):(Z=rr(te),Z.c(),Z.m(e,null)):Z&&(Z.d(1),Z=null)},i(te){V||(E(f.$$.fragment,te),E(z.$$.fragment,te),V=!0)},o(te){T(f.$$.fragment,te),T(z.$$.fragment,te),V=!1},d(te){te&&h(e),D(f),ee.d(),q&&q.d(),D(z),Z&&Z.d()}}}function ea(i,e,n){let t,r,s,a,o;const l=it(),u=S=>(P,I)=>S(I)>S(P)?I:P;let{move:c}=e,{moveData:f}=e,{proficiencyBonus:d}=e,{pokemonType:p}=e,{attributes:_}=e,{editable:g}=e,b=0;const y=S=>{l("update",{value:parseInt(S.target.value??"0")})};return i.$$set=S=>{"move"in S&&n(0,c=S.move),"moveData"in S&&n(1,f=S.moveData),"proficiencyBonus"in S&&n(8,d=S.proficiencyBonus),"pokemonType"in S&&n(9,p=S.pokemonType),"attributes"in S&&n(10,_=S.attributes),"editable"in S&&n(2,g=S.editable)},i.$$.update=()=>{if(i.$$.dirty&1&&n(6,t=c.pp.current),i.$$.dirty&1026&&f.power!=="none"&&f.power!=="varies"){const P=(f.power==="any"?["str","dex","con","int","wis","cha"]:f.power).reduce(u(I=>_[I]));n(11,b=Gt(_[P]))}i.$$.dirty&514&&n(12,r=p.includes(f.type)),i.$$.dirty&2304&&n(5,s=d+b),i.$$.dirty&2304&&n(4,a=8+d+b),i.$$.dirty&6144&&n(3,o=b+(r?b:0))},[c,f,g,o,a,s,t,y,d,p,_,b,r]}class ta extends ce{constructor(e){super(),fe(this,e,ea,xi,ue,{move:0,moveData:1,proficiencyBonus:8,pokemonType:9,attributes:10,editable:2})}}function sr(i,e,n){const t=i.slice();t[7]=e[n];const r=t[3].find(function(...a){return i[5](t[7],...a)});return t[8]=r,t}function ir(i){let e,n,t,r;const s=[ra,na],a=[];function o(l,u){return l[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function na(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ra(i){let e,n="Moves",t,r,s,a=de(i[0].moves),o=[];for(let u=0;u<a.length;u+=1)o[u]=ar(sr(i,a,u));const l=u=>T(o[u],1,1,()=>{o[u]=null});return{c(){e=w("h2"),e.textContent=n,t=A(),r=w("ul");for(let u=0;u<o.length;u+=1)o[u].c();this.h()},l(u){e=k(u,"H2",{"data-svelte-h":!0}),ie(e)!=="svelte-cbzy28"&&(e.textContent=n),t=O(u),r=k(u,"UL",{});var c=j(r);for(let f=0;f<o.length;f+=1)o[f].l(c);c.forEach(h),this.h()},h(){we(r,"list-style","none"),we(r,"padding","0")},m(u,c){m(u,e,c),m(u,t,c),m(u,r,c);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(r,null);s=!0},p(u,c){if(c&31){a=de(u[0].moves);let f;for(f=0;f<a.length;f+=1){const d=sr(u,a,f);o[f]?(o[f].p(d,c),E(o[f],1)):(o[f]=ar(d),o[f].c(),E(o[f],1),o[f].m(r,null))}for(ge(),f=a.length;f<o.length;f+=1)l(f);$e()}},i(u){if(!s){for(let c=0;c<a.length;c+=1)E(o[c]);s=!0}},o(u){o=o.filter(Boolean);for(let c=0;c<o.length;c+=1)T(o[c]);s=!1},d(u){u&&(h(e),h(t),h(r)),Pe(o,u)}}}function ar(i){let e,n,t,r;return n=new ta({props:{move:i[7],moveData:i[8],editable:i[1],proficiencyBonus:i[2],attributes:i[0].attributes,pokemonType:i[0].type}}),n.$on("update",function(){vn(i[4](i[7]))&&i[4](i[7]).apply(this,arguments)}),{c(){e=w("li"),L(n.$$.fragment),t=A()},l(s){e=k(s,"LI",{});var a=j(e);R(n.$$.fragment,a),t=O(a),a.forEach(h)},m(s,a){m(s,e,a),N(n,e,null),v(e,t),r=!0},p(s,a){i=s;const o={};a&1&&(o.move=i[7]),a&9&&(o.moveData=i[8]),a&2&&(o.editable=i[1]),a&4&&(o.proficiencyBonus=i[2]),a&1&&(o.attributes=i[0].attributes),a&1&&(o.pokemonType=i[0].type),n.$set(o)},i(s){r||(E(n.$$.fragment,s),r=!0)},o(s){T(n.$$.fragment,s),r=!1},d(s){s&&h(e),D(n)}}}function sa(i){let e,n,t=i[0].moves.length>0&&ir(i);return{c(){t&&t.c(),e=ne()},l(r){t&&t.l(r),e=ne()},m(r,s){t&&t.m(r,s),m(r,e,s),n=!0},p(r,[s]){r[0].moves.length>0?t?(t.p(r,s),s&1&&E(t,1)):(t=ir(r),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(ge(),T(t,1,1,()=>{t=null}),$e())},i(r){n||(E(t),n=!0)},o(r){T(t),n=!1},d(r){r&&h(e),t&&t.d(r)}}}function ia(i,e,n){let t,r;Re(i,wn,c=>n(3,r=c));const s=it();let{pokemon:a}=e,{editable:o=!1}=e;const l=c=>f=>{s("update",{...c,pp:{current:f.detail.value,max:c.pp.max}})},u=(c,f)=>f.id===c.moveId;return i.$$set=c=>{"pokemon"in c&&n(0,a=c.pokemon),"editable"in c&&n(1,o=c.editable)},i.$$.update=()=>{i.$$.dirty&1&&n(2,t=kn(a.level))},[a,o,t,r,l,u]}class aa extends ce{constructor(e){super(),fe(this,e,ia,sa,ue,{pokemon:0,editable:1})}}function lr(i){let e,n,t=i[0].name+"",r,s,a=i[0].description+"",o;return{c(){e=w("p"),n=w("strong"),r=M(t),s=M(": "),o=M(a),this.h()},l(l){e=k(l,"P",{class:!0});var u=j(e);n=k(u,"STRONG",{});var c=j(n);r=B(c,t),c.forEach(h),s=B(u,": "),o=B(u,a),u.forEach(h),this.h()},h(){$(e,"class","svelte-1f7kwjm")},m(l,u){m(l,e,u),v(e,n),v(n,r),v(e,s),v(e,o)},p(l,u){u&1&&t!==(t=l[0].name+"")&&se(r,t),u&1&&a!==(a=l[0].description+"")&&se(o,a)},d(l){l&&h(e)}}}function la(i){let e,n=i[0]&&lr(i);return{c(){n&&n.c(),e=ne()},l(t){n&&n.l(t),e=ne()},m(t,r){n&&n.m(t,r),m(t,e,r)},p(t,[r]){t[0]?n?n.p(t,r):(n=lr(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:x,o:x,d(t){t&&h(e),n&&n.d(t)}}}function oa(i,e,n){let t,{pokemon:r}=e,{species:s}=e;return i.$$set=a=>{"pokemon"in a&&n(1,r=a.pokemon),"species"in a&&n(2,s=a.species)},i.$$.update=()=>{i.$$.dirty&6&&n(0,t=s.abilities.find(a=>a.id===r.ability))},[t,r,s]}class ua extends ce{constructor(e){super(),fe(this,e,oa,la,ue,{pokemon:1,species:2})}}function or(i,e,n){const t=i.slice();return t[1]=e[n],t}function ur(i){let e,n=i[1]+"",t;return{c(){e=w("p"),t=M(n),this.h()},l(r){e=k(r,"P",{class:!0});var s=j(e);t=B(s,n),s.forEach(h),this.h()},h(){$(e,"class","no-space-last svelte-u86twn")},m(r,s){m(r,e,s),v(e,t)},p(r,s){s&1&&n!==(n=r[1]+"")&&se(t,n)},d(r){r&&h(e)}}}function cr(i){let e,n=i[1].length>0&&ur(i);return{c(){n&&n.c(),e=ne()},l(t){n&&n.l(t),e=ne()},m(t,r){n&&n.m(t,r),m(t,e,r)},p(t,r){t[1].length>0?n?n.p(t,r):(n=ur(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){t&&h(e),n&&n.d(t)}}}function ca(i){let e,n="General Notes",t,r,s=de(i[0].notes.split(`
`)),a=[];for(let o=0;o<s.length;o+=1)a[o]=cr(or(i,s,o));return{c(){e=w("h2"),e.textContent=n,t=A(),r=w("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=k(o,"H2",{"data-svelte-h":!0}),ie(e)!=="svelte-1da4q7t"&&(e.textContent=n),t=O(o),r=k(o,"DIV",{class:!0});var l=j(r);for(let u=0;u<a.length;u+=1)a[u].l(l);l.forEach(h),this.h()},h(){$(r,"class","font-sm svelte-u86twn")},m(o,l){m(o,e,l),m(o,t,l),m(o,r,l);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(r,null)},p(o,[l]){if(l&1){s=de(o[0].notes.split(`
`));let u;for(u=0;u<s.length;u+=1){const c=or(o,s,u);a[u]?a[u].p(c,l):(a[u]=cr(c),a[u].c(),a[u].m(r,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=s.length}},i:x,o:x,d(o){o&&(h(e),h(t),h(r)),Pe(a,o)}}}function fa(i,e,n){let{pokemon:t}=e;return i.$$set=r=>{"pokemon"in r&&n(0,t=r.pokemon)},[t]}class ha extends ce{constructor(e){super(),fe(this,e,fa,ca,ue,{pokemon:0})}}function fr(i){let e,n,t;return n=new vs({props:{media:i[1].media,alt:""}}),{c(){e=w("div"),L(n.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var s=j(e);R(n.$$.fragment,s),s.forEach(h),this.h()},h(){$(e,"class","square-image svelte-1lgjxqm"),we(e,"--size","clamp(8rem, 12.66vw, 9.5rem)")},m(r,s){m(r,e,s),N(n,e,null),t=!0},p(r,s){const a={};s&2&&(a.media=r[1].media),n.$set(a)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){T(n.$$.fragment,r),t=!1},d(r){r&&h(e),D(n)}}}function da(i){let e,n;return e=new Vs({props:{type:i[0].type}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.type=t[0].type),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function hr(i){let e,n,t,r,s;return r=new ha({props:{pokemon:i[0]}}),{c(){e=w("hr"),n=A(),t=w("section"),L(r.$$.fragment),this.h()},l(a){e=k(a,"HR",{}),n=O(a),t=k(a,"SECTION",{class:!0});var o=j(t);R(r.$$.fragment,o),o.forEach(h),this.h()},h(){$(t,"class","svelte-1lgjxqm")},m(a,o){m(a,e,o),m(a,n,o),m(a,t,o),N(r,t,null),s=!0},p(a,o){const l={};o&1&&(l.pokemon=a[0]),r.$set(l)},i(a){s||(E(r.$$.fragment,a),s=!0)},o(a){T(r.$$.fragment,a),s=!1},d(a){a&&(h(e),h(n),h(t)),D(r)}}}function pa(i){var z;let e,n,t,r,s,a,o,l,u,c,f,d,p,_,g,b,y,S,P,I,H,G,F,U,K,re;r=new Ci({props:{pokemon:i[0],species:i[1]}}),a=new Ki({props:{pokemon:i[0],species:i[1],editable:i[2]}}),a.$on("update",i[4]),l=new Vi({props:{pokemon:i[0],species:i[1]}});let Y=i[3]&&fr(i);d=new zs({props:{attributes:i[0].attributes}}),_=new Yi({props:{pokemon:i[0]}}),b=new Zt({props:{$$slots:{default:[da]},$$scope:{ctx:i}}}),S=new ua({props:{pokemon:i[0],species:i[1]}}),F=new aa({props:{pokemon:i[0],editable:i[2]}}),F.$on("update",i[5]);let X=((z=i[0].notes)==null?void 0:z.length)>0&&hr(i);return{c(){e=w("section"),n=w("div"),t=w("div"),L(r.$$.fragment),s=A(),L(a.$$.fragment),o=A(),L(l.$$.fragment),u=A(),Y&&Y.c(),c=A(),f=w("section"),L(d.$$.fragment),p=A(),L(_.$$.fragment),g=A(),L(b.$$.fragment),y=A(),L(S.$$.fragment),P=A(),I=w("hr"),H=A(),G=w("section"),L(F.$$.fragment),U=A(),X&&X.c(),K=ne(),this.h()},l(C){e=k(C,"SECTION",{class:!0});var V=j(e);n=k(V,"DIV",{});var W=j(n);t=k(W,"DIV",{});var Q=j(t);R(r.$$.fragment,Q),s=O(Q),R(a.$$.fragment,Q),Q.forEach(h),o=O(W),R(l.$$.fragment,W),W.forEach(h),u=O(V),Y&&Y.l(V),V.forEach(h),c=O(C),f=k(C,"SECTION",{class:!0});var ee=j(f);R(d.$$.fragment,ee),p=O(ee),R(_.$$.fragment,ee),g=O(ee),R(b.$$.fragment,ee),y=O(ee),R(S.$$.fragment,ee),ee.forEach(h),P=O(C),I=k(C,"HR",{}),H=O(C),G=k(C,"SECTION",{class:!0});var q=j(G);R(F.$$.fragment,q),q.forEach(h),U=O(C),X&&X.l(C),K=ne(),this.h()},h(){we(t,"margin-bottom","0.5em"),we(n,"flex","1"),we(n,"width","100%"),$(e,"class","info column lg:row svelte-1lgjxqm"),$(f,"class","stats svelte-1lgjxqm"),$(G,"class","svelte-1lgjxqm")},m(C,V){m(C,e,V),v(e,n),v(n,t),N(r,t,null),v(t,s),N(a,t,null),v(n,o),N(l,n,null),v(e,u),Y&&Y.m(e,null),m(C,c,V),m(C,f,V),N(d,f,null),v(f,p),N(_,f,null),v(f,g),N(b,f,null),v(f,y),N(S,f,null),m(C,P,V),m(C,I,V),m(C,H,V),m(C,G,V),N(F,G,null),m(C,U,V),X&&X.m(C,V),m(C,K,V),re=!0},p(C,[V]){var _e;const W={};V&1&&(W.pokemon=C[0]),V&2&&(W.species=C[1]),r.$set(W);const Q={};V&1&&(Q.pokemon=C[0]),V&2&&(Q.species=C[1]),V&4&&(Q.editable=C[2]),a.$set(Q);const ee={};V&1&&(ee.pokemon=C[0]),V&2&&(ee.species=C[1]),l.$set(ee),C[3]?Y?(Y.p(C,V),V&8&&E(Y,1)):(Y=fr(C),Y.c(),E(Y,1),Y.m(e,null)):Y&&(ge(),T(Y,1,1,()=>{Y=null}),$e());const q={};V&1&&(q.attributes=C[0].attributes),d.$set(q);const Z={};V&1&&(Z.pokemon=C[0]),_.$set(Z);const te={};V&129&&(te.$$scope={dirty:V,ctx:C}),b.$set(te);const J={};V&1&&(J.pokemon=C[0]),V&2&&(J.species=C[1]),S.$set(J);const ae={};V&1&&(ae.pokemon=C[0]),V&4&&(ae.editable=C[2]),F.$set(ae),((_e=C[0].notes)==null?void 0:_e.length)>0?X?(X.p(C,V),V&1&&E(X,1)):(X=hr(C),X.c(),E(X,1),X.m(K.parentNode,K)):X&&(ge(),T(X,1,1,()=>{X=null}),$e())},i(C){re||(E(r.$$.fragment,C),E(a.$$.fragment,C),E(l.$$.fragment,C),E(Y),E(d.$$.fragment,C),E(_.$$.fragment,C),E(b.$$.fragment,C),E(S.$$.fragment,C),E(F.$$.fragment,C),E(X),re=!0)},o(C){T(r.$$.fragment,C),T(a.$$.fragment,C),T(l.$$.fragment,C),T(Y),T(d.$$.fragment,C),T(_.$$.fragment,C),T(b.$$.fragment,C),T(S.$$.fragment,C),T(F.$$.fragment,C),T(X),re=!1},d(C){C&&(h(e),h(c),h(f),h(P),h(I),h(H),h(G),h(U),h(K)),D(r),D(a),D(l),Y&&Y.d(),D(d),D(_),D(b),D(S),D(F),X&&X.d(C)}}}function _a(i,e,n){let t;const r=it();let{pokemon:s}=e,{species:a}=e,{editable:o}=e;const l=c=>{r("update-health",{...s,hp:{current:c.detail.currentHp,max:s.hp.max},hitDice:{current:c.detail.currentHitDice,max:s.hitDice.max}})},u=c=>{r("update-pp",c.detail)};return i.$$set=c=>{"pokemon"in c&&n(0,s=c.pokemon),"species"in c&&n(1,a=c.species),"editable"in c&&n(2,o=c.editable)},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=a.media!=null)},[s,a,o,t,l,u]}class ma extends ce{constructor(e){super(),fe(this,e,_a,pa,ue,{pokemon:0,species:1,editable:2})}}function ga(i){let e,n,t="Cannot find pokemon",r,s,a,o,l,u,c=i[0].name+"",f,d,p,_,g,b,y,S,P=i[0].name+"",I,H,G;return g=new Gs({}),{c(){e=w("div"),n=w("h1"),n.textContent=t,r=A(),s=w("p"),a=M("No pokemon with id "),o=w("strong"),l=M(i[1]),u=M(" belongs to "),f=M(c),d=M("."),p=A(),_=w("p"),L(g.$$.fragment),b=A(),y=w("p"),S=M("Select one of "),I=M(P),H=M("'s pokemon to view its details."),this.h()},l(F){e=k(F,"DIV",{class:!0});var U=j(e);n=k(U,"H1",{class:!0,"data-svelte-h":!0}),ie(n)!=="svelte-a6ssar"&&(n.textContent=t),r=O(U),s=k(U,"P",{});var K=j(s);a=B(K,"No pokemon with id "),o=k(K,"STRONG",{});var re=j(o);l=B(re,i[1]),re.forEach(h),u=B(K," belongs to "),f=B(K,c),d=B(K,"."),K.forEach(h),p=O(U),_=k(U,"P",{class:!0});var Y=j(_);R(g.$$.fragment,Y),Y.forEach(h),b=O(U),y=k(U,"P",{});var X=j(y);S=B(X,"Select one of "),I=B(X,P),H=B(X,"'s pokemon to view its details."),X.forEach(h),U.forEach(h),this.h()},h(){$(n,"class","large-font space-bottom svelte-47myc3"),$(_,"class","missingno svelte-47myc3"),$(e,"class","centered padded svelte-47myc3")},m(F,U){m(F,e,U),v(e,n),v(e,r),v(e,s),v(s,a),v(s,o),v(o,l),v(s,u),v(s,f),v(s,d),v(e,p),v(e,_),N(g,_,null),v(e,b),v(e,y),v(y,S),v(y,I),v(y,H),G=!0},p(F,[U]){(!G||U&2)&&se(l,F[1]),(!G||U&1)&&c!==(c=F[0].name+"")&&se(f,c),(!G||U&1)&&P!==(P=F[0].name+"")&&se(I,P)},i(F){G||(E(g.$$.fragment,F),G=!0)},o(F){T(g.$$.fragment,F),G=!1},d(F){F&&h(e),D(g)}}}function $a(i,e,n){let{trainer:t}=e,{pokemonId:r}=e;return i.$$set=s=>{"trainer"in s&&n(0,t=s.trainer),"pokemonId"in s&&n(1,r=s.pokemonId)},[t,r]}class va extends ce{constructor(e){super(),fe(this,e,$a,ga,ue,{trainer:0,pokemonId:1})}}function ba(i){let e,n,t,r;return e=new Je({props:{value:"Cannot find pokemon"}}),t=new va({props:{trainer:i[0].info,pokemonId:i[1]}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&1&&(o.trainer=s[0].info),a&2&&(o.pokemonId=s[1]),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function wa(i){let e,n,t;e=new Je({props:{value:(i[2]?`${i[2]} `:"")+i[3].nickname}});const r=i[5].default,s=et(r,i,i[4],null);return{c(){L(e.$$.fragment),n=A(),s&&s.c()},l(a){R(e.$$.fragment,a),n=O(a),s&&s.l(a)},m(a,o){N(e,a,o),m(a,n,o),s&&s.m(a,o),t=!0},p(a,o){const l={};o&12&&(l.value=(a[2]?`${a[2]} `:"")+a[3].nickname),e.$set(l),s&&s.p&&(!t||o&16)&&tt(s,r,a,a[4],t?rt(r,a[4],o,null):nt(a[4]),null)},i(a){t||(E(e.$$.fragment,a),E(s,a),t=!0)},o(a){T(e.$$.fragment,a),T(s,a),t=!1},d(a){a&&h(n),D(e,a),s&&s.d(a)}}}function ka(i){let e,n,t,r;const s=[wa,ba],a=[];function o(l,u){return l[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,[u]){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function ya(i,e,n){let t,{$$slots:r={},$$scope:s}=e,{trainer:a}=e,{id:o}=e,{titlePrefix:l=void 0}=e;return i.$$set=u=>{"trainer"in u&&n(0,a=u.trainer),"id"in u&&n(1,o=u.id),"titlePrefix"in u&&n(2,l=u.titlePrefix),"$$scope"in u&&n(4,s=u.$$scope)},i.$$.update=()=>{i.$$.dirty&3&&n(3,t=a.pokemon.find(u=>u.id===o))},[a,o,l,t,s,r]}class Qt extends ce{constructor(e){super(),fe(this,e,ya,ka,ue,{trainer:0,id:1,titlePrefix:2})}}function Ea(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ta(i){let e,n;return e=new We({props:{title:i[2].nickname,$$slots:{"header-extra":[Oa],default:[Aa]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.title=t[2].nickname),r&572&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function dr(i){let e,n;return e=new Le({props:{$$slots:{default:[Pa]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&540&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Sa(i){let e;return{c(){e=M("Remove")},l(n){e=B(n,"Remove")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function pr(i){let e,n;return e=new ke({props:{href:me.trainers(i[3].info.readKey,i[2].id,Ie.evolvePokemon),variant:"ghost",$$slots:{default:[Ca]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&12&&(s.href=me.trainers(t[3].info.readKey,t[2].id,Ie.evolvePokemon)),r&512&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ca(i){let e;return{c(){e=M("Evolve")},l(n){e=B(n,"Evolve")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Ia(i){let e;return{c(){e=M("Edit")},l(n){e=B(n,"Edit")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Pa(i){var o,l;let e,n,t,r,s;e=new ke({props:{href:me.trainers(i[3].info.readKey,i[2].id,Ie.removePokemon),variant:"ghost",$$slots:{default:[Sa]},$$scope:{ctx:i}}});let a=((l=(o=i[4].evolution)==null?void 0:o.to)==null?void 0:l.length)>0&&pr(i);return r=new ke({props:{href:me.trainers(i[3].info.readKey,i[2].id,Ie.editPokemon),$$slots:{default:[Ia]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),a&&a.c(),t=A(),L(r.$$.fragment)},l(u){R(e.$$.fragment,u),n=O(u),a&&a.l(u),t=O(u),R(r.$$.fragment,u)},m(u,c){N(e,u,c),m(u,n,c),a&&a.m(u,c),m(u,t,c),N(r,u,c),s=!0},p(u,c){var p,_;const f={};c&12&&(f.href=me.trainers(u[3].info.readKey,u[2].id,Ie.removePokemon)),c&512&&(f.$$scope={dirty:c,ctx:u}),e.$set(f),((_=(p=u[4].evolution)==null?void 0:p.to)==null?void 0:_.length)>0?a?(a.p(u,c),c&16&&E(a,1)):(a=pr(u),a.c(),E(a,1),a.m(t.parentNode,t)):a&&(ge(),T(a,1,1,()=>{a=null}),$e());const d={};c&12&&(d.href=me.trainers(u[3].info.readKey,u[2].id,Ie.editPokemon)),c&512&&(d.$$scope={dirty:c,ctx:u}),r.$set(d)},i(u){s||(E(e.$$.fragment,u),E(a),E(r.$$.fragment,u),s=!0)},o(u){T(e.$$.fragment,u),T(a),T(r.$$.fragment,u),s=!1},d(u){u&&(h(n),h(t)),D(e,u),a&&a.d(u),D(r,u)}}}function Aa(i){let e,n,t,r;e=new ma({props:{pokemon:i[2],species:i[4],editable:i[5]}}),e.$on("update-health",i[6]),e.$on("update-pp",i[7]);let s=i[5]&&dr(i);return{c(){L(e.$$.fragment),n=A(),s&&s.c(),t=ne()},l(a){R(e.$$.fragment,a),n=O(a),s&&s.l(a),t=ne()},m(a,o){N(e,a,o),m(a,n,o),s&&s.m(a,o),m(a,t,o),r=!0},p(a,o){const l={};o&4&&(l.pokemon=a[2]),o&16&&(l.species=a[4]),o&32&&(l.editable=a[5]),e.$set(l),a[5]?s?(s.p(a,o),o&32&&E(s,1)):(s=dr(a),s.c(),E(s,1),s.m(t.parentNode,t)):s&&(ge(),T(s,1,1,()=>{s=null}),$e())},i(a){r||(E(e.$$.fragment,a),E(s),r=!0)},o(a){T(e.$$.fragment,a),T(s),r=!1},d(a){a&&(h(n),h(t)),D(e,a),s&&s.d(a)}}}function Oa(i){let e,n;return e=new Zs({props:{slot:"header-extra",type:i[2].type}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.type=t[2].type),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ja(i){let e,n,t,r;const s=[Ta,Ea],a=[];function o(l,u){return l[4]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function La(i){let e,n;return e=new Qt({props:{trainer:i[3],id:i[1],$$slots:{default:[ja]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&8&&(s.trainer=t[3]),r&2&&(s.id=t[1]),r&572&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ra(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=Ge(c,_=>n(3,a=_)),c),u;Re(i,_t,_=>n(8,u=_)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{id:f}=e;const d=_=>{var g;(g=a.update)==null||g.pokemon(_.detail,{optimistic:!0})},p=_=>{var g;(g=a.update)==null||g.move(_.detail,{optimistic:!0})};return i.$$set=_=>{"trainer"in _&&l(n(0,c=_.trainer)),"id"in _&&n(1,f=_.id)},i.$$.update=()=>{i.$$.dirty&8&&n(5,t=a.update!=null),i.$$.dirty&10&&n(2,r=a.pokemon.find(_=>_.id===f)),i.$$.dirty&260&&n(4,s=u==null?void 0:u.find(_=>_.id===(r==null?void 0:r.pokemonId)))},[c,f,r,a,s,t,d,p,u]}class Na extends ce{constructor(e){super(),fe(this,e,Ra,La,ue,{trainer:0,id:1})}}function _r(i){let e,n;return{c(){e=w("img"),this.h()},l(t){e=k(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ln(e.src,n=i[2])||$(e,"src",n),$(e,"alt",i[1]),$(e,"class","svelte-1i9inl9")},m(t,r){m(t,e,r)},p(t,r){r&4&&!Ln(e.src,n=t[2])&&$(e,"src",n),r&2&&$(e,"alt",t[1])},d(t){t&&h(e)}}}function Da(i){var t;let e,n=((t=i[0])==null?void 0:t.sprite)&&_r(i);return{c(){n&&n.c(),e=ne()},l(r){n&&n.l(r),e=ne()},m(r,s){n&&n.m(r,s),m(r,e,s)},p(r,[s]){var a;(a=r[0])!=null&&a.sprite?n?n.p(r,s):(n=_r(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:x,o:x,d(r){r&&h(e),n&&n.d(r)}}}function Ua(i,e,n){let t,r,{media:s}=e,{alt:a}=e;return i.$$set=o=>{"media"in o&&n(0,s=o.media),"alt"in o&&n(1,a=o.alt)},i.$$.update=()=>{i.$$.dirty&1&&n(3,t=/^http/.test(s==null?void 0:s.sprite)),i.$$.dirty&9&&n(2,r=t?s==null?void 0:s.sprite:`${Qs}${s==null?void 0:s.sprite}`)},[s,a,r,t]}class Ma extends ce{constructor(e){super(),fe(this,e,Ua,Da,ue,{media:0,alt:1})}}function Ba(i){var X,z;let e,n,t,r,s,a=i[1].nickname+"",o,l,u,c,f,d,p,_,g,b=i[1].hp.current+"",y,S,P=i[1].hp.max+"",I,H,G,F,U=i[1].level+"",K,re,Y;return t=new Ma({props:{media:(X=i[2])==null?void 0:X.media,alt:(z=i[2])==null?void 0:z.name}}),c=new Es({props:{gender:i[1].gender}}),p=new un({props:{current:i[1].hp.current,max:i[1].hp.max}}),{c(){e=w("a"),n=w("span"),L(t.$$.fragment),r=A(),s=w("span"),o=M(a),l=A(),u=w("span"),L(c.$$.fragment),f=A(),d=w("span"),L(p.$$.fragment),_=A(),g=w("span"),y=M(b),S=M("/"),I=M(P),H=A(),G=w("span"),F=M("Lv. "),K=M(U),this.h()},l(C){e=k(C,"A",{href:!0,class:!0});var V=j(e);n=k(V,"SPAN",{class:!0});var W=j(n);R(t.$$.fragment,W),W.forEach(h),r=O(V),s=k(V,"SPAN",{});var Q=j(s);o=B(Q,a),Q.forEach(h),l=O(V),u=k(V,"SPAN",{class:!0});var ee=j(u);R(c.$$.fragment,ee),ee.forEach(h),f=O(V),d=k(V,"SPAN",{class:!0});var q=j(d);R(p.$$.fragment,q),q.forEach(h),_=O(V),g=k(V,"SPAN",{});var Z=j(g);y=B(Z,b),S=B(Z,"/"),I=B(Z,P),Z.forEach(h),H=O(V),G=k(V,"SPAN",{class:!0});var te=j(G);F=B(te,"Lv. "),K=B(te,U),te.forEach(h),V.forEach(h),this.h()},h(){$(n,"class","max-height svelte-e7mwnc"),we(n,"grid-area","sprite"),we(s,"grid-area","name"),$(u,"class","right away-from-edge flex svelte-e7mwnc"),we(u,"grid-area","gender"),$(d,"class","away-from-edge svelte-e7mwnc"),we(d,"grid-area","hpbar"),we(g,"grid-area","hp"),$(G,"class","right svelte-e7mwnc"),we(G,"grid-area","lv"),$(e,"href",re=me.trainers(i[0],i[1].id)),$(e,"class","selectable-bubble gridded svelte-e7mwnc")},m(C,V){m(C,e,V),v(e,n),N(t,n,null),v(e,r),v(e,s),v(s,o),v(e,l),v(e,u),N(c,u,null),v(e,f),v(e,d),N(p,d,null),v(e,_),v(e,g),v(g,y),v(g,S),v(g,I),v(e,H),v(e,G),v(G,F),v(G,K),Y=!0},p(C,[V]){var q,Z;const W={};V&4&&(W.media=(q=C[2])==null?void 0:q.media),V&4&&(W.alt=(Z=C[2])==null?void 0:Z.name),t.$set(W),(!Y||V&2)&&a!==(a=C[1].nickname+"")&&se(o,a);const Q={};V&2&&(Q.gender=C[1].gender),c.$set(Q);const ee={};V&2&&(ee.current=C[1].hp.current),V&2&&(ee.max=C[1].hp.max),p.$set(ee),(!Y||V&2)&&b!==(b=C[1].hp.current+"")&&se(y,b),(!Y||V&2)&&P!==(P=C[1].hp.max+"")&&se(I,P),(!Y||V&2)&&U!==(U=C[1].level+"")&&se(K,U),(!Y||V&3&&re!==(re=me.trainers(C[0],C[1].id)))&&$(e,"href",re)},i(C){Y||(E(t.$$.fragment,C),E(c.$$.fragment,C),E(p.$$.fragment,C),Y=!0)},o(C){T(t.$$.fragment,C),T(c.$$.fragment,C),T(p.$$.fragment,C),Y=!1},d(C){C&&h(e),D(t),D(c),D(p)}}}function Fa(i,e,n){let t,r;Re(i,_t,o=>n(3,r=o));let{trainer:s}=e,{pokemon:a}=e;return i.$$set=o=>{"trainer"in o&&n(0,s=o.trainer),"pokemon"in o&&n(1,a=o.pokemon)},i.$$.update=()=>{i.$$.dirty&10&&n(2,t=r==null?void 0:r.find(o=>o.id===a.pokemonId))},[s,a,t,r]}class Ka extends ce{constructor(e){super(),fe(this,e,Fa,Ba,ue,{trainer:0,pokemon:1})}}const qa=i=>({}),mr=i=>({}),Ha=i=>({}),gr=i=>({});function za(i){let e,n,t,r,s,a,o,l;const u=i[2].link,c=et(u,i,i[1],gr),f=i[2].action,d=et(f,i,i[1],mr);return{c(){e=w("div"),n=w("p"),t=M(i[0]),r=A(),s=w("div"),a=w("p"),c&&c.c(),o=A(),d&&d.c(),this.h()},l(p){e=k(p,"DIV",{class:!0});var _=j(e);n=k(_,"P",{class:!0});var g=j(n);t=B(g,i[0]),g.forEach(h),r=O(_),s=k(_,"DIV",{class:!0});var b=j(s);a=k(b,"P",{class:!0});var y=j(a);c&&c.l(y),y.forEach(h),o=O(b),d&&d.l(b),b.forEach(h),_.forEach(h),this.h()},h(){$(n,"class","large-font space-bottom svelte-15u9ut"),$(a,"class","indent small-font no-space svelte-15u9ut"),$(s,"class","flex-row space-between svelte-15u9ut"),$(e,"class","flex-column space-bottom svelte-15u9ut")},m(p,_){m(p,e,_),v(e,n),v(n,t),v(e,r),v(e,s),v(s,a),c&&c.m(a,null),v(s,o),d&&d.m(s,null),l=!0},p(p,[_]){(!l||_&1)&&se(t,p[0]),c&&c.p&&(!l||_&2)&&tt(c,u,p,p[1],l?rt(u,p[1],_,Ha):nt(p[1]),gr),d&&d.p&&(!l||_&2)&&tt(d,f,p,p[1],l?rt(f,p[1],_,qa):nt(p[1]),mr)},i(p){l||(E(c,p),E(d,p),l=!0)},o(p){T(c,p),T(d,p),l=!1},d(p){p&&h(e),c&&c.d(p),d&&d.d(p)}}}function Va(i,e,n){let{$$slots:t={},$$scope:r}=e,{title:s}=e;return i.$$set=a=>{"title"in a&&n(0,s=a.title),"$$scope"in a&&n(1,r=a.$$scope)},[s,r,t]}class Ss extends ce{constructor(e){super(),fe(this,e,Va,za,ue,{title:0})}}function $r(i,e,n){const t=i.slice();return t[10]=e[n],t}function Ga(i){let e,n="See Trainer List >";return{c(){e=w("a"),e.textContent=n,this.h()},l(t){e=k(t,"A",{href:!0,class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1hdm44n"&&(e.textContent=n),this.h()},h(){$(e,"href",Te+"/trainers"),$(e,"class","dark-font svelte-19jifka")},m(t,r){m(t,e,r)},p:x,d(t){t&&h(e)}}}function Ja(i){let e,n;return{c(){e=w("a"),n=M("View trainer profile >"),this.h()},l(t){e=k(t,"A",{href:!0,class:!0});var r=j(e);n=B(r,"View trainer profile >"),r.forEach(h),this.h()},h(){$(e,"href",i[4]),$(e,"class","dark-font svelte-19jifka")},m(t,r){m(t,e,r),v(e,n)},p(t,r){r&16&&$(e,"href",t[4])},d(t){t&&h(e)}}}function Wa(i){let e;function n(s,a){return s[1]?Ja:Ga}let t=n(i),r=t(i);return{c(){e=w("span"),r.c(),this.h()},l(s){e=k(s,"SPAN",{slot:!0});var a=j(e);r.l(a),a.forEach(h),this.h()},h(){$(e,"slot","link")},m(s,a){m(s,e,a),r.m(e,null)},p(s,a){t===(t=n(s))&&r?r.p(s,a):(r.d(1),r=t(s),r&&(r.c(),r.m(e,null)))},d(s){s&&h(e),r.d()}}}function Ya(i){let e;return{c(){e=M("+ Add Pokemon")},l(n){e=B(n,"+ Add Pokemon")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Xa(i){let e,n,t;return n=new ke({props:{href:i[4]+"&action=add-pokemon",$$slots:{default:[Ya]},$$scope:{ctx:i}}}),{c(){e=w("span"),L(n.$$.fragment),this.h()},l(r){e=k(r,"SPAN",{slot:!0});var s=j(e);R(n.$$.fragment,s),s.forEach(h),this.h()},h(){$(e,"slot","action"),we(e,"visibility",i[6]?"visible":"hidden"),we(e,"display","flex")},m(r,s){m(r,e,s),N(n,e,null),t=!0},p(r,s){const a={};s&16&&(a.href=r[4]+"&action=add-pokemon"),s&8192&&(a.$$scope={dirty:s,ctx:r}),n.$set(a),s&64&&we(e,"visibility",r[6]?"visible":"hidden")},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){T(n.$$.fragment,r),t=!1},d(r){r&&h(e),D(n)}}}function vr(i,e){let n,t,r,s;return t=new Ka({props:{trainer:e[2].info.readKey,pokemon:e[10]}}),{key:i,first:null,c(){n=w("li"),L(t.$$.fragment),r=A(),this.h()},l(a){n=k(a,"LI",{class:!0});var o=j(n);R(t.$$.fragment,o),r=O(o),o.forEach(h),this.h()},h(){$(n,"class","space-after svelte-19jifka"),this.first=n},m(a,o){m(a,n,o),N(t,n,null),v(n,r),s=!0},p(a,o){e=a;const l={};o&4&&(l.trainer=e[2].info.readKey),o&32&&(l.pokemon=e[10]),t.$set(l)},i(a){s||(E(t.$$.fragment,a),s=!0)},o(a){T(t.$$.fragment,a),s=!1},d(a){a&&h(n),D(t)}}}function Za(i){let e,n,t,r,s,a,o,l,u,c=[],f=new Map,d;e=new Ss({props:{title:i[2].info.name+"'s Pokemon",$$slots:{action:[Xa],link:[Wa]},$$scope:{ctx:i}}});function p(y){i[7](y)}let _={id:"filter-pokemon",label:"Search",matched:i[5].length,max:i[2].pokemon.length};i[3]!==void 0&&(_.value=i[3]),r=new bs({props:_}),Ct.push(()=>At(r,"value",p));let g=de(i[5]);const b=y=>y[10].id;for(let y=0;y<g.length;y+=1){let S=$r(i,g,y),P=b(S);f.set(P,c[y]=vr(P,S))}return{c(){L(e.$$.fragment),n=A(),t=w("div"),L(r.$$.fragment),a=A(),o=w("div"),l=w("div"),u=w("ul");for(let y=0;y<c.length;y+=1)c[y].c();this.h()},l(y){R(e.$$.fragment,y),n=O(y),t=k(y,"DIV",{class:!0});var S=j(t);R(r.$$.fragment,S),S.forEach(h),a=O(y),o=k(y,"DIV",{class:!0});var P=j(o);l=k(P,"DIV",{class:!0});var I=j(l);u=k(I,"UL",{class:!0});var H=j(u);for(let G=0;G<c.length;G+=1)c[G].l(H);H.forEach(h),I.forEach(h),P.forEach(h),this.h()},h(){$(t,"class","space-bottom svelte-19jifka"),$(u,"class","nolist no-space partial-width svelte-19jifka"),$(l,"class","scrollable svelte-19jifka"),$(o,"class","relative svelte-19jifka")},m(y,S){N(e,y,S),m(y,n,S),m(y,t,S),N(r,t,null),m(y,a,S),m(y,o,S),v(o,l),v(l,u);for(let P=0;P<c.length;P+=1)c[P]&&c[P].m(u,null);d=!0},p(y,[S]){const P={};S&4&&(P.title=y[2].info.name+"'s Pokemon"),S&8274&&(P.$$scope={dirty:S,ctx:y}),e.$set(P);const I={};S&32&&(I.matched=y[5].length),S&4&&(I.max=y[2].pokemon.length),!s&&S&8&&(s=!0,I.value=y[3],It(()=>s=!1)),r.$set(I),S&36&&(g=de(y[5]),ge(),c=ws(c,S,b,1,y,g,f,u,ks,vr,null,$r),$e())},i(y){if(!d){E(e.$$.fragment,y),E(r.$$.fragment,y);for(let S=0;S<g.length;S+=1)E(c[S]);d=!0}},o(y){T(e.$$.fragment,y),T(r.$$.fragment,y);for(let S=0;S<c.length;S+=1)T(c[S]);d=!1},d(y){y&&(h(n),h(t),h(a),h(o)),D(e,y),D(r);for(let S=0;S<c.length;S+=1)c[S].d()}}}function Qa(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=Ge(c,g=>n(2,a=g)),c),u;Re(i,Bn,g=>n(3,u=g)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{currentPokemon:f}=e;const d=g=>(b,y)=>g(b).localeCompare(g(y)),p=g=>b=>b.nickname.toLocaleLowerCase().includes(g)||b.pokemonId.replace("-"," ").includes(g);function _(g){u=g,Bn.set(u)}return i.$$set=g=>{"trainer"in g&&l(n(0,c=g.trainer)),"currentPokemon"in g&&n(1,f=g.currentPokemon)},i.$$.update=()=>{i.$$.dirty&4&&n(6,t=a.update!=null),i.$$.dirty&12&&n(5,r=a.pokemon.filter(p(u.toLocaleLowerCase())).sort(d(g=>g.nickname))),i.$$.dirty&4&&n(4,s=`${Te}/trainers?id=${a.info.readKey}`)},[c,f,a,u,s,r,t,_]}class xa extends ce{constructor(e){super(),fe(this,e,Qa,Za,ue,{trainer:0,currentPokemon:1})}}var Qe=(i=>(i.Male="male",i.Female="female",i.None="none",i.Other="other",i))(Qe||{});const fn=["reckless","rash","brave","arrogant","skittish","hasty","energetic","clumsy","apathetic","stubborn","grumpy","relaxed","careful","curious","naughty","cheerful","sassy","innocent","hardy","nimble"],yt=["normal","fighting","flying","poison","ground","rock","bug","ghost","steel","fire","water","grass","electric","psychic","ice","dragon","dark","fairy"],Cs=i=>yt.includes(i);class el{constructor(e){Ne(this,"allTrainers",async()=>Promise.all(yn().map(e=>this.supabase.rpc("get_trainer",{_read_key:e}).maybeSingle().then(({data:n,error:t})=>{if(t)throw new Se("Could not get trainer.",t);if(n)return kr(n)}))).then(e=>e.filter(n=>n!=null)));Ne(this,"getTrainer",async e=>{const n=await this.supabase.rpc("get_trainer",{_read_key:e}).maybeSingle().then(({data:s,error:a})=>{if(a)throw new Se("Could not get trainer.",a);if(s)return kr(s)});if(!n)return;br(e);const t=await this.supabase.rpc("get_pokemon",{_trainer_id:n.id}).select().then(({data:s,error:a})=>{if(a)throw new Se("Could not trainer's pokemon.",a);return s.map(o=>sl(o))}).then(s=>Promise.all(s.map(a=>this.getMoveset(a.id).then(o=>({...a,moves:o}))))),r=nl(e);return{info:n,pokemon:t,writeKey:r}});Ne(this,"newTrainer",async e=>{const{data:n,error:t}=await this.supabase.rpc("new_trainer",{_name:e.name,_description:e.description}).single();if(t)throw new Se("Could not create trainer.",t);return br(n.ret_read_key),wr(n.ret_read_key,n.ret_write_key),{info:{...e,id:n.ret_id,readKey:n.ret_read_key},pokemon:[],writeKey:n.ret_write_key}});Ne(this,"updateTrainerInfo",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("update_trainer",{_write_key:e,_name:n.name,_description:n.description}).single();if(r)throw new Se("Could not update trainer.",r);if(t<=0)throw new Se("Either this trainer does not exist or you do not have permission to edit them.");return t>0});Ne(this,"removeTrainer",async(e,n,t)=>{const{data:r,error:s}=await this.supabase.rpc("delete_trainer",{_write_key:e,_id:n}).single();if(s)throw new Se("Could not delete trainer.",s);if(r<=0)throw new Se("Either this trainer does not exist or you do not have permission to edit them.");return rl(t),tl(t),r>0});Ne(this,"updatePokemon",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("update_pokemon",{_write_key:e,_id:parseInt(n.id),_species:n.pokemonId,_nickname:n.nickname,_type:n.type,_nature:n.nature,_level:n.level,_gender:n.gender,_strength:n.attributes.str,_dexterity:n.attributes.dex,_constitution:n.attributes.con,_intelligence:n.attributes.int,_wisdom:n.attributes.wis,_charisma:n.attributes.cha,_ac:n.ac,_hp_cur:n.hp.current,_hp_max:n.hp.max,_hit_dice_cur:n.hitDice.current,_hit_dice_max:n.hitDice.max,_prof_athletics:n.proficiencies.includes("athletics"),_prof_acrobatics:n.proficiencies.includes("acrobatics"),_prof_sleight_of_hand:n.proficiencies.includes("sleight of hand"),_prof_stealth:n.proficiencies.includes("stealth"),_prof_arcana:n.proficiencies.includes("arcana"),_prof_history:n.proficiencies.includes("history"),_prof_investigation:n.proficiencies.includes("investigation"),_prof_nature:n.proficiencies.includes("nature"),_prof_religion:n.proficiencies.includes("religion"),_prof_animal_handling:n.proficiencies.includes("animal handling"),_prof_insight:n.proficiencies.includes("insight"),_prof_medicine:n.proficiencies.includes("medicine"),_prof_perception:n.proficiencies.includes("perception"),_prof_survival:n.proficiencies.includes("survival"),_prof_deception:n.proficiencies.includes("deception"),_prof_intimidation:n.proficiencies.includes("intimidation"),_prof_performance:n.proficiencies.includes("performance"),_prof_persuasion:n.proficiencies.includes("persuasion"),_save_str:n.savingThrows.includes("str"),_save_dex:n.savingThrows.includes("dex"),_save_con:n.savingThrows.includes("con"),_save_int:n.savingThrows.includes("int"),_save_wis:n.savingThrows.includes("wis"),_save_cha:n.savingThrows.includes("cha"),_ability:n.ability,_notes:n.notes}).single();if(r)throw new Se("Could not update pokemon.",r);if(t<=0)throw new Se("Either this pokemon does not exist or you do not have permission to edit them.");return t>0});Ne(this,"addPokemonToTeam",async(e,n,t)=>{var o,l;const r={trainerId:n,pokemonId:t.id,nickname:t.name,type:t.type,nature:fn[0],level:t.minLevel,gender:Qe.None,attributes:t.attributes,ac:t.ac,ability:(o=t.abilities[0])==null?void 0:o.id,hp:{current:t.hp,max:t.hp},hitDice:{current:t.minLevel,max:t.minLevel},proficiencies:t.skills,savingThrows:t.savingThrows,moves:[],notes:""},{data:s,error:a}=await this.supabase.rpc("add_pokemon",{_write_key:e,_nickname:t.name,_species:t.id,_nature:fn[0],_type:t.type,_level:t.minLevel,_gender:Qe.None,_strength:t.attributes.str,_dexterity:t.attributes.dex,_constitution:t.attributes.con,_intelligence:t.attributes.int,_wisdom:t.attributes.wis,_charisma:t.attributes.cha,_ac:t.ac,_hp_cur:t.hp,_hp_max:t.hp,_hit_dice_cur:t.minLevel,_hit_dice_max:t.minLevel,_prof_athletics:t.skills.includes("athletics"),_prof_acrobatics:t.skills.includes("acrobatics"),_prof_sleight_of_hand:t.skills.includes("sleight of hand"),_prof_stealth:t.skills.includes("stealth"),_prof_arcana:t.skills.includes("arcana"),_prof_history:t.skills.includes("history"),_prof_investigation:t.skills.includes("investigation"),_prof_nature:t.skills.includes("nature"),_prof_religion:t.skills.includes("religion"),_prof_animal_handling:t.skills.includes("animal handling"),_prof_insight:t.skills.includes("insight"),_prof_medicine:t.skills.includes("medicine"),_prof_perception:t.skills.includes("perception"),_prof_survival:t.skills.includes("survival"),_prof_deception:t.skills.includes("deception"),_prof_intimidation:t.skills.includes("intimidation"),_prof_performance:t.skills.includes("performance"),_prof_persuasion:t.skills.includes("persuasion"),_save_str:t.savingThrows.includes("str"),_save_dex:t.savingThrows.includes("dex"),_save_con:t.savingThrows.includes("con"),_save_int:t.savingThrows.includes("int"),_save_wis:t.savingThrows.includes("wis"),_save_cha:t.savingThrows.includes("cha"),_ability:(l=t.abilities[0])==null?void 0:l.id,_notes:""}).single();if(a)throw new Se("Could not add pokemon.",a);return{...r,id:s.toString()}});Ne(this,"removePokemon",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("remove_pokemon",{_write_key:e,_id:n}).single();if(r)throw new Se("Could not remove pokemon.",r);return t>0});Ne(this,"updateMoveset",async(e,n,t)=>{const r=await this.getMoveset(n),s=t.map(l=>l.id),a=r.map(l=>l.id),o=a.filter(l=>!s.includes(l));return await Promise.all(o.map(l=>this.supabase.rpc("remove_move",{_write_key:e,_id:l}).single().then(({data:u,error:c})=>{if(c)throw new Se("Could not delete move.",c);if(u<=0)throw new Se("Either this pokemon does not exist or you do not have permission to edit them.");return u>0}))),await Promise.all(t.map(l=>a.includes(l.id)?this.supabase.rpc("update_move",{_write_key:e,_id:l.id,_move_id:l.moveId,_pp_cur:l.pp.current,_pp_max:l.pp.max,_notes:l.notes}).single().then(({data:u,error:c})=>{if(c)throw new Se("Could not update move.",c);if(u<=0)throw new Se("Either this pokemon does not exist or you do not have permission to edit them.");return{...l}}):this.supabase.rpc("add_move",{_write_key:e,_pokemon_id:n,_move_id:l.moveId,_pp_cur:l.pp.current,_pp_max:l.pp.max,_notes:l.notes}).single().then(({data:u,error:c})=>{if(c)throw new Se("Could not add move.",c);return{...l,id:u}})))});Ne(this,"updateOneMove",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("update_move",{_write_key:e,_id:n.id,_move_id:n.moveId,_pp_cur:n.pp.current,_pp_max:n.pp.max,_notes:n.notes}).single();if(r)throw new Se("Could not update pokemon.",r);if(t<=0)throw new Se("Either this pokemon does not exist or you do not have permission to edit them.");return t>0});Ne(this,"verifyWriteKey",async(e,n)=>{const{data:t,error:r}=await this.supabase.rpc("verify_write_key",{_id:e.id,_write_key:n}).single();if(r)throw new Se("Could not verify trainer.",r);return t>0&&wr(e.readKey,n),t>0});Ne(this,"getMoveset",async e=>{const{data:n,error:t}=await this.supabase.rpc("get_moveset",{_pokemon_id:e}).select();if(t)throw new Se("Could not get moveset.",t);return(n==null?void 0:n.map(r=>il(r)))??[]});this.supabase=e}}const yn=()=>{var i;return((i=localStorage.getItem("trainers"))==null?void 0:i.split(","))??[]},br=i=>{const e=yn(),n=[...new Set(e.concat(i))];localStorage.setItem("trainers",n.join(","))},tl=i=>{const n=yn().filter(t=>t!==i);localStorage.setItem("trainers",n.join(","))},nl=i=>localStorage.getItem(`write:${i}`),wr=(i,e)=>{localStorage.setItem(`write:${i}`,e)},rl=i=>{localStorage.removeItem(`write:${i}`)},kr=i=>({id:i.id,readKey:i.read_key,name:i.name,description:i.description}),yr=i=>Object.entries(i).filter(([,e])=>e).map(([e])=>e),sl=i=>({id:i.id.toString(),trainerId:i.trainer_id,pokemonId:i.species,nickname:i.nickname,type:i.type.filter(Cs),nature:i.nature,level:i.level,gender:i.gender,attributes:{str:i.strength,dex:i.dexterity,con:i.constitution,int:i.intelligence,wis:i.wisdom,cha:i.charisma},ac:i.ac,hp:{current:i.hp_cur,max:i.hp_max},hitDice:{current:i.hit_dice_cur,max:i.hit_dice_max},ability:i.ability,proficiencies:yr({athletics:i.prof_athletics,acrobatics:i.prof_acrobatics,"sleight of hand":i.prof_sleight_of_hand,stealth:i.prof_stealth,arcana:i.prof_arcana,history:i.prof_history,investigation:i.prof_investigation,nature:i.prof_nature,religion:i.prof_religion,"animal handling":i.prof_animal_handling,insight:i.prof_insight,medicine:i.prof_medicine,perception:i.prof_perception,survival:i.prof_survival,deception:i.prof_deception,intimidation:i.prof_intimidation,performance:i.prof_performance,persuasion:i.prof_persuasion}),savingThrows:yr({str:i.save_str,dex:i.save_dex,con:i.save_con,int:i.save_int,wis:i.save_wis,cha:i.save_cha}),moves:[],notes:i.notes}),il=i=>({id:i.id.toString(),moveId:i.move_id,pp:{current:i.pp_cur,max:i.pp_max},notes:i.notes}),al="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxvZ25jYmpqZm1udmJmcmpkeG1nIiwicm9sZSI6ImFub24iLCJpYXQiOjE2Njk1ODY2MzEsImV4cCI6MTk4NTE2MjYzMX0.RXw9pfN-4qOR2AbqPoM6GMzjDGRwYnClF9LEiI2VE5k",ll="https://logncbjjfmnvbfrjdxmg.supabase.co",ol=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url).then(({default:t})=>t(...n)):e=fetch,(...n)=>e(...n)};class En extends Error{constructor(e,n="FunctionsError",t){super(e),this.name=n,this.context=t}}class ul extends En{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class cl extends En{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fl extends En{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var hn;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(hn||(hn={}));var hl=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(f){a(f)}}function l(c){try{u(t.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};class dl{constructor(e,{headers:n={},customFetch:t,region:r=hn.Any}={}){this.url=e,this.headers=n,this.region=r,this.fetch=ol(t)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,n={}){var t;return hl(this,void 0,void 0,function*(){try{const{headers:r,method:s,body:a}=n;let o={},{region:l}=n;l||(l=this.region),l&&l!=="any"&&(o["x-region"]=l);let u;a&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",u=a):typeof a=="string"?(o["Content-Type"]="text/plain",u=a):typeof FormData<"u"&&a instanceof FormData?u=a:(o["Content-Type"]="application/json",u=JSON.stringify(a)));const c=yield this.fetch(`${this.url}/${e}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),r),body:u}).catch(_=>{throw new ul(_)}),f=c.headers.get("x-relay-error");if(f&&f==="true")throw new cl(c);if(!c.ok)throw new fl(c);let d=((t=c.headers.get("Content-Type"))!==null&&t!==void 0?t:"text/plain").split(";")[0].trim(),p;return d==="application/json"?p=yield c.json():d==="application/octet-stream"?p=yield c.blob():d==="text/event-stream"?p=c:d==="multipart/form-data"?p=yield c.formData():p=yield c.text(),{data:p,error:null}}catch(r){return{data:null,error:r}}})}}var pl=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},jt=pl();const _l=jt.fetch,Tn=jt.fetch.bind(jt),Is=jt.Headers,ml=jt.Request,gl=jt.Response,qt=Object.freeze(Object.defineProperty({__proto__:null,Headers:Is,Request:ml,Response:gl,default:Tn,fetch:_l},Symbol.toStringTag,{value:"Module"}));class $l extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}class vl{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=Tn:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const t=this.fetch;let r=t(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async s=>{var a,o,l;let u=null,c=null,f=null,d=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){const y=await s.text();y===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=y:c=JSON.parse(y))}const g=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),b=(o=s.headers.get("content-range"))===null||o===void 0?void 0:o.split("/");g&&b&&b.length>1&&(f=parseInt(b[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(c)&&(c.length>1?(u={code:"PGRST116",details:`Results contain ${c.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},c=null,f=null,d=406,p="Not Acceptable"):c.length===1?c=c[0]:c=null)}else{const g=await s.text();try{u=JSON.parse(g),Array.isArray(u)&&s.status===404&&(c=[],u=null,d=200,p="OK")}catch{s.status===404&&g===""?(d=204,p="No Content"):u={message:g}}if(u&&this.isMaybeSingle&&(!((l=u==null?void 0:u.details)===null||l===void 0)&&l.includes("0 rows"))&&(u=null,d=200,p="OK"),u&&this.shouldThrowOnError)throw new $l(u)}return{error:u,data:c,count:f,status:d,statusText:p}});return this.shouldThrowOnError||(r=r.catch(s=>{var a,o,l;return{error:{message:`${(a=s==null?void 0:s.name)!==null&&a!==void 0?a:"FetchError"}: ${s==null?void 0:s.message}`,details:`${(o=s==null?void 0:s.stack)!==null&&o!==void 0?o:""}`,hint:"",code:`${(l=s==null?void 0:s.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,n)}}class bl extends vl{select(e){let n=!1;const t=(e??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",t),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:n=!0,nullsFirst:t,foreignTable:r,referencedTable:s=r}={}){const a=s?`${s}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${e}.${n?"asc":"desc"}${t===void 0?"":t?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:n,referencedTable:t=n}={}){const r=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,n,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"offset":`${r}.offset`,a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,`${n-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:n=!1,settings:t=!1,buffers:r=!1,wal:s=!1,format:a="text"}={}){var o;const l=[e?"analyze":null,n?"verbose":null,t?"settings":null,r?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=(o=this.headers.Accept)!==null&&o!==void 0?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${u}"; options=${l};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class Et extends bl{eq(e,n){return this.url.searchParams.append(e,`eq.${n}`),this}neq(e,n){return this.url.searchParams.append(e,`neq.${n}`),this}gt(e,n){return this.url.searchParams.append(e,`gt.${n}`),this}gte(e,n){return this.url.searchParams.append(e,`gte.${n}`),this}lt(e,n){return this.url.searchParams.append(e,`lt.${n}`),this}lte(e,n){return this.url.searchParams.append(e,`lte.${n}`),this}like(e,n){return this.url.searchParams.append(e,`like.${n}`),this}likeAllOf(e,n){return this.url.searchParams.append(e,`like(all).{${n.join(",")}}`),this}likeAnyOf(e,n){return this.url.searchParams.append(e,`like(any).{${n.join(",")}}`),this}ilike(e,n){return this.url.searchParams.append(e,`ilike.${n}`),this}ilikeAllOf(e,n){return this.url.searchParams.append(e,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(e,n){return this.url.searchParams.append(e,`ilike(any).{${n.join(",")}}`),this}is(e,n){return this.url.searchParams.append(e,`is.${n}`),this}in(e,n){const t=Array.from(new Set(n)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${t})`),this}contains(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cs.{${n.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(n)}`),this}containedBy(e,n){return typeof n=="string"?this.url.searchParams.append(e,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(e,`cd.{${n.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(n)}`),this}rangeGt(e,n){return this.url.searchParams.append(e,`sr.${n}`),this}rangeGte(e,n){return this.url.searchParams.append(e,`nxl.${n}`),this}rangeLt(e,n){return this.url.searchParams.append(e,`sl.${n}`),this}rangeLte(e,n){return this.url.searchParams.append(e,`nxr.${n}`),this}rangeAdjacent(e,n){return this.url.searchParams.append(e,`adj.${n}`),this}overlaps(e,n){return typeof n=="string"?this.url.searchParams.append(e,`ov.${n}`):this.url.searchParams.append(e,`ov.{${n.join(",")}}`),this}textSearch(e,n,{config:t,type:r}={}){let s="";r==="plain"?s="pl":r==="phrase"?s="ph":r==="websearch"&&(s="w");const a=t===void 0?"":`(${t})`;return this.url.searchParams.append(e,`${s}fts${a}.${n}`),this}match(e){return Object.entries(e).forEach(([n,t])=>{this.url.searchParams.append(n,`eq.${t}`)}),this}not(e,n,t){return this.url.searchParams.append(e,`not.${n}.${t}`),this}or(e,{foreignTable:n,referencedTable:t=n}={}){const r=t?`${t}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,n,t){return this.url.searchParams.append(e,`${n}.${t}`),this}}class wl{constructor(e,{headers:n={},schema:t,fetch:r}){this.url=e,this.headers=n,this.schema=t,this.fetch=r}select(e,{head:n=!1,count:t}={}){const r=n?"HEAD":"GET";let s=!1;const a=(e??"*").split("").map(o=>/\s/.test(o)&&!s?"":(o==='"'&&(s=!s),o)).join("");return this.url.searchParams.set("select",a),t&&(this.headers.Prefer=`count=${t}`),new Et({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:n,defaultToNull:t=!0}={}){const r="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),t||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const a=e.reduce((o,l)=>o.concat(Object.keys(l)),[]);if(a.length>0){const o=[...new Set(a)].map(l=>`"${l}"`);this.url.searchParams.set("columns",o.join(","))}}return new Et({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:n,ignoreDuplicates:t=!1,count:r,defaultToNull:s=!0}={}){const a="POST",o=[`resolution=${t?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&o.push(this.headers.Prefer),r&&o.push(`count=${r}`),s||o.push("missing=default"),this.headers.Prefer=o.join(","),Array.isArray(e)){const l=e.reduce((u,c)=>u.concat(Object.keys(c)),[]);if(l.length>0){const u=[...new Set(l)].map(c=>`"${c}"`);this.url.searchParams.set("columns",u.join(","))}}return new Et({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:n}={}){const t="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new Et({method:t,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const n="DELETE",t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new Et({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const kl="1.15.2",yl={"X-Client-Info":`postgrest-js/${kl}`};class Sn{constructor(e,{headers:n={},schema:t,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},yl),n),this.schemaName=t,this.fetch=r}from(e){const n=new URL(`${this.url}/${e}`);return new wl(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Sn(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:t=!1,get:r=!1,count:s}={}){let a;const o=new URL(`${this.url}/rpc/${e}`);let l;t||r?(a=t?"HEAD":"GET",Object.entries(n).filter(([c,f])=>f!==void 0).map(([c,f])=>[c,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([c,f])=>{o.searchParams.append(c,f)})):(a="POST",l=n);const u=Object.assign({},this.headers);return s&&(u.Prefer=`count=${s}`),new Et({method:a,url:o,headers:u,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}const El="2.9.5",Tl={"X-Client-Info":`realtime-js/${El}`},Sl="1.0.0",Ps=1e4,Cl=1e3;var Tt;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Tt||(Tt={}));var Me;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(Me||(Me={}));var Ve;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Ve||(Ve={}));var dn;(function(i){i.websocket="websocket"})(dn||(dn={}));var pt;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(pt||(pt={}));class As{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Il{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),t=new TextDecoder;return this._decodeBroadcast(e,n,t)}_decodeBroadcast(e,n,t){const r=n.getUint8(1),s=n.getUint8(2);let a=this.HEADER_LENGTH+2;const o=t.decode(e.slice(a,a+r));a=a+r;const l=t.decode(e.slice(a,a+s));a=a+s;const u=JSON.parse(t.decode(e.slice(a,e.byteLength)));return{ref:null,topic:o,event:l,payload:u}}}class tn{constructor(e,n,t={},r=Ps){this.channel=e,this.event=n,this.payload=t,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var t;return this._hasReceived(e)&&n((t=this.receivedResp)===null||t===void 0?void 0:t.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(t=>t.status===e).forEach(t=>t.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Er;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Er||(Er={}));class Ut{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const t=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ut.syncState(this.state,r,s,a),this.pendingDiffs.forEach(l=>{this.state=Ut.syncDiff(this.state,l,s,a)}),this.pendingDiffs=[],o()}),this.channel._on(t.diff,{},r=>{const{onJoin:s,onLeave:a,onSync:o}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Ut.syncDiff(this.state,r,s,a),o())}),this.onJoin((r,s,a)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:s,newPresences:a})}),this.onLeave((r,s,a)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:s,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,t,r){const s=this.cloneDeep(e),a=this.transformState(n),o={},l={};return this.map(s,(u,c)=>{a[u]||(l[u]=c)}),this.map(a,(u,c)=>{const f=s[u];if(f){const d=c.map(b=>b.presence_ref),p=f.map(b=>b.presence_ref),_=c.filter(b=>p.indexOf(b.presence_ref)<0),g=f.filter(b=>d.indexOf(b.presence_ref)<0);_.length>0&&(o[u]=_),g.length>0&&(l[u]=g)}else o[u]=c}),this.syncDiff(s,{joins:o,leaves:l},t,r)}static syncDiff(e,n,t,r){const{joins:s,leaves:a}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return t||(t=()=>{}),r||(r=()=>{}),this.map(s,(o,l)=>{var u;const c=(u=e[o])!==null&&u!==void 0?u:[];if(e[o]=this.cloneDeep(l),c.length>0){const f=e[o].map(p=>p.presence_ref),d=c.filter(p=>f.indexOf(p.presence_ref)<0);e[o].unshift(...d)}t(o,c,l)}),this.map(a,(o,l)=>{let u=e[o];if(!u)return;const c=l.map(f=>f.presence_ref);u=u.filter(f=>c.indexOf(f.presence_ref)<0),e[o]=u,r(o,u,l),u.length===0&&delete e[o]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(t=>n(t,e[t]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,t)=>{const r=e[t];return"metas"in r?n[t]=r.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[t]=r,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Ee;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ee||(Ee={}));const Tr=(i,e,n={})=>{var t;const r=(t=n.skipTypes)!==null&&t!==void 0?t:[];return Object.keys(e).reduce((s,a)=>(s[a]=Pl(a,i,e,r),s),{})},Pl=(i,e,n,t)=>{const r=e.find(o=>o.name===i),s=r==null?void 0:r.type,a=n[i];return s&&!t.includes(s)?Os(s,a):pn(a)},Os=(i,e)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return Ll(e,n)}switch(i){case Ee.bool:return Al(e);case Ee.float4:case Ee.float8:case Ee.int2:case Ee.int4:case Ee.int8:case Ee.numeric:case Ee.oid:return Ol(e);case Ee.json:case Ee.jsonb:return jl(e);case Ee.timestamp:return Rl(e);case Ee.abstime:case Ee.date:case Ee.daterange:case Ee.int4range:case Ee.int8range:case Ee.money:case Ee.reltime:case Ee.text:case Ee.time:case Ee.timestamptz:case Ee.timetz:case Ee.tsrange:case Ee.tstzrange:return pn(e);default:return pn(e)}},pn=i=>i,Al=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Ol=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},jl=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},Ll=(i,e)=>{if(typeof i!="string")return i;const n=i.length-1,t=i[n];if(i[0]==="{"&&t==="}"){let s;const a=i.slice(1,n);try{s=JSON.parse("["+a+"]")}catch{s=a?a.split(","):[]}return s.map(o=>Os(e,o))}return i},Rl=i=>typeof i=="string"?i.replace(" ","T"):i;var Sr;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(Sr||(Sr={}));var Cr;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes"})(Cr||(Cr={}));var Ir;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(Ir||(Ir={}));class Cn{constructor(e,n={config:{}},t){this.topic=e,this.params=n,this.socket=t,this.bindings={},this.state=Me.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},n.config),this.timeout=this.socket.timeout,this.joinPush=new tn(this,Ve.join,this.params,this.timeout),this.rejoinTimer=new As(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Me.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Me.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Me.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Ve.reply,{},(r,s)=>{this._trigger(this._replyEventName(s),r)}),this.presence=new Ut(this),this.broadcastEndpointURL=this._broadcastEndpointURL()}subscribe(e,n=this.timeout){var t,r;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:a}}=this.params;this._onError(u=>e&&e("CHANNEL_ERROR",u)),this._onClose(()=>e&&e("CLOSED"));const o={},l={broadcast:s,presence:a,postgres_changes:(r=(t=this.bindings.postgres_changes)===null||t===void 0?void 0:t.map(u=>u.filter))!==null&&r!==void 0?r:[]};this.socket.accessToken&&(o.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",({postgres_changes:u})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){e&&e("SUBSCRIBED");return}else{const f=this.bindings.postgres_changes,d=(c=f==null?void 0:f.length)!==null&&c!==void 0?c:0,p=[];for(let _=0;_<d;_++){const g=f[_],{filter:{event:b,schema:y,table:S,filter:P}}=g,I=u&&u[_];if(I&&I.event===b&&I.schema===y&&I.table===S&&I.filter===P)p.push(Object.assign(Object.assign({},g),{id:I.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e("SUBSCRIBED");return}}).receive("error",u=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,t){return this._on(e,n,t)}async send(e,n={}){var t,r;if(!this._canPush()&&e.type==="broadcast"){const{event:s,payload:a}=e,o={method:"POST",headers:{apikey:(t=this.socket.apiKey)!==null&&t!==void 0?t:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:a}]})};try{return(await this._fetchWithTimeout(this.broadcastEndpointURL,o,(r=n.timeout)!==null&&r!==void 0?r:this.timeout)).ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var a,o,l;const u=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(o=(a=this.params)===null||a===void 0?void 0:a.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),u.receive("ok",()=>s("ok")),u.receive("error",()=>s("error")),u.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Me.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Ve.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(t=>{const r=new tn(this,Ve.leave,{},e);r.receive("ok",()=>{n(),t("ok")}).receive("timeout",()=>{n(),t("timed out")}).receive("error",()=>{t("error")}),r.send(),this._canPush()||r.trigger("ok",{})})}_broadcastEndpointURL(){let e=this.socket.endPoint;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"}async _fetchWithTimeout(e,n,t){const r=new AbortController,s=setTimeout(()=>r.abort(),t),a=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(s),a}_push(e,n,t=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new tn(this,e,n,t);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,n,t){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,t){var r,s;const a=e.toLocaleLowerCase(),{close:o,error:l,leave:u,join:c}=Ve;if(t&&[o,l,u,c].indexOf(a)>=0&&t!==this._joinRef())return;let d=this._onMessage(a,n,t);if(n&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(p=>{var _,g,b;return((_=p.filter)===null||_===void 0?void 0:_.event)==="*"||((b=(g=p.filter)===null||g===void 0?void 0:g.event)===null||b===void 0?void 0:b.toLocaleLowerCase())===a}).map(p=>p.callback(d,t)):(s=this.bindings[a])===null||s===void 0||s.filter(p=>{var _,g,b,y,S,P;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in p){const I=p.id,H=(_=p.filter)===null||_===void 0?void 0:_.event;return I&&((g=n.ids)===null||g===void 0?void 0:g.includes(I))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((b=n.data)===null||b===void 0?void 0:b.type.toLocaleLowerCase()))}else{const I=(S=(y=p==null?void 0:p.filter)===null||y===void 0?void 0:y.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return I==="*"||I===((P=n==null?void 0:n.event)===null||P===void 0?void 0:P.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===a}).map(p=>{if(typeof d=="object"&&"ids"in d){const _=d.data,{schema:g,table:b,commit_timestamp:y,type:S,errors:P}=_;d=Object.assign(Object.assign({},{schema:g,table:b,commit_timestamp:y,eventType:S,new:{},old:{},errors:P}),this._getPayloadRecords(_))}p.callback(d,t)})}_isClosed(){return this.state===Me.closed}_isJoined(){return this.state===Me.joined}_isJoining(){return this.state===Me.joining}_isLeaving(){return this.state===Me.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,t){const r=e.toLocaleLowerCase(),s={type:r,filter:n,callback:t};return this.bindings[r]?this.bindings[r].push(s):this.bindings[r]=[s],this}_off(e,n){const t=e.toLocaleLowerCase();return this.bindings[t]=this.bindings[t].filter(r=>{var s;return!(((s=r.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===t&&Cn.isEqual(r.filter,n))}),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const t in e)if(e[t]!==n[t])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Ve.close,{},e)}_onError(e){this._on(Ve.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Me.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Tr(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Tr(e.columns,e.old_record)),n}}const Nl=()=>{},Dl=typeof WebSocket<"u";class Ul{constructor(e,n){var t;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.headers=Tl,this.params={},this.timeout=Ps,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Nl,this.conn=null,this.sendBuffer=[],this.serializer=new Il,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let a;return s?a=s:typeof fetch>"u"?a=(...o)=>Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url).then(({default:l})=>l(...o)):a=fetch,(...o)=>a(...o)},this.endPoint=`${e}/${dn.websocket}`,n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.headers&&(this.headers=Object.assign(Object.assign({},this.headers),n.headers)),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(t=n==null?void 0:n.params)===null||t===void 0?void 0:t.apikey;r&&(this.accessToken=r,this.apiKey=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(s,a)=>a(JSON.stringify(s)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new As(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Dl){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Ml(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),Ot(()=>import("../chunks/browser.BImCA5dO.js").then(e=>e.b),[],import.meta.url).then(({default:e})=>{this.conn=new e(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.disconnect(),e}log(e,n,t){this.logger(e,n,t)}connectionState(){switch(this.conn&&this.conn.readyState){case Tt.connecting:return pt.Connecting;case Tt.open:return pt.Open;case Tt.closing:return pt.Closing;default:return pt.Closed}}isConnected(){return this.connectionState()===pt.Open}channel(e,n={config:{}}){const t=new Cn(`realtime:${e}`,n,this);return this.channels.push(t),t}push(e){const{topic:n,event:t,payload:r,ref:s}=e,a=()=>{this.encode(e,o=>{var l;(l=this.conn)===null||l===void 0||l.send(o)})};this.log("push",`${n} ${t} (${s})`,r),this.isConnected()?a():this.sendBuffer.push(a)}setAuth(e){this.accessToken=e,this.channels.forEach(n=>{e&&n.updateJoinPayload({access_token:e}),n.joinedOnce&&n._isJoined()&&n._push(Ve.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n._joinRef()!==e._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Sl}))}_onConnMessage(e){this.decode(e.data,n=>{let{topic:t,event:r,payload:s,ref:a}=n;(a&&a===this.pendingHeartbeatRef||r===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${r} ${a&&"("+a+")"||""}`,s),this.channels.filter(o=>o._isMember(t)).forEach(o=>o._trigger(r,s,a)),this.stateChangeCallbacks.message.forEach(o=>o(n))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Ve.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const t=e.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${e}${t}${r}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(Cl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}}class Ml{constructor(e,n,t){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Tt.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=t.close}}class In extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Oe(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class Bl extends In{constructor(e,n){super(e),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Pr extends In{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}var Fl=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(f){a(f)}}function l(c){try{u(t.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};const js=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url).then(({default:t})=>t(...n)):e=fetch,(...n)=>e(...n)},Kl=()=>Fl(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url)).Response:Response});var Rt=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(f){a(f)}}function l(c){try{u(t.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};const nn=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),ql=(i,e)=>Rt(void 0,void 0,void 0,function*(){const n=yield Kl();i instanceof n?i.json().then(t=>{e(new Bl(nn(t),i.status||500))}).catch(t=>{e(new Pr(nn(t),t))}):e(new Pr(nn(i),i))}),Hl=(i,e,n,t)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),r.body=JSON.stringify(t),Object.assign(Object.assign({},r),n))};function xt(i,e,n,t,r,s){return Rt(this,void 0,void 0,function*(){return new Promise((a,o)=>{i(n,Hl(e,t,r,s)).then(l=>{if(!l.ok)throw l;return t!=null&&t.noResolveJson?l:l.json()}).then(l=>a(l)).catch(l=>ql(l,o))})})}function _n(i,e,n,t){return Rt(this,void 0,void 0,function*(){return xt(i,"GET",e,n,t)})}function ot(i,e,n,t,r){return Rt(this,void 0,void 0,function*(){return xt(i,"POST",e,t,r,n)})}function zl(i,e,n,t,r){return Rt(this,void 0,void 0,function*(){return xt(i,"PUT",e,t,r,n)})}function Ls(i,e,n,t,r){return Rt(this,void 0,void 0,function*(){return xt(i,"DELETE",e,t,r,n)})}var Fe=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(f){a(f)}}function l(c){try{u(t.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};const Vl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ar={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Gl{constructor(e,n={},t,r){this.url=e,this.headers=n,this.bucketId=t,this.fetch=js(r)}uploadOrUpdate(e,n,t,r){return Fe(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},Ar),r),o=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});typeof Blob<"u"&&t instanceof Blob?(s=new FormData,s.append("cacheControl",a.cacheControl),s.append("",t)):typeof FormData<"u"&&t instanceof FormData?(s=t,s.append("cacheControl",a.cacheControl)):(s=t,o["cache-control"]=`max-age=${a.cacheControl}`,o["content-type"]=a.contentType);const l=this._removeEmptyFolders(n),u=this._getFinalPath(l),c=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:s,headers:o},a!=null&&a.duplex?{duplex:a.duplex}:{})),f=yield c.json();return c.ok?{data:{path:l,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(Oe(s))return{data:null,error:s};throw s}})}upload(e,n,t){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,t)})}uploadToSignedUrl(e,n,t,r){return Fe(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),o=new URL(this.url+`/object/upload/sign/${a}`);o.searchParams.set("token",n);try{let l;const u=Object.assign({upsert:Ar.upsert},r),c=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&t instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",t)):typeof FormData<"u"&&t instanceof FormData?(l=t,l.append("cacheControl",u.cacheControl)):(l=t,c["cache-control"]=`max-age=${u.cacheControl}`,c["content-type"]=u.contentType);const f=yield this.fetch(o.toString(),{method:"PUT",body:l,headers:c}),d=yield f.json();return f.ok?{data:{path:s,fullPath:d.Key},error:null}:{data:null,error:d}}catch(l){if(Oe(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e){return Fe(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const t=yield ot(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:this.headers}),r=new URL(this.url+t.url),s=r.searchParams.get("token");if(!s)throw new In("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:s},error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}update(e,n,t){return Fe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,t)})}move(e,n){return Fe(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n},{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}copy(e,n){return Fe(this,void 0,void 0,function*(){try{return{data:{path:(yield ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n},{headers:this.headers})).Key},error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}createSignedUrl(e,n,t){return Fe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),s=yield ot(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},t!=null&&t.transform?{transform:t.transform}:{}),{headers:this.headers});const a=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}createSignedUrls(e,n,t){return Fe(this,void 0,void 0,function*(){try{const r=yield ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=t!=null&&t.download?`&download=${t.download===!0?"":t.download}`:"";return{data:r.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${s}`):null})),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}download(e,n){return Fe(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),a=s?`?${s}`:"";try{const o=this._getFinalPath(e);return{data:yield(yield _n(this.fetch,`${this.url}/${r}/${o}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(o){if(Oe(o))return{data:null,error:o};throw o}})}getPublicUrl(e,n){const t=this._getFinalPath(e),r=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&r.push(s);const o=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&r.push(l);let u=r.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${t}${u}`)}}}remove(e){return Fe(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}list(e,n,t){return Fe(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Vl),n),{prefix:e||""});return{data:yield ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(Oe(r))return{data:null,error:r};throw r}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Jl="2.5.5",Wl={"X-Client-Info":`storage-js/${Jl}`};var bt=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(f){a(f)}}function l(c){try{u(t.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};class Yl{constructor(e,n={},t){this.url=e,this.headers=Object.assign(Object.assign({},Wl),n),this.fetch=js(t)}listBuckets(){return bt(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Oe(e))return{data:null,error:e};throw e}})}getBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield _n(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}createBucket(e,n={public:!1}){return bt(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}updateBucket(e,n){return bt(this,void 0,void 0,function*(){try{return{data:yield zl(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(Oe(t))return{data:null,error:t};throw t}})}emptyBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield ot(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return bt(this,void 0,void 0,function*(){try{return{data:yield Ls(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(Oe(n))return{data:null,error:n};throw n}})}}class Xl extends Yl{constructor(e,n={},t){super(e,n,t)}from(e){return new Gl(this.url,this.headers,e,this.fetch)}}const Zl="2.43.4";let Dt="";typeof Deno<"u"?Dt="deno":typeof document<"u"?Dt="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Dt="react-native":Dt="node";const Ql={"X-Client-Info":`supabase-js-${Dt}/${Zl}`},xl={headers:Ql},eo={schema:"public"},to={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},no={};var ro=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(f){a(f)}}function l(c){try{u(t.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};const so=i=>{let e;return i?e=i:typeof fetch>"u"?e=Tn:e=fetch,(...n)=>e(...n)},io=()=>typeof Headers>"u"?Is:Headers,ao=(i,e,n)=>{const t=so(n),r=io();return(s,a)=>ro(void 0,void 0,void 0,function*(){var o;const l=(o=yield e())!==null&&o!==void 0?o:i;let u=new r(a==null?void 0:a.headers);return u.has("apikey")||u.set("apikey",i),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),t(s,Object.assign(Object.assign({},a),{headers:u}))})};function lo(i){return i.replace(/\/$/,"")}function oo(i,e){const{db:n,auth:t,realtime:r,global:s}=i,{db:a,auth:o,realtime:l,global:u}=e;return{db:Object.assign(Object.assign({},a),n),auth:Object.assign(Object.assign({},o),t),realtime:Object.assign(Object.assign({},l),r),global:Object.assign(Object.assign({},u),s)}}const Rs="2.64.2",uo="http://localhost:9999",co="supabase.auth.token",fo={"X-Client-Info":`gotrue-js/${Rs}`},Or=10,mn="X-Supabase-Api-Version",Ns={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function ho(i){return Math.round(Date.now()/1e3)+i}function po(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const ze=()=>typeof document<"u",ft={tested:!1,writable:!1},Mt=()=>{if(!ze())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(ft.tested)return ft.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),ft.tested=!0,ft.writable=!0}catch{ft.tested=!0,ft.writable=!1}return ft.writable};function rn(i){const e={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,s)=>{e[s]=r})}catch{}return n.searchParams.forEach((t,r)=>{e[r]=t}),e}const Ds=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Ot(()=>Promise.resolve().then(()=>qt),void 0,import.meta.url).then(({default:t})=>t(...n)):e=fetch,(...n)=>e(...n)},_o=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Us=async(i,e,n)=>{await i.setItem(e,JSON.stringify(n))},Ht=async(i,e)=>{const n=await i.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},sn=async(i,e)=>{await i.removeItem(e)};function mo(i){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let n="",t,r,s,a,o,l,u,c=0;for(i=i.replace("-","+").replace("_","/");c<i.length;)a=e.indexOf(i.charAt(c++)),o=e.indexOf(i.charAt(c++)),l=e.indexOf(i.charAt(c++)),u=e.indexOf(i.charAt(c++)),t=a<<2|o>>4,r=(o&15)<<4|l>>2,s=(l&3)<<6|u,n=n+String.fromCharCode(t),l!=64&&r!=0&&(n=n+String.fromCharCode(r)),u!=64&&s!=0&&(n=n+String.fromCharCode(s));return n}class en{constructor(){this.promise=new en.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}en.promiseConstructor=Promise;function jr(i){const e=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,n=i.split(".");if(n.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!e.test(n[1]))throw new Error("JWT is not valid: payload is not in base64url format");const t=n[1];return JSON.parse(mo(t))}async function go(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function $o(i,e){return new Promise((t,r)=>{(async()=>{for(let s=0;s<1/0;s++)try{const a=await i(s);if(!e(s,null,a)){t(a);return}}catch(a){if(!e(s,a)){r(a);return}}})()})}function vo(i){return("0"+i.toString(16)).substr(-2)}function bo(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=n.length;let r="";for(let s=0;s<56;s++)r+=n.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,vo).join("")}async function wo(i){const n=new TextEncoder().encode(i),t=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(t);return Array.from(r).map(s=>String.fromCharCode(s)).join("")}function ko(i){return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yo(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await wo(i);return ko(n)}async function wt(i,e,n=!1){const t=bo();let r=t;n&&(r+="/PASSWORD_RECOVERY"),await Us(i,`${e}-code-verifier`,r);const s=await yo(t);return[s,t===s?"plain":"s256"]}const Eo=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function To(i){const e=i.headers.get(mn);if(!e||!e.match(Eo))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}class Pn extends Error{constructor(e,n,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=t}}function pe(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class So extends Pn{constructor(e,n,t){super(e,n,t),this.name="AuthApiError",this.status=n,this.code=t}}function Co(i){return pe(i)&&i.name==="AuthApiError"}class Ms extends Pn{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class mt extends Pn{constructor(e,n,t,r){super(e,t,r),this.name=n,this.status=t}}class ht extends mt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class an extends mt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class zt extends mt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Vt extends mt{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lr extends mt{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class gn extends mt{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function ln(i){return pe(i)&&i.name==="AuthRetryableFetchError"}class Rr extends mt{constructor(e,n,t){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=t}}var Io=function(i,e){var n={};for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(i);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(i,t[r])&&(n[t[r]]=i[t[r]]);return n};const dt=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Po=[502,503,504];async function Nr(i){var e;if(!_o(i))throw new gn(dt(i),0);if(Po.includes(i.status))throw new gn(dt(i),i.status);let n;try{n=await i.json()}catch(s){throw new Ms(dt(s),s)}let t;const r=To(i);if(r&&r.getTime()>=Ns["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?t=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(t=n.error_code),t){if(t==="weak_password")throw new Rr(dt(n),i.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[])}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,a)=>s&&typeof a=="string",!0))throw new Rr(dt(n),i.status,n.weak_password.reasons);throw new So(dt(n),i.status||500,t)}const Ao=(i,e,n,t)=>{const r={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(t),Object.assign(Object.assign({},r),n))};async function be(i,e,n,t){var r;const s=Object.assign({},t==null?void 0:t.headers);s[mn]||(s[mn]=Ns["2024-01-01"].name),t!=null&&t.jwt&&(s.Authorization=`Bearer ${t.jwt}`);const a=(r=t==null?void 0:t.query)!==null&&r!==void 0?r:{};t!=null&&t.redirectTo&&(a.redirect_to=t.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await Oo(i,e,n+o,{headers:s,noResolveJson:t==null?void 0:t.noResolveJson},{},t==null?void 0:t.body);return t!=null&&t.xform?t==null?void 0:t.xform(l):{data:Object.assign({},l),error:null}}async function Oo(i,e,n,t,r,s){const a=Ao(e,t,r,s);let o;try{o=await i(n,Object.assign({},a))}catch(l){throw console.error(l),new gn(dt(l),0)}if(o.ok||await Nr(o),t!=null&&t.noResolveJson)return o;try{return await o.json()}catch(l){await Nr(l)}}function lt(i){var e;let n=null;No(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=ho(i.expires_in)));const t=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:n,user:t},error:null}}function Dr(i){const e=lt(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,t)=>n&&typeof t=="string",!0)&&(e.data.weak_password=i.weak_password),e}function ut(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function jo(i){return{data:i,error:null}}function Lo(i){const{action_link:e,email_otp:n,hashed_token:t,redirect_to:r,verification_type:s}=i,a=Io(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),o={action_link:e,email_otp:n,hashed_token:t,redirect_to:r,verification_type:s},l=Object.assign({},a);return{data:{properties:o,user:l},error:null}}function Ro(i){return i}function No(i){return i.access_token&&i.refresh_token&&i.expires_in}var Do=function(i,e){var n={};for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&e.indexOf(t)<0&&(n[t]=i[t]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(i);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(i,t[r])&&(n[t[r]]=i[t[r]]);return n};class Uo{constructor({url:e="",headers:n={},fetch:t}){this.url=e,this.headers=n,this.fetch=Ds(t),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,n="global"){try{return await be(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(pe(t))return{data:null,error:t};throw t}}async inviteUserByEmail(e,n={}){try{return await be(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:ut})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async generateLink(e){try{const{options:n}=e,t=Do(e,["options"]),r=Object.assign(Object.assign({},t),n);return"newEmail"in t&&(r.new_email=t==null?void 0:t.newEmail,delete r.newEmail),await be(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:Lo,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(pe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await be(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ut})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,t,r,s,a,o,l;try{const u={nextPage:null,lastPage:0,total:0},c=await be(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(t=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&t!==void 0?t:"",per_page:(s=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&s!==void 0?s:""},xform:Ro});if(c.error)throw c.error;const f=await c.json(),d=(a=c.headers.get("x-total-count"))!==null&&a!==void 0?a:0,p=(l=(o=c.headers.get("link"))===null||o===void 0?void 0:o.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(_=>{const g=parseInt(_.split(";")[0].split("=")[1].substring(0,1)),b=JSON.parse(_.split(";")[1].split("=")[1]);u[`${b}Page`]=g}),u.total=parseInt(d)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(pe(u))return{data:{users:[]},error:u};throw u}}async getUserById(e){try{return await be(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ut})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){try{return await be(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:ut})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async deleteUser(e,n=!1){try{return await be(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:ut})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}async _listFactors(e){try{const{data:n,error:t}=await be(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:t}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){try{return{data:await be(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}}const Mo={getItem:i=>Mt()?globalThis.localStorage.getItem(i):null,setItem:(i,e)=>{Mt()&&globalThis.localStorage.setItem(i,e)},removeItem:i=>{Mt()&&globalThis.localStorage.removeItem(i)}};function Ur(i={}){return{getItem:e=>i[e]||null,setItem:(e,n)=>{i[e]=n},removeItem:e=>{delete i[e]}}}function Bo(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const kt={debug:!!(globalThis&&Mt()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Bs extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Fo extends Bs{}async function Ko(i,e,n){kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const t=new globalThis.AbortController;return e>0&&setTimeout(()=>{t.abort(),kt.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:t.signal},async r=>{if(r){kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,r.name);try{return await n()}finally{kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,r.name)}}else{if(e===0)throw kt.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Fo(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(kt.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}})}Bo();const qo={url:uo,storageKey:co,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:fo,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},Nt=30*1e3,Mr=3;async function Br(i,e,n){return await n()}class Kt{constructor(e){var n,t;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kt.nextInstanceID,Kt.nextInstanceID+=1,this.instanceID>0&&ze()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},qo),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new Uo({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Ds(r.fetch),this.lock=r.lock||Br,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:ze()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Ko:this.lock=Br,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Mt()?this.storage=Mo:(this.memoryStorage={},this.storage=Ur(this.memoryStorage)):(this.memoryStorage={},this.storage=Ur(this.memoryStorage)),ze()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(t=this.broadcastChannel)===null||t===void 0||t.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Rs}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){try{const e=ze()?await this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:n,error:t}=await this._getSessionFromURL(e);if(t)return this._debug("#_initialize()","error detecting session from URL",t),(t==null?void 0:t.message)==="Identity is already linked"||(t==null?void 0:t.message)==="Identity is already linked to another user"?{error:t}:(await this._removeSession(),{error:t});const{session:r,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",r,"redirect type",s),await this._saveSession(r),setTimeout(async()=>{s==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(e){return pe(e)?{error:e}:{error:new Ms("Unexpected error during initialization",e)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,t,r;try{await this._removeSession();const s=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(t=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:lt}),{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,t,r;try{await this._removeSession();let s;if("email"in e){const{email:c,password:f,options:d}=e;let p=null,_=null;this.flowType==="pkce"&&([p,_]=await wt(this.storage,this.storageKey)),s=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:d==null?void 0:d.emailRedirectTo,body:{email:c,password:f,data:(n=d==null?void 0:d.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken},code_challenge:p,code_challenge_method:_},xform:lt})}else if("phone"in e){const{phone:c,password:f,options:d}=e;s=await be(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:c,password:f,data:(t=d==null?void 0:d.data)!==null&&t!==void 0?t:{},channel:(r=d==null?void 0:d.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:lt})}else throw new zt("You must provide either an email or phone number and a password");const{data:a,error:o}=s;if(o||!a)return{data:{user:null,session:null},error:o};const l=a.session,u=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(s){if(pe(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{await this._removeSession();let n;if("email"in e){const{email:s,password:a,options:o}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Dr})}else if("phone"in e){const{phone:s,password:a,options:o}=e;n=await be(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Dr})}else throw new zt("You must provide either an email or phone number and a password");const{data:t,error:r}=n;return r?{data:{user:null,session:null},error:r}:!t||!t.session||!t.user?{data:{user:null,session:null},error:new an}:(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({user:t.user,session:t.session},t.weak_password?{weakPassword:t.weak_password}:null),error:r})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,t,r,s;return await this._removeSession(),await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(t=e.options)===null||t===void 0?void 0:t.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async _exchangeCodeForSession(e){const n=await Ht(this.storage,`${this.storageKey}-code-verifier`),[t,r]=(n??"").split("/"),{data:s,error:a}=await be(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:lt});return await sn(this.storage,`${this.storageKey}-code-verifier`),a?{data:{user:null,session:null,redirectType:null},error:a}:!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new an}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:r??null}),error:a})}async signInWithIdToken(e){await this._removeSession();try{const{options:n,provider:t,token:r,access_token:s,nonce:a}=e,o=await be(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:t,id_token:r,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:lt}),{data:l,error:u}=o;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new an}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,t,r,s,a;try{if(await this._removeSession(),"email"in e){const{email:o,options:l}=e;let u=null,c=null;this.flowType==="pkce"&&([u,c]=await wt(this.storage,this.storageKey));const{error:f}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(t=l==null?void 0:l.shouldCreateUser)!==null&&t!==void 0?t:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:c},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:o,options:l}=e,{data:u,error:c}=await be(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(a=l==null?void 0:l.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:c}}throw new zt("You must provide either an email or phone number.")}catch(o){if(pe(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var n,t;try{e.type!=="email_change"&&e.type!=="phone_change"&&await this._removeSession();let r,s;"options"in e&&(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(t=e.options)===null||t===void 0?void 0:t.captchaToken);const{data:a,error:o}=await be(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:r,xform:lt});if(o)throw o;if(!a)throw new Error("An error occurred on token verification.");const l=a.session,u=a.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(r){if(pe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var n,t,r;try{await this._removeSession();let s=null,a=null;return this.flowType==="pkce"&&([s,a]=await wt(this.storage,this.storageKey)),await be(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(t=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&t!==void 0?t:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:a}),headers:this.headers,xform:jo})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:t}=e;if(t)throw t;if(!n)throw new ht;const{error:r}=await be(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(pe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{e.type!="email_change"&&e.type!="phone_change"&&await this._removeSession();const n=`${this.url}/resend`;if("email"in e){const{email:t,type:r,options:s}=e,{error:a}=await be(this.fetch,"POST",n,{headers:this.headers,body:{email:t,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:t,type:r,options:s}=e,{data:a,error:o}=await be(this.fetch,"POST",n,{headers:this.headers,body:{phone:t,type:r,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:o}}throw new zt("You must provide either an email or phone number and a type")}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const t=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await t,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const t=n();for(this.pendingInLock.push((async()=>{try{await t}catch{}})()),await t;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await t}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ht(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const t=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t){if(this.storage.isServer){const a=this.suppressGetSessionWarning;e=new Proxy(e,{get(l,u,c){return!a&&u==="user"&&console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),Reflect.get(l,u,c)}})}return{data:{session:e},error:null}}const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ut}):await this._useSession(async n=>{var t,r,s;const{data:a,error:o}=n;if(o)throw o;return!(!((t=a.session)===null||t===void 0)&&t.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ht}:await be(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0,xform:ut})})}catch(n){if(pe(n))return{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async t=>{const{data:r,error:s}=t;if(s)throw s;if(!r.session)throw new ht;const a=r.session;let o=null,l=null;this.flowType==="pkce"&&e.email!=null&&([o,l]=await wt(this.storage,this.storageKey));const{data:u,error:c}=await be(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:l}),jwt:a.access_token,xform:ut});if(c)throw c;return a.user=u.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(t){if(pe(t))return{data:{user:null},error:t};throw t}}_decodeJWT(e){return jr(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ht;const n=Date.now()/1e3;let t=n,r=!0,s=null;const a=jr(e.access_token);if(a.exp&&(t=a.exp,r=t<=n),r){const{session:o,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!o)return{data:{user:null,session:null},error:null};s=o}else{const{data:o,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:t-n,expires_at:t},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(pe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var t;if(!e){const{data:a,error:o}=n;if(o)throw o;e=(t=a.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new ht;const{session:r,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(pe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e){try{if(!ze())throw new Vt("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Vt("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new Lr("Not a valid PKCE flow url.");const n=rn(window.location.href);if(e){if(!n.code)throw new Lr("No code detected.");const{data:S,error:P}=await this._exchangeCodeForSession(n.code);if(P)throw P;const I=new URL(window.location.href);return I.searchParams.delete("code"),window.history.replaceState(window.history.state,"",I.toString()),{data:{session:S.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Vt(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});const{provider_token:t,provider_refresh_token:r,access_token:s,refresh_token:a,expires_in:o,expires_at:l,token_type:u}=n;if(!s||!o||!a||!u)throw new Vt("No session defined in URL");const c=Math.round(Date.now()/1e3),f=parseInt(o);let d=c+f;l&&(d=parseInt(l));const p=d-c;p*1e3<=Nt&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const _=d-f;c-_>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",_,d,c):c-_<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clok for skew",_,d,c);const{data:g,error:b}=await this._getUser(s);if(b)throw b;const y={provider_token:t,provider_refresh_token:r,access_token:s,expires_in:f,expires_at:d,refresh_token:a,token_type:u,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:y,redirectType:n.type},error:null}}catch(n){if(pe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantFlow(){const e=rn(window.location.href);return!!(ze()&&(e.access_token||e.error_description))}async _isPKCEFlow(){const e=rn(window.location.href),n=await Ht(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var t;const{data:r,error:s}=n;if(s)return{error:s};const a=(t=r.session)===null||t===void 0?void 0:t.access_token;if(a){const{error:o}=await this.admin.signOut(a,e);if(o&&!(Co(o)&&(o.status===404||o.status===401||o.status===403)))return{error:o}}return e!=="others"&&(await this._removeSession(),await sn(this.storage,`${this.storageKey}-code-verifier`),await this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}})}onAuthStateChange(e){const n=po(),t={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,t),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:t}}}async _emitInitialSession(e){return await this._useSession(async n=>{var t,r;try{const{data:{session:s},error:a}=n;if(a)throw a;await((t=this.stateChangeEmitters.get(e))===null||t===void 0?void 0:t.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let t=null,r=null;this.flowType==="pkce"&&([t,r]=await wt(this.storage,this.storageKey,!0));try{return await be(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:t,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(pe(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:t}=await this.getUser();if(t)throw t;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(pe(n))return{data:null,error:n};throw n}}async linkIdentity(e){var n;try{const{data:t,error:r}=await this._useSession(async s=>{var a,o,l,u,c;const{data:f,error:d}=s;if(d)throw d;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(o=e.options)===null||o===void 0?void 0:o.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await be(this.fetch,"GET",p,{headers:this.headers,jwt:(c=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&c!==void 0?c:void 0})});if(r)throw r;return ze()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(t==null?void 0:t.url),{data:{provider:e.provider,url:t==null?void 0:t.url},error:null}}catch(t){if(pe(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession(async n=>{var t,r;const{data:s,error:a}=n;if(a)throw a;return await be(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(t=s.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const t=Date.now();return await $o(async r=>(r>0&&await go(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await be(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:lt})),(r,s)=>{const a=200*Math.pow(2,r);return s&&ln(s)&&Date.now()+a-t<Nt})}catch(t){if(this._debug(n,"error",t),pe(t))return{data:{session:null,user:null},error:t};throw t}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const t=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",t),ze()&&!n.skipBrowserRedirect&&window.location.assign(t),{data:{provider:e,url:t},error:null}}async _recoverAndRefresh(){var e;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const t=await Ht(this.storage,this.storageKey);if(this._debug(n,"session from storage",t),!this._isValidSession(t)){this._debug(n,"session is not valid"),t!==null&&await this._removeSession();return}const r=Math.round(Date.now()/1e3),s=((e=t.expires_at)!==null&&e!==void 0?e:1/0)<r+Or;if(this._debug(n,`session has${s?"":" not"} expired with margin of ${Or}s`),s){if(this.autoRefreshToken&&t.refresh_token){const{error:a}=await this._callRefreshToken(t.refresh_token);a&&(console.error(a),ln(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){this._debug(n,"error",t),console.error(t);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var n,t;if(!e)throw new ht;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new en;const{data:s,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!s.session)throw new ht;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const o={session:s.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(s){if(this._debug(r,"error",s),pe(s)){const a={session:null,error:s};return ln(s)||(await this._removeSession(),await this._notifyAllSubscribers("SIGNED_OUT",null)),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(t=this.refreshingDeferred)===null||t===void 0||t.reject(s),s}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,n,t=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",n,`broadcast = ${t}`);try{this.broadcastChannel&&t&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],a=Array.from(this.stateChangeEmitters.values()).map(async o=>{try{await o.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(a),s.length>0){for(let o=0;o<s.length;o+=1)console.error(s[o]);throw s[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Us(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await sn(this.storage,this.storageKey)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ze()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nt);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:t}}=n;if(!t||!t.refresh_token||!t.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((t.expires_at*1e3-e)/Nt);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Nt}ms, refresh threshold is ${Mr} ticks`),r<=Mr&&await this._callRefreshToken(t.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Bs)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ze()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,t){const r=[`provider=${encodeURIComponent(n)}`];if(t!=null&&t.redirectTo&&r.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&r.push(`scopes=${encodeURIComponent(t.scopes)}`),this.flowType==="pkce"){const[s,a]=await wt(this.storage,this.storageKey),o=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});r.push(o.toString())}if(t!=null&&t.queryParams){const s=new URLSearchParams(t.queryParams);r.push(s.toString())}return t!=null&&t.skipBrowserRedirect&&r.push(`skip_http_redirect=${t.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var t;const{data:r,error:s}=n;return s?{data:null,error:s}:await be(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var t,r;const{data:s,error:a}=n;if(a)return{data:null,error:a};const{data:o,error:l}=await be(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=s==null?void 0:s.session)===null||t===void 0?void 0:t.access_token});return l?{data:null,error:l}:(!((r=o==null?void 0:o.totp)===null||r===void 0)&&r.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(n){if(pe(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var t;const{data:r,error:s}=n;if(s)return{data:null,error:s};const{data:a,error:o}=await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:o})})}catch(n){if(pe(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var t;const{data:r,error:s}=n;return s?{data:null,error:s}:await be(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=r==null?void 0:r.session)===null||t===void 0?void 0:t.access_token})})}catch(n){if(pe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:t}=await this._challenge({factorId:e.factorId});return t?{data:null,error:t}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){const{data:{user:e},error:n}=await this.getUser();if(n)return{data:null,error:n};const t=(e==null?void 0:e.factors)||[],r=t.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:t,totp:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,t;const{data:{session:r},error:s}=e;if(s)return{data:null,error:s};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const a=this._decodeJWT(r.access_token);let o=null;a.aal&&(o=a.aal);let l=o;((t=(n=r.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(l="aal2");const c=a.amr||[];return{data:{currentLevel:o,nextLevel:l,currentAuthenticationMethods:c},error:null}}))}}Kt.nextInstanceID=0;const Ho=Kt;class zo extends Ho{constructor(e){super(e)}}var Vo=function(i,e,n,t){function r(s){return s instanceof n?s:new n(function(a){a(s)})}return new(n||(n=Promise))(function(s,a){function o(c){try{u(t.next(c))}catch(f){a(f)}}function l(c){try{u(t.throw(c))}catch(f){a(f)}}function u(c){c.done?s(c.value):r(c.value).then(o,l)}u((t=t.apply(i,e||[])).next())})};class Go{constructor(e,n,t){var r,s,a;if(this.supabaseUrl=e,this.supabaseKey=n,!e)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const o=lo(e);this.realtimeUrl=`${o}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${o}/auth/v1`,this.storageUrl=`${o}/storage/v1`,this.functionsUrl=`${o}/functions/v1`;const l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,u={db:eo,realtime:no,auth:Object.assign(Object.assign({},to),{storageKey:l}),global:xl},c=oo(t??{},u);this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(s=c.global.headers)!==null&&s!==void 0?s:{},this.auth=this._initSupabaseAuthClient((a=c.auth)!==null&&a!==void 0?a:{},this.headers,c.global.fetch),this.fetch=ao(n,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},c.realtime)),this.rest=new Sn(`${o}/rest/v1`,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new dl(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Xl(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},t={}){return this.rest.rpc(e,n,t)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,n;return Vo(this,void 0,void 0,function*(){const{data:t}=yield this.auth.getSession();return(n=(e=t.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:t,storage:r,storageKey:s,flowType:a,debug:o},l,u){var c;const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new zo({url:this.authUrl,headers:Object.assign(Object.assign({},f),l),storageKey:s,autoRefreshToken:e,persistSession:n,detectSessionInUrl:t,storage:r,flowType:a,debug:o,fetch:u,hasCustomAuthorizationHeader:(c="Authorization"in this.headers)!==null&&c!==void 0?c:!1})}_initRealtimeClient(e){return new Ul(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,t)=>{this._handleTokenChanged(n,"CLIENT",t==null?void 0:t.access_token)})}_handleTokenChanged(e,n,t){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t??null),this.changedAccessToken=t):e==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Jo=(i,e,n)=>new Go(i,e,n),Wo=Jo(ll,al);let Yo=1;const on=()=>(++Yo).toString();let Xo=1;const De=()=>(++Xo).toString();on(),Qe.Male,De(),De(),De(),De(),De(),on(),Qe.Female,De(),De(),De(),De(),on(),Qe.Male,De(),De(),De(),De();class Se extends Error{constructor(e,n){super(e+(n!=null&&n.code?` Code: ${n.code}`:"")),this.diagnostics=n}}const Ue=new el(Wo),Zo=()=>{const{subscribe:i,update:e}=ti({}),n={};let t;const r=(s,a)=>{e(o=>({...o,[s]:{...o[s],...a(o[s])}}))};return{get:s=>(n[s]==null&&(n[s]=Ue.getTrainer(s).then(a=>{var c;if(a==null)return;const o=f=>({info:d=>Ue.updateTrainerInfo(f.writeKey,d).then(()=>{r(s,p=>({...p,info:{...p.info,...d}}))}).catch(p=>{throw xe.show(p.message),p}),retire:()=>Ue.removeTrainer(f.writeKey,f.info.id,f.info.readKey).then(()=>{e(d=>{const{[f.info.readKey]:p,..._}=d;return _})}).catch(d=>{throw xe.show(d.message),d}),pokemon:(d,p={})=>{let _;const g=b=>r(s,y=>{const S=[...y.pokemon],P=S.findIndex(I=>I.id===b.id);return _=S[P],S[P]={...y.pokemon[P],...b},{...y,pokemon:S}});return p.optimistic?(g(d),Ue.updatePokemon(f.writeKey,d).then(()=>{}).catch(b=>{throw g(_),xe.show(b.message),b})):Ue.updatePokemon(f.writeKey,d).then(()=>{g(d)}).catch(b=>{throw xe.show(b.message),b})},moveset:d=>Ue.updateMoveset(f.writeKey,d.id,d.moves).then(p=>{r(s,_=>{const g=[..._.pokemon],b=g.findIndex(y=>y.id===d.id);return g[b]={..._.pokemon[b],moves:p},{..._,pokemon:g}})}).catch(p=>{throw xe.show(p.message),p}),move:(d,p={})=>{let _;const g=b=>{r(s,y=>{const S=y.pokemon.find(I=>I.moves.map(H=>H.id).includes(b.id));if(!S)return y;const P=S.moves.findIndex(I=>I.id===b.id);return _=S.moves[P],S.moves[P]=b,{...y}})};return p.optimistic?(g(d),Ue.updateOneMove(f.writeKey,d).then(()=>{}).catch(b=>{throw g(_),xe.show(b.message),b})):Ue.updateOneMove(f.writeKey,d).then(()=>{g(d)}).catch(b=>{throw xe.show(b.message),b})},addToTeam:d=>Ue.addPokemonToTeam(f.writeKey,f.info.id,d).then(p=>(r(s,_=>{const g=[..._.pokemon,p];return{..._,pokemon:g}}),p)).catch(p=>{throw xe.show(p.message),p}),removeFromTeam:d=>Ue.removePokemon(f.writeKey,d).then(()=>{r(s,p=>{const _=p.pokemon.filter(g=>g.id!==d);return{...p,pokemon:_}})}).catch(p=>{throw xe.show(p.message),p})});let l;((c=a.writeKey)==null?void 0:c.length)>0&&(l=o(a));let u=!1;return{subscribe:f=>i(d=>{f(d[s]??{...a,update:l}),u||(u=!0,e(p=>({...p,[s]:{...a,update:l}})))}),verifyAccess:f=>Ue.verifyWriteKey(a.info,f).then(d=>(d&&r(s,p=>({...p,writeKey:f,update:o({...p,writeKey:f})})),d))}})),n[s]),all:()=>(t==null&&(t=Ue.allTrainers().then(s=>{let a=!1;return{subscribe:o=>i(l=>{o(Object.values(l).map(u=>u.info)),a||(a=!0,e(u=>s.reduce((c,f)=>({[f.readKey]:{info:f,pokemon:[]},...c}),u)))})}})),t),new:s=>Ue.newTrainer(s).then(a=>(r(a.info.readKey,()=>a),a))}},Yt=Zo();function Fr(i,e,n){const t=i.slice();return t[10]=e[n],t}function Qo(i){let e,n="<p>You do not have permission to add pokemon to this trainer.</p>";return{c(){e=w("section"),e.innerHTML=n},l(t){e=k(t,"SECTION",{"data-svelte-h":!0}),ie(e)!=="svelte-lyju69"&&(e.innerHTML=n)},m(t,r){m(t,e,r)},p:x,i:x,o:x,d(t){t&&h(e)}}}function xo(i){let e,n,t="Start typing the pokemon's species, then select from the provided list.",r,s,a,o="Species",l,u,c,f,d,p,_,g;const b=[tu,eu],y=[];function S(P,I){return P[4].length===0&&P[1].length>0?0:1}return f=S(i),d=y[f]=b[f](i),{c(){e=w("section"),n=w("p"),n.textContent=t,r=A(),s=w("div"),a=w("label"),a.textContent=o,l=A(),u=w("input"),c=A(),d.c(),this.h()},l(P){e=k(P,"SECTION",{});var I=j(e);n=k(I,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-1nt5sai"&&(n.textContent=t),r=O(I),s=k(I,"DIV",{class:!0});var H=j(s);a=k(H,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(a)!=="svelte-1ytjvnz"&&(a.textContent=o),l=O(H),u=k(H,"INPUT",{id:!0,type:!0,class:!0}),H.forEach(h),c=O(I),d.l(I),I.forEach(h),this.h()},h(){$(a,"for","species-input"),$(a,"class","font-sm spaced-sm svelte-1d06a77"),$(u,"id","species-input"),$(u,"type","text"),$(u,"class","font-lg svelte-1d06a77"),u.disabled=i[3],$(s,"class","vertical spaced-lg svelte-1d06a77")},m(P,I){m(P,e,I),v(e,n),v(e,r),v(e,s),v(s,a),v(s,l),v(s,u),oe(u,i[1]),v(e,c),y[f].m(e,null),p=!0,_||(g=he(u,"input",i[8]),_=!0)},p(P,I){(!p||I&8)&&(u.disabled=P[3]),I&2&&u.value!==P[1]&&oe(u,P[1]);let H=f;f=S(P),f===H?y[f].p(P,I):(ge(),T(y[H],1,1,()=>{y[H]=null}),$e(),d=y[f],d?d.p(P,I):(d=y[f]=b[f](P),d.c()),E(d,1),d.m(e,null))},i(P){p||(E(d),p=!0)},o(P){T(d),p=!1},d(P){P&&h(e),y[f].d(),_=!1,g()}}}function eu(i){let e,n,t=de(i[4]),r=[];for(let a=0;a<t.length;a+=1)r[a]=Kr(Fr(i,t,a));const s=a=>T(r[a],1,1,()=>{r[a]=null});return{c(){e=w("ul");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){e=k(a,"UL",{class:!0});var o=j(e);for(let l=0;l<r.length;l+=1)r[l].l(o);o.forEach(h),this.h()},h(){$(e,"class","no-list columnated svelte-1d06a77")},m(a,o){m(a,e,o);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);n=!0},p(a,o){if(o&88){t=de(a[4]);let l;for(l=0;l<t.length;l+=1){const u=Fr(a,t,l);r[l]?(r[l].p(u,o),E(r[l],1)):(r[l]=Kr(u),r[l].c(),E(r[l],1),r[l].m(e,null))}for(ge(),l=t.length;l<r.length;l+=1)s(l);$e()}},i(a){if(!n){for(let o=0;o<t.length;o+=1)E(r[o]);n=!0}},o(a){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)T(r[o]);n=!1},d(a){a&&h(e),Pe(r,a)}}}function tu(i){let e,n="No matched pokemon";return{c(){e=w("p"),e.textContent=n,this.h()},l(t){e=k(t,"P",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1bl65jz"&&(e.textContent=n),this.h()},h(){$(e,"class","muted center svelte-1d06a77")},m(t,r){m(t,e,r)},p:x,i:x,o:x,d(t){t&&h(e)}}}function nu(i){let e=i[10].name+"",n;return{c(){n=M(e)},l(t){n=B(t,e)},m(t,r){m(t,n,r)},p(t,r){r&16&&e!==(e=t[10].name+"")&&se(n,e)},d(t){t&&h(n)}}}function Kr(i){let e,n,t,r;return n=new ke({props:{align:"left",width:"full",disabled:i[3],$$slots:{default:[nu]},$$scope:{ctx:i}}}),n.$on("click",function(){vn(i[6](i[10]))&&i[6](i[10]).apply(this,arguments)}),{c(){e=w("li"),L(n.$$.fragment),t=A(),this.h()},l(s){e=k(s,"LI",{class:!0});var a=j(e);R(n.$$.fragment,a),t=O(a),a.forEach(h),this.h()},h(){$(e,"class","spaced-sm svelte-1d06a77")},m(s,a){m(s,e,a),N(n,e,null),v(e,t),r=!0},p(s,a){i=s;const o={};a&8&&(o.disabled=i[3]),a&8208&&(o.$$scope={dirty:a,ctx:i}),n.$set(o)},i(s){r||(E(n.$$.fragment,s),r=!0)},o(s){T(n.$$.fragment,s),r=!1},d(s){s&&h(e),D(n)}}}function ru(i){let e,n,t,r;const s=[xo,Qo],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function su(i){let e,n,t,r;return e=new Je({props:{value:"Add Pokemon"}}),t=new We({props:{title:"Add to "+i[2].info.name+"'s team",$$slots:{default:[ru]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&4&&(o.title="Add to "+s[2].info.name+"'s team"),a&8250&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function iu(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=Ge(c,g=>n(2,a=g)),c),u;Re(i,_t,g=>n(7,u=g)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let f="",d=!1;const p=g=>()=>{var b;n(3,d=!0),(b=a.update)==null||b.addToTeam(g).then(({id:y})=>{qe(`${Te}/trainers?id=${r}&pokemon=${y}`)}).catch(()=>{n(3,d=!1)})};function _(){f=this.value,n(1,f)}return i.$$set=g=>{"trainer"in g&&l(n(0,c=g.trainer))},i.$$.update=()=>{i.$$.dirty&4&&n(5,t=a.update!=null),i.$$.dirty&4&&(r=a.info.readKey),i.$$.dirty&130&&n(4,s=f.length>0?(u==null?void 0:u.filter(xs(f)))??[]:[])},[c,f,a,d,s,t,p,u,_]}class au extends ce{constructor(e){super(),fe(this,e,iu,su,ue,{trainer:0})}}function lu(i){let e,n;return{c(){e=w("a"),n=M("Find by trainer ID >"),this.h()},l(t){e=k(t,"A",{slot:!0,href:!0,class:!0});var r=j(e);n=B(r,"Find by trainer ID >"),r.forEach(h),this.h()},h(){$(e,"slot","link"),$(e,"href",me.trainers(void 0,void 0,Ie.findTrainer)),$(e,"class","dark-font svelte-1nzhjm0")},m(t,r){m(t,e,r),v(e,n)},p:x,d(t){t&&h(e)}}}function ou(i){let e;return{c(){e=M("+ New Trainer")},l(n){e=B(n,"+ New Trainer")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function uu(i){let e,n;return e=new ke({props:{slot:"action",href:Te+"/trainers?action=new-trainer",$$slots:{default:[ou]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&512&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function cu(i){let e,n=i[8].name+"",t,r;return{c(){e=w("a"),t=M(n),this.h()},l(s){e=k(s,"A",{href:!0});var a=j(e);t=B(a,n),a.forEach(h),this.h()},h(){$(e,"href",r=Te+"/trainers?id="+i[8].readKey)},m(s,a){m(s,e,a),v(e,t)},p(s,a){a&256&&n!==(n=s[8].name+"")&&se(t,n),a&256&&r!==(r=Te+"/trainers?id="+s[8].readKey)&&$(e,"href",r)},d(s){s&&h(e)}}}function fu(i){let e,n;return e=new ys.Cell({props:{primary:!0,$$slots:{default:[cu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&768&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function hu(i){let e,n;return e=new ys.Row({props:{interactive:!0,mainBg:"var(--skin-bg-dark)",$$slots:{default:[fu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&768&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function du(i){let e,n,t,r,s,a,o,l,u;e=new Ss({props:{title:"Trainer List",$$slots:{action:[uu],link:[lu]},$$scope:{ctx:i}}});function c(_){i[6](_)}let f={id:"filter-pokemon",label:"Search",matched:i[3].length,max:i[2].length};i[1]!==void 0&&(f.value=i[1]),r=new bs({props:f}),Ct.push(()=>At(r,"value",c));function d(_){i[7](_)}let p={items:i[3],headers:[{key:"name",name:"Name",ratio:1,sort:i[5](pu)}],$$slots:{default:[hu,({item:_})=>({8:_}),({item:_})=>_?256:0]},$$scope:{ctx:i}};return i[4]!==void 0&&(p.currentSorter=i[4]),o=new Ws({props:p}),Ct.push(()=>At(o,"currentSorter",d)),{c(){L(e.$$.fragment),n=A(),t=w("div"),L(r.$$.fragment),a=A(),L(o.$$.fragment),this.h()},l(_){R(e.$$.fragment,_),n=O(_),t=k(_,"DIV",{class:!0});var g=j(t);R(r.$$.fragment,g),g.forEach(h),a=O(_),R(o.$$.fragment,_),this.h()},h(){$(t,"class","space-bottom svelte-1nzhjm0")},m(_,g){N(e,_,g),m(_,n,g),m(_,t,g),N(r,t,null),m(_,a,g),N(o,_,g),u=!0},p(_,[g]){const b={};g&512&&(b.$$scope={dirty:g,ctx:_}),e.$set(b);const y={};g&8&&(y.matched=_[3].length),g&4&&(y.max=_[2].length),!s&&g&2&&(s=!0,y.value=_[1],It(()=>s=!1)),r.$set(y);const S={};g&8&&(S.items=_[3]),g&768&&(S.$$scope={dirty:g,ctx:_}),!l&&g&16&&(l=!0,S.currentSorter=_[4],It(()=>l=!1)),o.$set(S)},i(_){u||(E(e.$$.fragment,_),E(r.$$.fragment,_),E(o.$$.fragment,_),u=!0)},o(_){T(e.$$.fragment,_),T(r.$$.fragment,_),T(o.$$.fragment,_),u=!1},d(_){_&&(h(n),h(t),h(a)),D(e,_),D(r),D(o,_)}}}const pu=i=>i.name;function _u(i,e,n){let t,r,s,a=x,o=()=>(a(),a=Ge(u,p=>n(2,s=p)),u),l;Re(i,Fn,p=>n(1,r=p)),Re(i,Kn,p=>n(4,l=p)),i.$$.on_destroy.push(()=>a());let{trainers:u}=e;o();const c=p=>(_,g)=>p(_).localeCompare(p(g));function f(p){r=p,Fn.set(r)}function d(p){l=p,Kn.set(l)}return i.$$set=p=>{"trainers"in p&&o(n(0,u=p.trainers))},i.$$.update=()=>{i.$$.dirty&6&&n(3,t=s.filter(p=>p.name.toLocaleLowerCase().includes(r.toLocaleLowerCase())))},[u,r,s,t,l,c,f,d]}class mu extends ce{constructor(e){super(),fe(this,e,_u,du,ue,{trainers:0})}}function qr(i){let e,n,t,r;return t=new at({props:{caption:i[1]}}),{c(){e=w("div"),n=w("div"),L(t.$$.fragment),this.h()},l(s){e=k(s,"DIV",{class:!0,"aria-live":!0});var a=j(e);n=k(a,"DIV",{class:!0});var o=j(n);R(t.$$.fragment,o),o.forEach(h),a.forEach(h),this.h()},h(){$(n,"class","fixed svelte-1mvnop4"),$(e,"class","center-overlay svelte-1mvnop4"),$(e,"aria-live","assertive")},m(s,a){m(s,e,a),v(e,n),N(t,n,null),r=!0},p(s,a){const o={};a&2&&(o.caption=s[1]),t.$set(o)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){T(t.$$.fragment,s),r=!1},d(s){s&&h(e),D(t)}}}function gu(i){let e,n,t,r;const s=i[3].default,a=et(s,i,i[2],null);let o=i[0]&&qr(i);return{c(){e=w("div"),n=w("div"),a&&a.c(),t=A(),o&&o.c(),this.h()},l(l){e=k(l,"DIV",{class:!0});var u=j(e);n=k(u,"DIV",{class:!0});var c=j(n);a&&a.l(c),c.forEach(h),t=O(u),o&&o.l(u),u.forEach(h),this.h()},h(){$(n,"class","svelte-1mvnop4"),St(n,"muted",i[0]),$(e,"class","relative svelte-1mvnop4")},m(l,u){m(l,e,u),v(e,n),a&&a.m(n,null),v(e,t),o&&o.m(e,null),r=!0},p(l,[u]){a&&a.p&&(!r||u&4)&&tt(a,s,l,l[2],r?rt(s,l[2],u,null):nt(l[2]),null),(!r||u&1)&&St(n,"muted",l[0]),l[0]?o?(o.p(l,u),u&1&&E(o,1)):(o=qr(l),o.c(),E(o,1),o.m(e,null)):o&&(ge(),T(o,1,1,()=>{o=null}),$e())},i(l){r||(E(a,l),E(o),r=!0)},o(l){T(a,l),T(o),r=!1},d(l){l&&h(e),a&&a.d(l),o&&o.d()}}}function $u(i,e,n){let{$$slots:t={},$$scope:r}=e,{saving:s}=e,{caption:a="Saving..."}=e;return i.$$set=o=>{"saving"in o&&n(0,s=o.saving),"caption"in o&&n(1,a=o.caption),"$$scope"in o&&n(2,r=o.$$scope)},[s,a,r,t]}class ct extends ce{constructor(e){super(),fe(this,e,$u,gu,ue,{saving:0,caption:1})}}function vu(i){let e,n,t,r,s,a,o;const l=i[3].default,u=et(l,i,i[2],null);return{c(){e=w("fieldset"),n=w("legend"),t=w("span"),r=M(i[0]),s=A(),a=w("div"),u&&u.c(),this.h()},l(c){e=k(c,"FIELDSET",{class:!0});var f=j(e);n=k(f,"LEGEND",{class:!0});var d=j(n);t=k(d,"SPAN",{class:!0});var p=j(t);r=B(p,i[0]),p.forEach(h),d.forEach(h),s=O(f),a=k(f,"DIV",{class:!0});var _=j(a);u&&u.l(_),_.forEach(h),f.forEach(h),this.h()},h(){$(t,"class","unskew svelte-1dpvf4s"),$(n,"class","svelte-1dpvf4s"),$(a,"class","grid svelte-1dpvf4s"),$(e,"class","svelte-1dpvf4s"),we(e,"--columns",i[1])},m(c,f){m(c,e,f),v(e,n),v(n,t),v(t,r),v(e,s),v(e,a),u&&u.m(a,null),o=!0},p(c,[f]){(!o||f&1)&&se(r,c[0]),u&&u.p&&(!o||f&4)&&tt(u,l,c,c[2],o?rt(l,c[2],f,null):nt(c[2]),null),f&2&&we(e,"--columns",c[1])},i(c){o||(E(u,c),o=!0)},o(c){T(u,c),o=!1},d(c){c&&h(e),u&&u.d(c)}}}function bu(i,e,n){let{$$slots:t={},$$scope:r}=e,{title:s}=e,{columns:a=1}=e;return i.$$set=o=>{"title"in o&&n(0,s=o.title),"columns"in o&&n(1,a=o.columns),"$$scope"in o&&n(2,r=o.$$scope)},[s,a,r,t]}class Ke extends ce{constructor(e){super(),fe(this,e,bu,vu,ue,{title:0,columns:1})}}function wu(i){let e,n="Name",t,r,s,a,o="Description",l,u,c,f;return{c(){e=w("label"),e.textContent=n,t=A(),r=w("input"),s=A(),a=w("label"),a.textContent=o,l=A(),u=w("textarea"),this.h()},l(d){e=k(d,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-10tkgu3"&&(e.textContent=n),t=O(d),r=k(d,"INPUT",{name:!0,id:!0,type:!0}),s=O(d),a=k(d,"LABEL",{for:!0,"data-svelte-h":!0}),ie(a)!=="svelte-8xwm31"&&(a.textContent=o),l=O(d),u=k(d,"TEXTAREA",{name:!0,id:!0,rows:!0}),j(u).forEach(h),this.h()},h(){$(e,"for","name-input"),$(r,"name","name"),r.required=!0,$(r,"id","name-input"),$(r,"type","text"),r.disabled=i[3],$(a,"for","description-input"),we(a,"place-self","start"),$(u,"name","description"),$(u,"id","description-input"),$(u,"rows","6"),u.disabled=i[3]},m(d,p){m(d,e,p),m(d,t,p),m(d,r,p),oe(r,i[1]),m(d,s,p),m(d,a,p),m(d,l,p),m(d,u,p),oe(u,i[2]),c||(f=[he(r,"input",i[6]),he(u,"input",i[7])],c=!0)},p(d,p){p&8&&(r.disabled=d[3]),p&2&&r.value!==d[1]&&oe(r,d[1]),p&8&&(u.disabled=d[3]),p&4&&oe(u,d[2])},d(d){d&&(h(e),h(t),h(r),h(s),h(a),h(l),h(u)),c=!1,st(f)}}}function ku(i){let e;return{c(){e=M("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function yu(i){let e;return{c(){e=M("Finish!")},l(n){e=B(n,"Finish!")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Eu(i){let e,n,t,r;return e=new ke({props:{variant:"ghost",disabled:i[3],$$slots:{default:[ku]},$$scope:{ctx:i}}}),e.$on("click",i[5]),t=new ke({props:{type:"submit",disabled:i[3],$$slots:{default:[yu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&8&&(o.disabled=s[3]),a&256&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&8&&(l.disabled=s[3]),a&256&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function Tu(i){let e,n,t,r,s,a,o;return n=new Ke({props:{title:"Basic Info",$$slots:{default:[wu]},$$scope:{ctx:i}}}),r=new Le({props:{$$slots:{default:[Eu]},$$scope:{ctx:i}}}),{c(){e=w("form"),L(n.$$.fragment),t=A(),L(r.$$.fragment)},l(l){e=k(l,"FORM",{});var u=j(e);R(n.$$.fragment,u),t=O(u),R(r.$$.fragment,u),u.forEach(h)},m(l,u){m(l,e,u),N(n,e,null),v(e,t),N(r,e,null),s=!0,a||(o=he(e,"submit",Lt(i[4])),a=!0)},p(l,u){const c={};u&270&&(c.$$scope={dirty:u,ctx:l}),n.$set(c);const f={};u&264&&(f.$$scope={dirty:u,ctx:l}),r.$set(f)},i(l){s||(E(n.$$.fragment,l),E(r.$$.fragment,l),s=!0)},o(l){T(n.$$.fragment,l),T(r.$$.fragment,l),s=!1},d(l){l&&h(e),D(n),D(r),a=!1,o()}}}function Su(i){let e,n,t;return n=new ct({props:{saving:i[0],$$slots:{default:[Tu]},$$scope:{ctx:i}}}),{c(){e=w("section"),L(n.$$.fragment)},l(r){e=k(r,"SECTION",{});var s=j(e);R(n.$$.fragment,s),s.forEach(h)},m(r,s){m(r,e,s),N(n,e,null),t=!0},p(r,s){const a={};s&1&&(a.saving=r[0]),s&270&&(a.$$scope={dirty:s,ctx:r}),n.$set(a)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){T(n.$$.fragment,r),t=!1},d(r){r&&h(e),D(n)}}}function Cu(i){let e,n,t,r;return e=new Je({props:{value:"Create Trainer"}}),t=new We({props:{title:"Create a New Trainer",$$slots:{default:[Su]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&271&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function Iu(i,e,n){let t,r="",s="",a=!1;const o=()=>{n(0,a=!0),Yt.new({name:r,description:s}).then(({info:f})=>{qe(`${Te}/trainers?id=${f.readKey}`)}).catch(()=>{n(0,a=!1)})},l=()=>{qe(`${Te}/trainers`)};function u(){r=this.value,n(1,r)}function c(){s=this.value,n(2,s)}return i.$$.update=()=>{i.$$.dirty&1&&n(3,t=a)},[a,r,s,t,o,l,u,c]}class Pu extends ce{constructor(e){super(),fe(this,e,Iu,Cu,ue,{})}}function Au(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ou(i){let e,n;return e=new We({props:{title:"Remove "+i[2].nickname+"?",$$slots:{default:[Fu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.title="Remove "+t[2].nickname+"?"),r&636&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ju(i){let e,n,t="You do not have permission to remove this pokemon.",r,s,a;return s=new Le({props:{$$slots:{default:[Nu]},$$scope:{ctx:i}}}),{c(){e=w("section"),n=w("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=k(o,"SECTION",{});var l=j(e);n=k(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-tjgn9a"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(h)},m(o,l){m(o,e,l),v(e,n),v(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&524&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&h(e),D(s)}}}function Lu(i){let e,n;return e=new ct({props:{saving:i[4],$$slots:{default:[Bu]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.saving=t[4]),r&556&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ru(i){let e;return{c(){e=M("Go Back")},l(n){e=B(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Nu(i){let e,n;return e=new ke({props:{href:Te+"/trainers?id="+i[3].info.readKey+"&pokemon="+i[2].id,$$slots:{default:[Ru]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&12&&(s.href=Te+"/trainers?id="+t[3].info.readKey+"&pokemon="+t[2].id),r&512&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Hr(i){let e,n,t;return n=new vs({props:{media:i[5].media,alt:i[5].name}}),{c(){e=w("p"),L(n.$$.fragment),this.h()},l(r){e=k(r,"P",{class:!0});var s=j(e);R(n.$$.fragment,s),s.forEach(h),this.h()},h(){$(e,"class","centered greyscale svelte-li4qwo")},m(r,s){m(r,e,s),N(n,e,null),t=!0},p(r,s){const a={};s&32&&(a.media=r[5].media),s&32&&(a.alt=r[5].name),n.$set(a)},i(r){t||(E(n.$$.fragment,r),t=!0)},o(r){T(n.$$.fragment,r),t=!1},d(r){r&&h(e),D(n)}}}function Du(i){let e;return{c(){e=M("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Uu(i){let e;return{c(){e=M("Delete")},l(n){e=B(n,"Delete")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Mu(i){let e,n,t,r;return e=new ke({props:{href:Te+"/trainers?id="+i[3].info.readKey+"&pokemon="+i[2].id,variant:"ghost",$$slots:{default:[Du]},$$scope:{ctx:i}}}),t=new ke({props:{variant:"danger",$$slots:{default:[Uu]},$$scope:{ctx:i}}}),t.$on("click",i[7]),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&12&&(o.href=Te+"/trainers?id="+s[3].info.readKey+"&pokemon="+s[2].id),a&512&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&512&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function Bu(i){var S;let e,n,t,r=i[2].nickname+"",s,a,o=i[3].info.name+"",l,u,c,f,d="Removal is permanent and cannot be undone!",p,_,g,b,y=((S=i[5].media)==null?void 0:S.main)&&Hr(i);return g=new Le({props:{$$slots:{default:[Mu]},$$scope:{ctx:i}}}),{c(){e=w("section"),n=w("p"),t=M("Are you sure you want to remove "),s=M(r),a=M(" from "),l=M(o),u=M("'s team?"),c=A(),f=w("p"),f.textContent=d,p=A(),y&&y.c(),_=A(),L(g.$$.fragment)},l(P){e=k(P,"SECTION",{});var I=j(e);n=k(I,"P",{});var H=j(n);t=B(H,"Are you sure you want to remove "),s=B(H,r),a=B(H," from "),l=B(H,o),u=B(H,"'s team?"),H.forEach(h),c=O(I),f=k(I,"P",{"data-svelte-h":!0}),ie(f)!=="svelte-raeweb"&&(f.textContent=d),p=O(I),y&&y.l(I),_=O(I),R(g.$$.fragment,I),I.forEach(h)},m(P,I){m(P,e,I),v(e,n),v(n,t),v(n,s),v(n,a),v(n,l),v(n,u),v(e,c),v(e,f),v(e,p),y&&y.m(e,null),v(e,_),N(g,e,null),b=!0},p(P,I){var G;(!b||I&4)&&r!==(r=P[2].nickname+"")&&se(s,r),(!b||I&8)&&o!==(o=P[3].info.name+"")&&se(l,o),(G=P[5].media)!=null&&G.main?y?(y.p(P,I),I&32&&E(y,1)):(y=Hr(P),y.c(),E(y,1),y.m(e,_)):y&&(ge(),T(y,1,1,()=>{y=null}),$e());const H={};I&524&&(H.$$scope={dirty:I,ctx:P}),g.$set(H)},i(P){b||(E(y),E(g.$$.fragment,P),b=!0)},o(P){T(y),T(g.$$.fragment,P),b=!1},d(P){P&&h(e),y&&y.d(),D(g)}}}function Fu(i){let e,n,t,r;const s=[Lu,ju],a=[];function o(l,u){return l[6]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function Ku(i){let e,n,t,r;const s=[Ou,Au],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function qu(i){let e,n;return e=new Qt({props:{trainer:i[3],id:i[1],titlePrefix:"Remove",$$slots:{default:[Ku]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&8&&(s.trainer=t[3]),r&2&&(s.id=t[1]),r&636&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Hu(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=Ge(c,_=>n(3,a=_)),c),u;Re(i,_t,_=>n(8,u=_)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{id:f}=e,d=!1;const p=()=>{var _;n(4,d=!0),(_=a.update)==null||_.removeFromTeam(f).then(()=>{qe(`${Te}/trainers?id=${a.info.readKey}`)}).catch(()=>{n(4,d=!1)})};return i.$$set=_=>{"trainer"in _&&l(n(0,c=_.trainer)),"id"in _&&n(1,f=_.id)},i.$$.update=()=>{i.$$.dirty&8&&n(6,t=a.update!=null),i.$$.dirty&10&&n(2,r=a.pokemon.find(_=>_.id===f)),i.$$.dirty&260&&n(5,s=u==null?void 0:u.find(_=>_.id===(r==null?void 0:r.pokemonId)))},[c,f,r,a,d,s,t,p,u]}class zu extends ce{constructor(e){super(),fe(this,e,Hu,qu,ue,{trainer:0,id:1})}}function Vu(i,e,n){const t=i.slice();return t[6]=e[n],t}function Gu(i){let e,n;return{c(){e=w("option"),n=M(i[6]),this.h()},l(t){e=k(t,"OPTION",{});var r=j(e);n=B(r,i[6]),r.forEach(h),this.h()},h(){e.__value=i[6],oe(e,e.__value)},m(t,r){m(t,e,r),v(e,n)},p:x,d(t){t&&h(e)}}}function zr(i){let e,n,t,r,s,a,o,l,u,c,f;return{c(){e=w("span"),n=A(),t=w("span"),r=w("label"),s=M("Specify:"),o=A(),l=w("input"),this.h()},l(d){e=k(d,"SPAN",{}),j(e).forEach(h),n=O(d),t=k(d,"SPAN",{class:!0});var p=j(t);r=k(p,"LABEL",{for:!0});var _=j(r);s=B(_,"Specify:"),_.forEach(h),o=O(p),l=k(p,"INPUT",{class:!0,id:!0,type:!0}),p.forEach(h),this.h()},h(){$(r,"for",a=i[2]+"-custom"),$(l,"class","full-width"),$(l,"id",u=i[2]+"-custom"),$(l,"type","text"),l.disabled=i[3],$(t,"class","hrow")},m(d,p){m(d,e,p),m(d,n,p),m(d,t,p),v(t,r),v(r,s),v(t,o),v(t,l),oe(l,i[1]),c||(f=he(l,"input",i[5]),c=!0)},p(d,p){p&4&&a!==(a=d[2]+"-custom")&&$(r,"for",a),p&4&&u!==(u=d[2]+"-custom")&&$(l,"id",u),p&8&&(l.disabled=d[3]),p&2&&l.value!==d[1]&&oe(l,d[1])},d(d){d&&(h(e),h(n),h(t)),c=!1,f()}}}function Ju(i){let e,n,t,r,s,a="Other",o,l,u,c,f=de(fn),d=[];for(let _=0;_<f.length;_+=1)d[_]=Gu(Vu(i,f,_));let p=i[0]==="other"&&zr(i);return{c(){e=w("label"),n=M("Nature"),t=A(),r=w("select");for(let _=0;_<d.length;_+=1)d[_].c();s=w("option"),s.textContent=a,o=A(),p&&p.c(),l=ne(),this.h()},l(_){e=k(_,"LABEL",{for:!0});var g=j(e);n=B(g,"Nature"),g.forEach(h),t=O(_),r=k(_,"SELECT",{id:!0,class:!0});var b=j(r);for(let y=0;y<d.length;y+=1)d[y].l(b);s=k(b,"OPTION",{"data-svelte-h":!0}),ie(s)!=="svelte-902jce"&&(s.textContent=a),b.forEach(h),o=O(_),p&&p.l(_),l=ne(),this.h()},h(){$(e,"for",i[2]),s.__value="other",oe(s,s.__value),$(r,"id",i[2]),$(r,"class","cap"),r.disabled=i[3],i[0]===void 0&&Bt(()=>i[4].call(r))},m(_,g){m(_,e,g),v(e,n),m(_,t,g),m(_,r,g);for(let b=0;b<d.length;b+=1)d[b]&&d[b].m(r,null);v(r,s),Xe(r,i[0],!0),m(_,o,g),p&&p.m(_,g),m(_,l,g),u||(c=he(r,"change",i[4]),u=!0)},p(_,[g]){g&4&&$(e,"for",_[2]),g&4&&$(r,"id",_[2]),g&8&&(r.disabled=_[3]),g&1&&Xe(r,_[0]),_[0]==="other"?p?p.p(_,g):(p=zr(_),p.c(),p.m(l.parentNode,l)):p&&(p.d(1),p=null)},i:x,o:x,d(_){_&&(h(e),h(t),h(r),h(o),h(l)),Pe(d,_),p&&p.d(_),u=!1,c()}}}function Wu(i,e,n){let{id:t}=e,{value:r}=e,{custom:s}=e,{disabled:a=!1}=e;function o(){r=Ft(this),n(0,r)}function l(){s=this.value,n(1,s)}return i.$$set=u=>{"id"in u&&n(2,t=u.id),"value"in u&&n(0,r=u.value),"custom"in u&&n(1,s=u.custom),"disabled"in u&&n(3,a=u.disabled)},[r,s,t,a,o,l]}class Yu extends ce{constructor(e){super(),fe(this,e,Wu,Ju,ue,{id:2,value:0,custom:1,disabled:3})}}function Vr(i,e,n){const t=i.slice();return t[9]=e[n],t}function Gr(i){let e,n=i[9].name+"",t,r;return{c(){e=w("option"),t=M(n),this.h()},l(s){e=k(s,"OPTION",{});var a=j(e);t=B(a,n),a.forEach(h),this.h()},h(){e.__value=r=i[9].id,oe(e,e.__value)},m(s,a){m(s,e,a),v(e,t)},p(s,a){a&4&&n!==(n=s[9].name+"")&&se(t,n),a&4&&r!==(r=s[9].id)&&(e.__value=r,oe(e,e.__value))},d(s){s&&h(e)}}}function Xu(i){let e;return{c(){e=M("Remove")},l(n){e=B(n,"Remove")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Zu(i){let e,n,t,r,s,a,o,l,u,c,f,d,p,_,g,b,y,S,P,I,H,G,F,U,K,re,Y=de(i[2]??[]),X=[];for(let z=0;z<Y.length;z+=1)X[z]=Gr(Vr(i,Y,z));return u=new ke({props:{$$slots:{default:[Xu]},$$scope:{ctx:i}}}),u.$on("click",i[4]),{c(){e=w("label"),n=M("Move"),r=A(),s=w("div"),a=w("select");for(let z=0;z<X.length;z+=1)X[z].c();l=A(),L(u.$$.fragment),c=A(),f=w("label"),d=M("Max PP"),_=A(),g=w("input"),y=A(),S=w("label"),P=M("Notes"),H=A(),G=w("textarea"),this.h()},l(z){e=k(z,"LABEL",{for:!0});var C=j(e);n=B(C,"Move"),C.forEach(h),r=O(z),s=k(z,"DIV",{class:!0});var V=j(s);a=k(V,"SELECT",{id:!0});var W=j(a);for(let q=0;q<X.length;q+=1)X[q].l(W);W.forEach(h),l=O(V),R(u.$$.fragment,V),V.forEach(h),c=O(z),f=k(z,"LABEL",{for:!0});var Q=j(f);d=B(Q,"Max PP"),Q.forEach(h),_=O(z),g=k(z,"INPUT",{id:!0,type:!0}),y=O(z),S=k(z,"LABEL",{for:!0});var ee=j(S);P=B(ee,"Notes"),ee.forEach(h),H=O(z),G=k(z,"TEXTAREA",{id:!0,rows:!0}),j(G).forEach(h),this.h()},h(){$(e,"for",t="move-name-input-"+i[0].id),$(a,"id",o="move-name-input-"+i[0].id),i[0].moveId===void 0&&Bt(()=>i[5].call(a)),we(a,"flex","1"),$(s,"class","flex-row svelte-uv9pcx"),$(f,"for",p="move-pp-input-"+i[0].id),$(g,"id",b="move-pp-input-"+i[0].id),$(g,"type","number"),g.disabled=i[1],$(S,"for",I="move-notes-input-"+i[0].id),we(S,"place-self","start"),$(G,"id",F="move-notes-input-"+i[0].id),$(G,"rows","5"),we(G,"margin-block-end","1em")},m(z,C){m(z,e,C),v(e,n),m(z,r,C),m(z,s,C),v(s,a);for(let V=0;V<X.length;V+=1)X[V]&&X[V].m(a,null);Xe(a,i[0].moveId,!0),v(s,l),N(u,s,null),m(z,c,C),m(z,f,C),v(f,d),m(z,_,C),m(z,g,C),oe(g,i[0].pp.max),m(z,y,C),m(z,S,C),v(S,P),m(z,H,C),m(z,G,C),oe(G,i[0].notes),U=!0,K||(re=[he(a,"change",i[5]),he(a,"change",i[3]),he(g,"input",i[6]),he(G,"input",i[7])],K=!0)},p(z,[C]){if((!U||C&5&&t!==(t="move-name-input-"+z[0].id))&&$(e,"for",t),C&4){Y=de(z[2]??[]);let W;for(W=0;W<Y.length;W+=1){const Q=Vr(z,Y,W);X[W]?X[W].p(Q,C):(X[W]=Gr(Q),X[W].c(),X[W].m(a,null))}for(;W<X.length;W+=1)X[W].d(1);X.length=Y.length}(!U||C&5&&o!==(o="move-name-input-"+z[0].id))&&$(a,"id",o),C&5&&Xe(a,z[0].moveId);const V={};C&4096&&(V.$$scope={dirty:C,ctx:z}),u.$set(V),(!U||C&5&&p!==(p="move-pp-input-"+z[0].id))&&$(f,"for",p),(!U||C&5&&b!==(b="move-pp-input-"+z[0].id))&&$(g,"id",b),(!U||C&2)&&(g.disabled=z[1]),C&5&&Ze(g.value)!==z[0].pp.max&&oe(g,z[0].pp.max),(!U||C&5&&I!==(I="move-notes-input-"+z[0].id))&&$(S,"for",I),(!U||C&5&&F!==(F="move-notes-input-"+z[0].id))&&$(G,"id",F),C&5&&oe(G,z[0].notes)},i(z){U||(E(u.$$.fragment,z),U=!0)},o(z){T(u.$$.fragment,z),U=!1},d(z){z&&(h(e),h(r),h(s),h(c),h(f),h(_),h(g),h(y),h(S),h(H),h(G)),Pe(X,z),D(u),K=!1,st(re)}}}function Qu(i,e,n){let t;Re(i,wn,d=>n(2,t=d));const r=it();let{move:s}=e,{disabled:a=!1}=e;const o=()=>{var p;const d=((p=t.find(_=>_.id===s.moveId))==null?void 0:p.pp)??0;n(0,s.pp.current=d,s),n(0,s.pp.max=d,s)},l=()=>{r("remove")};function u(){s.moveId=Ft(this),n(0,s)}function c(){s.pp.max=Ze(this.value),n(0,s)}function f(){s.notes=this.value,n(0,s)}return i.$$set=d=>{"move"in d&&n(0,s=d.move),"disabled"in d&&n(1,a=d.disabled)},[s,a,t,o,l,u,c,f]}class xu extends ce{constructor(e){super(),fe(this,e,Qu,Zu,ue,{move:0,disabled:1})}}function Jr(i,e,n){const t=i.slice();return t[8]=e[n],t}function Wr(i,e,n){const t=i.slice();return t[8]=e[n],t}function ec(i,e,n){const t=i.slice();return t[8]=e[n],t}function tc(i){let e,n;return{c(){e=w("option"),n=M(i[8]),this.h()},l(t){e=k(t,"OPTION",{class:!0});var r=j(e);n=B(r,i[8]),r.forEach(h),this.h()},h(){e.__value=i[8],oe(e,e.__value),$(e,"class","svelte-18pcmkd")},m(t,r){m(t,e,r),v(e,n)},p:x,d(t){t&&h(e)}}}function Yr(i){let e,n,t;return{c(){e=w("option"),n=M(i[8]),this.h()},l(r){e=k(r,"OPTION",{class:!0});var s=j(e);n=B(s,i[8]),s.forEach(h),this.h()},h(){e.__value=i[8],oe(e,e.__value),e.disabled=t=i[8]===i[1],$(e,"class","svelte-18pcmkd")},m(r,s){m(r,e,s),v(e,n)},p(r,s){s&2&&t!==(t=r[8]===r[1])&&(e.disabled=t)},d(r){r&&h(e)}}}function Xr(i){let e,n,t,r,s,a,o,l,u,c;return{c(){e=w("input"),s=A(),a=w("label"),o=M(i[8]),this.h()},l(f){e=k(f,"INPUT",{id:!0,type:!0}),s=O(f),a=k(f,"LABEL",{for:!0,class:!0});var d=j(a);o=B(d,i[8]),d.forEach(h),this.h()},h(){$(e,"id",n=i[0]+"-checkbox-"+i[8]),$(e,"type","checkbox"),e.value=i[8],e.disabled=t=i[8]===i[1]||i[8]===i[2],e.checked=r=i[3].includes(i[8])||i[8]===i[1]||i[8]===i[2],$(a,"for",l=i[0]+"-checkbox-"+i[8]),$(a,"class","cap")},m(f,d){m(f,e,d),m(f,s,d),m(f,a,d),v(a,o),u||(c=he(e,"change",i[4]),u=!0)},p(f,d){d&1&&n!==(n=f[0]+"-checkbox-"+f[8])&&$(e,"id",n),d&6&&t!==(t=f[8]===f[1]||f[8]===f[2])&&(e.disabled=t),d&14&&r!==(r=f[3].includes(f[8])||f[8]===f[1]||f[8]===f[2])&&(e.checked=r),d&1&&l!==(l=f[0]+"-checkbox-"+f[8])&&$(a,"for",l)},d(f){f&&(h(e),h(s),h(a)),u=!1,c()}}}function nc(i){let e,n,t,r,s,a,o,l,u,c,f,d,p,_,g,b,y,S,P="Additional Types",I,H,G,F,U=de(yt),K=[];for(let C=0;C<U.length;C+=1)K[C]=tc(ec(i,U,C));let re=de(yt),Y=[];for(let C=0;C<re.length;C+=1)Y[C]=Yr(Wr(i,re,C));let X=de(yt),z=[];for(let C=0;C<X.length;C+=1)z[C]=Xr(Jr(i,X,C));return{c(){e=w("label"),n=M("Primary"),r=A(),s=w("select");for(let C=0;C<K.length;C+=1)K[C].c();o=A(),l=w("label"),u=M("Secondary"),f=A(),d=w("select"),p=w("option"),_=M("- None -");for(let C=0;C<Y.length;C+=1)Y[C].c();b=A(),y=w("fieldset"),S=w("legend"),S.textContent=P,I=A(),H=w("div");for(let C=0;C<z.length;C+=1)z[C].c();this.h()},l(C){e=k(C,"LABEL",{for:!0});var V=j(e);n=B(V,"Primary"),V.forEach(h),r=O(C),s=k(C,"SELECT",{id:!0});var W=j(s);for(let J=0;J<K.length;J+=1)K[J].l(W);W.forEach(h),o=O(C),l=k(C,"LABEL",{for:!0});var Q=j(l);u=B(Q,"Secondary"),Q.forEach(h),f=O(C),d=k(C,"SELECT",{id:!0});var ee=j(d);p=k(ee,"OPTION",{class:!0});var q=j(p);_=B(q,"- None -"),q.forEach(h);for(let J=0;J<Y.length;J+=1)Y[J].l(ee);ee.forEach(h),b=O(C),y=k(C,"FIELDSET",{});var Z=j(y);S=k(Z,"LEGEND",{"data-svelte-h":!0}),ie(S)!=="svelte-1aammnk"&&(S.textContent=P),I=O(Z),H=k(Z,"DIV",{class:!0});var te=j(H);for(let J=0;J<z.length;J+=1)z[J].l(te);te.forEach(h),Z.forEach(h),this.h()},h(){$(e,"for",t=i[0]+"-primary"),$(s,"id",a=i[0]+"-primary"),s.required=!0,i[1]===void 0&&Bt(()=>i[6].call(s)),$(l,"for",c=i[0]+"-secondary"),p.__value=$n,oe(p,p.__value),$(p,"class","svelte-18pcmkd"),$(d,"id",g=i[0]+"-secondary"),i[2]===void 0&&Bt(()=>i[7].call(d)),$(H,"class","three-columns svelte-18pcmkd"),we(y,"grid-column","span 2")},m(C,V){m(C,e,V),v(e,n),m(C,r,V),m(C,s,V);for(let W=0;W<K.length;W+=1)K[W]&&K[W].m(s,null);Xe(s,i[1],!0),m(C,o,V),m(C,l,V),v(l,u),m(C,f,V),m(C,d,V),v(d,p),v(p,_);for(let W=0;W<Y.length;W+=1)Y[W]&&Y[W].m(d,null);Xe(d,i[2],!0),m(C,b,V),m(C,y,V),v(y,S),v(y,I),v(y,H);for(let W=0;W<z.length;W+=1)z[W]&&z[W].m(H,null);G||(F=[he(s,"change",i[6]),he(d,"change",i[7])],G=!0)},p(C,V){if(V&1&&t!==(t=C[0]+"-primary")&&$(e,"for",t),V&1&&a!==(a=C[0]+"-primary")&&$(s,"id",a),V&2&&Xe(s,C[1]),V&1&&c!==(c=C[0]+"-secondary")&&$(l,"for",c),V&2){re=de(yt);let W;for(W=0;W<re.length;W+=1){const Q=Wr(C,re,W);Y[W]?Y[W].p(Q,V):(Y[W]=Yr(Q),Y[W].c(),Y[W].m(d,null))}for(;W<Y.length;W+=1)Y[W].d(1);Y.length=re.length}if(V&1&&g!==(g=C[0]+"-secondary")&&$(d,"id",g),V&4&&Xe(d,C[2]),V&31){X=de(yt);let W;for(W=0;W<X.length;W+=1){const Q=Jr(C,X,W);z[W]?z[W].p(Q,V):(z[W]=Xr(Q),z[W].c(),z[W].m(H,null))}for(;W<z.length;W+=1)z[W].d(1);z.length=X.length}},d(C){C&&(h(e),h(r),h(s),h(o),h(l),h(f),h(d),h(b),h(y)),Pe(K,C),Pe(Y,C),Pe(z,C),G=!1,st(F)}}}function rc(i){let e,n;return e=new Ke({props:{title:"Type",$$slots:{default:[nc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&32783&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}const $n="";function sc(i,e,n){let{value:t}=e,{id:r="type-input"}=e,s=t[0],a=t[1]??$n,o=t.slice(2);const l=f=>{const d=f.target;d.checked?n(3,o=o.concat([d.value])):n(3,o=o.filter(p=>p!==d.value))};function u(){s=Ft(this),n(1,s)}function c(){a=Ft(this),n(2,a),n(1,s)}return i.$$set=f=>{"value"in f&&n(5,t=f.value),"id"in f&&n(0,r=f.id)},i.$$.update=()=>{i.$$.dirty&6&&n(2,a=s===a?$n:a),i.$$.dirty&14&&n(5,t=[...new Set([s,a].concat(o).filter(Cs))])},[r,s,a,o,l,t,u,c]}class ic extends ce{constructor(e){super(),fe(this,e,sc,rc,ue,{value:5,id:0})}}function ac(i){let e,n,t,r,s,a;const o=i[2].default,l=et(o,i,i[1],null);return{c(){e=w("details"),n=w("summary"),t=w("h2"),r=M(i[0]),s=A(),l&&l.c(),this.h()},l(u){e=k(u,"DETAILS",{class:!0});var c=j(e);n=k(c,"SUMMARY",{class:!0});var f=j(n);t=k(f,"H2",{class:!0});var d=j(t);r=B(d,i[0]),d.forEach(h),f.forEach(h),s=O(c),l&&l.l(c),c.forEach(h),this.h()},h(){$(t,"class","svelte-ykbmly"),$(n,"class","svelte-ykbmly"),$(e,"class","svelte-ykbmly")},m(u,c){m(u,e,c),v(e,n),v(n,t),v(t,r),v(e,s),l&&l.m(e,null),a=!0},p(u,[c]){(!a||c&1)&&se(r,u[0]),l&&l.p&&(!a||c&2)&&tt(l,o,u,u[1],a?rt(o,u[1],c,null):nt(u[1]),null)},i(u){a||(E(l,u),a=!0)},o(u){T(l,u),a=!1},d(u){u&&h(e),l&&l.d(u)}}}function lc(i,e,n){let{$$slots:t={},$$scope:r}=e,{title:s}=e;return i.$$set=a=>{"title"in a&&n(0,s=a.title),"$$scope"in a&&n(1,r=a.$$scope)},[s,r,t]}class oc extends ce{constructor(e){super(),fe(this,e,lc,ac,ue,{title:0})}}function Zr(i,e,n){const t=i.slice();return t[45]=e[n],t}function Qr(i,e,n){const t=i.slice();return t[48]=e[n],t}function xr(i,e,n){const t=i.slice();t[51]=e[n];const r=t[18](t[51].name);return t[52]=r,t}function es(i,e,n){const t=i.slice();return t[55]=e[n],t}function ts(i,e,n){const t=i.slice();return t[48]=e[n],t[58]=e,t[59]=n,t}function uc(i){let e,n="Nickname",t,r,s,a,o,l,u,c,f="Level",d,p,_,g,b="AC",y,S,P,I,H="Max HP",G,F,U,K,re="Max Hit Dice",Y,X,z,C,V;function W(q){i[26](q)}function Q(q){i[27](q)}let ee={id:"nature-input",disabled:i[17]};return i[3]!==void 0&&(ee.value=i[3]),i[4]!==void 0&&(ee.custom=i[4]),a=new Yu({props:ee}),Ct.push(()=>At(a,"value",W)),Ct.push(()=>At(a,"custom",Q)),{c(){e=w("label"),e.textContent=n,t=A(),r=w("input"),s=A(),L(a.$$.fragment),u=A(),c=w("label"),c.textContent=f,d=A(),p=w("input"),_=A(),g=w("label"),g.textContent=b,y=A(),S=w("input"),P=A(),I=w("label"),I.textContent=H,G=A(),F=w("input"),U=A(),K=w("label"),K.textContent=re,Y=A(),X=w("input"),this.h()},l(q){e=k(q,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-128v817"&&(e.textContent=n),t=O(q),r=k(q,"INPUT",{name:!0,id:!0,type:!0}),s=O(q),R(a.$$.fragment,q),u=O(q),c=k(q,"LABEL",{for:!0,"data-svelte-h":!0}),ie(c)!=="svelte-8wxrph"&&(c.textContent=f),d=O(q),p=k(q,"INPUT",{name:!0,id:!0,type:!0,min:!0,max:!0}),_=O(q),g=k(q,"LABEL",{for:!0,"data-svelte-h":!0}),ie(g)!=="svelte-z00dtr"&&(g.textContent=b),y=O(q),S=k(q,"INPUT",{name:!0,id:!0,min:!0,max:!0,type:!0}),P=O(q),I=k(q,"LABEL",{for:!0,"data-svelte-h":!0}),ie(I)!=="svelte-1c7akfc"&&(I.textContent=H),G=O(q),F=k(q,"INPUT",{name:!0,id:!0,min:!0,type:!0}),U=O(q),K=k(q,"LABEL",{for:!0,"data-svelte-h":!0}),ie(K)!=="svelte-1cvfb23"&&(K.textContent=re),Y=O(q),X=k(q,"INPUT",{name:!0,id:!0,min:!0,type:!0}),this.h()},h(){$(e,"for","nickname-input"),$(r,"name","name"),$(r,"id","nickname-input"),$(r,"type","text"),r.disabled=i[17],$(c,"for","level-input"),$(p,"name","level"),$(p,"id","level-input"),$(p,"type","number"),$(p,"min","1"),$(p,"max","20"),p.value=i[5],p.disabled=i[17],$(g,"for","ac-input"),$(S,"name","ac"),$(S,"id","ac-input"),$(S,"min","0"),$(S,"max","30"),$(S,"type","number"),S.disabled=i[17],$(I,"for","max-hp-input"),$(F,"name","max-hp"),$(F,"id","max-hp-input"),$(F,"min","1"),$(F,"type","number"),F.disabled=i[17],$(K,"for","max-hit-dice-input"),$(X,"name","max-hit-dice"),$(X,"id","max-hit-dice-input"),$(X,"min","1"),$(X,"type","number"),X.disabled=i[17]},m(q,Z){m(q,e,Z),m(q,t,Z),m(q,r,Z),oe(r,i[2]),m(q,s,Z),N(a,q,Z),m(q,u,Z),m(q,c,Z),m(q,d,Z),m(q,p,Z),m(q,_,Z),m(q,g,Z),m(q,y,Z),m(q,S,Z),oe(S,i[6]),m(q,P,Z),m(q,I,Z),m(q,G,Z),m(q,F,Z),oe(F,i[7]),m(q,U,Z),m(q,K,Z),m(q,Y,Z),m(q,X,Z),oe(X,i[8]),z=!0,C||(V=[he(r,"input",i[25]),he(p,"change",i[19]),he(S,"input",i[28]),he(F,"input",i[29]),he(X,"input",i[30])],C=!0)},p(q,Z){(!z||Z[0]&131072)&&(r.disabled=q[17]),Z[0]&4&&r.value!==q[2]&&oe(r,q[2]);const te={};Z[0]&131072&&(te.disabled=q[17]),!o&&Z[0]&8&&(o=!0,te.value=q[3],It(()=>o=!1)),!l&&Z[0]&16&&(l=!0,te.custom=q[4],It(()=>l=!1)),a.$set(te),(!z||Z[0]&32&&p.value!==q[5])&&(p.value=q[5]),(!z||Z[0]&131072)&&(p.disabled=q[17]),(!z||Z[0]&131072)&&(S.disabled=q[17]),Z[0]&64&&Ze(S.value)!==q[6]&&oe(S,q[6]),(!z||Z[0]&131072)&&(F.disabled=q[17]),Z[0]&128&&Ze(F.value)!==q[7]&&oe(F,q[7]),(!z||Z[0]&131072)&&(X.disabled=q[17]),Z[0]&256&&Ze(X.value)!==q[8]&&oe(X,q[8])},i(q){z||(E(a.$$.fragment,q),z=!0)},o(q){T(a.$$.fragment,q),z=!1},d(q){q&&(h(e),h(t),h(r),h(s),h(u),h(c),h(d),h(p),h(_),h(g),h(y),h(S),h(P),h(I),h(G),h(F),h(U),h(K),h(Y),h(X)),D(a,q),C=!1,st(V)}}}function cc(i){let e,n,t,r="Male",s,a,o,l,u="Female",c,f,d,p,_="None",g,b,y,S,P="Other",I,H,G;return I=Xt(i[32][2]),{c(){e=w("input"),n=A(),t=w("label"),t.textContent=r,s=A(),a=w("input"),o=A(),l=w("label"),l.textContent=u,c=A(),f=w("input"),d=A(),p=w("label"),p.textContent=_,g=A(),b=w("input"),y=A(),S=w("label"),S.textContent=P,this.h()},l(F){e=k(F,"INPUT",{type:!0,id:!0,name:!0}),n=O(F),t=k(F,"LABEL",{for:!0,"data-svelte-h":!0}),ie(t)!=="svelte-ua66e3"&&(t.textContent=r),s=O(F),a=k(F,"INPUT",{type:!0,id:!0,name:!0}),o=O(F),l=k(F,"LABEL",{for:!0,"data-svelte-h":!0}),ie(l)!=="svelte-1jldybb"&&(l.textContent=u),c=O(F),f=k(F,"INPUT",{type:!0,id:!0,name:!0}),d=O(F),p=k(F,"LABEL",{for:!0,"data-svelte-h":!0}),ie(p)!=="svelte-123wqev"&&(p.textContent=_),g=O(F),b=k(F,"INPUT",{type:!0,id:!0,name:!0}),y=O(F),S=k(F,"LABEL",{for:!0,"data-svelte-h":!0}),ie(S)!=="svelte-1jz62gn"&&(S.textContent=P),this.h()},h(){e.__value=Qe.Male,oe(e,e.__value),$(e,"type","radio"),$(e,"id","gender-input-male"),$(e,"name","gender"),e.disabled=i[17],$(t,"for","gender-input-male"),a.__value=Qe.Female,oe(a,a.__value),$(a,"type","radio"),$(a,"id","gender-input-female"),$(a,"name","gender"),a.disabled=i[17],$(l,"for","gender-input-female"),f.__value=Qe.None,oe(f,f.__value),$(f,"type","radio"),$(f,"id","gender-input-none"),$(f,"name","gender"),f.disabled=i[17],$(p,"for","gender-input-none"),b.__value=Qe.Other,oe(b,b.__value),$(b,"type","radio"),$(b,"id","gender-input-other"),$(b,"name","gender"),b.disabled=i[17],$(S,"for","gender-input-other"),I.p(e,a,f,b)},m(F,U){m(F,e,U),e.checked=e.__value===i[9],m(F,n,U),m(F,t,U),m(F,s,U),m(F,a,U),a.checked=a.__value===i[9],m(F,o,U),m(F,l,U),m(F,c,U),m(F,f,U),f.checked=f.__value===i[9],m(F,d,U),m(F,p,U),m(F,g,U),m(F,b,U),b.checked=b.__value===i[9],m(F,y,U),m(F,S,U),H||(G=[he(e,"change",i[31]),he(a,"change",i[33]),he(f,"change",i[34]),he(b,"change",i[35])],H=!0)},p(F,U){U[0]&131072&&(e.disabled=F[17]),U[0]&512&&(e.checked=e.__value===F[9]),U[0]&131072&&(a.disabled=F[17]),U[0]&512&&(a.checked=a.__value===F[9]),U[0]&131072&&(f.disabled=F[17]),U[0]&512&&(f.checked=f.__value===F[9]),U[0]&131072&&(b.disabled=F[17]),U[0]&512&&(b.checked=b.__value===F[9])},d(F){F&&(h(e),h(n),h(t),h(s),h(a),h(o),h(l),h(c),h(f),h(d),h(p),h(g),h(b),h(y),h(S)),I.r(),H=!1,st(G)}}}function ns(i){let e,n=i[48].abbr+"",t,r,s,a,o;function l(){i[36].call(s,i[48])}return{c(){e=w("label"),t=M(n),r=A(),s=w("input"),this.h()},l(u){e=k(u,"LABEL",{for:!0,class:!0});var c=j(e);t=B(c,n),c.forEach(h),r=O(u),s=k(u,"INPUT",{name:!0,id:!0,min:!0,max:!0,type:!0}),this.h()},h(){$(e,"for",i[48].abbr+"-input"),$(e,"class","upper"),$(s,"name",i[48].abbr),$(s,"id",i[48].abbr+"-input"),$(s,"min","0"),$(s,"max","30"),$(s,"type","number"),s.disabled=i[17],we(s,"max-width","4em")},m(u,c){m(u,e,c),v(e,t),m(u,r,c),m(u,s,c),oe(s,i[10][i[48].abbr]),a||(o=he(s,"input",l),a=!0)},p(u,c){i=u,c[0]&131072&&(s.disabled=i[17]),c[0]&1024&&Ze(s.value)!==i[10][i[48].abbr]&&oe(s,i[10][i[48].abbr])},d(u){u&&(h(e),h(r),h(s)),a=!1,o()}}}function fc(i){let e,n=de(Jt),t=[];for(let r=0;r<n.length;r+=1)t[r]=ns(ts(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,s){if(s[0]&132096){n=de(Jt);let a;for(a=0;a<n.length;a+=1){const o=ts(r,n,a);t[a]?t[a].p(o,s):(t[a]=ns(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&h(e),Pe(t,r)}}}function rs(i){let e,n=i[55].name+"",t,r;return{c(){e=w("option"),t=M(n),this.h()},l(s){e=k(s,"OPTION",{});var a=j(e);t=B(a,n),a.forEach(h),this.h()},h(){e.__value=r=i[55].id,oe(e,e.__value)},m(s,a){m(s,e,a),v(e,t)},p(s,a){a[0]&1&&n!==(n=s[55].name+"")&&se(t,n),a[0]&1&&r!==(r=s[55].id)&&(e.__value=r,oe(e,e.__value))},d(s){s&&h(e)}}}function hc(i){let e,n="Ability",t,r,s,a,o=de(i[0].abilities),l=[];for(let u=0;u<o.length;u+=1)l[u]=rs(es(i,o,u));return{c(){e=w("label"),e.textContent=n,t=A(),r=w("select");for(let u=0;u<l.length;u+=1)l[u].c();this.h()},l(u){e=k(u,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-1jmh84x"&&(e.textContent=n),t=O(u),r=k(u,"SELECT",{id:!0});var c=j(r);for(let f=0;f<l.length;f+=1)l[f].l(c);c.forEach(h),this.h()},h(){$(e,"for","ability-input"),$(r,"id","ability-input"),i[11]===void 0&&Bt(()=>i[37].call(r))},m(u,c){m(u,e,c),m(u,t,c),m(u,r,c);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(r,null);Xe(r,i[11],!0),s||(a=he(r,"change",i[37]),s=!0)},p(u,c){if(c[0]&1){o=de(u[0].abilities);let f;for(f=0;f<o.length;f+=1){const d=es(u,o,f);l[f]?l[f].p(d,c):(l[f]=rs(d),l[f].c(),l[f].m(r,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=o.length}c[0]&2049&&Xe(r,u[11])},d(u){u&&(h(e),h(t),h(r)),Pe(l,u),s=!1,a()}}}function ss(i){let e,n,t,r=i[51].name+"",s,a,o,l;return a=Xt(i[32][1]),{c(){e=w("input"),n=A(),t=w("label"),s=M(r),this.h()},l(u){e=k(u,"INPUT",{type:!0,id:!0,name:!0}),n=O(u),t=k(u,"LABEL",{for:!0,class:!0});var c=j(t);s=B(c,r),c.forEach(h),this.h()},h(){e.__value=i[51].name,oe(e,e.__value),$(e,"type","checkbox"),$(e,"id","proficiencies-input-"+i[52]),$(e,"name","proficiencies"),e.disabled=i[17],$(t,"for","proficiencies-input-"+i[52]),$(t,"class","cap"),a.p(e)},m(u,c){m(u,e,c),e.checked=~(i[12]||[]).indexOf(e.__value),m(u,n,c),m(u,t,c),v(t,s),o||(l=he(e,"change",i[38]),o=!0)},p(u,c){c[0]&131072&&(e.disabled=u[17]),c[0]&4096&&(e.checked=~(u[12]||[]).indexOf(e.__value))},d(u){u&&(h(e),h(n),h(t)),a.r(),o=!1,l()}}}function dc(i){let e,n=de(cn),t=[];for(let r=0;r<n.length;r+=1)t[r]=ss(xr(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,s){if(s[0]&397312){n=de(cn);let a;for(a=0;a<n.length;a+=1){const o=xr(r,n,a);t[a]?t[a].p(o,s):(t[a]=ss(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&h(e),Pe(t,r)}}}function is(i){let e,n,t,r=i[48].name+"",s,a,o,l;return a=Xt(i[32][0]),{c(){e=w("input"),n=A(),t=w("label"),s=M(r),this.h()},l(u){e=k(u,"INPUT",{type:!0,id:!0,name:!0}),n=O(u),t=k(u,"LABEL",{for:!0,class:!0});var c=j(t);s=B(c,r),c.forEach(h),this.h()},h(){e.__value=i[48].abbr,oe(e,e.__value),$(e,"type","checkbox"),$(e,"id","saves-input-"+i[48].abbr),$(e,"name","saves"),e.disabled=i[17],$(t,"for","saves-input-"+i[48].abbr),$(t,"class","cap"),a.p(e)},m(u,c){m(u,e,c),e.checked=~(i[13]||[]).indexOf(e.__value),m(u,n,c),m(u,t,c),v(t,s),o||(l=he(e,"change",i[39]),o=!0)},p(u,c){c[0]&131072&&(e.disabled=u[17]),c[0]&8192&&(e.checked=~(u[13]||[]).indexOf(e.__value))},d(u){u&&(h(e),h(n),h(t)),a.r(),o=!1,l()}}}function pc(i){let e,n=de(Jt),t=[];for(let r=0;r<n.length;r+=1)t[r]=is(Qr(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,s){if(s[0]&139264){n=de(Jt);let a;for(a=0;a<n.length;a+=1){const o=Qr(r,n,a);t[a]?t[a].p(o,s):(t[a]=is(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&h(e),Pe(t,r)}}}function as(i,e){let n,t,r;return t=new xu({props:{move:e[45],disabled:e[17]}}),t.$on("remove",function(){vn(e[20](e[45].id))&&e[20](e[45].id).apply(this,arguments)}),{key:i,first:null,c(){n=ne(),L(t.$$.fragment),this.h()},l(s){n=ne(),R(t.$$.fragment,s),this.h()},h(){this.first=n},m(s,a){m(s,n,a),N(t,s,a),r=!0},p(s,a){e=s;const o={};a[0]&65536&&(o.move=e[45]),a[0]&131072&&(o.disabled=e[17]),t.$set(o)},i(s){r||(E(t.$$.fragment,s),r=!0)},o(s){T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(t,s)}}}function _c(i){let e;return{c(){e=M("Add Move")},l(n){e=B(n,"Add Move")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function mc(i){let e=[],n=new Map,t,r,s,a,o,l=de(i[16]);const u=c=>c[45].id;for(let c=0;c<l.length;c+=1){let f=Zr(i,l,c),d=u(f);n.set(d,e[c]=as(d,f))}return a=new ke({props:{$$slots:{default:[_c]},$$scope:{ctx:i}}}),a.$on("click",i[21]),{c(){for(let c=0;c<e.length;c+=1)e[c].c();t=A(),r=w("span"),s=A(),L(a.$$.fragment)},l(c){for(let f=0;f<e.length;f+=1)e[f].l(c);t=O(c),r=k(c,"SPAN",{}),j(r).forEach(h),s=O(c),R(a.$$.fragment,c)},m(c,f){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(c,f);m(c,t,f),m(c,r,f),m(c,s,f),N(a,c,f),o=!0},p(c,f){f[0]&1245184&&(l=de(c[16]),ge(),e=ws(e,f,u,1,c,l,n,t.parentNode,ks,as,t,Zr),$e());const d={};f[1]&536870912&&(d.$$scope={dirty:f,ctx:c}),a.$set(d)},i(c){if(!o){for(let f=0;f<l.length;f+=1)E(e[f]);E(a.$$.fragment,c),o=!0}},o(c){for(let f=0;f<e.length;f+=1)T(e[f]);T(a.$$.fragment,c),o=!1},d(c){c&&(h(t),h(r),h(s));for(let f=0;f<e.length;f+=1)e[f].d(c);D(a,c)}}}function gc(i){let e,n,t="Notes",r,s,a,o;return{c(){e=w("div"),n=w("label"),n.textContent=t,r=A(),s=w("textarea"),this.h()},l(l){e=k(l,"DIV",{class:!0});var u=j(e);n=k(u,"LABEL",{for:!0,"data-svelte-h":!0}),ie(n)!=="svelte-14hlr3r"&&(n.textContent=t),r=O(u),s=k(u,"TEXTAREA",{name:!0,id:!0,rows:!0,class:!0,placeholder:!0}),j(s).forEach(h),u.forEach(h),this.h()},h(){$(n,"for","notes-input"),$(s,"name","notes"),$(s,"id","notes-input"),$(s,"rows","6"),$(s,"class","font-sm svelte-lj4qgx"),$(s,"placeholder","Use this for any general notes not covered by the above fields..."),$(e,"class","stacked svelte-lj4qgx")},m(l,u){m(l,e,u),v(e,n),v(e,r),v(e,s),oe(s,i[14]),a||(o=he(s,"input",i[40]),a=!0)},p(l,u){u[0]&16384&&oe(s,l[14])},d(l){l&&h(e),a=!1,o()}}}function $c(i){let e,n,t;function r(a){i[41](a)}let s={id:"type-input"};return i[15]!==void 0&&(s.value=i[15]),e=new ic({props:s}),Ct.push(()=>At(e,"value",r)),{c(){L(e.$$.fragment)},l(a){R(e.$$.fragment,a)},m(a,o){N(e,a,o),t=!0},p(a,o){const l={};!n&&o[0]&32768&&(n=!0,l.value=a[15],It(()=>n=!1)),e.$set(l)},i(a){t||(E(e.$$.fragment,a),t=!0)},o(a){T(e.$$.fragment,a),t=!1},d(a){D(e,a)}}}function vc(i){let e;return{c(){e=M("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function bc(i){let e;return{c(){e=M("Finish!")},l(n){e=B(n,"Finish!")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function wc(i){let e,n,t,r;return e=new ke({props:{variant:"ghost",disabled:i[17],$$slots:{default:[vc]},$$scope:{ctx:i}}}),e.$on("click",i[22]),t=new ke({props:{type:"submit",disabled:i[17],$$slots:{default:[bc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a[0]&131072&&(o.disabled=s[17]),a[1]&536870912&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a[0]&131072&&(l.disabled=s[17]),a[1]&536870912&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function kc(i){let e,n,t,r,s,a,o,l,u,c,f,d,p,_,g,b,y,S,P,I,H,G,F;return n=new Ke({props:{title:"Basic Info",$$slots:{default:[uc]},$$scope:{ctx:i}}}),r=new Ke({props:{title:"Gender",columns:4,$$slots:{default:[cc]},$$scope:{ctx:i}}}),a=new Ke({props:{title:"Attributes",columns:3,$$slots:{default:[fc]},$$scope:{ctx:i}}}),l=new Ke({props:{title:"Feats",$$slots:{default:[hc]},$$scope:{ctx:i}}}),c=new Ke({props:{title:"Proficiencies",columns:2,$$slots:{default:[dc]},$$scope:{ctx:i}}}),d=new Ke({props:{title:"Saving Throws",columns:2,$$slots:{default:[pc]},$$scope:{ctx:i}}}),_=new Ke({props:{title:"Moves",$$slots:{default:[mc]},$$scope:{ctx:i}}}),b=new Ke({props:{title:"General",$$slots:{default:[gc]},$$scope:{ctx:i}}}),S=new oc({props:{title:"Advanced",$$slots:{default:[$c]},$$scope:{ctx:i}}}),I=new Le({props:{$$slots:{default:[wc]},$$scope:{ctx:i}}}),{c(){e=w("form"),L(n.$$.fragment),t=A(),L(r.$$.fragment),s=A(),L(a.$$.fragment),o=A(),L(l.$$.fragment),u=A(),L(c.$$.fragment),f=A(),L(d.$$.fragment),p=A(),L(_.$$.fragment),g=A(),L(b.$$.fragment),y=A(),L(S.$$.fragment),P=A(),L(I.$$.fragment)},l(U){e=k(U,"FORM",{});var K=j(e);R(n.$$.fragment,K),t=O(K),R(r.$$.fragment,K),s=O(K),R(a.$$.fragment,K),o=O(K),R(l.$$.fragment,K),u=O(K),R(c.$$.fragment,K),f=O(K),R(d.$$.fragment,K),p=O(K),R(_.$$.fragment,K),g=O(K),R(b.$$.fragment,K),y=O(K),R(S.$$.fragment,K),P=O(K),R(I.$$.fragment,K),K.forEach(h)},m(U,K){m(U,e,K),N(n,e,null),v(e,t),N(r,e,null),v(e,s),N(a,e,null),v(e,o),N(l,e,null),v(e,u),N(c,e,null),v(e,f),N(d,e,null),v(e,p),N(_,e,null),v(e,g),N(b,e,null),v(e,y),N(S,e,null),v(e,P),N(I,e,null),H=!0,G||(F=he(e,"submit",Lt(i[23])),G=!0)},p(U,K){const re={};K[0]&131580|K[1]&536870912&&(re.$$scope={dirty:K,ctx:U}),n.$set(re);const Y={};K[0]&131584|K[1]&536870912&&(Y.$$scope={dirty:K,ctx:U}),r.$set(Y);const X={};K[0]&132096|K[1]&536870912&&(X.$$scope={dirty:K,ctx:U}),a.$set(X);const z={};K[0]&2049|K[1]&536870912&&(z.$$scope={dirty:K,ctx:U}),l.$set(z);const C={};K[0]&135168|K[1]&536870912&&(C.$$scope={dirty:K,ctx:U}),c.$set(C);const V={};K[0]&139264|K[1]&536870912&&(V.$$scope={dirty:K,ctx:U}),d.$set(V);const W={};K[0]&196608|K[1]&536870912&&(W.$$scope={dirty:K,ctx:U}),_.$set(W);const Q={};K[0]&16384|K[1]&536870912&&(Q.$$scope={dirty:K,ctx:U}),b.$set(Q);const ee={};K[0]&32768|K[1]&536870912&&(ee.$$scope={dirty:K,ctx:U}),S.$set(ee);const q={};K[0]&131072|K[1]&536870912&&(q.$$scope={dirty:K,ctx:U}),I.$set(q)},i(U){H||(E(n.$$.fragment,U),E(r.$$.fragment,U),E(a.$$.fragment,U),E(l.$$.fragment,U),E(c.$$.fragment,U),E(d.$$.fragment,U),E(_.$$.fragment,U),E(b.$$.fragment,U),E(S.$$.fragment,U),E(I.$$.fragment,U),H=!0)},o(U){T(n.$$.fragment,U),T(r.$$.fragment,U),T(a.$$.fragment,U),T(l.$$.fragment,U),T(c.$$.fragment,U),T(d.$$.fragment,U),T(_.$$.fragment,U),T(b.$$.fragment,U),T(S.$$.fragment,U),T(I.$$.fragment,U),H=!1},d(U){U&&h(e),D(n),D(r),D(a),D(l),D(c),D(d),D(_),D(b),D(S),D(I),G=!1,F()}}}function yc(i){let e,n;return e=new ct({props:{saving:i[1],$$slots:{default:[kc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r[0]&2&&(s.saving=t[1]),r[0]&262141|r[1]&536870912&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ec(i,e,n){let t;const r=ye=>ye.replace(/\s/g,""),s=it();let{pokemon:a}=e,{species:o}=e,{saving:l=!1}=e,u=a.nickname,c=a.nature,f=a.nature,d=a.level,p=a.ac,_=a.hp.max,g=a.hitDice.max,b=a.gender,y={...a.attributes},S=a.ability,P=a.proficiencies,I=a.savingThrows,H=a.notes,G=a.type;const F=ye=>{const je=ye.target;d===g&&n(8,g=parseInt(je.value)),n(5,d=parseInt(je.value))};let U=-1001;const K=()=>(--U).toString();let re=structuredClone(a.moves);const Y=ye=>()=>{n(16,re=re.filter(je=>je.id!==ye))},X=()=>{n(16,re=[...re,{id:K(),moveId:"tackle",pp:{current:20,max:20},notes:""}])},z=()=>{s("cancel")},C=()=>{s("update",{...a,nickname:u.length>0?u:o.name,type:G,nature:c==="other"?f:c,level:d,ac:p,hp:{current:a.hp.current+(_-a.hp.max),max:_},hitDice:{current:a.hitDice.current+(g-a.hitDice.max),max:g},gender:b,attributes:y,ability:S,proficiencies:P,savingThrows:I,moves:re,notes:H})},V=[[],[],[]];function W(){u=this.value,n(2,u)}function Q(ye){c=ye,n(3,c)}function ee(ye){f=ye,n(4,f)}function q(){p=Ze(this.value),n(6,p)}function Z(){_=Ze(this.value),n(7,_)}function te(){g=Ze(this.value),n(8,g)}function J(){b=this.__value,n(9,b)}function ae(){b=this.__value,n(9,b)}function _e(){b=this.__value,n(9,b)}function Ce(){b=this.__value,n(9,b)}function Ye(ye){y[ye.abbr]=Ze(this.value),n(10,y)}function le(){S=Ft(this),n(11,S),n(0,o)}function ve(){P=Rn(V[1],this.__value,this.checked),n(12,P)}function Be(){I=Rn(V[0],this.__value,this.checked),n(13,I)}function Ae(){H=this.value,n(14,H)}function He(ye){G=ye,n(15,G)}return i.$$set=ye=>{"pokemon"in ye&&n(24,a=ye.pokemon),"species"in ye&&n(0,o=ye.species),"saving"in ye&&n(1,l=ye.saving)},i.$$.update=()=>{i.$$.dirty[0]&2&&n(17,t=l)},[o,l,u,c,f,d,p,_,g,b,y,S,P,I,H,G,re,t,r,F,Y,X,z,C,a,W,Q,ee,q,Z,te,J,V,ae,_e,Ce,Ye,le,ve,Be,Ae,He]}let Tc=class extends ce{constructor(e){super(),fe(this,e,Ec,yc,ue,{pokemon:24,species:0,saving:1},null,[-1,-1])}};function Sc(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Cc(i){let e,n;return e=new We({props:{title:"Edit "+i[2].nickname,$$slots:{default:[jc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.title="Edit "+t[2].nickname),r&1150&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ic(i){let e,n,t="You do not have permission to edit this pokemon.",r,s,a;return s=new Le({props:{$$slots:{default:[Oc]},$$scope:{ctx:i}}}),{c(){e=w("section"),n=w("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=k(o,"SECTION",{});var l=j(e);n=k(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-1ag681u"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(h)},m(o,l){m(o,e,l),v(e,n),v(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&1034&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&h(e),D(s)}}}function Pc(i){let e,n;return e=new Tc({props:{pokemon:i[2],species:i[5],saving:i[4]}}),e.$on("cancel",i[8]),e.$on("update",i[7]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.pokemon=t[2]),r&32&&(s.species=t[5]),r&16&&(s.saving=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ac(i){let e;return{c(){e=M("Go Back")},l(n){e=B(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Oc(i){let e,n;return e=new ke({props:{href:me.trainers(i[3].info.readKey,i[1]),$$slots:{default:[Ac]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&10&&(s.href=me.trainers(t[3].info.readKey,t[1])),r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function jc(i){let e,n,t,r;const s=[Pc,Ic],a=[];function o(l,u){return l[6]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function Lc(i){let e,n,t,r;const s=[Cc,Sc],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function Rc(i){let e,n;return e=new Qt({props:{trainer:i[3],id:i[1],titlePrefix:"Edit",$$slots:{default:[Lc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&8&&(s.trainer=t[3]),r&2&&(s.id=t[1]),r&1150&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Nc(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=Ge(c,g=>n(3,a=g)),c),u;Re(i,_t,g=>n(9,u=g)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{id:f}=e,d=!1;const p=g=>{var b;n(4,d=!0),(b=a.update)==null||b.pokemon(g.detail).then(()=>{var y;return(y=a.update)==null?void 0:y.moveset(g.detail)}).then(()=>{n(4,d=!1),qe(me.trainers(a.info.readKey,f))}).catch(()=>{n(4,d=!1)})},_=()=>{qe(me.trainers(a.info.readKey,f))};return i.$$set=g=>{"trainer"in g&&l(n(0,c=g.trainer)),"id"in g&&n(1,f=g.id)},i.$$.update=()=>{i.$$.dirty&8&&n(6,t=a.update!=null),i.$$.dirty&10&&n(2,r=a.pokemon.find(g=>g.id===f)),i.$$.dirty&516&&n(5,s=u==null?void 0:u.find(g=>g.id===(r==null?void 0:r.pokemonId)))},[c,f,r,a,d,s,t,p,_,u]}class Dc extends ce{constructor(e){super(),fe(this,e,Nc,Rc,ue,{trainer:0,id:1})}}const ls=i=>e=>i.filter(n=>!e.includes(n));function os(i,e,n){var s,a;const t=i.slice();t[22]=e[n];const r=((a=(s=t[5])==null?void 0:s.find(function(...l){return i[20](t[22],...l)}))==null?void 0:a.name)??"";return t[23]=r,t}function us(i){let e,n,t,r,s,a,o,l,u;n=new Ke({props:{title:"Choose one",columns:2,$$slots:{default:[Uc]},$$scope:{ctx:i}}});let c=i[11]&&fs(i);return a=new Le({props:{$$slots:{default:[Fc]},$$scope:{ctx:i}}}),{c(){e=w("form"),L(n.$$.fragment),t=A(),r=w("section"),c&&c.c(),s=A(),L(a.$$.fragment),this.h()},l(f){e=k(f,"FORM",{});var d=j(e);R(n.$$.fragment,d),t=O(d),r=k(d,"SECTION",{class:!0});var p=j(r);c&&c.l(p),p.forEach(h),s=O(d),R(a.$$.fragment,d),d.forEach(h),this.h()},h(){$(r,"class","svelte-1r7xq7f"),we(r,"min-height","12em")},m(f,d){m(f,e,d),N(n,e,null),v(e,t),v(e,r),c&&c.m(r,null),v(e,s),N(a,e,null),o=!0,l||(u=he(e,"submit",Lt(i[15])),l=!0)},p(f,d){const p={};d&67113002&&(p.$$scope={dirty:d,ctx:f}),n.$set(p),f[11]?c?c.p(f,d):(c=fs(f),c.c(),c.m(r,null)):c&&(c.d(1),c=null);const _={};d&67112960&&(_.$$scope={dirty:d,ctx:f}),a.$set(_)},i(f){o||(E(n.$$.fragment,f),E(a.$$.fragment,f),o=!0)},o(f){T(n.$$.fragment,f),T(a.$$.fragment,f),o=!1},d(f){f&&h(e),D(n),c&&c.d(),D(a),l=!1,u()}}}function cs(i){let e,n,t,r=!1,s,a,o=i[23]+"",l,u,c,f,d;return c=Xt(i[19][0]),{c(){e=w("input"),s=A(),a=w("label"),l=M(o),this.h()},l(p){e=k(p,"INPUT",{id:!0,name:!0,type:!0}),s=O(p),a=k(p,"LABEL",{for:!0});var _=j(a);l=B(_,o),_.forEach(h),this.h()},h(){$(e,"id",n="evolve-to-"+i[22].id),$(e,"name","evolve-to"),$(e,"type","radio"),e.__value=t=i[22].id,oe(e,e.__value),e.disabled=i[12],e.required=!0,$(a,"for",u="evolve-to-"+i[22].id),c.p(e)},m(p,_){m(p,e,_),e.checked=e.__value===i[3],m(p,s,_),m(p,a,_),v(a,l),f||(d=he(e,"change",i[18]),f=!0)},p(p,_){_&2&&n!==(n="evolve-to-"+p[22].id)&&$(e,"id",n),_&2&&t!==(t=p[22].id)&&(e.__value=t,oe(e,e.__value),r=!0),_&4096&&(e.disabled=p[12]),(r||_&10)&&(e.checked=e.__value===p[3]),_&34&&o!==(o=p[23]+"")&&se(l,o),_&2&&u!==(u="evolve-to-"+p[22].id)&&$(a,"for",u)},d(p){p&&(h(e),h(s),h(a)),c.r(),f=!1,d()}}}function Uc(i){let e,n=de(i[1].evolution.to),t=[];for(let r=0;r<n.length;r+=1)t[r]=cs(os(i,n,r));return{c(){for(let r=0;r<t.length;r+=1)t[r].c();e=ne()},l(r){for(let s=0;s<t.length;s+=1)t[s].l(r);e=ne()},m(r,s){for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(r,s);m(r,e,s)},p(r,s){if(s&4138){n=de(r[1].evolution.to);let a;for(a=0;a<n.length;a+=1){const o=os(r,n,a);t[a]?t[a].p(o,s):(t[a]=cs(o),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},d(r){r&&h(e),Pe(t,r)}}}function fs(i){let e,n,t=Nn(i[1].name,i[11],Mn(Te,i[5],i[13]))+"",r,s,a="Evolving this pokemon will have these effects:",o,l,u,c,f,d,p,_,g,b=i[9]>0&&hs(i),y=i[8].length>0&&ds(i),S=i[7].length>0&&ps(i),P=i[6]&&i[0].ability!==i[6].id&&_s(i);return{c(){e=w("p"),n=new qs(!1),r=A(),s=w("p"),s.textContent=a,o=A(),l=w("ul"),u=w("li"),c=M("Max HP will increase by "),f=M(i[10]),d=A(),b&&b.c(),p=A(),y&&y.c(),_=A(),S&&S.c(),g=A(),P&&P.c(),this.h()},l(I){e=k(I,"P",{});var H=j(e);n=Hs(H,!1),H.forEach(h),r=O(I),s=k(I,"P",{"data-svelte-h":!0}),ie(s)!=="svelte-stsmeq"&&(s.textContent=a),o=O(I),l=k(I,"UL",{});var G=j(l);u=k(G,"LI",{});var F=j(u);c=B(F,"Max HP will increase by "),f=B(F,i[10]),F.forEach(h),d=O(G),b&&b.l(G),p=O(G),y&&y.l(G),_=O(G),S&&S.l(G),g=O(G),P&&P.l(G),G.forEach(h),this.h()},h(){n.a=null},m(I,H){m(I,e,H),n.m(t,e),m(I,r,H),m(I,s,H),m(I,o,H),m(I,l,H),v(l,u),v(u,c),v(u,f),v(l,d),b&&b.m(l,null),v(l,p),y&&y.m(l,null),v(l,_),S&&S.m(l,null),v(l,g),P&&P.m(l,null)},p(I,H){H&10274&&t!==(t=Nn(I[1].name,I[11],Mn(Te,I[5],I[13]))+"")&&n.p(t),H&1024&&se(f,I[10]),I[9]>0?b?b.p(I,H):(b=hs(I),b.c(),b.m(l,p)):b&&(b.d(1),b=null),I[8].length>0?y?y.p(I,H):(y=ds(I),y.c(),y.m(l,_)):y&&(y.d(1),y=null),I[7].length>0?S?S.p(I,H):(S=ps(I),S.c(),S.m(l,g)):S&&(S.d(1),S=null),I[6]&&I[0].ability!==I[6].id?P?P.p(I,H):(P=_s(I),P.c(),P.m(l,null)):P&&(P.d(1),P=null)},d(I){I&&(h(e),h(r),h(s),h(o),h(l)),b&&b.d(),y&&y.d(),S&&S.d(),P&&P.d()}}}function hs(i){let e,n,t;return{c(){e=w("li"),n=M("AC will increase by "),t=M(i[9])},l(r){e=k(r,"LI",{});var s=j(e);n=B(s,"AC will increase by "),t=B(s,i[9]),s.forEach(h)},m(r,s){m(r,e,s),v(e,n),v(e,t)},p(r,s){s&512&&se(t,r[9])},d(r){r&&h(e)}}}function ds(i){let e,n,t,r=i[8].join(", ")+"",s;return{c(){e=w("li"),n=M("Proficiency in "),t=w("span"),s=M(r),this.h()},l(a){e=k(a,"LI",{});var o=j(e);n=B(o,"Proficiency in "),t=k(o,"SPAN",{class:!0});var l=j(t);s=B(l,r),l.forEach(h),o.forEach(h),this.h()},h(){$(t,"class","cap")},m(a,o){m(a,e,o),v(e,n),v(e,t),v(t,s)},p(a,o){o&256&&r!==(r=a[8].join(", ")+"")&&se(s,r)},d(a){a&&h(e)}}}function ps(i){let e,n,t,r=i[7].join(", ")+"",s,a;return{c(){e=w("li"),n=M("Proficiency in "),t=w("span"),s=M(r),a=M(" saving throws"),this.h()},l(o){e=k(o,"LI",{});var l=j(e);n=B(l,"Proficiency in "),t=k(l,"SPAN",{class:!0});var u=j(t);s=B(u,r),u.forEach(h),a=B(l," saving throws"),l.forEach(h),this.h()},h(){$(t,"class","upper")},m(o,l){m(o,e,l),v(e,n),v(e,t),v(t,s),v(e,a)},p(o,l){l&128&&r!==(r=o[7].join(", ")+"")&&se(s,r)},d(o){o&&h(e)}}}function _s(i){let e,n,t=i[4].name+"",r,s,a=i[6].name+"",o;return{c(){e=w("li"),n=M("Ability will change from "),r=M(t),s=M(" to "),o=M(a)},l(l){e=k(l,"LI",{});var u=j(e);n=B(u,"Ability will change from "),r=B(u,t),s=B(u," to "),o=B(u,a),u.forEach(h)},m(l,u){m(l,e,u),v(e,n),v(e,r),v(e,s),v(e,o)},p(l,u){u&16&&t!==(t=l[4].name+"")&&se(r,t),u&64&&a!==(a=l[6].name+"")&&se(o,a)},d(l){l&&h(e)}}}function Mc(i){let e;return{c(){e=M("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Bc(i){let e;return{c(){e=M("Evolve!")},l(n){e=B(n,"Evolve!")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Fc(i){let e,n,t,r;return e=new ke({props:{variant:"ghost",disabled:i[12],$$slots:{default:[Mc]},$$scope:{ctx:i}}}),e.$on("click",i[14]),t=new ke({props:{type:"submit",disabled:i[12],$$slots:{default:[Bc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&4096&&(o.disabled=s[12]),a&67108864&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&4096&&(l.disabled=s[12]),a&67108864&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function Kc(i){var r,s;let e,n,t=((s=(r=i[1].evolution)==null?void 0:r.to)==null?void 0:s.length)>0&&us(i);return{c(){t&&t.c(),e=ne()},l(a){t&&t.l(a),e=ne()},m(a,o){t&&t.m(a,o),m(a,e,o),n=!0},p(a,o){var l,u;((u=(l=a[1].evolution)==null?void 0:l.to)==null?void 0:u.length)>0?t?(t.p(a,o),o&2&&E(t,1)):(t=us(a),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(ge(),T(t,1,1,()=>{t=null}),$e())},i(a){n||(E(t),n=!0)},o(a){T(t),n=!1},d(a){a&&h(e),t&&t.d(a)}}}function qc(i){let e,n;return e=new ct({props:{saving:i[2],$$slots:{default:[Kc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&4&&(s.saving=t[2]),r&67125243&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Hc(i,e,n){var K,re;let t,r,s,a,o,l,u,c,f,d,p,_;Re(i,_t,Y=>n(5,p=Y)),Re(i,wn,Y=>n(13,_=Y));const g=it();let{pokemon:b}=e,{species:y}=e,{saving:S=!1}=e,P=((re=(K=y.evolution)==null?void 0:K.to)==null?void 0:re.length)===1?y.evolution.to[0].id:void 0;const I=()=>{g("cancel")},H=()=>{const Y={...b,pokemonId:P,nickname:b.nickname===y.name?o.name:b.nickname,hp:{current:b.hp.max+l,max:b.hp.max+l},ac:b.ac+u,proficiencies:b.proficiencies.concat(c),savingThrows:b.savingThrows.concat(f),ability:(d==null?void 0:d.id)??b.ability};g("submit",Y)},G=[[]];function F(){P=this.__value,n(3,P)}const U=(Y,X)=>X.id===Y.id;return i.$$set=Y=>{"pokemon"in Y&&n(0,b=Y.pokemon),"species"in Y&&n(1,y=Y.species),"saving"in Y&&n(2,S=Y.saving)},i.$$.update=()=>{var Y,X;i.$$.dirty&4&&n(12,t=S),i.$$.dirty&3&&n(4,r=y.abilities.find(z=>z.id===b.ability)),i.$$.dirty&18&&n(17,s=y.abilities.indexOf(r)),i.$$.dirty&10&&n(11,a=(X=(Y=y.evolution)==null?void 0:Y.to)==null?void 0:X.find(z=>z.id===P)),i.$$.dirty&40&&n(16,o=p==null?void 0:p.find(z=>z.id===P)),i.$$.dirty&1&&n(10,l=b.level*2),i.$$.dirty&65537&&n(9,u=Math.max(0,((o==null?void 0:o.ac)??0)-b.ac)),i.$$.dirty&65537&&n(8,c=ls((o==null?void 0:o.skills)??[])(b.proficiencies)),i.$$.dirty&65537&&n(7,f=ls((o==null?void 0:o.savingThrows)??[])(b.savingThrows)),i.$$.dirty&196608&&n(6,d=o==null?void 0:o.abilities[Math.min((o==null?void 0:o.abilities.length)-1,s)])},[b,y,S,P,r,p,d,f,c,u,l,a,t,_,I,H,o,s,F,G,U]}class zc extends ce{constructor(e){super(),fe(this,e,Hc,qc,ue,{pokemon:0,species:1,saving:2})}}function Vc(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Gc(i){let e,n;return e=new We({props:{title:"Evolve "+i[2].nickname,$$slots:{default:[Zc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.title="Evolve "+t[2].nickname),r&1150&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Jc(i){let e,n,t="You do not have permission to evolve this pokemon.",r,s,a;return s=new Le({props:{$$slots:{default:[Xc]},$$scope:{ctx:i}}}),{c(){e=w("section"),n=w("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=k(o,"SECTION",{});var l=j(e);n=k(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-756k5x"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(h)},m(o,l){m(o,e,l),v(e,n),v(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&1034&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&h(e),D(s)}}}function Wc(i){let e,n;return e=new zc({props:{pokemon:i[2],species:i[5],saving:i[4]}}),e.$on("cancel",i[8]),e.$on("submit",i[7]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.pokemon=t[2]),r&32&&(s.species=t[5]),r&16&&(s.saving=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Yc(i){let e;return{c(){e=M("Go Back")},l(n){e=B(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Xc(i){let e,n;return e=new ke({props:{href:me.trainers(i[3].info.readKey,i[1]),$$slots:{default:[Yc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&10&&(s.href=me.trainers(t[3].info.readKey,t[1])),r&1024&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Zc(i){let e,n,t,r;const s=[Wc,Jc],a=[];function o(l,u){return l[6]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function Qc(i){let e,n,t,r;const s=[Gc,Vc],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function xc(i){let e,n;return e=new Qt({props:{trainer:i[3],id:i[1],titlePrefix:"Evolve",$$slots:{default:[Qc]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&8&&(s.trainer=t[3]),r&2&&(s.id=t[1]),r&1150&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ef(i,e,n){let t,r,s,a,o=x,l=()=>(o(),o=Ge(c,g=>n(3,a=g)),c),u;Re(i,_t,g=>n(9,u=g)),i.$$.on_destroy.push(()=>o());let{trainer:c}=e;l();let{id:f}=e,d=!1;const p=g=>{var b;n(4,d=!0),(b=a.update)==null||b.pokemon(g.detail).then(()=>{n(4,d=!1),qe(me.trainers(a.info.readKey,f))}).catch(()=>{n(4,d=!1)})},_=()=>{qe(me.trainers(a.info.readKey,f))};return i.$$set=g=>{"trainer"in g&&l(n(0,c=g.trainer)),"id"in g&&n(1,f=g.id)},i.$$.update=()=>{i.$$.dirty&8&&n(6,t=a.update!=null),i.$$.dirty&10&&n(2,r=a.pokemon.find(g=>g.id===f)),i.$$.dirty&516&&n(5,s=u==null?void 0:u.find(g=>g.id===(r==null?void 0:r.pokemonId)))},[c,f,r,a,d,s,t,p,_,u]}class tf extends ce{constructor(e){super(),fe(this,e,ef,xc,ue,{trainer:0,id:1})}}function nf(i){let e,n="Cannot find trainer",t,r,s,a,o,l,u,c,f=`You can view a <a href="${me.trainers()}">list of your trainers</a> or search by trainer id.`;return{c(){e=w("h1"),e.textContent=n,t=A(),r=w("p"),s=M("No trainer with id "),a=w("strong"),o=M(i[0]),l=M(" seems to be registered."),u=A(),c=w("p"),c.innerHTML=f,this.h()},l(d){e=k(d,"H1",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-q8duw8"&&(e.textContent=n),t=O(d),r=k(d,"P",{class:!0});var p=j(r);s=B(p,"No trainer with id "),a=k(p,"STRONG",{});var _=j(a);o=B(_,i[0]),_.forEach(h),l=B(p," seems to be registered."),p.forEach(h),u=O(d),c=k(d,"P",{class:!0,"data-svelte-h":!0}),ie(c)!=="svelte-dt3m1x"&&(c.innerHTML=f),this.h()},h(){$(e,"class","large-font space-bottom bubble-padded svelte-1st51oh"),$(r,"class","bubble-padded svelte-1st51oh"),$(c,"class","bubble svelte-1st51oh")},m(d,p){m(d,e,p),m(d,t,p),m(d,r,p),v(r,s),v(r,a),v(a,o),v(r,l),m(d,u,p),m(d,c,p)},p(d,[p]){p&1&&se(o,d[0])},i:x,o:x,d(d){d&&(h(e),h(t),h(r),h(u),h(c))}}}function rf(i,e,n){let{trainerKey:t}=e;return i.$$set=r=>{"trainerKey"in r&&n(0,t=r.trainerKey)},[t]}class sf extends ce{constructor(e){super(),fe(this,e,rf,nf,ue,{trainerKey:0})}}const af=""+new URL("../assets/find-trainer-id.DcdDbnCJ.png",import.meta.url).href;function lf(i){let e;return{c(){e=M("Search")},l(n){e=B(n,"Search")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function ms(i){let e,n="No trainer is registered with this id";return{c(){e=w("p"),e.textContent=n,this.h()},l(t){e=k(t,"P",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-y99bmo"&&(e.textContent=n),this.h()},h(){$(e,"class","font-sm error svelte-jn36bw")},m(t,r){m(t,e,r)},d(t){t&&h(e)}}}function of(i){let e,n,t=`Enter the trainer's unique ID below and click "Search".`,r,s,a,o="Trainer ID",l,u,c,f,d,p,_,g,b,y,S=`<p>Each trainer has a unique 12-character ID. You can find it on their page, pictured below.</p> <figure class="spaced-lg svelte-jn36bw"><img src="${af}" alt="The label &#39;Trainer ID&#39; denotes the trainer&#39;s id." width="800" height="256" class="svelte-jn36bw"/> <figcaption>Use this ID for searching</figcaption></figure> <p>Searching by a trainer&#39;s ID can allow you to view a friend&#39;s pokemon or view your own trainer&#39;s pokemon on different devices.</p>`,P,I,H;d=new ke({props:{type:"submit",disabled:i[2],$$slots:{default:[lf]},$$scope:{ctx:i}}});let G=i[1].length>0&&i[1]===i[0]&&ms();return{c(){e=w("section"),n=w("p"),n.textContent=t,r=A(),s=w("form"),a=w("label"),a.textContent=o,l=A(),u=w("div"),c=w("input"),f=A(),L(d.$$.fragment),p=A(),G&&G.c(),_=A(),g=w("hr"),b=A(),y=w("section"),y.innerHTML=S,this.h()},l(F){e=k(F,"SECTION",{});var U=j(e);n=k(U,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-xh6jag"&&(n.textContent=t),r=O(U),s=k(U,"FORM",{class:!0,disabled:!0});var K=j(s);a=k(K,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(a)!=="svelte-16wff6"&&(a.textContent=o),l=O(K),u=k(K,"DIV",{class:!0});var re=j(u);c=k(re,"INPUT",{id:!0,type:!0,class:!0,maxlength:!0,placeholder:!0}),f=O(re),R(d.$$.fragment,re),re.forEach(h),p=O(K),G&&G.l(K),K.forEach(h),U.forEach(h),_=O(F),g=k(F,"HR",{}),b=O(F),y=k(F,"SECTION",{"data-svelte-h":!0}),ie(y)!=="svelte-xekllv"&&(y.innerHTML=S),this.h()},h(){$(a,"for","id-input"),$(a,"class","font-sm spaced-sm svelte-jn36bw"),$(c,"id","id-input"),$(c,"type","text"),$(c,"class","font-lg svelte-jn36bw"),$(c,"maxlength","12"),$(c,"placeholder","e.g. H4PF8E2GZA0A"),c.disabled=i[2],c.required=!0,we(c,"flex","1"),$(u,"class","horizontal spaced-sm svelte-jn36bw"),$(s,"class","vertical spaced-lg svelte-jn36bw"),$(s,"disabled",i[2])},m(F,U){m(F,e,U),v(e,n),v(e,r),v(e,s),v(s,a),v(s,l),v(s,u),v(u,c),oe(c,i[0]),v(u,f),N(d,u,null),v(s,p),G&&G.m(s,null),m(F,_,U),m(F,g,U),m(F,b,U),m(F,y,U),P=!0,I||(H=[he(c,"input",i[4]),he(s,"submit",Lt(i[3]))],I=!0)},p(F,U){(!P||U&4)&&(c.disabled=F[2]),U&1&&c.value!==F[0]&&oe(c,F[0]);const K={};U&4&&(K.disabled=F[2]),U&32&&(K.$$scope={dirty:U,ctx:F}),d.$set(K),F[1].length>0&&F[1]===F[0]?G||(G=ms(),G.c(),G.m(s,null)):G&&(G.d(1),G=null),(!P||U&4)&&$(s,"disabled",F[2])},i(F){P||(E(d.$$.fragment,F),P=!0)},o(F){T(d.$$.fragment,F),P=!1},d(F){F&&(h(e),h(_),h(g),h(b),h(y)),D(d),G&&G.d(),I=!1,st(H)}}}function uf(i){let e,n;return e=new ct({props:{saving:i[2],caption:"Searching...",$$slots:{default:[of]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.saving=t[2]),r&39&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function cf(i){let e,n,t,r;return e=new Je({props:{value:"Find Trainer by ID"}}),t=new We({props:{title:"Find Trainer by ID",$$slots:{default:[uf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&39&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function ff(i,e,n){let t="",r="",s=!1;const a=()=>{n(2,s=!0),Yt.get(t).then(l=>{l?qe(me.trainers(t)):(n(2,s=!1),n(1,r=t))})};function o(){t=this.value,n(0,t)}return i.$$.update=()=>{i.$$.dirty&1&&n(0,t=t.toLocaleUpperCase().replace(/[^a-zA-Z0-9]/g,""))},[t,r,s,a,o]}class hf extends ce{constructor(e){super(),fe(this,e,ff,cf,ue,{})}}function df(i){let e,n="Name",t,r,s,a,o="Description",l,u,c,f;return{c(){e=w("label"),e.textContent=n,t=A(),r=w("input"),s=A(),a=w("label"),a.textContent=o,l=A(),u=w("textarea"),this.h()},l(d){e=k(d,"LABEL",{for:!0,"data-svelte-h":!0}),ie(e)!=="svelte-10tkgu3"&&(e.textContent=n),t=O(d),r=k(d,"INPUT",{name:!0,id:!0,type:!0}),s=O(d),a=k(d,"LABEL",{for:!0,"data-svelte-h":!0}),ie(a)!=="svelte-8xwm31"&&(a.textContent=o),l=O(d),u=k(d,"TEXTAREA",{name:!0,id:!0,rows:!0}),j(u).forEach(h),this.h()},h(){$(e,"for","name-input"),$(r,"name","name"),$(r,"id","name-input"),$(r,"type","text"),r.disabled=i[3],$(a,"for","description-input"),we(a,"place-self","start"),$(u,"name","description"),$(u,"id","description-input"),$(u,"rows","6"),u.disabled=i[3]},m(d,p){m(d,e,p),m(d,t,p),m(d,r,p),oe(r,i[1]),m(d,s,p),m(d,a,p),m(d,l,p),m(d,u,p),oe(u,i[2]),c||(f=[he(r,"input",i[7]),he(u,"input",i[8])],c=!0)},p(d,p){p&8&&(r.disabled=d[3]),p&2&&r.value!==d[1]&&oe(r,d[1]),p&8&&(u.disabled=d[3]),p&4&&oe(u,d[2])},d(d){d&&(h(e),h(t),h(r),h(s),h(a),h(l),h(u)),c=!1,st(f)}}}function pf(i){let e;return{c(){e=M("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function _f(i){let e;return{c(){e=M("Finish!")},l(n){e=B(n,"Finish!")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function mf(i){let e,n,t,r;return e=new ke({props:{variant:"ghost",disabled:i[3],$$slots:{default:[pf]},$$scope:{ctx:i}}}),e.$on("click",i[4]),t=new ke({props:{type:"submit",disabled:i[3],$$slots:{default:[_f]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,a){const o={};a&8&&(o.disabled=s[3]),a&1024&&(o.$$scope={dirty:a,ctx:s}),e.$set(o);const l={};a&8&&(l.disabled=s[3]),a&1024&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function gf(i){let e,n,t,r,s,a,o;return n=new Ke({props:{title:"Basic Info",$$slots:{default:[df]},$$scope:{ctx:i}}}),r=new Le({props:{$$slots:{default:[mf]},$$scope:{ctx:i}}}),{c(){e=w("form"),L(n.$$.fragment),t=A(),L(r.$$.fragment)},l(l){e=k(l,"FORM",{});var u=j(e);R(n.$$.fragment,u),t=O(u),R(r.$$.fragment,u),u.forEach(h)},m(l,u){m(l,e,u),N(n,e,null),v(e,t),N(r,e,null),s=!0,a||(o=he(e,"submit",Lt(i[5])),a=!0)},p(l,u){const c={};u&1038&&(c.$$scope={dirty:u,ctx:l}),n.$set(c);const f={};u&1032&&(f.$$scope={dirty:u,ctx:l}),r.$set(f)},i(l){s||(E(n.$$.fragment,l),E(r.$$.fragment,l),s=!0)},o(l){T(n.$$.fragment,l),T(r.$$.fragment,l),s=!1},d(l){l&&h(e),D(n),D(r),a=!1,o()}}}function $f(i){let e,n;return e=new ct({props:{saving:i[0],$$slots:{default:[gf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,[r]){const s={};r&1&&(s.saving=t[0]),r&1038&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function vf(i,e,n){let t;const r=it();let{trainer:s}=e,{saving:a=!1}=e,o=s.name,l=s.description;const u=()=>{r("cancel")},c=()=>{r("update",{name:o,description:l})};function f(){o=this.value,n(1,o)}function d(){l=this.value,n(2,l)}return i.$$set=p=>{"trainer"in p&&n(6,s=p.trainer),"saving"in p&&n(0,a=p.saving)},i.$$.update=()=>{i.$$.dirty&1&&n(3,t=a)},[a,o,l,t,u,c,s,f,d]}class bf extends ce{constructor(e){super(),fe(this,e,vf,$f,ue,{trainer:6,saving:0})}}function wf(i){let e,n,t="You do not have permission to edit this trainer.",r,s,a;return s=new Le({props:{$$slots:{default:[Ef]},$$scope:{ctx:i}}}),{c(){e=w("section"),n=w("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=k(o,"SECTION",{});var l=j(e);n=k(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-1kn7ebq"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(h)},m(o,l){m(o,e,l),v(e,n),v(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&66&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&h(e),D(s)}}}function kf(i){let e,n;return e=new bf({props:{trainer:i[1].info,saving:i[2]}}),e.$on("update",i[5]),e.$on("cancel",i[4]),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.trainer=t[1].info),r&4&&(s.saving=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function yf(i){let e;return{c(){e=M("Go Back")},l(n){e=B(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Ef(i){let e,n;return e=new ke({props:{href:me.trainers(i[1].info.readKey),$$slots:{default:[yf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&2&&(s.href=me.trainers(t[1].info.readKey)),r&64&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Tf(i){let e,n,t,r;const s=[kf,wf],a=[];function o(l,u){return l[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function Sf(i){let e,n,t,r;return e=new Je({props:{value:"Edit "+i[1].info.name}}),t=new We({props:{title:i[1].info.name,$$slots:{default:[Tf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&2&&(o.value="Edit "+s[1].info.name),e.$set(o);const l={};a&2&&(l.title=s[1].info.name),a&78&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function Cf(i,e,n){let t,r,s=x,a=()=>(s(),s=Ge(o,f=>n(1,r=f)),o);i.$$.on_destroy.push(()=>s());let{trainer:o}=e;a();let l=!1;const u=()=>{qe(me.trainers(r.info.readKey))},c=f=>{var d;n(2,l=!0),(d=r.update)==null||d.info(f.detail).then(()=>{n(2,l=!1),qe(me.trainers(r.info.readKey))}).catch(()=>{n(2,l=!1)})};return i.$$set=f=>{"trainer"in f&&a(n(0,o=f.trainer))},i.$$.update=()=>{i.$$.dirty&2&&n(3,t=r.update!=null)},[o,r,l,t,u,c]}class If extends ce{constructor(e){super(),fe(this,e,Cf,Sf,ue,{trainer:0})}}function Pf(i){let e,n,t="You do not have permission to retire this trainer.",r,s,a;return s=new Le({props:{$$slots:{default:[jf]},$$scope:{ctx:i}}}),{c(){e=w("section"),n=w("p"),n.textContent=t,r=A(),L(s.$$.fragment)},l(o){e=k(o,"SECTION",{});var l=j(e);n=k(l,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-10ipcbz"&&(n.textContent=t),r=O(l),R(s.$$.fragment,l),l.forEach(h)},m(o,l){m(o,e,l),v(e,n),v(e,r),N(s,e,null),a=!0},p(o,l){const u={};l&66&&(u.$$scope={dirty:l,ctx:o}),s.$set(u)},i(o){a||(E(s.$$.fragment,o),a=!0)},o(o){T(s.$$.fragment,o),a=!1},d(o){o&&h(e),D(s)}}}function Af(i){let e,n;return e=new ct({props:{saving:i[2],$$slots:{default:[Df]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&4&&(s.saving=t[2]),r&82&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Of(i){let e;return{c(){e=M("Go Back")},l(n){e=B(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function jf(i){var t;let e,n;return e=new ke({props:{href:me.trainers((t=i[1])==null?void 0:t.info.readKey),$$slots:{default:[Of]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,s){N(e,r,s),n=!0},p(r,s){var o;const a={};s&2&&(a.href=me.trainers((o=r[1])==null?void 0:o.info.readKey)),s&64&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function Lf(i){let e;return{c(){e=M("Cancel")},l(n){e=B(n,"Cancel")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Rf(i){let e;return{c(){e=M("Delete")},l(n){e=B(n,"Delete")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Nf(i){var s;let e,n,t,r;return e=new ke({props:{href:me.trainers((s=i[1])==null?void 0:s.info.readKey),variant:"ghost",$$slots:{default:[Lf]},$$scope:{ctx:i}}}),t=new ke({props:{variant:"danger",$$slots:{default:[Rf]},$$scope:{ctx:i}}}),t.$on("click",i[5]),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(a){R(e.$$.fragment,a),n=O(a),R(t.$$.fragment,a)},m(a,o){N(e,a,o),m(a,n,o),N(t,a,o),r=!0},p(a,o){var c;const l={};o&2&&(l.href=me.trainers((c=a[1])==null?void 0:c.info.readKey)),o&64&&(l.$$scope={dirty:o,ctx:a}),e.$set(l);const u={};o&64&&(u.$$scope={dirty:o,ctx:a}),t.$set(u)},i(a){r||(E(e.$$.fragment,a),E(t.$$.fragment,a),r=!0)},o(a){T(e.$$.fragment,a),T(t.$$.fragment,a),r=!1},d(a){a&&h(n),D(e,a),D(t,a)}}}function Df(i){let e,n,t,r,s,a,o,l="<strong>This is permanent and cannot be undone!</strong>",u,c,f;return c=new Le({props:{$$slots:{default:[Nf]},$$scope:{ctx:i}}}),{c(){e=w("section"),n=w("p"),t=M("Are you sure you want to retire "),r=M(i[4]),s=M("? This will delete all of their data, including all of their pokemon, from our records."),a=A(),o=w("p"),o.innerHTML=l,u=A(),L(c.$$.fragment)},l(d){e=k(d,"SECTION",{});var p=j(e);n=k(p,"P",{});var _=j(n);t=B(_,"Are you sure you want to retire "),r=B(_,i[4]),s=B(_,"? This will delete all of their data, including all of their pokemon, from our records."),_.forEach(h),a=O(p),o=k(p,"P",{"data-svelte-h":!0}),ie(o)!=="svelte-1ocw14s"&&(o.innerHTML=l),u=O(p),R(c.$$.fragment,p),p.forEach(h)},m(d,p){m(d,e,p),v(e,n),v(n,t),v(n,r),v(n,s),v(e,a),v(e,o),v(e,u),N(c,e,null),f=!0},p(d,p){(!f||p&16)&&se(r,d[4]);const _={};p&66&&(_.$$scope={dirty:p,ctx:d}),c.$set(_)},i(d){f||(E(c.$$.fragment,d),f=!0)},o(d){T(c.$$.fragment,d),f=!1},d(d){d&&h(e),D(c)}}}function Uf(i){let e,n,t,r;const s=[Af,Pf],a=[];function o(l,u){return l[3]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function Mf(i){let e,n,t,r;return e=new Je({props:{value:"Retire "+i[4]+"?"}}),t=new We({props:{title:"Retire "+i[4]+"?",$$slots:{default:[Uf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&16&&(o.value="Retire "+s[4]+"?"),e.$set(o);const l={};a&16&&(l.title="Retire "+s[4]+"?"),a&94&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function Bf(i,e,n){let t,r,s,a=x,o=()=>(a(),a=Ge(l,f=>n(1,s=f)),l);i.$$.on_destroy.push(()=>a());let{trainer:l}=e;o();let u=!1;const c=()=>{var f;n(2,u=!0),(f=s.update)==null||f.retire().then(()=>{qe(me.trainers())}).catch(()=>{n(2,u=!1)})};return i.$$set=f=>{"trainer"in f&&o(n(0,l=f.trainer))},i.$$.update=()=>{i.$$.dirty&2&&n(4,t=(s==null?void 0:s.info.name)??""),i.$$.dirty&2&&n(3,r=s.update!=null)},[l,s,u,r,t,c]}class Ff extends ce{constructor(e){super(),fe(this,e,Bf,Mf,ue,{trainer:0})}}const Kf=""+new URL("../assets/find-access-key.BK3o4iYv.png",import.meta.url).href;function qf(i){let e,n="<p>A trainer&#39;s <dfn>Access Key</dfn> is a special code that allows you to manage a trainer&#39;s info and their pokemon. Each trainer has a unique key, and the key must be saved to each device from which you want to manage the trainer.</p>",t,r,s,a,o,l;const u=[Vf,zf],c=[];function f(d,p){return d[6]?0:1}return r=f(i),s=c[r]=u[r](i),o=new Le({props:{$$slots:{default:[Xf]},$$scope:{ctx:i}}}),{c(){e=w("section"),e.innerHTML=n,t=A(),s.c(),a=A(),L(o.$$.fragment)},l(d){e=k(d,"SECTION",{"data-svelte-h":!0}),ie(e)!=="svelte-pmiax8"&&(e.innerHTML=n),t=O(d),s.l(d),a=O(d),R(o.$$.fragment,d)},m(d,p){m(d,e,p),m(d,t,p),c[r].m(d,p),m(d,a,p),N(o,d,p),l=!0},p(d,p){let _=r;r=f(d),r===_?c[r].p(d,p):(ge(),T(c[_],1,1,()=>{c[_]=null}),$e(),s=c[r],s?s.p(d,p):(s=c[r]=u[r](d),s.c()),E(s,1),s.m(a.parentNode,a));const g={};p&16388&&(g.$$scope={dirty:p,ctx:d}),o.$set(g)},i(d){l||(E(s),E(o.$$.fragment,d),l=!0)},o(d){T(s),T(o.$$.fragment,d),l=!1},d(d){d&&(h(e),h(t),h(a)),c[r].d(d),D(o,d)}}}function Hf(i){let e,n,t="<strong>Success!</strong>",r,s,a,o,l,u,c,f;return c=new Le({props:{$$slots:{default:[Qf]},$$scope:{ctx:i}}}),{c(){e=w("section"),n=w("p"),n.innerHTML=t,r=A(),s=w("p"),a=M("You can now manage "),o=M(i[7]),l=M(" and their pokemon."),u=A(),L(c.$$.fragment)},l(d){e=k(d,"SECTION",{});var p=j(e);n=k(p,"P",{"data-svelte-h":!0}),ie(n)!=="svelte-no3oh3"&&(n.innerHTML=t),r=O(p),s=k(p,"P",{});var _=j(s);a=B(_,"You can now manage "),o=B(_,i[7]),l=B(_," and their pokemon."),_.forEach(h),u=O(p),R(c.$$.fragment,p),p.forEach(h)},m(d,p){m(d,e,p),v(e,n),v(e,r),v(e,s),v(s,a),v(s,o),v(s,l),v(e,u),N(c,e,null),f=!0},p(d,p){(!f||p&128)&&se(o,d[7]);const _={};p&16388&&(_.$$scope={dirty:p,ctx:d}),c.$set(_)},i(d){f||(E(c.$$.fragment,d),f=!0)},o(d){T(c.$$.fragment,d),f=!1},d(d){d&&h(e),D(c)}}}function zf(i){let e,n;return e=new ct({props:{saving:i[3],caption:"Searching...",$$slots:{default:[Jf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.saving=t[3]),r&16538&&(s.$$scope={dirty:r,ctx:t}),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Vf(i){let e,n,t,r,s,a,o,l,u="Access Key",c,f,d,p,_,g,b;return g=new ke({props:{$$slots:{default:[Wf]},$$scope:{ctx:i}}}),g.$on("click",i[10]),{c(){e=w("section"),n=w("p"),t=M("You currently have "),r=M(i[7]),s=M("'s access key saved to this device. To share this key, press Reveal below."),a=A(),o=w("div"),l=w("label"),l.textContent=u,c=A(),f=w("div"),d=w("input"),_=A(),L(g.$$.fragment),this.h()},l(y){e=k(y,"SECTION",{});var S=j(e);n=k(S,"P",{});var P=j(n);t=B(P,"You currently have "),r=B(P,i[7]),s=B(P,"'s access key saved to this device. To share this key, press Reveal below."),P.forEach(h),a=O(S),o=k(S,"DIV",{class:!0});var I=j(o);l=k(I,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(l)!=="svelte-3bojr9"&&(l.textContent=u),c=O(I),f=k(I,"DIV",{class:!0});var H=j(f);d=k(H,"INPUT",{id:!0,type:!0,class:!0}),_=O(H),R(g.$$.fragment,H),H.forEach(h),I.forEach(h),S.forEach(h),this.h()},h(){$(l,"for","key-input"),$(l,"class","font-sm spaced-sm svelte-jn36bw"),$(d,"id","key-input"),d.value=p=i[2].writeKey,$(d,"type",i[9]),$(d,"class","font-lg svelte-jn36bw"),d.disabled=!0,we(d,"flex","1"),$(f,"class","horizontal spaced-sm svelte-jn36bw"),$(o,"class","vertical spaced-lg svelte-jn36bw")},m(y,S){m(y,e,S),v(e,n),v(n,t),v(n,r),v(n,s),v(e,a),v(e,o),v(o,l),v(o,c),v(o,f),v(f,d),v(f,_),N(g,f,null),b=!0},p(y,S){(!b||S&128)&&se(r,y[7]),(!b||S&4&&p!==(p=y[2].writeKey)&&d.value!==p)&&(d.value=p),(!b||S&512)&&$(d,"type",y[9]);const P={};S&16640&&(P.$$scope={dirty:S,ctx:y}),g.$set(P)},i(y){b||(E(g.$$.fragment,y),b=!0)},o(y){T(g.$$.fragment,y),b=!1},d(y){y&&h(e),D(g)}}}function Gf(i){let e;return{c(){e=M("Submit")},l(n){e=B(n,"Submit")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function gs(i){let e,n="The provided access key does match this trainer's key";return{c(){e=w("p"),e.textContent=n,this.h()},l(t){e=k(t,"P",{class:!0,"data-svelte-h":!0}),ie(e)!=="svelte-7yk1wk"&&(e.textContent=n),this.h()},h(){$(e,"class","font-sm error svelte-jn36bw")},m(t,r){m(t,e,r)},d(t){t&&h(e)}}}function Jf(i){let e,n,t,r,s,a,o,l,u,c,f="Access Key",d,p,_,g,b,y,S,P,I,H,G,F,U,K,re,Y,X=`<img src="${Kf}" alt="&#39;Access Key&#39; is a button at the bottom of the trainer&#39;s page." width="800" height="250" class="svelte-jn36bw"/> <figcaption>Click this button to get the access key</figcaption>`,z,C,V;b=new ke({props:{type:"submit",$$slots:{default:[Gf]},$$scope:{ctx:i}}});let W=i[4].length>0&&i[4]===i[1]&&gs();return{c(){e=w("section"),n=w("p"),t=M("You currently do not have permission to manage "),r=M(i[7]),s=M(". To obtain permission, put "),a=M(i[7]),o=M("'s access key into the field below and press Submit."),l=A(),u=w("form"),c=w("label"),c.textContent=f,d=A(),p=w("div"),_=w("input"),g=A(),L(b.$$.fragment),y=A(),W&&W.c(),S=A(),P=w("hr"),I=A(),H=w("section"),G=w("p"),F=M("If you are managing "),U=M(i[7]),K=M(" from another device, you can find their access code from the trainer's page."),re=A(),Y=w("figure"),Y.innerHTML=X,this.h()},l(Q){e=k(Q,"SECTION",{});var ee=j(e);n=k(ee,"P",{});var q=j(n);t=B(q,"You currently do not have permission to manage "),r=B(q,i[7]),s=B(q,". To obtain permission, put "),a=B(q,i[7]),o=B(q,"'s access key into the field below and press Submit."),q.forEach(h),l=O(ee),u=k(ee,"FORM",{class:!0});var Z=j(u);c=k(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ie(c)!=="svelte-3bojr9"&&(c.textContent=f),d=O(Z),p=k(Z,"DIV",{class:!0});var te=j(p);_=k(te,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),g=O(te),R(b.$$.fragment,te),te.forEach(h),y=O(Z),W&&W.l(Z),Z.forEach(h),ee.forEach(h),S=O(Q),P=k(Q,"HR",{}),I=O(Q),H=k(Q,"SECTION",{});var J=j(H);G=k(J,"P",{});var ae=j(G);F=B(ae,"If you are managing "),U=B(ae,i[7]),K=B(ae," from another device, you can find their access code from the trainer's page."),ae.forEach(h),re=O(J),Y=k(J,"FIGURE",{class:!0,"data-svelte-h":!0}),ie(Y)!=="svelte-squzr5"&&(Y.innerHTML=X),J.forEach(h),this.h()},h(){$(c,"for","key-input"),$(c,"class","font-sm spaced-sm svelte-jn36bw"),$(_,"id","key-input"),$(_,"type","text"),$(_,"placeholder","e.g. JM7WEZ0YKW3WGC8I"),$(_,"class","font-lg svelte-jn36bw"),_.disabled=i[3],_.required=!0,we(_,"flex","1"),$(p,"class","horizontal spaced-sm svelte-jn36bw"),$(u,"class","vertical spaced-lg svelte-jn36bw"),$(Y,"class","spaced-lg svelte-jn36bw")},m(Q,ee){m(Q,e,ee),v(e,n),v(n,t),v(n,r),v(n,s),v(n,a),v(n,o),v(e,l),v(e,u),v(u,c),v(u,d),v(u,p),v(p,_),oe(_,i[1]),v(p,g),N(b,p,null),v(u,y),W&&W.m(u,null),m(Q,S,ee),m(Q,P,ee),m(Q,I,ee),m(Q,H,ee),v(H,G),v(G,F),v(G,U),v(G,K),v(H,re),v(H,Y),z=!0,C||(V=[he(_,"input",i[13]),he(u,"submit",Lt(i[11]))],C=!0)},p(Q,ee){(!z||ee&128)&&se(r,Q[7]),(!z||ee&128)&&se(a,Q[7]),(!z||ee&8)&&(_.disabled=Q[3]),ee&2&&_.value!==Q[1]&&oe(_,Q[1]);const q={};ee&16384&&(q.$$scope={dirty:ee,ctx:Q}),b.$set(q),Q[4].length>0&&Q[4]===Q[1]?W||(W=gs(),W.c(),W.m(u,null)):W&&(W.d(1),W=null),(!z||ee&128)&&se(U,Q[7])},i(Q){z||(E(b.$$.fragment,Q),z=!0)},o(Q){T(b.$$.fragment,Q),z=!1},d(Q){Q&&(h(e),h(S),h(P),h(I),h(H)),D(b),W&&W.d(),C=!1,st(V)}}}function Wf(i){let e;return{c(){e=M(i[8])},l(n){e=B(n,i[8])},m(n,t){m(n,e,t)},p(n,t){t&256&&se(e,n[8])},d(n){n&&h(e)}}}function Yf(i){let e;return{c(){e=M("Go Back")},l(n){e=B(n,"Go Back")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Xf(i){var t;let e,n;return e=new ke({props:{href:me.trainers((t=i[2])==null?void 0:t.info.readKey),variant:"ghost",$$slots:{default:[Yf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,s){N(e,r,s),n=!0},p(r,s){var o;const a={};s&4&&(a.href=me.trainers((o=r[2])==null?void 0:o.info.readKey)),s&16384&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function Zf(i){let e;return{c(){e=M("Go to Trainer's Page")},l(n){e=B(n,"Go to Trainer's Page")},m(n,t){m(n,e,t)},d(n){n&&h(e)}}}function Qf(i){var t;let e,n;return e=new ke({props:{href:me.trainers((t=i[2])==null?void 0:t.info.readKey),$$slots:{default:[Zf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment)},l(r){R(e.$$.fragment,r)},m(r,s){N(e,r,s),n=!0},p(r,s){var o;const a={};s&4&&(a.href=me.trainers((o=r[2])==null?void 0:o.info.readKey)),s&16384&&(a.$$scope={dirty:s,ctx:r}),e.$set(a)},i(r){n||(E(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){D(e,r)}}}function xf(i){let e,n,t,r;const s=[Hf,qf],a=[];function o(l,u){return l[5]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function eh(i){let e,n,t,r;return e=new Je({props:{value:i[7]+"'s Access Key"}}),t=new We({props:{title:i[7]+"'s Access Key",$$slots:{default:[xf]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&128&&(o.value=s[7]+"'s Access Key"),e.$set(o);const l={};a&128&&(l.title=s[7]+"'s Access Key"),a&17406&&(l.$$scope={dirty:a,ctx:s}),t.$set(l)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function th(i,e,n){let t,r,s,a,o,l=x,u=()=>(l(),l=Ge(c,P=>n(2,o=P)),c);i.$$.on_destroy.push(()=>l());let{trainer:c}=e;u();let f=!1;const d=()=>n(12,f=!f);let p="",_=!1,g="",b=!1;const y=()=>{n(3,_=!0),c.verifyAccess(p).then(P=>{P?n(5,b=!0):n(4,g=p)}).finally(()=>{n(3,_=!1)})};function S(){p=this.value,n(1,p)}return i.$$set=P=>{"trainer"in P&&u(n(0,c=P.trainer))},i.$$.update=()=>{i.$$.dirty&4096&&n(9,t=f?"text":"password"),i.$$.dirty&4096&&n(8,r=f?"Hide":"Reveal"),i.$$.dirty&2&&n(1,p=p.toLocaleUpperCase().replace(/[^a-zA-Z0-9]/g,"")),i.$$.dirty&4&&n(7,s=(o==null?void 0:o.info.name)??""),i.$$.dirty&4&&n(6,a=o.update!=null)},[c,p,o,_,g,b,a,s,r,t,d,y,f,S]}class nh extends ce{constructor(e){super(),fe(this,e,th,eh,ue,{trainer:0})}}function rh(i){let e,n;return e=new Je({props:{value:"Trainers"}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function sh(i){let e,n;return e=new hf({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ih(i){let e,n;return e=new Pu({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ah(i){let e,n,t,r={ctx:i,current:null,token:null,hasCatch:!1,pending:vh,then:oh,catch:lh,value:4,blocks:[,,,]};return Pt(n=i[4],r),{c(){e=ne(),r.block.c()},l(s){e=ne(),r.block.l(s)},m(s,a){m(s,e,a),r.block.m(s,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(s,a){i=s,r.ctx=i,a&16&&n!==(n=i[4])&&Pt(n,r)||bn(r,i,a)},i(s){t||(E(r.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const o=r.blocks[a];T(o)}t=!1},d(s){s&&h(e),r.block.d(s),r.token=null,r=null}}}function lh(i){return{c:x,l:x,m:x,p:x,i:x,o:x,d:x}}function oh(i){let e,n,t,r;const s=[$h,gh,mh,_h,ph,dh,hh,fh,ch,uh],a=[];function o(l,u){return l[4]?l[1]===Ie.addPokemon?1:l[1]===Ie.editPokemon?2:l[1]===Ie.evolvePokemon?3:l[1]===Ie.removePokemon?4:l[2]?5:l[1]===Ie.editTrainer?6:l[1]===Ie.retireTrainer?7:l[1]===Ie.accessKey?8:9:0}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function uh(i){let e,n;return e=new ki({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ch(i){let e,n;return e=new nh({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function fh(i){let e,n;return e=new Ff({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function hh(i){let e,n;return e=new If({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function dh(i){let e,n;return e=new Na({props:{trainer:i[4],id:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.id=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function ph(i){let e,n;return e=new zu({props:{trainer:i[4],id:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.id=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function _h(i){let e,n;return e=new tf({props:{trainer:i[4],id:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.id=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function mh(i){let e,n;return e=new Dc({props:{trainer:i[4],id:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.id=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function gh(i){let e,n;return e=new au({props:{trainer:i[4]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function $h(i){let e;return{c(){e=w("br")},l(n){e=k(n,"BR",{})},m(n,t){m(n,e,t)},p:x,i:x,o:x,d(n){n&&h(e)}}}function vh(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function bh(i){let e,n,t,r;const s=[ah,ih,sh,rh],a=[];function o(l,u){return l[0]?0:l[1]===Ie.newTrainer?1:l[1]===Ie.findTrainer?2:3}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function wh(i){let e,n;return e=new Xs({props:{slot:"icon"}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function kh(i){let e,n,t,r={ctx:i,current:null,token:null,hasCatch:!1,pending:Sh,then:Th,catch:Eh,value:3,blocks:[,,,]};return Pt(n=i[3],r),{c(){e=ne(),r.block.c()},l(s){e=ne(),r.block.l(s)},m(s,a){m(s,e,a),r.block.m(s,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(s,a){i=s,r.ctx=i,a&8&&n!==(n=i[3])&&Pt(n,r)||bn(r,i,a)},i(s){t||(E(r.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const o=r.blocks[a];T(o)}t=!1},d(s){s&&h(e),r.block.d(s),r.token=null,r=null}}}function yh(i){let e,n,t,r={ctx:i,current:null,token:null,hasCatch:!1,pending:Oh,then:Ih,catch:Ch,value:4,blocks:[,,,]};return Pt(n=i[4],r),{c(){e=ne(),r.block.c()},l(s){e=ne(),r.block.l(s)},m(s,a){m(s,e,a),r.block.m(s,r.anchor=a),r.mount=()=>e.parentNode,r.anchor=e,t=!0},p(s,a){i=s,r.ctx=i,a&16&&n!==(n=i[4])&&Pt(n,r)||bn(r,i,a)},i(s){t||(E(r.block),t=!0)},o(s){for(let a=0;a<3;a+=1){const o=r.blocks[a];T(o)}t=!1},d(s){s&&h(e),r.block.d(s),r.token=null,r=null}}}function Eh(i){return{c:x,l:x,m:x,p:x,i:x,o:x,d:x}}function Th(i){let e,n,t=i[3]&&$s(i);return{c(){t&&t.c(),e=ne()},l(r){t&&t.l(r),e=ne()},m(r,s){t&&t.m(r,s),m(r,e,s),n=!0},p(r,s){r[3]?t?(t.p(r,s),s&8&&E(t,1)):(t=$s(r),t.c(),E(t,1),t.m(e.parentNode,e)):t&&(ge(),T(t,1,1,()=>{t=null}),$e())},i(r){n||(E(t),n=!0)},o(r){T(t),n=!1},d(r){r&&h(e),t&&t.d(r)}}}function $s(i){let e,n;return e=new mu({props:{trainers:i[3]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&8&&(s.trainers=t[3]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Sh(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ch(i){return{c:x,l:x,m:x,p:x,i:x,o:x,d:x}}function Ih(i){let e,n,t,r;const s=[Ah,Ph],a=[];function o(l,u){return l[4]?0:1}return e=o(i),n=a[e]=s[e](i),{c(){n.c(),t=ne()},l(l){n.l(l),t=ne()},m(l,u){a[e].m(l,u),m(l,t,u),r=!0},p(l,u){let c=e;e=o(l),e===c?a[e].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),n=a[e],n?n.p(l,u):(n=a[e]=s[e](l),n.c()),E(n,1),n.m(t.parentNode,t))},i(l){r||(E(n),r=!0)},o(l){T(n),r=!1},d(l){l&&h(t),a[e].d(l)}}}function Ph(i){let e,n;return e=new sf({props:{trainerKey:i[0]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&1&&(s.trainerKey=t[0]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Ah(i){let e,n;return e=new xa({props:{trainer:i[4],currentPokemon:i[2]}}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p(t,r){const s={};r&16&&(s.trainer=t[4]),r&4&&(s.currentPokemon=t[2]),e.$set(s)},i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function Oh(i){let e,n;return e=new at({}),{c(){L(e.$$.fragment)},l(t){R(e.$$.fragment,t)},m(t,r){N(e,t,r),n=!0},p:x,i(t){n||(E(e.$$.fragment,t),n=!0)},o(t){T(e.$$.fragment,t),n=!1},d(t){D(e,t)}}}function jh(i){let e,n,t,r;const s=[yh,kh],a=[];function o(l,u){return l[0]?0:1}return n=o(i),t=a[n]=s[n](i),{c(){e=w("nav"),t.c(),this.h()},l(l){e=k(l,"NAV",{slot:!0,class:!0,"aria-label":!0});var u=j(e);t.l(u),u.forEach(h),this.h()},h(){$(e,"slot","side"),$(e,"class","table svelte-1yryrve"),$(e,"aria-label","Pokemon List")},m(l,u){m(l,e,u),a[n].m(e,null),r=!0},p(l,u){let c=n;n=o(l),n===c?a[n].p(l,u):(ge(),T(a[c],1,1,()=>{a[c]=null}),$e(),t=a[n],t?t.p(l,u):(t=a[n]=s[n](l),t.c()),E(t,1),t.m(e,null))},i(l){r||(E(t),r=!0)},o(l){T(t),r=!1},d(l){l&&h(e),a[n].d()}}}function Lh(i){let e,n,t,r;return e=new Je({props:{value:"Trainers"}}),t=new Ys({props:{theme:"green",$$slots:{side:[jh],icon:[wh],default:[bh]},$$scope:{ctx:i}}}),{c(){L(e.$$.fragment),n=A(),L(t.$$.fragment)},l(s){R(e.$$.fragment,s),n=O(s),R(t.$$.fragment,s)},m(s,a){N(e,s,a),m(s,n,a),N(t,s,a),r=!0},p(s,[a]){const o={};a&95&&(o.$$scope={dirty:a,ctx:s}),t.$set(o)},i(s){r||(E(e.$$.fragment,s),E(t.$$.fragment,s),r=!0)},o(s){T(e.$$.fragment,s),T(t.$$.fragment,s),r=!1},d(s){s&&h(n),D(e,s),D(t,s)}}}function Rh(i,e,n){let t,r,s,a;Re(i,Js,u=>n(5,a=u));let o,l;return i.$$.update=()=>{i.$$.dirty&32&&n(0,t=a.url.searchParams.get("id")),i.$$.dirty&32&&n(2,r=a.url.searchParams.get("pokemon")),i.$$.dirty&32&&n(1,s=a.url.searchParams.get("action")),i.$$.dirty&1&&(t&&qn?(n(3,o=void 0),n(4,l=Yt.get(t))):!t&&qn?(n(3,o=Yt.all()),n(4,l=void 0)):(n(4,l=void 0),n(3,o=void 0)))},[t,s,r,o,l,a]}class nd extends ce{constructor(e){super(),fe(this,e,Rh,Lh,ue,{})}}export{nd as component};
