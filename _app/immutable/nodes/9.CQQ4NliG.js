import{S as fe,i as de,s as pe,A as Ie,f as p,t as N,a as I,j as Ne,B as De,C as Oe,D as Pe,g as E,k,l as h,n as b,o as v,p as P,w as B,q as g,r as A,y as K,L as me,N as Ge,d as U,m as L,c as q,b as M,O as Qe,u as ne,I as Ze,J as xe,W as se,X as ae,a4 as Ee,a5 as et,z as tt}from"../chunks/B-p2TLsN.js";import{g as D}from"../chunks/BxlXVsHr.js";import{s as Se}from"../chunks/CwHq6mbt.js";/* empty css                */import{C as st}from"../chunks/tbLJMC-b.js";import"../chunks/Dii3oeOP.js";import"../chunks/BCS0_jS3.js";import{B as at,a as Te}from"../chunks/BAI8L_KV.js";import{B as nt}from"../chunks/C0aYrOqb.js";import{V as rt}from"../chunks/ClOxUDT_.js";import{P as ot}from"../chunks/D5hzCKRF.js";import{T as lt}from"../chunks/BrOqqHbB.js";import{F as _e}from"../chunks/CujkUSDH.js";import{T as J,t as ct}from"../chunks/BbTHQUKZ.js";import{U as ut}from"../chunks/DscUXOdb.js";import{h as it}from"../chunks/xlmCGyyc.js";const Ae=()=>"<p>All of the data for your trainers and custom pokemon are stored locally on your computer. This is why you don't need an account to use the Poké 5e app! Unfortunately, it also means you can lose your data if your browser's data gets cleared.</p><p>To protect against this, it's a good idea to <strong>back up</strong> your list of trainers and fakémon so that you can recover them, just in case.</p>",ft=Ae,dt=(s={},e={})=>(e.locale??D())==="en"?Ae():ft(),Re=()=>"Download Backup File",pt=Re,mt=(s={},e={})=>(e.locale??D())==="en"?Re():pt(),Fe=()=>"This will download a <code>.poke5e</code> file containing the IDs and Access Keys of all your Trainers and Fakémon.",_t=Fe,ht=(s={},e={})=>(e.locale??D())==="en"?Fe():_t(),Ue=()=>"Backup successfully downloaded!",kt=Ue,bt=(s={},e={})=>(e.locale??D())==="en"?Ue():kt(),Le=()=>"Restore Backup File",gt=Le,vt=(s={},e={})=>(e.locale??D())==="en"?Le():gt(),qe=()=>"Choose a <code>.poke5e</code> file on your device. This adds the Trainers and Fakémon in the file to this site.",wt=qe,$t=(s={},e={})=>(e.locale??D())==="en"?qe():wt(),Me=s=>`Backup successfully restored! Found ${s==null?void 0:s.trainers} trainers and ${s==null?void 0:s.fakemon} fakémon.`,yt=Me,Et=(s,e={})=>(e.locale??D())==="en"?Me(s):yt(s),He=s=>`Something went wrong restoring the backup. ${s==null?void 0:s.message}`,St=He,Tt=(s,e={})=>(e.locale??D())==="en"?He(s):St(s),Ve=()=>"Manual Backup",Bt=Ve,Kt=(s={},e={})=>(e.locale??D())==="en"?Ve():Bt(),We=()=>"If you wish to manually keep your trainer IDs and Fakémon somewhere, you may copy them from below.",Ct=We,It=(s={},e={})=>(e.locale??D())==="en"?We():Ct(),je=()=>"<strong>Note:</strong> The manual backup cannot be uploaded to automatically restore missing trainers and fakémon.",Nt=je,Dt=(s={},e={})=>(e.locale??D())==="en"?je():Nt(),Je=()=>"IDs and Access Keys",Ot=Je,Pt=(s={},e={})=>(e.locale??D())==="en"?Je():Ot();function Be(s){let e,t,a,n,r;function m(u,i){return u[3]?Rt:At}let c=m(s),o=c(s);return{c(){e=g("menu"),t=g("li"),a=g("button"),o.c(),this.h()},l(u){e=b(u,"MENU",{class:!0});var i=v(e);t=b(i,"LI",{});var w=v(t);a=b(w,"BUTTON",{class:!0});var l=v(a);o.l(l),l.forEach(p),w.forEach(p),i.forEach(p),this.h()},h(){h(a,"class","svelte-1am3xrv"),h(e,"class","svelte-1am3xrv")},m(u,i){E(u,e,i),k(e,t),k(t,a),o.m(a,null),n||(r=me(a,"click",s[5]),n=!0)},p(u,i){c!==(c=m(u))&&(o.d(1),o=c(u),o&&(o.c(),o.m(a,null)))},d(u){u&&p(e),o.d(),n=!1,r()}}}function At(s){let e;return{c(){e=A("Copy")},l(t){e=P(t,"Copy")},m(t,a){E(t,e,a)},d(t){t&&p(e)}}}function Rt(s){let e;return{c(){e=A("✓ Copied!")},l(t){e=P(t,"✓ Copied!")},m(t,a){E(t,e,a)},d(t){t&&p(e)}}}function Ft(s){let e,t,a,n,r,m,c,o,u,i=s[1]&&s[4]&&Be(s);const w=s[7].default,l=Ie(w,s,s[6],null);return{c(){e=g("div"),t=g("div"),a=g("span"),n=A(s[0]),r=K(),i&&i.c(),m=K(),c=g("pre"),o=g("code"),l&&l.c(),this.h()},l(f){e=b(f,"DIV",{class:!0});var d=v(e);t=b(d,"DIV",{class:!0});var S=v(t);a=b(S,"SPAN",{class:!0});var T=v(a);n=P(T,s[0]),T.forEach(p),r=B(S),i&&i.l(S),S.forEach(p),m=B(d),c=b(d,"PRE",{class:!0});var W=v(c);o=b(W,"CODE",{class:!0});var O=v(o);l&&l.l(O),O.forEach(p),W.forEach(p),d.forEach(p),this.h()},h(){h(a,"class","title"),h(t,"class","header svelte-1am3xrv"),h(o,"class","max-height svelte-1am3xrv"),h(c,"class","svelte-1am3xrv"),h(e,"class","code-block svelte-1am3xrv")},m(f,d){E(f,e,d),k(e,t),k(t,a),k(a,n),k(t,r),i&&i.m(t,null),k(e,m),k(e,c),k(c,o),l&&l.m(o,null),s[8](c),u=!0},p(f,[d]){(!u||d&1)&&Ne(n,f[0]),f[1]&&f[4]?i?i.p(f,d):(i=Be(f),i.c(),i.m(t,null)):i&&(i.d(1),i=null),l&&l.p&&(!u||d&64)&&De(l,w,f,f[6],u?Pe(w,f[6],d,null):Oe(f[6]),null)},i(f){u||(I(l,f),u=!0)},o(f){N(l,f),u=!1},d(f){f&&p(e),i&&i.d(),l&&l.d(f),s[8](null)}}}function Ut(s,e,t){let{$$slots:a={},$$scope:n}=e,{title:r}=e,{copiable:m=!1}=e,c,o=!1;const u="clipboard"in navigator,i=()=>{navigator.clipboard.writeText(c==null?void 0:c.textContent),t(3,o=!0),setTimeout(()=>t(3,o=!1),2e3)};function w(l){Ge[l?"unshift":"push"](()=>{c=l,t(2,c)})}return s.$$set=l=>{"title"in l&&t(0,r=l.title),"copiable"in l&&t(1,m=l.copiable),"$$scope"in l&&t(6,n=l.$$scope)},[r,m,c,o,u,i,n,a,w]}class Lt extends fe{constructor(e){super(),de(this,e,Ut,Ft,pe,{title:0,copiable:1})}}function qt(s){let e,t,a;return{c(){e=g("input"),this.h()},l(n){e=b(n,"INPUT",{id:!0,type:!0,accept:!0}),this.h()},h(){h(e,"id",s[0]),h(e,"type","file"),h(e,"accept",s[5]),e.disabled=s[4]},m(n,r){E(n,e,r),t||(a=me(e,"change",s[7]),t=!0)},p(n,r){r&1&&h(e,"id",n[0]),r&32&&h(e,"accept",n[5]),r&16&&(e.disabled=n[4])},d(n){n&&p(e),t=!1,a()}}}function Mt(s){let e,t,a,n,r;const m=s[6].default,c=Ie(m,s,s[8],null);return n=new rt({props:{inline:!0,$$slots:{default:[qt]},$$scope:{ctx:s}}}),{c(){e=g("label"),c&&c.c(),a=K(),M(n.$$.fragment),this.h()},l(o){e=b(o,"LABEL",{class:!0,for:!0});var u=v(e);c&&c.l(u),u.forEach(p),a=B(o),q(n.$$.fragment,o),this.h()},h(){h(e,"class",t="button "+s[1]+" "+s[2]+" "+s[3]+" svelte-5wfibh"),h(e,"for",s[0])},m(o,u){E(o,e,u),c&&c.m(e,null),E(o,a,u),L(n,o,u),r=!0},p(o,[u]){c&&c.p&&(!r||u&256)&&De(c,m,o,o[8],r?Pe(m,o[8],u,null):Oe(o[8]),null),(!r||u&14&&t!==(t="button "+o[1]+" "+o[2]+" "+o[3]+" svelte-5wfibh"))&&h(e,"class",t),(!r||u&1)&&h(e,"for",o[0]);const i={};u&305&&(i.$$scope={dirty:u,ctx:o}),n.$set(i)},i(o){r||(I(c,o),I(n.$$.fragment,o),r=!0)},o(o){N(c,o),N(n.$$.fragment,o),r=!1},d(o){o&&(p(e),p(a)),c&&c.d(o),U(n,o)}}}function Ht(s,e,t){let{$$slots:a={},$$scope:n}=e,{id:r}=e,{variant:m="solid"}=e,{align:c="center"}=e,{width:o="auto"}=e,{disabled:u=!1}=e,{accept:i=void 0}=e;function w(l){Qe.call(this,s,l)}return s.$$set=l=>{"id"in l&&t(0,r=l.id),"variant"in l&&t(1,m=l.variant),"align"in l&&t(2,c=l.align),"width"in l&&t(3,o=l.width),"disabled"in l&&t(4,u=l.disabled),"accept"in l&&t(5,i=l.accept),"$$scope"in l&&t(8,n=l.$$scope)},[r,m,c,o,u,i,a,w,n]}class Vt extends fe{constructor(e){super(),de(this,e,Ht,Mt,pe,{id:0,variant:1,align:2,width:3,disabled:4,accept:5})}}class ze extends Error{constructor(e){super(e)}}async function Wt(){const s=J.getReadKeys().map(a=>({readKey:a,writeKey:J.getWriteKey(a)})),e=_e.list(),t={$schema:ut.backups.schemas[202602](),createdAt:new Date().toISOString(),fakemon:e,trainers:s};return new Blob([JSON.stringify(t)],{type:"application/json"})}function jt(s){const e=[];if("fakemon"in s?Array.isArray(s.fakemon)?s.fakemon.some(t=>!("id"in t)||!("readKey"in t))&&e.push("fakemon require id and readKey"):e.push("fakemon is not an array"):e.push("fakemon is required"),"trainers"in s?Array.isArray(s.trainers)?s.trainers.some(t=>!("readKey"in t))&&e.push("trainers require readKey"):e.push("trainers is not an array"):e.push("trainers is required"),e.length>0)throw new ze(e.join("; "));return!0}async function Jt(s){let e={};try{const t=await s.text();e=JSON.parse(t)}catch(t){throw console.error(t),new ze("Backup file has the wrong format.")}if(jt(e)){e.fakemon.map(n=>{_e.add(n)}),e.trainers.map(n=>{J.addReadKey(n.readKey),n.writeKey&&J.addWriteKey(n.readKey,n.writeKey)});const t=(await Promise.all(e.fakemon.map(n=>it.get(n.readKey)))).filter(n=>n!=null);return{trainers:(await Promise.all(e.trainers.map(n=>ct.get(n.readKey)))).filter(n=>n!=null).length,fakemon:t.length}}}const Ke={create:Wt,restore:Jt};function zt(){const s=J.getReadKeys().map(a=>({readKey:a,writeKey:J.getWriteKey(a)})),e=_e.list();return`# Trainers

Trainer ID   | Access Key
-------------|-----------------
${s.map(a=>`${a.readKey} | ${a.writeKey??""}`).join(`
`)}


# Fakemon

Fakemon ID      | Access Key
----------------|-----------------
${e.map(a=>`F.${a.readKey} | ${a.writeKey??""}`).join(`
`)}`}const Xt={create:zt};function Yt(s){let e=mt()+"",t;return{c(){t=A(e)},l(a){t=P(a,e)},m(a,n){E(a,t,n)},p:ne,d(a){a&&p(t)}}}function Gt(s){let e=vt()+"",t;return{c(){t=A(e)},l(a){t=P(a,e)},m(a,n){E(a,t,n)},p:ne,d(a){a&&p(t)}}}function Ce(s){let e,t,a="×",n,r,m=s[0].message+"",c,o,u,i,w,l;return{c(){e=g("section"),t=g("button"),t.textContent=a,n=K(),r=g("p"),c=A(m),this.h()},l(f){e=b(f,"SECTION",{"aria-live":!0,class:!0});var d=v(e);t=b(d,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),tt(t)!=="svelte-uxo80m"&&(t.textContent=a),n=B(d),r=b(d,"P",{class:!0});var S=v(r);c=P(S,m),S.forEach(p),d.forEach(p),this.h()},h(){h(t,"class","close-button svelte-hsncu2"),h(t,"aria-label","dismiss"),h(r,"class","svelte-hsncu2"),h(e,"aria-live","assertive"),h(e,"class",o="status status-"+s[0].type+" svelte-hsncu2")},m(f,d){E(f,e,d),k(e,t),k(e,n),k(e,r),k(r,c),i=!0,w||(l=me(t,"click",s[1]),w=!0)},p(f,d){s=f,(!i||d&1)&&m!==(m=s[0].message+"")&&Ne(c,m),(!i||d&1&&o!==(o="status status-"+s[0].type+" svelte-hsncu2"))&&h(e,"class",o)},i(f){i||(f&&et(()=>{i&&(u||(u=Ee(e,Se,{duration:ie},!0)),u.run(1))}),i=!0)},o(f){f&&(u||(u=Ee(e,Se,{duration:ie},!1)),u.run(0)),i=!1},d(f){f&&p(e),f&&u&&u.end(),w=!1,l()}}}function Qt(s){let e;return{c(){e=A(s[4])},l(t){e=P(t,s[4])},m(t,a){E(t,e,a)},p:ne,d(t){t&&p(e)}}}function Zt(s){let e,t,a=dt()+"",n,r,m,c,o,u,i,w,l=ht()+"",f,d,S,T,W,O,Q,Xe=$t()+"",Z,j,C,z,he=Kt()+"",re,oe,X,ke=It()+"",le,ce,R,ue,Y,x,Ye=Dt()+"",ee;o=new nt({props:{$$slots:{default:[Yt]},$$scope:{ctx:s}}}),o.$on("click",s[2]),T=new Vt({props:{id:"restore-backup",accept:".poke5e",$$slots:{default:[Gt]},$$scope:{ctx:s}}}),T.$on("change",s[3]);let $=s[0]&&Ce(s);return R=new Lt({props:{title:Pt(),copiable:!0,$$slots:{default:[Qt]},$$scope:{ctx:s}}}),{c(){e=g("section"),t=new ae(!1),n=K(),r=g("div"),m=g("section"),c=g("p"),M(o.$$.fragment),u=K(),i=g("p"),w=new ae(!1),f=K(),d=g("section"),S=g("p"),M(T.$$.fragment),W=K(),O=g("p"),Q=new ae(!1),Z=K(),$&&$.c(),j=K(),C=g("section"),z=g("h2"),re=A(he),oe=K(),X=g("p"),le=A(ke),ce=K(),M(R.$$.fragment),ue=K(),Y=g("p"),x=new ae(!1),this.h()},l(_){e=b(_,"SECTION",{class:!0});var y=v(e);t=se(y,!1),y.forEach(p),n=B(_),r=b(_,"DIV",{class:!0});var H=v(r);m=b(H,"SECTION",{class:!0});var V=v(m);c=b(V,"P",{class:!0});var G=v(c);q(o.$$.fragment,G),G.forEach(p),u=B(V),i=b(V,"P",{class:!0});var be=v(i);w=se(be,!1),be.forEach(p),V.forEach(p),f=B(H),d=b(H,"SECTION",{class:!0});var te=v(d);S=b(te,"P",{class:!0});var ge=v(S);q(T.$$.fragment,ge),ge.forEach(p),W=B(te),O=b(te,"P",{class:!0});var ve=v(O);Q=se(ve,!1),ve.forEach(p),te.forEach(p),H.forEach(p),Z=B(_),$&&$.l(_),j=B(_),C=b(_,"SECTION",{class:!0});var F=v(C);z=b(F,"H2",{});var we=v(z);re=P(we,he),we.forEach(p),oe=B(F),X=b(F,"P",{});var $e=v(X);le=P($e,ke),$e.forEach(p),ce=B(F),q(R.$$.fragment,F),ue=B(F),Y=b(F,"P",{});var ye=v(Y);x=se(ye,!1),ye.forEach(p),F.forEach(p),this.h()},h(){t.a=null,h(e,"class","svelte-hsncu2"),h(c,"class","button-wrapper svelte-hsncu2"),w.a=null,h(i,"class","description svelte-hsncu2"),h(m,"class","svelte-hsncu2"),h(S,"class","button-wrapper svelte-hsncu2"),Q.a=null,h(O,"class","description svelte-hsncu2"),h(d,"class","svelte-hsncu2"),h(r,"class","row svelte-hsncu2"),x.a=null,h(C,"class","svelte-hsncu2")},m(_,y){E(_,e,y),t.m(a,e),E(_,n,y),E(_,r,y),k(r,m),k(m,c),L(o,c,null),k(m,u),k(m,i),w.m(l,i),k(r,f),k(r,d),k(d,S),L(T,S,null),k(d,W),k(d,O),Q.m(Xe,O),E(_,Z,y),$&&$.m(_,y),E(_,j,y),E(_,C,y),k(C,z),k(z,re),k(C,oe),k(C,X),k(X,le),k(C,ce),L(R,C,null),k(C,ue),k(C,Y),x.m(Ye,Y),ee=!0},p(_,y){const H={};y&512&&(H.$$scope={dirty:y,ctx:_}),o.$set(H);const V={};y&512&&(V.$$scope={dirty:y,ctx:_}),T.$set(V),_[0]?$?($.p(_,y),y&1&&I($,1)):($=Ce(_),$.c(),I($,1),$.m(j.parentNode,j)):$&&(Ze(),N($,1,1,()=>{$=null}),xe());const G={};y&512&&(G.$$scope={dirty:y,ctx:_}),R.$set(G)},i(_){ee||(I(o.$$.fragment,_),I(T.$$.fragment,_),I($),I(R.$$.fragment,_),ee=!0)},o(_){N(o.$$.fragment,_),N(T.$$.fragment,_),N($),N(R.$$.fragment,_),ee=!1},d(_){_&&(p(e),p(n),p(r),p(Z),p(j),p(C)),U(o),U(T),$&&$.d(_),U(R)}}}function xt(s){let e,t;return e=new st({props:{title:"Backup and Restoration",$$slots:{default:[Zt]},$$scope:{ctx:s}}}),{c(){M(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,n){L(e,a,n),t=!0},p(a,n){const r={};n&513&&(r.$$scope={dirty:n,ctx:a}),e.$set(r)},i(a){t||(I(e.$$.fragment,a),t=!0)},o(a){N(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function es(s){let e,t;return e=new at({props:{slot:"icon"}}),{c(){M(e.$$.fragment)},l(a){q(e.$$.fragment,a)},m(a,n){L(e,a,n),t=!0},p:ne,i(a){t||(I(e.$$.fragment,a),t=!0)},o(a){N(e.$$.fragment,a),t=!1},d(a){U(e,a)}}}function ts(s){let e,t,a,n;return e=new lt({props:{value:"Backup and Restoration"}}),a=new ot({props:{theme:"grey",$$slots:{icon:[es],default:[xt]},$$scope:{ctx:s}}}),{c(){M(e.$$.fragment),t=K(),M(a.$$.fragment)},l(r){q(e.$$.fragment,r),t=B(r),q(a.$$.fragment,r)},m(r,m){L(e,r,m),E(r,t,m),L(a,r,m),n=!0},p(r,[m]){const c={};m&513&&(c.$$scope={dirty:m,ctx:r}),a.$set(c)},i(r){n||(I(e.$$.fragment,r),I(a.$$.fragment,r),n=!0)},o(r){N(e.$$.fragment,r),N(a.$$.fragment,r),n=!1},d(r){r&&p(t),U(e,r),U(a,r)}}}const ie=200;function ss(s,e,t){let a,n=-1;const r=l=>f=>{window.clearTimeout(n),a!=null?(t(0,a=void 0),n=window.setTimeout(()=>{t(0,a={type:l,message:f})},ie+10)):t(0,a={type:l,message:f})},m=()=>{window.clearTimeout(n),t(0,a=void 0)},c=r("success"),o=r("error"),u=async()=>{const l=await Ke.create(),f=URL.createObjectURL(l),d=new Date,S=`backup-${d.getFullYear()}${(d.getMonth()+1).toString().padStart(2,"0")}${d.getDate().toString().padStart(2,"0")}${d.getHours().toString().padStart(2,"0")}${d.getMinutes().toString().padStart(2,"0")}${d.getSeconds().toString().padStart(2,"0")}.poke5e`,T=document.createElement("a");T.href=f,T.download=S,T.click(),URL.revokeObjectURL(f),c(bt())},i=async l=>{const f=l.target.files[0];if(f)try{const d=await Ke.restore(f);c(Et(d)),Te("success")}catch(d){o(Tt({message:d.message})),Te("error")}},w=Xt.create();return[a,m,u,i,w]}class gs extends fe{constructor(e){super(),de(this,e,ss,ts,pe,{})}}export{gs as component};
